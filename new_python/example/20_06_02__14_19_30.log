<!-- logged with runtime paparazzi_version v5.15_devel-232-gea25c49d7-dirty -->
<!-- logged with build paparazzi_version v5.15_devel-222-ge5825a29f-dirty -->
<configuration time_of_day="1591100370.43" data_file="20_06_02__14_19_30.data">
  <conf>
    <aircraft name="ARDrone2_OF_Hover" ac_id="44" airframe="airframes/tudelft/ardrone2_OF_hover.xml" radio="radios/dummy.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/rotorcraft_optitrack.xml" settings="settings/rotorcraft_basic.xml settings/control/rotorcraft_guidance.xml settings/control/stabilization_indi.xml" settings_modules="modules/optical_flow_hover.xml [modules/cv_opticflow.xml] modules/ahrs_int_cmpl_quat.xml modules/stabilization_indi_simple.xml modules/nav_basic_rotorcraft.xml modules/guidance_rotorcraft.xml modules/gps.xml modules/imu_common.xml" gui_color="red" release="ac5eaa8da36b999a135f979e598930a9d40f6401">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitMM" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1120" MIN="1120" MAX="2000" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="0.3" name="Rotorcraft Optitrack (Delft)" max_dist_from_home="20" lon0="4.376789" lat0="51.990634" ground_alt="0" alt="1.5">
          <header>#include &quot;autopilot.h&quot;</header>
          <waypoints>
            <waypoint y="0.0" x="0.0" name="HOME"/>
            <waypoint y="-0.6" x="1.2" name="CLIMB"/>
            <waypoint y="2.0" x="2.0" name="GOAL"/>
            <waypoint y="-0.8" x="-0.7" name="STDBY"/>
            <waypoint y="-1.7" x="0.8" name="TD"/>
            <waypoint name="p1" lon="4.376823" lat="51.990630" x="2.34" y="-0.40"/>
            <waypoint name="p2" lon="4.376779" lat="51.990614" x="-0.64" y="-2.24"/>
            <waypoint name="p3" lon="4.376759" lat="51.990636" x="-2.06" y="0.18"/>
            <waypoint name="p4" lon="4.376805" lat="51.990651" x="1.06" y="1.91"/>
            <waypoint name="FA1" lon="4.3768628" lat="51.9906213" x="5.09" y="-1.32"/>
            <waypoint name="FA2" lon="4.3767766" lat="51.9905874" x="-0.75" y="-5.20"/>
            <waypoint name="FA3" lon="4.3767226" lat="51.9906409" x="-4.57" y="0.68"/>
            <waypoint name="FA4" lon="4.3768074" lat="51.9906737" x="1.18" y="4.44"/>
          </waypoints>
          <sectors>
            <sector name="Flight_Area" color="red">
              <corner name="FA4"/>
              <corner name="FA3"/>
              <corner name="FA2"/>
              <corner name="FA1"/>
            </sector>
          </sectors>
          <blocks>
            <block name="Wait GPS" no="0">
              <call_once fun="NavKillThrottle()" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Holding point" no="1">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="Start Engine" no="2">
              <call_once fun="NavResurrect()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff" name="Takeoff" no="3">
              <exception deroute="Standby" cond="stateGetPositionEnu_f()->z > 1.0"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="4">
              <stay wp="STDBY" no="0"/>
            </block>
            <block strip_icon="lookfore.png" strip_button="Go" name="START" no="5">
              <call_once fun="NavSetWaypointHere(WP_GOAL)" no="0"/>
            </block>
            <block name="StayGoal" no="6">
              <stay wp="GOAL" no="0"/>
            </block>
            <block name="stay_p1" no="7">
              <stay wp="p1" no="0"/>
            </block>
            <block name="go_p2" no="8">
              <call_once fun="nav_set_heading_deg(90)" no="0"/>
              <go wp="p2" no="1"/>
              <deroute block="stay_p1" no="2"/>
            </block>
            <block name="line_p1_p2" no="9">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <stay wp="p2" until="stage_time>10" no="1"/>
              <go wp="p1" hmode="route" from="p2" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="route" no="10">
              <go wp="p3" hmode="route" from="p1" no="0"/>
              <go wp="p4" hmode="route" from="p3" no="1"/>
              <go wp="p1" hmode="route" from="p4" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="Oval" no="11">
              <oval radius="-1" p2="p2" p1="p1" no="1"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land Here" name="land here" no="12">
              <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
            </block>
            <block name="land" no="13">
              <go wp="TD" no="0"/>
            </block>
            <block name="flare" no="14">
              <exception deroute="Holding point" cond="NavDetectGround()"/>
              <exception deroute="landed" cond="!nav_is_in_flight()"/>
              <call_once fun="NavStartDetectGround()" no="0"/>
              <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
            </block>
            <block name="landed" no="15">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="HOME" no="16">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="16" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="15" block_name="landed" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="15" block_name="landed" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="14" block_name="flare" stage="1">
            <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
          </stage>
          <stage block="14" block_name="flare" stage="0">
            <call_once fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="13" block_name="land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="12" block_name="land here" stage="0">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="11" block_name="Oval" stage="1">
            <oval radius="-1" p2="p2" p1="p1" no="1"/>
          </stage>
          <stage block="10" block_name="route" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="10" block_name="route" stage="2">
            <go wp="p1" hmode="route" from="p4" no="2"/>
          </stage>
          <stage block="10" block_name="route" stage="1">
            <go wp="p4" hmode="route" from="p3" no="1"/>
          </stage>
          <stage block="10" block_name="route" stage="0">
            <go wp="p3" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="9" block_name="line_p1_p2" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="9" block_name="line_p1_p2" stage="2">
            <go wp="p1" hmode="route" from="p2" no="2"/>
          </stage>
          <stage block="9" block_name="line_p1_p2" stage="1">
            <stay wp="p2" until="stage_time>10" no="1"/>
          </stage>
          <stage block="9" block_name="line_p1_p2" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="8" block_name="go_p2" stage="2">
            <deroute block="stay_p1" no="2"/>
          </stage>
          <stage block="8" block_name="go_p2" stage="1">
            <go wp="p2" no="1"/>
          </stage>
          <stage block="8" block_name="go_p2" stage="0">
            <call_once fun="nav_set_heading_deg(90)" no="0"/>
          </stage>
          <stage block="7" block_name="stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="6" block_name="StayGoal" stage="0">
            <stay wp="GOAL" no="0"/>
          </stage>
          <stage block="5" block_name="START" stage="0">
            <call_once fun="NavSetWaypointHere(WP_GOAL)" no="0"/>
          </stage>
          <stage block="4" block_name="Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="3" block_name="Takeoff" stage="1">
            <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
          </stage>
          <stage block="3" block_name="Takeoff" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="2" block_name="Start Engine" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="2" block_name="Start Engine" stage="0">
            <call_once fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="1" block_name="Holding point" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="1" block_name="Holding point" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="OpticalFlowHover">
              <dl_settings NAME="General">
                <dl_setting VAR="cov_method" VALUES="input|past" STEP="1" SHORTNAME="COV_METHOD" PARAM="OFH_COV_METHOD" MODULE="ctrl/optical_flow_hover" MIN="0" MAX="1"/>
                <dl_setting VAR="hover_method" VALUES="Sub|Same|Smart" STEP="1" SHORTNAME="HOVER_METHOD" PARAM="OFH_HOVER_METHOD" MODULE="ctrl/optical_flow_hover" MIN="0" MAX="2"/>
              </dl_settings>
              <dl_settings NAME="Vertical">
                <dl_setting VAR="of_hover_ctrl_Z.cov_setpoint" STEP="0.00001" SHORTNAME="covDiv_set_point" PARAM="OFH_COVDIV_SETPOINT" MODULE="ctrl/optical_flow_hover" MIN="-5.05" MAX="0"/>
                <dl_setting VAR="of_hover_ctrl_Z.ramp" STEP="0.005" SHORTNAME="rampZ" PARAM="OFH_RAMPZ" MODULE="ctrl/optical_flow_hover" MIN="0" MAX="1"/>
                <dl_setting VAR="of_hover_ctrl_Z.reduction_factor" STEP="0.01" SHORTNAME="reduction_factorZ" PARAM="OFH_REDUCTIONZ" MODULE="ctrl/optical_flow_hover" MIN="0.1" MAX="1"/>
                <dl_setting VAR="of_hover_ctrl_Z.PID.P" STEP="0.01" SHORTNAME="pgainZ" MODULE="ctrl/optical_flow_hover" MIN="0" MAX="1"/>
                <dl_setting VAR="of_hover_ctrl_Z.PID.I" STEP="0.001" SHORTNAME="igainZ" PARAM="OFH_IGAINZ" MODULE="ctrl/optical_flow_hover" MIN="0" MAX="0.1"/>
                <dl_setting VAR="of_hover_ctrl_Z.PID.D" STEP="0.01" SHORTNAME="dgainZ" PARAM="OFH_DGAINZ" MODULE="ctrl/optical_flow_hover" MIN="0" MAX="1"/>
              </dl_settings>
              <dl_settings NAME="Horizontal">
                <dl_setting VAR="of_hover_ctrl_X.cov_setpoint" STEP="100" SHORTNAME="covFlow_set_pointX" PARAM="OFH_COVDIV_SETPOINT" MODULE="ctrl/optical_flow_hover" MIN="-100000" MAX="10000"/>
                <dl_setting VAR="of_hover_ctrl_Y.cov_setpoint" STEP="100" SHORTNAME="covFlow_set_pointY" PARAM="OFH_COVDIV_SETPOINT" MODULE="ctrl/optical_flow_hover" MIN="-100000" MAX="10000"/>
                <dl_setting VAR="of_hover_ctrl_X.ramp" STEP="0.0001" SHORTNAME="rampX" PARAM="OFH_RAMPXY" MODULE="ctrl/optical_flow_hover" MIN="0" MAX="0.05"/>
                <dl_setting VAR="of_hover_ctrl_Y.ramp" STEP="0.0001" SHORTNAME="rampY" PARAM="OFH_RAMPXY" MODULE="ctrl/optical_flow_hover" MIN="0" MAX="0.05"/>
                <dl_setting VAR="of_hover_ctrl_X.reduction_factor" STEP="0.01" SHORTNAME="reduction_factorX" PARAM="OFH_REDUCTIONXY" MODULE="ctrl/optical_flow_hover" MIN="0.1" MAX="1"/>
                <dl_setting VAR="of_hover_ctrl_Y.reduction_factor" STEP="0.01" SHORTNAME="reduction_factorY" PARAM="OFH_REDUCTIONXY" MODULE="ctrl/optical_flow_hover" MIN="0.1" MAX="1"/>
                <dl_setting VAR="of_hover_ctrl_X.PID.P" STEP="0.00001" SHORTNAME="pgainX" MODULE="ctrl/optical_flow_hover" MIN="0" MAX="0.01"/>
                <dl_setting VAR="of_hover_ctrl_X.PID.I" STEP="0.00001" SHORTNAME="IgainX" PARAM="OFH_IGAINX" MODULE="ctrl/optical_flow_hover" MIN="0" MAX="0.001"/>
                <dl_setting VAR="of_hover_ctrl_X.PID.D" STEP="0.00001" SHORTNAME="DgainX" PARAM="OFH_DGAINX" MODULE="ctrl/optical_flow_hover" MIN="0" MAX="0.001"/>
                <dl_setting VAR="of_hover_ctrl_Y.PID.P" STEP="0.00001" SHORTNAME="pgainY" MODULE="ctrl/optical_flow_hover" MIN="0" MAX="0.01"/>
                <dl_setting VAR="of_hover_ctrl_Y.PID.I" STEP="0.00001" SHORTNAME="IgainY" PARAM="OFH_IGAINY" MODULE="ctrl/optical_flow_hover" MIN="0" MAX="0.001"/>
                <dl_setting VAR="of_hover_ctrl_Y.PID.D" STEP="0.00001" SHORTNAME="DgainY" PARAM="OFH_DGAINY" MODULE="ctrl/optical_flow_hover" MIN="0" MAX="0.001"/>
                <dl_setting VAR="oscphi" VALUES="No|OSC" STEP="1" SHORTNAME="oscphi" MODULE="ctrl/optical_flow_hover" MIN="0" MAX="1"/>
                <dl_setting VAR="osctheta" VALUES="No|OSC" STEP="1" SHORTNAME="osctheta" MODULE="ctrl/optical_flow_hover" MIN="0" MAX="1"/>
                <dl_setting VAR="derotated" VALUES="Reg|Der" STEP="1" SHORTNAME="derotated" MODULE="ctrl/optical_flow_hover" MIN="0" MAX="1"/>
              </dl_settings>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
              <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
              <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
              <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
              <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="indi">
              <dl_setting VAR="indi.reference_acceleration.err_p" STEP="1" SHORTNAME="kp_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_P" MODULE="stabilization/stabilization_indi_simple" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_p" STEP="0.1" SHORTNAME="kd_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.p" STEP="0.001" SHORTNAME="ctl_eff_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_P" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.reference_acceleration.err_q" STEP="1" SHORTNAME="kp_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_Q" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_q" STEP="0.1" SHORTNAME="kd_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.q" STEP="0.001" SHORTNAME="ctl_eff_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_Q" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.reference_acceleration.err_r" STEP="1" SHORTNAME="kp_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_R" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_r" STEP="0.1" SHORTNAME="kd_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.r" STEP="0.001" SHORTNAME="ctl_eff_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_R" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.g2" STEP="0.01" SHORTNAME="g2" PERSISTENT="true" PARAM="STABILIZATION_INDI_G2_R" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.adaptive" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="use_adaptive" PERSISTENT="true" PARAM="STABILIZATION_INDI_USE_ADAPTIVE" MIN="0" MAX="1"/>
              <dl_setting VAR="indi.max_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_rate" PARAM="STABILIZATION_INDI_MAX_RATE" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
              <dl_setting VAR="indi.attitude_max_yaw_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_yaw_rate_attitude" PARAM="STABILIZATION_INDI_MAX_R" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="NAV">
              <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
              <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
              <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MIN="-50" MAX="50"/>
              <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MIN="0" MAX="10.0"/>
              <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MIN="-10.0" MAX="0.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Vert Loop">
              <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
              <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MIN="0.2" MAX="0.8"/>
              <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MIN="0" MAX="1"/>
              <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
            <dl_settings NAME="Horiz Loop">
              <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="true" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
              <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
              <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MIN="0" MAX="1"/>
              <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
              <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
              <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
              <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
              <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
              <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="ardrone2">
        <description>    This airframe uses the optical flow module that uses monocular vision height estimation to stabilize a quadrotor using only a downwards 
  	facing camera and an IMU. For additional documentation please visit the module xml file.
  	The settings in this airframe are calibrated for performance on an ARDrone2 specifically. 	</description>
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="ardrone2">
            <configure VALUE="FALSE" NAME="USE_BARO_BOARD"/>
          </target>
          <define VALUE="FALSE" NAME="USE_SONAR"/>
          <module TYPE="transparent_udp" NAME="telemetry"/>
          <module TYPE="datalink" NAME="radio_control"/>
          <module NAME="motor_mixing"/>
          <module TYPE="ardrone2" NAME="actuators"/>
          <module TYPE="ardrone2" NAME="imu"/>
          <module TYPE="datalink" NAME="gps"/>
          <module TYPE="indi_simple" NAME="stabilization"/>
          <module TYPE="int_cmpl_quat" NAME="ahrs">
            <configure VALUE="0" NAME="USE_MAGNETOMETER"/>
          </module>
          <module TYPE="gps_passthrough" NAME="ins"/>
          <module NAME="bat_voltage_ardrone2"/>
          <module NAME="video_thread"/>
          <module NAME="pose_history"/>
          <module NAME="cv_opticflow">
            <define VALUE="0" NAME="OPTICFLOW_METHOD"/>
            <define VALUE="bottom_camera" NAME="OPTICFLOW_CAMERA"/>
            <define VALUE="0" NAME="OPTICFLOW_PYRAMID_LEVEL"/>
            <define VALUE="1" NAME="OPTICFLOW_FEATURE_MANAGEMENT"/>
          </module>
          <module NAME="optical_flow_hover">
            <define VALUE="1" NAME="OFH_HOVER_METHOD"/>
            <define VALUE="10.f" NAME="OFH_MAXBANK"/>
            <define VALUE="1" NAME="XY_SYMMETRICAL"/>
            <define VALUE="1" NAME="OFH_OSCPHI"/>
            <define VALUE="0" NAME="OFH_OSCTHETA"/>
            <define VALUE="300" NAME="COV_WINDOW_SIZE"/>
            <define VALUE="0.6" NAME="OF_LP_CONST"/>
            <define VALUE="0.125" NAME="OFH_RAMPZ"/>
            <define VALUE="0.003" NAME="OFH_IGAINZ"/>
            <define VALUE="0.45" NAME="OFH_REDUCTIONZ"/>
            <define VALUE="-0.025" NAME="OFH_COVDIV_SETPOINT"/>
            <define VALUE="0.00005" NAME="OFH_IGAINX"/>
            <define VALUE="0.00005" NAME="OFH_IGAINY"/>
            <define VALUE="0.0004" NAME="OFH_RAMPXY"/>
            <define VALUE="0.3" NAME="OFH_REDUCTIONXY"/>
            <define VALUE="-2000.f" NAME="OFH_COVFLOW_SETPOINT"/>
            <define VALUE="0.5" NAME="OFH_VER_SLOPE_A"/>
            <define VALUE="0.25" NAME="OFH_VER_SLOPE_B"/>
            <define VALUE="0.006" NAME="OFH_HOR_X_SLOPE_A"/>
            <define VALUE="0.004" NAME="OFH_HOR_X_SLOPE_B"/>
          </module>
        </firmware>
        <commands>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="3000"/>
        </commands>
        <servos DRIVER="Default">
          <servo NO="0" NEUTRAL="1" NAME="TOP_LEFT" MIN="0" MAX="500"/>
          <servo NO="1" NEUTRAL="1" NAME="TOP_RIGHT" MIN="0" MAX="500"/>
          <servo NO="2" NEUTRAL="1" NAME="BOTTOM_RIGHT" MIN="0" MAX="500"/>
          <servo NO="3" NEUTRAL="1" NAME="BOTTOM_LEFT" MIN="0" MAX="500"/>
        </servos>
        <section PREFIX="MOTOR_MIXING_" NAME="MIXING">
          <define VALUE="0" NAME="TRIM_ROLL"/>
          <define VALUE="0" NAME="TRIM_PITCH"/>
          <define VALUE="0" NAME="TRIM_YAW"/>
          <define VALUE="QUAD_X" NAME="TYPE"/>
        </section>
        <command_laws>
          <call FUN="motor_mixing_run(autopilot_get_motors_on(),FALSE,values)"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_LEFT]" SERVO="TOP_LEFT"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_RIGHT]" SERVO="TOP_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_RIGHT]" SERVO="BOTTOM_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_LEFT]" SERVO="BOTTOM_LEFT"/>
        </command_laws>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="2048" NAME="ACCEL_X_NEUTRAL"/>
          <define VALUE="2048" NAME="ACCEL_Y_NEUTRAL"/>
          <define VALUE="2048" NAME="ACCEL_Z_NEUTRAL"/>
          <define VALUE="0" NAME="MAG_X_NEUTRAL"/>
          <define VALUE="0" NAME="MAG_Y_NEUTRAL"/>
          <define VALUE="-180" NAME="MAG_Z_NEUTRAL"/>
          <define VALUE="16." NAME="MAG_X_SENS" INTEGER="16"/>
          <define VALUE="16." NAME="MAG_Y_SENS" INTEGER="16"/>
          <define VALUE="16." NAME="MAG_Z_SENS" INTEGER="16"/>
          <define VALUE="0.0" NAME="MAG_X_CURRENT_COEF"/>
          <define VALUE="0.0" NAME="MAG_Y_CURRENT_COEF"/>
          <define VALUE="0.0" NAME="MAG_Z_CURRENT_COEF"/>
          <define VALUE="0.0" UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="3.0" UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="0.0" UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.3892503" NAME="H_X"/>
          <define VALUE="0.0017972" NAME="H_Y"/>
          <define VALUE="0.9211303" NAME="H_Z"/>
          <define VALUE="1" NAME="USE_GPS_HEADING"/>
          <define VALUE="0" NAME="HEADING_UPDATE_GPS_MIN_SPEED"/>
        </section>
        <section PREFIX="INS_" NAME="INS">
          <define VALUE="1" NAME="USE_GPS_ALT"/>
          <define VALUE="0.01" NAME="VFF_R_GPS"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="STABILIZATION_ATTITUDE">
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="600" UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="0" NAME="DEADBAND_A"/>
          <define VALUE="0" NAME="DEADBAND_E"/>
          <define VALUE="250" NAME="DEADBAND_R"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.9" NAME="REF_ZETA_P"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.9" NAME="REF_ZETA_Q"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.9" NAME="REF_ZETA_R"/>
          <define VALUE="300." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(4000.)" NAME="REF_MAX_RDOT"/>
        </section>
        <section PREFIX="STABILIZATION_INDI_" NAME="STABILIZATION_ATTITUDE_INDI">
          <define VALUE="0.028551973" NAME="G1_P"/>
          <define VALUE="0.023775417" NAME="G1_Q"/>
          <define VALUE="0.00173069" NAME="G1_R"/>
          <define VALUE="0.086460732" NAME="G2_R"/>
          <define VALUE="380.0" NAME="REF_ERR_P"/>
          <define VALUE="380.0" NAME="REF_ERR_Q"/>
          <define VALUE="70.0" NAME="REF_ERR_R"/>
          <define VALUE="21.6" NAME="REF_RATE_P"/>
          <define VALUE="21.6" NAME="REF_RATE_Q"/>
          <define VALUE="11.0" NAME="REF_RATE_R"/>
          <define VALUE="3.2" NAME="FILT_CUTOFF"/>
          <define VALUE="3.2" NAME="FILT_CUTOFF_R"/>
          <define VALUE="0.06" NAME="ACT_DYN_P"/>
          <define VALUE="0.06" NAME="ACT_DYN_Q"/>
          <define VALUE="0.06" NAME="ACT_DYN_R"/>
          <define VALUE="FALSE" NAME="USE_ADAPTIVE"/>
          <define VALUE="0.0002" NAME="ADAPTIVE_MU"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="600" NAME="HOVER_KP"/>
          <define VALUE="400" NAME="HOVER_KD"/>
          <define VALUE="13" NAME="HOVER_KI"/>
          <define VALUE="0.61" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="FALSE" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="22" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="363" NAME="PGAIN"/>
          <define VALUE="237" NAME="DGAIN"/>
          <define VALUE="30" NAME="IGAIN"/>
        </section>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_STARTUP"/>
          <define VALUE="AP_MODE_MODULE" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_NAV" NAME="MODE_AUTO2"/>
          <define VALUE="TRUE" NAME="NO_RC_THRUST_LIMIT"/>
        </section>
        <section NAME="BAT">
          <define VALUE="8700" NAME="MILLIAMP_AT_FULL_THROTTLE"/>
          <define VALUE="9.6" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="9.9" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="10.2" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="12.4" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.05" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
            <message PERIOD="0.05" NAME="OPTICAL_FLOW_HOVER"/>
            <message PERIOD="0.10" NAME="VISUALTARGET"/>
            <message PERIOD="0.1" NAME="VISION_POSITION_ESTIMATE"/>
            <message PERIOD="0.05" NAME="DIVERGENCE"/>
            <message PERIOD="0.02" NAME="DRAGSPEED"/>
            <message PERIOD="5.1" NAME="LOGGER_STATUS"/>
            <message PERIOD="1.2" NAME="LIDAR"/>
            <message PERIOD=".25" NAME="INS_EKF2"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="BEBOP_ACTUATORS"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_FLOAT"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
            <message PERIOD="2.0" NAME="INDI_G"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="vel_guidance" KEY_PRESS="q">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HYBRID_GUIDANCE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1.0" NAME="GPS_INT"/>
            <message PERIOD="1.0" NAME="INS"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="RTCM3">
            <message PERIOD="1" NAME="GPS_RXMRTCM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD="1" NAME="GPS_RTK"/>
          </mode>
        </process>
        <process NAME="FlightRecorder">
          <mode NAME="default">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD=".1" NAME="GPS_INT"/>
            <message PERIOD=".1" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".2" NAME="IMU_MAG_SCALED"/>
            <message PERIOD="0.05" NAME="LIDAR"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="19"/>
            <dl_setting VAR="autopilot.kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot.power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot.mode" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="19" HANDLER="SetModeHandler"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Vert Loop">
            <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
            <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
            <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
            <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MODULE="guidance/guidance_v" MIN="0.2" MAX="0.8"/>
            <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MODULE="guidance/guidance_v" MIN="0" MAX="1"/>
            <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MODULE="guidance/guidance_v" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
          </dl_settings>
          <dl_settings NAME="Horiz Loop">
            <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="true" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
            <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
            <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MODULE="guidance/guidance_h" MIN="0" MAX="1"/>
            <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
            <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
            <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
            <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
            <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MODULE="guidance/guidance_h" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MODULE="guidance/guidance_h" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
          </dl_settings>
          <dl_settings NAME="NAV">
            <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
            <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MODULE="navigation" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
            <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MODULE="navigation" MIN="-50" MAX="50"/>
            <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MODULE="navigation" MIN="0" MAX="10.0"/>
            <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MODULE="navigation" MIN="-10.0" MAX="0.0"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings>
        <dl_settings>
          <dl_settings NAME="indi">
            <dl_setting VAR="indi.reference_acceleration.err_p" STEP="1" SHORTNAME="kp_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_P" MODULE="stabilization/stabilization_indi_simple" MIN="0" MAX="2500"/>
            <dl_setting VAR="indi.reference_acceleration.rate_p" STEP="0.1" SHORTNAME="kd_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MODULE="stabilization/stabilization_indi_simple" MIN="0" MAX="100"/>
            <dl_setting VAR="indi.g1.p" STEP="0.001" SHORTNAME="ctl_eff_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_P" MODULE="stabilization/stabilization_indi_simple" MIN="0" MAX="10"/>
            <dl_setting VAR="indi.reference_acceleration.err_q" STEP="1" SHORTNAME="kp_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_Q" MODULE="stabilization/stabilization_indi_simple" MIN="0" MAX="2500"/>
            <dl_setting VAR="indi.reference_acceleration.rate_q" STEP="0.1" SHORTNAME="kd_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MODULE="stabilization/stabilization_indi_simple" MIN="0" MAX="100"/>
            <dl_setting VAR="indi.g1.q" STEP="0.001" SHORTNAME="ctl_eff_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_Q" MODULE="stabilization/stabilization_indi_simple" MIN="0" MAX="10"/>
            <dl_setting VAR="indi.reference_acceleration.err_r" STEP="1" SHORTNAME="kp_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_R" MODULE="stabilization/stabilization_indi_simple" MIN="0" MAX="2500"/>
            <dl_setting VAR="indi.reference_acceleration.rate_r" STEP="0.1" SHORTNAME="kd_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MODULE="stabilization/stabilization_indi_simple" MIN="0" MAX="100"/>
            <dl_setting VAR="indi.g1.r" STEP="0.001" SHORTNAME="ctl_eff_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_R" MODULE="stabilization/stabilization_indi_simple" MIN="0" MAX="10"/>
            <dl_setting VAR="indi.g2" STEP="0.01" SHORTNAME="g2" PERSISTENT="true" PARAM="STABILIZATION_INDI_G2_R" MODULE="stabilization/stabilization_indi_simple" MIN="0" MAX="10"/>
            <dl_setting VAR="indi.adaptive" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="use_adaptive" PERSISTENT="true" PARAM="STABILIZATION_INDI_USE_ADAPTIVE" MODULE="stabilization/stabilization_indi_simple" MIN="0" MAX="1"/>
            <dl_setting VAR="indi.max_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_rate" PARAM="STABILIZATION_INDI_MAX_RATE" MODULE="stabilization/stabilization_indi_simple" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
            <dl_setting VAR="indi.attitude_max_yaw_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_yaw_rate_attitude" PARAM="STABILIZATION_INDI_MAX_R" MODULE="stabilization/stabilization_indi_simple" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="ARDrone2_default" ac_id="10" airframe="airframes/examples/ardrone2.xml" radio="radios/dummy.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/rotorcraft_basic.xml" settings="settings/rotorcraft_basic.xml" settings_modules="modules/video_rtp_stream.xml modules/geo_mag.xml modules/air_data.xml modules/gps_ubx_ucenter.xml modules/ins_extended.xml modules/ahrs_int_cmpl_quat.xml modules/stabilization_int_quat.xml modules/nav_basic_rotorcraft.xml modules/guidance_rotorcraft.xml modules/gps.xml modules/imu_common.xml" gui_color="#ffffd633d633">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitMM" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1120" MIN="1120" MAX="2000" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="2" name="Rotorcraft Basic (Enac)" max_dist_from_home="150" lon0="1 28 52.61" lat0="43 33 50.83" ground_alt="147" alt="152">
          <header>#include &quot;autopilot.h&quot;</header>
          <waypoints>
            <waypoint y="0.0" x="0.0" name="HOME"/>
            <waypoint y="5.0" x="0.0" name="CLIMB"/>
            <waypoint y="-5.0" x="-2.0" name="STDBY"/>
            <waypoint y="-13.9" x="3.6" name="p1"/>
            <waypoint y="-48.2" x="27.5" name="p2"/>
            <waypoint y="-19.6" x="16.7" name="p3"/>
            <waypoint y="-40.7" x="13.7" name="p4"/>
            <waypoint y="-50" x="-20" name="CAM" height="2."/>
            <waypoint y="-10.9" x="5.6" name="TD"/>
          </waypoints>
          <blocks>
            <block name="Wait GPS" no="0">
              <call_once fun="NavKillThrottle()" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Geo init" no="1">
              <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
              <call_once fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Holding point" no="2">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="Start Engine" no="3">
              <call_once fun="NavResurrect()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff" name="Takeoff" no="4">
              <exception deroute="Standby" cond="stateGetPositionEnu_f() @DEREF z @GT 2.0"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="5">
              <stay wp="STDBY" no="0"/>
            </block>
            <block name="stay_p1" no="6">
              <stay wp="p1" no="0"/>
            </block>
            <block name="go_p2" no="7">
              <call_once fun="nav_set_heading_deg(90)" no="0"/>
              <go wp="p2" no="1"/>
              <deroute block="stay_p1" no="2"/>
            </block>
            <block name="line_p1_p2" no="8">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <stay wp="p2" until="stage_time>10" no="1"/>
              <go wp="p1" hmode="route" from="p2" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="route" no="9">
              <go wp="p3" hmode="route" from="p1" no="0"/>
              <go wp="p4" hmode="route" from="p3" no="1"/>
              <go wp="p1" hmode="route" from="p4" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="Oval" no="10">
              <oval radius="-1" p2="p2" p1="p1" no="1"/>
            </block>
            <block name="test yaw" no="11">
              <go wp="p1" no="0"/>
              <for var="i" to="16" from="1" no="2">
                <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
              </for>
              <deroute block="Standby" no="5"/>
            </block>
            <block pre_call="nav_set_heading_towards_waypoint(WP_CAM)" name="circle CAM" no="12">
              <circle wp="CAM" radius="nav_radius" no="0"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land Here" name="land here" no="13">
              <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
            </block>
            <block name="land" no="14">
              <go wp="TD" no="0"/>
            </block>
            <block name="flare" no="15">
              <exception deroute="Holding point" cond="NavDetectGround()"/>
              <exception deroute="landed" cond="!nav_is_in_flight()"/>
              <call_once fun="NavStartDetectGround()" no="0"/>
              <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
            </block>
            <block name="landed" no="16">
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
            </block>
            <block name="HOME" no="17">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="17" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="16" block_name="landed" stage="0">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
          </stage>
          <stage block="15" block_name="flare" stage="1">
            <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
          </stage>
          <stage block="15" block_name="flare" stage="0">
            <call_once fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="14" block_name="land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="13" block_name="land here" stage="0">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="12" block_name="circle CAM" stage="0">
            <circle wp="CAM" radius="nav_radius" no="0"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="5">
            <deroute block="Standby" no="5"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="3">
            <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="2">
            <for var="i" to="16" from="1" no="2">
              <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
            </for>
          </stage>
          <stage block="11" block_name="test yaw" stage="0">
            <go wp="p1" no="0"/>
          </stage>
          <stage block="10" block_name="Oval" stage="1">
            <oval radius="-1" p2="p2" p1="p1" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="9" block_name="route" stage="2">
            <go wp="p1" hmode="route" from="p4" no="2"/>
          </stage>
          <stage block="9" block_name="route" stage="1">
            <go wp="p4" hmode="route" from="p3" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="0">
            <go wp="p3" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="2">
            <go wp="p1" hmode="route" from="p2" no="2"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="1">
            <stay wp="p2" until="stage_time>10" no="1"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="2">
            <deroute block="stay_p1" no="2"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="1">
            <go wp="p2" no="1"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="0">
            <call_once fun="nav_set_heading_deg(90)" no="0"/>
          </stage>
          <stage block="6" block_name="stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="5" block_name="Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="1">
            <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="0">
            <call_once fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="2">
            <call_once fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="0">
            <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="video">
              <dl_setting VAR="viewvideo.use_rtp" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="rtp" PARAM="VIEWVIDEO_USE_RTP" MODULE="computer_vision/viewvideo" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="geo_mag">
              <dl_setting VAR="geo_mag.calc_once" VALUES="OFF|CALC" STEP="1" SHORTNAME="calcNow" MODULE="geo_mag/geo_mag" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="air_data">
              <dl_setting VAR="air_data.qnh" STEP="1" SHORTNAME="QNH" MODULE="air_data/air_data" MIN="800" MAX="1200"/>
              <dl_setting VAR="air_data.tas_factor" TYPE="float" STEP="0.01" SHORTNAME="TASfactor" PERSISTENT="true" PARAM="AIR_DATA_TAS_FACTOR" MODULE="air_data/air_data" MIN="0.8" MAX="1.3"/>
              <dl_setting VAR="air_data.calc_qnh_once" STEP="1" SHORTNAME="calcQNH" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_airspeed" TYPE="uint8" STEP="1" SHORTNAME="calcAirspeed" PERSISTENT="true" PARAM="AIR_DATA_CALC_AIRSPEED" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_tas_factor" TYPE="uint8" STEP="1" SHORTNAME="calcTASfactor" PERSISTENT="true" PARAM="AIR_DATA_CALC_TAS_FACTOR" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_amsl_baro" TYPE="uint8" STEP="1" SHORTNAME="calcAMSL" PERSISTENT="true" PARAM="AIR_DATA_CALC_AMSL_BARO" MODULE="air_data/air_data" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="ublox">
            <dl_settings NAME="ucenter">
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_h" STEP="1" SHORTNAME="sw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_l" STEP="1" SHORTNAME="sw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_h" STEP="1" SHORTNAME="hw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_l" STEP="1" SHORTNAME="hw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_init" STEP="100" SHORTNAME="inibaud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_run" STEP="100" SHORTNAME="baud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="Ins Extended">
            <dl_settings NAME="INS">
              <dl_setting VAR="vff.accel_noise" STEP="0.1" SHORTNAME="accel_noise" MODULE="subsystems/ins/vf_extended_float" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_baro" STEP="0.1" SHORTNAME="r_baro" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_alt" STEP="0.1" SHORTNAME="r_alt" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_obs_height" STEP="0.1" SHORTNAME="r_obs_height" MIN="0" MAX="10"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
              <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
              <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
              <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
              <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Att Loop">
              <dl_setting VAR="stabilization_gains.p.x" TYPE="int32" STEP="1" SHORTNAME="pgain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_PGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="8000"/>
              <dl_setting VAR="stabilization_gains.d.x" TYPE="int32" STEP="1" SHORTNAME="dgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.x" TYPE="int32" STEP="1" SHORTNAME="igain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_IGAIN" MIN="0" MAX="800"/>
              <dl_setting VAR="stabilization_gains.dd.x" TYPE="int32" STEP="1" SHORTNAME="ddgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="stabilization_gains.p.y" TYPE="int32" STEP="1" SHORTNAME="pgain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_PGAIN" MIN="1" MAX="8000"/>
              <dl_setting VAR="stabilization_gains.d.y" TYPE="int32" STEP="1" SHORTNAME="dgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.y" TYPE="int32" STEP="1" SHORTNAME="igain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_IGAIN" MIN="0" MAX="800"/>
              <dl_setting VAR="stabilization_gains.dd.y" TYPE="int32" STEP="1" SHORTNAME="ddgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="stabilization_gains.p.z" TYPE="int32" STEP="1" SHORTNAME="pgain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_PGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.d.z" TYPE="int32" STEP="1" SHORTNAME="dgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.z" TYPE="int32" STEP="1" SHORTNAME="igain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_IGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="stabilization_gains.dd.z" TYPE="int32" STEP="1" SHORTNAME="ddgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.p" UNIT="rad/s" STEP="1" SHORTNAME="omega p" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_P" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaP" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.p" STEP="0.05" SHORTNAME="zeta p" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_P" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaP"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.q" UNIT="rad/s" STEP="1" SHORTNAME="omega q" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_Q" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaQ" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.q" STEP="0.05" SHORTNAME="zeta q" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_Q" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaQ"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.r" UNIT="rad/s" STEP="1" SHORTNAME="omega r" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_R" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaR" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.r" STEP="0.05" SHORTNAME="zeta r" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_R" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaR"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="NAV">
              <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
              <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
              <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MIN="-50" MAX="50"/>
              <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MIN="0" MAX="10.0"/>
              <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MIN="-10.0" MAX="0.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Vert Loop">
              <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
              <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MIN="0.2" MAX="0.8"/>
              <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MIN="0" MAX="1"/>
              <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
            <dl_settings NAME="Horiz Loop">
              <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="true" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
              <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
              <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MIN="0" MAX="1"/>
              <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
              <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
              <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
              <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
              <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
              <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="ardrone2">
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="ardrone2"/>
          <target NAME="nps" BOARD="pc">
            <module TYPE="jsbsim" NAME="fdm"/>
          </target>
          <define VALUE="TRUE" NAME="USE_SONAR"/>
          <module TYPE="transparent_udp" NAME="telemetry"/>
          <module TYPE="datalink" NAME="radio_control"/>
          <module NAME="motor_mixing"/>
          <module TYPE="ardrone2" NAME="actuators"/>
          <module TYPE="ardrone2" NAME="imu"/>
          <module TYPE="ublox" NAME="gps"/>
          <module TYPE="int_quat" NAME="stabilization"/>
          <module TYPE="int_cmpl_quat" NAME="ahrs"/>
          <module TYPE="extended" NAME="ins"/>
        </firmware>
        <modules MAIN_FREQ="512">
          <module NAME="bat_voltage_ardrone2"/>
          <module TYPE="ubx_ucenter" NAME="gps"/>
          <module NAME="send_imu_mag_current"/>
          <module NAME="air_data"/>
          <module NAME="geo_mag"/>
          <module NAME="video_thread"/>
          <module NAME="video_rtp_stream">
            <define VALUE="front_camera" NAME="VIEWVIDEO_CAMERA"/>
            <define VALUE="4" NAME="VIEWVIDEO_DOWNSIZE_FACTOR"/>
            <define VALUE="60" NAME="VIEWVIDEO_QUALITY_FACTOR"/>
          </module>
        </modules>
        <commands>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="3000"/>
        </commands>
        <servos DRIVER="Default">
          <servo NO="0" NEUTRAL="1" NAME="TOP_LEFT" MIN="0" MAX="500"/>
          <servo NO="1" NEUTRAL="1" NAME="TOP_RIGHT" MIN="0" MAX="500"/>
          <servo NO="2" NEUTRAL="1" NAME="BOTTOM_RIGHT" MIN="0" MAX="500"/>
          <servo NO="3" NEUTRAL="1" NAME="BOTTOM_LEFT" MIN="0" MAX="500"/>
        </servos>
        <section PREFIX="MOTOR_MIXING_" NAME="MIXING">
          <define VALUE="0" NAME="TRIM_ROLL"/>
          <define VALUE="0" NAME="TRIM_PITCH"/>
          <define VALUE="0" NAME="TRIM_YAW"/>
          <define VALUE="QUAD_X" NAME="TYPE"/>
        </section>
        <command_laws>
          <call FUN="motor_mixing_run(autopilot_get_motors_on(),FALSE,values)"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_LEFT]" SERVO="TOP_LEFT"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_RIGHT]" SERVO="TOP_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_RIGHT]" SERVO="BOTTOM_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_LEFT]" SERVO="BOTTOM_LEFT"/>
        </command_laws>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="2048" NAME="ACCEL_X_NEUTRAL"/>
          <define VALUE="2048" NAME="ACCEL_Y_NEUTRAL"/>
          <define VALUE="2048" NAME="ACCEL_Z_NEUTRAL"/>
          <define VALUE="0" NAME="MAG_X_NEUTRAL"/>
          <define VALUE="0" NAME="MAG_Y_NEUTRAL"/>
          <define VALUE="-180" NAME="MAG_Z_NEUTRAL"/>
          <define VALUE="16." NAME="MAG_X_SENS" INTEGER="16"/>
          <define VALUE="16." NAME="MAG_Y_SENS" INTEGER="16"/>
          <define VALUE="16." NAME="MAG_Z_SENS" INTEGER="16"/>
          <define VALUE="0.0" NAME="MAG_X_CURRENT_COEF"/>
          <define VALUE="0.0" NAME="MAG_Y_CURRENT_COEF"/>
          <define VALUE="0.0" NAME="MAG_Z_CURRENT_COEF"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.513081" NAME="H_X"/>
          <define VALUE="-0.00242783" NAME="H_Y"/>
          <define VALUE="0.858336" NAME="H_Z"/>
        </section>
        <section PREFIX="INS_" NAME="INS">
          <define VALUE="2.2" NAME="SONAR_MAX_RANGE"/>
          <define VALUE="TRUE" NAME="SONAR_UPDATE_ON_AGL"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="STABILIZATION_ATTITUDE">
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="600" UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="0" NAME="DEADBAND_A"/>
          <define VALUE="0" NAME="DEADBAND_E"/>
          <define VALUE="250" NAME="DEADBAND_R"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.9" NAME="REF_ZETA_P"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.9" NAME="REF_ZETA_Q"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="200" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.9" NAME="REF_ZETA_R"/>
          <define VALUE="300." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(4000.)" NAME="REF_MAX_RDOT"/>
          <define VALUE="850" NAME="PHI_PGAIN"/>
          <define VALUE="425" NAME="PHI_DGAIN"/>
          <define VALUE="0" NAME="PHI_IGAIN"/>
          <define VALUE="850" NAME="THETA_PGAIN"/>
          <define VALUE="425" NAME="THETA_DGAIN"/>
          <define VALUE="0" NAME="THETA_IGAIN"/>
          <define VALUE="1000" NAME="PSI_PGAIN"/>
          <define VALUE="700" NAME="PSI_DGAIN"/>
          <define VALUE="0" NAME="PSI_IGAIN"/>
          <define VALUE="0" NAME="PHI_DDGAIN"/>
          <define VALUE="0" NAME="THETA_DDGAIN"/>
          <define VALUE="100" NAME="PSI_DDGAIN"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="283" NAME="HOVER_KP"/>
          <define VALUE="82" NAME="HOVER_KD"/>
          <define VALUE="13" NAME="HOVER_KI"/>
          <define VALUE="0.655" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="FALSE" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="20" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="79" NAME="PGAIN"/>
          <define VALUE="100" NAME="DGAIN"/>
          <define VALUE="30" NAME="IGAIN"/>
        </section>
        <section PREFIX="NPS_" NAME="SIMULATOR">
          <define VALUE="nw_motor, ne_motor, se_motor, sw_motor" TYPE="string[]" NAME="ACTUATOR_NAMES"/>
          <define VALUE="simple_ardrone2" TYPE="string" NAME="JSBSIM_MODEL"/>
          <define VALUE="nps_sensors_params_ardrone2.h" TYPE="string" NAME="SENSORS_PARAMS"/>
        </section>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_NAV" NAME="MODE_STARTUP"/>
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_ATTITUDE_Z_HOLD" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_NAV" NAME="MODE_AUTO2"/>
        </section>
        <section NAME="BAT">
          <define VALUE="8700" NAME="MILLIAMP_AT_FULL_THROTTLE"/>
          <define VALUE="9.3" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="9.6" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="9.7" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="12.4" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.05" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
            <message PERIOD="0.05" NAME="OPTICAL_FLOW_HOVER"/>
            <message PERIOD="0.10" NAME="VISUALTARGET"/>
            <message PERIOD="0.1" NAME="VISION_POSITION_ESTIMATE"/>
            <message PERIOD="0.05" NAME="DIVERGENCE"/>
            <message PERIOD="0.02" NAME="DRAGSPEED"/>
            <message PERIOD="5.1" NAME="LOGGER_STATUS"/>
            <message PERIOD="1.2" NAME="LIDAR"/>
            <message PERIOD=".25" NAME="INS_EKF2"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="BEBOP_ACTUATORS"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_FLOAT"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
            <message PERIOD="2.0" NAME="INDI_G"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="vel_guidance" KEY_PRESS="q">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HYBRID_GUIDANCE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1.0" NAME="GPS_INT"/>
            <message PERIOD="1.0" NAME="INS"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="RTCM3">
            <message PERIOD="1" NAME="GPS_RXMRTCM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD="1" NAME="GPS_RTK"/>
          </mode>
        </process>
        <process NAME="FlightRecorder">
          <mode NAME="default">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD=".1" NAME="GPS_INT"/>
            <message PERIOD=".1" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".2" NAME="IMU_MAG_SCALED"/>
            <message PERIOD="0.05" NAME="LIDAR"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="19"/>
            <dl_setting VAR="autopilot.kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot.power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot.mode" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="19" HANDLER="SetModeHandler"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="ARDrone2_indi" ac_id="13" airframe="airframes/tudelft/ardrone2_indi.xml" radio="radios/dummy.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/rotorcraft_basic.xml" settings="settings/rotorcraft_basic.xml" settings_modules="modules/air_data.xml modules/gps_ubx_ucenter.xml modules/ins_extended.xml modules/ahrs_int_cmpl_quat.xml modules/stabilization_indi_simple.xml modules/nav_basic_rotorcraft.xml modules/guidance_rotorcraft.xml modules/gps.xml modules/imu_common.xml" gui_color="#ffffc457c457">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitMM" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1120" MIN="1120" MAX="2000" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="2" name="Rotorcraft Basic (Enac)" max_dist_from_home="150" lon0="1 28 52.61" lat0="43 33 50.83" ground_alt="147" alt="152">
          <header>#include &quot;autopilot.h&quot;</header>
          <waypoints>
            <waypoint y="0.0" x="0.0" name="HOME"/>
            <waypoint y="5.0" x="0.0" name="CLIMB"/>
            <waypoint y="-5.0" x="-2.0" name="STDBY"/>
            <waypoint y="-13.9" x="3.6" name="p1"/>
            <waypoint y="-48.2" x="27.5" name="p2"/>
            <waypoint y="-19.6" x="16.7" name="p3"/>
            <waypoint y="-40.7" x="13.7" name="p4"/>
            <waypoint y="-50" x="-20" name="CAM" height="2."/>
            <waypoint y="-10.9" x="5.6" name="TD"/>
          </waypoints>
          <blocks>
            <block name="Wait GPS" no="0">
              <call_once fun="NavKillThrottle()" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Geo init" no="1">
              <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
              <call_once fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Holding point" no="2">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="Start Engine" no="3">
              <call_once fun="NavResurrect()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff" name="Takeoff" no="4">
              <exception deroute="Standby" cond="stateGetPositionEnu_f() @DEREF z @GT 2.0"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="5">
              <stay wp="STDBY" no="0"/>
            </block>
            <block name="stay_p1" no="6">
              <stay wp="p1" no="0"/>
            </block>
            <block name="go_p2" no="7">
              <call_once fun="nav_set_heading_deg(90)" no="0"/>
              <go wp="p2" no="1"/>
              <deroute block="stay_p1" no="2"/>
            </block>
            <block name="line_p1_p2" no="8">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <stay wp="p2" until="stage_time>10" no="1"/>
              <go wp="p1" hmode="route" from="p2" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="route" no="9">
              <go wp="p3" hmode="route" from="p1" no="0"/>
              <go wp="p4" hmode="route" from="p3" no="1"/>
              <go wp="p1" hmode="route" from="p4" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="Oval" no="10">
              <oval radius="-1" p2="p2" p1="p1" no="1"/>
            </block>
            <block name="test yaw" no="11">
              <go wp="p1" no="0"/>
              <for var="i" to="16" from="1" no="2">
                <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
              </for>
              <deroute block="Standby" no="5"/>
            </block>
            <block pre_call="nav_set_heading_towards_waypoint(WP_CAM)" name="circle CAM" no="12">
              <circle wp="CAM" radius="nav_radius" no="0"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land Here" name="land here" no="13">
              <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
            </block>
            <block name="land" no="14">
              <go wp="TD" no="0"/>
            </block>
            <block name="flare" no="15">
              <exception deroute="Holding point" cond="NavDetectGround()"/>
              <exception deroute="landed" cond="!nav_is_in_flight()"/>
              <call_once fun="NavStartDetectGround()" no="0"/>
              <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
            </block>
            <block name="landed" no="16">
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
            </block>
            <block name="HOME" no="17">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="17" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="16" block_name="landed" stage="0">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
          </stage>
          <stage block="15" block_name="flare" stage="1">
            <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
          </stage>
          <stage block="15" block_name="flare" stage="0">
            <call_once fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="14" block_name="land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="13" block_name="land here" stage="0">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="12" block_name="circle CAM" stage="0">
            <circle wp="CAM" radius="nav_radius" no="0"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="5">
            <deroute block="Standby" no="5"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="3">
            <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="2">
            <for var="i" to="16" from="1" no="2">
              <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
            </for>
          </stage>
          <stage block="11" block_name="test yaw" stage="0">
            <go wp="p1" no="0"/>
          </stage>
          <stage block="10" block_name="Oval" stage="1">
            <oval radius="-1" p2="p2" p1="p1" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="9" block_name="route" stage="2">
            <go wp="p1" hmode="route" from="p4" no="2"/>
          </stage>
          <stage block="9" block_name="route" stage="1">
            <go wp="p4" hmode="route" from="p3" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="0">
            <go wp="p3" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="2">
            <go wp="p1" hmode="route" from="p2" no="2"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="1">
            <stay wp="p2" until="stage_time>10" no="1"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="2">
            <deroute block="stay_p1" no="2"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="1">
            <go wp="p2" no="1"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="0">
            <call_once fun="nav_set_heading_deg(90)" no="0"/>
          </stage>
          <stage block="6" block_name="stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="5" block_name="Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="1">
            <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="0">
            <call_once fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="2">
            <call_once fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="0">
            <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="air_data">
              <dl_setting VAR="air_data.qnh" STEP="1" SHORTNAME="QNH" MODULE="air_data/air_data" MIN="800" MAX="1200"/>
              <dl_setting VAR="air_data.tas_factor" TYPE="float" STEP="0.01" SHORTNAME="TASfactor" PERSISTENT="true" PARAM="AIR_DATA_TAS_FACTOR" MODULE="air_data/air_data" MIN="0.8" MAX="1.3"/>
              <dl_setting VAR="air_data.calc_qnh_once" STEP="1" SHORTNAME="calcQNH" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_airspeed" TYPE="uint8" STEP="1" SHORTNAME="calcAirspeed" PERSISTENT="true" PARAM="AIR_DATA_CALC_AIRSPEED" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_tas_factor" TYPE="uint8" STEP="1" SHORTNAME="calcTASfactor" PERSISTENT="true" PARAM="AIR_DATA_CALC_TAS_FACTOR" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_amsl_baro" TYPE="uint8" STEP="1" SHORTNAME="calcAMSL" PERSISTENT="true" PARAM="AIR_DATA_CALC_AMSL_BARO" MODULE="air_data/air_data" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="ublox">
            <dl_settings NAME="ucenter">
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_h" STEP="1" SHORTNAME="sw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_l" STEP="1" SHORTNAME="sw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_h" STEP="1" SHORTNAME="hw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_l" STEP="1" SHORTNAME="hw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_init" STEP="100" SHORTNAME="inibaud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_run" STEP="100" SHORTNAME="baud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="Ins Extended">
            <dl_settings NAME="INS">
              <dl_setting VAR="vff.accel_noise" STEP="0.1" SHORTNAME="accel_noise" MODULE="subsystems/ins/vf_extended_float" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_baro" STEP="0.1" SHORTNAME="r_baro" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_alt" STEP="0.1" SHORTNAME="r_alt" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_obs_height" STEP="0.1" SHORTNAME="r_obs_height" MIN="0" MAX="10"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
              <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
              <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
              <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
              <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="indi">
              <dl_setting VAR="indi.reference_acceleration.err_p" STEP="1" SHORTNAME="kp_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_P" MODULE="stabilization/stabilization_indi_simple" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_p" STEP="0.1" SHORTNAME="kd_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.p" STEP="0.001" SHORTNAME="ctl_eff_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_P" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.reference_acceleration.err_q" STEP="1" SHORTNAME="kp_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_Q" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_q" STEP="0.1" SHORTNAME="kd_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.q" STEP="0.001" SHORTNAME="ctl_eff_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_Q" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.reference_acceleration.err_r" STEP="1" SHORTNAME="kp_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_R" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_r" STEP="0.1" SHORTNAME="kd_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.r" STEP="0.001" SHORTNAME="ctl_eff_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_R" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.g2" STEP="0.01" SHORTNAME="g2" PERSISTENT="true" PARAM="STABILIZATION_INDI_G2_R" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.adaptive" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="use_adaptive" PERSISTENT="true" PARAM="STABILIZATION_INDI_USE_ADAPTIVE" MIN="0" MAX="1"/>
              <dl_setting VAR="indi.max_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_rate" PARAM="STABILIZATION_INDI_MAX_RATE" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
              <dl_setting VAR="indi.attitude_max_yaw_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_yaw_rate_attitude" PARAM="STABILIZATION_INDI_MAX_R" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="NAV">
              <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
              <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
              <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MIN="-50" MAX="50"/>
              <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MIN="0" MAX="10.0"/>
              <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MIN="-10.0" MAX="0.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Vert Loop">
              <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
              <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MIN="0.2" MAX="0.8"/>
              <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MIN="0" MAX="1"/>
              <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
            <dl_settings NAME="Horiz Loop">
              <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="true" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
              <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
              <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MIN="0" MAX="1"/>
              <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
              <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
              <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
              <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
              <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
              <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="ardrone2_indi">
        <description>?</description>
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="ardrone2">
            <define NAME="AUTOPILOT_DISABLE_AHRS_KILL"/>
          </target>
          <target NAME="nps" BOARD="pc">
            <module TYPE="jsbsim" NAME="fdm"/>
          </target>
          <define VALUE="FALSE" NAME="USE_SONAR"/>
          <module TYPE="transparent_udp" NAME="telemetry"/>
          <module TYPE="datalink" NAME="radio_control"/>
          <module NAME="motor_mixing"/>
          <module TYPE="ardrone2" NAME="actuators"/>
          <module TYPE="ardrone2" NAME="imu"/>
          <module TYPE="ublox" NAME="gps"/>
          <module TYPE="indi_simple" NAME="stabilization"/>
          <module TYPE="int_cmpl_quat" NAME="ahrs">
            <configure VALUE="TRUE" NAME="USE_MAGNETOMETER"/>
            <define VALUE="FALSE" NAME="AHRS_USE_GPS_HEADING"/>
          </module>
          <module TYPE="extended" NAME="ins"/>
          <module NAME="bat_voltage_ardrone2"/>
          <module TYPE="ubx_ucenter" NAME="gps"/>
          <module NAME="send_imu_mag_current"/>
          <module NAME="air_data"/>
          <module NAME="logger_file"/>
        </firmware>
        <commands>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="3000"/>
        </commands>
        <servos DRIVER="Default">
          <servo NO="0" NEUTRAL="1" NAME="TOP_LEFT" MIN="0" MAX="500"/>
          <servo NO="1" NEUTRAL="1" NAME="TOP_RIGHT" MIN="0" MAX="500"/>
          <servo NO="2" NEUTRAL="1" NAME="BOTTOM_RIGHT" MIN="0" MAX="500"/>
          <servo NO="3" NEUTRAL="1" NAME="BOTTOM_LEFT" MIN="0" MAX="500"/>
        </servos>
        <section PREFIX="MOTOR_MIXING_" NAME="MIXING">
          <define VALUE="0" NAME="TRIM_ROLL"/>
          <define VALUE="0" NAME="TRIM_PITCH"/>
          <define VALUE="0" NAME="TRIM_YAW"/>
          <define VALUE="QUAD_X" NAME="TYPE"/>
        </section>
        <command_laws>
          <call FUN="motor_mixing_run(autopilot_get_motors_on(),FALSE,values)"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_LEFT]" SERVO="TOP_LEFT"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_RIGHT]" SERVO="TOP_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_RIGHT]" SERVO="BOTTOM_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_LEFT]" SERVO="BOTTOM_LEFT"/>
        </command_laws>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="2048" NAME="ACCEL_X_NEUTRAL"/>
          <define VALUE="2048" NAME="ACCEL_Y_NEUTRAL"/>
          <define VALUE="2048" NAME="ACCEL_Z_NEUTRAL"/>
          <define VALUE="0" NAME="MAG_X_NEUTRAL"/>
          <define VALUE="0" NAME="MAG_Y_NEUTRAL"/>
          <define VALUE="-180" NAME="MAG_Z_NEUTRAL"/>
          <define VALUE="16." NAME="MAG_X_SENS" INTEGER="16"/>
          <define VALUE="16." NAME="MAG_Y_SENS" INTEGER="16"/>
          <define VALUE="16." NAME="MAG_Z_SENS" INTEGER="16"/>
          <define VALUE="0.0" NAME="MAG_X_CURRENT_COEF"/>
          <define VALUE="0.0" NAME="MAG_Y_CURRENT_COEF"/>
          <define VALUE="0.0" NAME="MAG_Z_CURRENT_COEF"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.3892503" NAME="H_X"/>
          <define VALUE="0.0017972" NAME="H_Y"/>
          <define VALUE="0.9211303" NAME="H_Z"/>
        </section>
        <section PREFIX="INS_" NAME="INS">
          <define VALUE="2.2" NAME="SONAR_MAX_RANGE"/>
          <define VALUE="TRUE" NAME="SONAR_UPDATE_ON_AGL"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="RC_SETPOINT">
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="180" UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="0" NAME="DEADBAND_A"/>
          <define VALUE="0" NAME="DEADBAND_E"/>
          <define VALUE="250" NAME="DEADBAND_R"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="ATTITUDE_REFERENCE">
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.9" NAME="REF_ZETA_P"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.9" NAME="REF_ZETA_Q"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.9" NAME="REF_ZETA_R"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_RDOT"/>
        </section>
        <section PREFIX="STABILIZATION_INDI_" NAME="STABILIZATION_ATTITUDE_INDI">
          <define VALUE="0.032" NAME="G1_P"/>
          <define VALUE="0.025" NAME="G1_Q"/>
          <define VALUE="0.0032" NAME="G1_R"/>
          <define VALUE="0.16" NAME="G2_R"/>
          <define VALUE="380.0" NAME="REF_ERR_P"/>
          <define VALUE="380.0" NAME="REF_ERR_Q"/>
          <define VALUE="250.0" NAME="REF_ERR_R"/>
          <define VALUE="21.6" NAME="REF_RATE_P"/>
          <define VALUE="21.6" NAME="REF_RATE_Q"/>
          <define VALUE="21.0" NAME="REF_RATE_R"/>
          <define VALUE="3.2" NAME="FILT_CUTOFF"/>
          <define VALUE="3.2" NAME="FILT_CUTOFF_R"/>
          <define VALUE="0.06" NAME="ACT_DYN_P"/>
          <define VALUE="0.06" NAME="ACT_DYN_Q"/>
          <define VALUE="0.06" NAME="ACT_DYN_R"/>
          <define VALUE="TRUE" NAME="USE_ADAPTIVE"/>
          <define VALUE="0.0001" NAME="ADAPTIVE_MU"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="283" NAME="HOVER_KP"/>
          <define VALUE="82" NAME="HOVER_KD"/>
          <define VALUE="13" NAME="HOVER_KI"/>
          <define VALUE="0.655" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="FALSE" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="20" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="79" NAME="PGAIN"/>
          <define VALUE="100" NAME="DGAIN"/>
          <define VALUE="30" NAME="IGAIN"/>
        </section>
        <section PREFIX="NPS_" NAME="SIMULATOR">
          <define VALUE="nw_motor, ne_motor, se_motor, sw_motor" TYPE="string[]" NAME="ACTUATOR_NAMES"/>
          <define VALUE="simple_ardrone2" TYPE="string" NAME="JSBSIM_MODEL"/>
          <define VALUE="reset00" TYPE="string" NAME="JSBSIM_INIT"/>
          <define VALUE="nps_sensors_params_ardrone2.h" TYPE="string" NAME="SENSORS_PARAMS"/>
        </section>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_NAV" NAME="MODE_STARTUP"/>
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_ATTITUDE_Z_HOLD" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_NAV" NAME="MODE_AUTO2"/>
          <define VALUE="TRUE" NAME="NO_RC_THRUST_LIMIT"/>
        </section>
        <section NAME="BAT">
          <define VALUE="8700" NAME="MILLIAMP_AT_FULL_THROTTLE"/>
          <define VALUE="9.3" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="9.6" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="9.7" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="12.4" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.05" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
            <message PERIOD="0.05" NAME="OPTICAL_FLOW_HOVER"/>
            <message PERIOD="0.10" NAME="VISUALTARGET"/>
            <message PERIOD="0.1" NAME="VISION_POSITION_ESTIMATE"/>
            <message PERIOD="0.05" NAME="DIVERGENCE"/>
            <message PERIOD="0.02" NAME="DRAGSPEED"/>
            <message PERIOD="5.1" NAME="LOGGER_STATUS"/>
            <message PERIOD="1.2" NAME="LIDAR"/>
            <message PERIOD=".25" NAME="INS_EKF2"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="BEBOP_ACTUATORS"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_FLOAT"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
            <message PERIOD="2.0" NAME="INDI_G"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="vel_guidance" KEY_PRESS="q">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HYBRID_GUIDANCE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1.0" NAME="GPS_INT"/>
            <message PERIOD="1.0" NAME="INS"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="RTCM3">
            <message PERIOD="1" NAME="GPS_RXMRTCM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD="1" NAME="GPS_RTK"/>
          </mode>
        </process>
        <process NAME="FlightRecorder">
          <mode NAME="default">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD=".1" NAME="GPS_INT"/>
            <message PERIOD=".1" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".2" NAME="IMU_MAG_SCALED"/>
            <message PERIOD="0.05" NAME="LIDAR"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="19"/>
            <dl_setting VAR="autopilot.kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot.power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot.mode" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="19" HANDLER="SetModeHandler"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="ARDrone2_opticflow" ac_id="12" airframe="airframes/tudelft/ardrone2_opticflow.xml" radio="radios/dummy.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/rotorcraft_basic.xml" settings="settings/rotorcraft_basic.xml" settings_modules="modules/video_capture.xml modules/cv_opticflow.xml modules/gps_ubx_ucenter.xml modules/ins_hff_extended.xml modules/ahrs_int_cmpl_quat.xml modules/stabilization_int_quat.xml modules/nav_basic_rotorcraft.xml modules/guidance_rotorcraft.xml modules/gps.xml modules/imu_common.xml" gui_color="#ffffccc2ccc2">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitMM" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1120" MIN="1120" MAX="2000" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="2" name="Rotorcraft Basic (Enac)" max_dist_from_home="150" lon0="1 28 52.61" lat0="43 33 50.83" ground_alt="147" alt="152">
          <header>#include &quot;autopilot.h&quot;</header>
          <waypoints>
            <waypoint y="0.0" x="0.0" name="HOME"/>
            <waypoint y="5.0" x="0.0" name="CLIMB"/>
            <waypoint y="-5.0" x="-2.0" name="STDBY"/>
            <waypoint y="-13.9" x="3.6" name="p1"/>
            <waypoint y="-48.2" x="27.5" name="p2"/>
            <waypoint y="-19.6" x="16.7" name="p3"/>
            <waypoint y="-40.7" x="13.7" name="p4"/>
            <waypoint y="-50" x="-20" name="CAM" height="2."/>
            <waypoint y="-10.9" x="5.6" name="TD"/>
          </waypoints>
          <blocks>
            <block name="Wait GPS" no="0">
              <call_once fun="NavKillThrottle()" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Geo init" no="1">
              <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
              <call_once fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Holding point" no="2">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="Start Engine" no="3">
              <call_once fun="NavResurrect()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff" name="Takeoff" no="4">
              <exception deroute="Standby" cond="stateGetPositionEnu_f() @DEREF z @GT 2.0"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="5">
              <stay wp="STDBY" no="0"/>
            </block>
            <block name="stay_p1" no="6">
              <stay wp="p1" no="0"/>
            </block>
            <block name="go_p2" no="7">
              <call_once fun="nav_set_heading_deg(90)" no="0"/>
              <go wp="p2" no="1"/>
              <deroute block="stay_p1" no="2"/>
            </block>
            <block name="line_p1_p2" no="8">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <stay wp="p2" until="stage_time>10" no="1"/>
              <go wp="p1" hmode="route" from="p2" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="route" no="9">
              <go wp="p3" hmode="route" from="p1" no="0"/>
              <go wp="p4" hmode="route" from="p3" no="1"/>
              <go wp="p1" hmode="route" from="p4" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="Oval" no="10">
              <oval radius="-1" p2="p2" p1="p1" no="1"/>
            </block>
            <block name="test yaw" no="11">
              <go wp="p1" no="0"/>
              <for var="i" to="16" from="1" no="2">
                <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
              </for>
              <deroute block="Standby" no="5"/>
            </block>
            <block pre_call="nav_set_heading_towards_waypoint(WP_CAM)" name="circle CAM" no="12">
              <circle wp="CAM" radius="nav_radius" no="0"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land Here" name="land here" no="13">
              <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
            </block>
            <block name="land" no="14">
              <go wp="TD" no="0"/>
            </block>
            <block name="flare" no="15">
              <exception deroute="Holding point" cond="NavDetectGround()"/>
              <exception deroute="landed" cond="!nav_is_in_flight()"/>
              <call_once fun="NavStartDetectGround()" no="0"/>
              <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
            </block>
            <block name="landed" no="16">
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
            </block>
            <block name="HOME" no="17">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="17" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="16" block_name="landed" stage="0">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
          </stage>
          <stage block="15" block_name="flare" stage="1">
            <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
          </stage>
          <stage block="15" block_name="flare" stage="0">
            <call_once fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="14" block_name="land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="13" block_name="land here" stage="0">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="12" block_name="circle CAM" stage="0">
            <circle wp="CAM" radius="nav_radius" no="0"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="5">
            <deroute block="Standby" no="5"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="3">
            <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="2">
            <for var="i" to="16" from="1" no="2">
              <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
            </for>
          </stage>
          <stage block="11" block_name="test yaw" stage="0">
            <go wp="p1" no="0"/>
          </stage>
          <stage block="10" block_name="Oval" stage="1">
            <oval radius="-1" p2="p2" p1="p1" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="9" block_name="route" stage="2">
            <go wp="p1" hmode="route" from="p4" no="2"/>
          </stage>
          <stage block="9" block_name="route" stage="1">
            <go wp="p4" hmode="route" from="p3" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="0">
            <go wp="p3" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="2">
            <go wp="p1" hmode="route" from="p2" no="2"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="1">
            <stay wp="p2" until="stage_time>10" no="1"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="2">
            <deroute block="stay_p1" no="2"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="1">
            <go wp="p2" no="1"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="0">
            <call_once fun="nav_set_heading_deg(90)" no="0"/>
          </stage>
          <stage block="6" block_name="stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="5" block_name="Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="1">
            <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="0">
            <call_once fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="2">
            <call_once fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="0">
            <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="video">
              <dl_setting VAR="video_capture_record_video" STEP="1" SHORTNAME="record_video" MODULE="computer_vision/video_capture" MIN="0" MAX="1">
                <strip_button VALUE="1" NAME="Start video capture" ICON="dcstart.png" GROUP="cv"/>
                <strip_button VALUE="0" NAME="Stop video capture" ICON="dcstop.png" GROUP="cv"/>
              </dl_setting>
              <dl_setting VAR="video_capture_take_shot" STEP="1" SHORTNAME="take_shot" MODULE="computer_vision/video_capture" MIN="0" MAX="1">
                <strip_button VALUE="1" NAME="Save Image" ICON="digital-camera.png" GROUP="cv"/>
              </dl_setting>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="Vision stabilization">
            <dl_settings NAME="vision_calc">
              <dl_setting VAR="opticflow.method" VALUES="LK_Fast9|EdgeFlow" STEP="1" SHORTNAME="method" PARAM="METHOD" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.corner_method" VALUES="exhaustive-FAST|ACT-FAST" STEP="1" SHORTNAME="corner_method" PARAM="CORNER_METHOD" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.window_size" STEP="1" SHORTNAME="window_size" PARAM="OPTICFLOW_WINDOW_SIZE" MODULE="computer_vision/opticflow_module" MIN="0" MAX="20"/>
              <dl_setting VAR="opticflow.search_distance" STEP="1" SHORTNAME="search_distance" PARAM="SEARCH_DISTANCE" MODULE="computer_vision/opticflow_module" MIN="0" MAX="50"/>
              <dl_setting VAR="opticflow.subpixel_factor" STEP="10" SHORTNAME="subpixel_factor" PARAM="OPTICFLOW_SUBPIXEL_FACTOR" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1000"/>
              <dl_setting VAR="opticflow.resolution_factor" STEP="10" SHORTNAME="resolution_factor" PARAM="OPTICFLOW_RESOLUTION_FACTOR" MODULE="computer_vision/opticflow_module" MIN="10" MAX="10000"/>
              <dl_setting VAR="opticflow.derotation" VALUES="OFF|ON" STEP="1" SHORTNAME="derotation" PARAM="OPTICFLOW_DEROTATION" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.median_filter" VALUES="OFF|ON" STEP="1" SHORTNAME="median_filter" PARAM="OPTICFLOW_MEDIAN_FILTER" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.feature_management" VALUES="OFF|ON" STEP="1" SHORTNAME="feature_management" PARAM="OPTICFLOW_FEATURE_MANAGEMENT" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.track_back" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="track_back" PARAM="OPTICFLOW_TRACK_BACK" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.show_flow" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="show_flow" PARAM="OPTICFLOW_SHOW_FLOW" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.max_track_corners" STEP="1" SHORTNAME="max_trck_corners" PARAM="OPTICFLOW_MAX_TRACK_CORNERS" MODULE="computer_vision/opticflow_module" MIN="0" MAX="500"/>
              <dl_setting VAR="opticflow.max_iterations" STEP="1" SHORTNAME="max_iterations" PARAM="OPTICFLOW_MAX_ITERATIONS" MODULE="computer_vision/opticflow_module" MIN="0" MAX="100"/>
              <dl_setting VAR="opticflow.threshold_vec" STEP="1" SHORTNAME="threshold_vec" PARAM="OPTICFLOW_THRESHOLD_VEC" MODULE="computer_vision/opticflow_module" MIN="0" MAX="100"/>
              <dl_setting VAR="opticflow.fast9_adaptive" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="fast9_adaptive" PARAM="OPTICFLOW_FAST9_ADAPTIVE" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.fast9_threshold" STEP="1" SHORTNAME="fast9_threshold" PARAM="OPTICFLOW_FAST9_THRESHOLD" MODULE="computer_vision/opticflow_module" MIN="0" MAX="255"/>
              <dl_setting VAR="opticflow.fast9_min_distance" STEP="1" SHORTNAME="fast9_min_distance" PARAM="OPTICFLOW_FAST9_MIN_DISTANCE" MODULE="computer_vision/opticflow_module" MIN="0" MAX="500"/>
              <dl_setting VAR="opticflow.fast9_padding" STEP="1" SHORTNAME="fast9_padding" PARAM="OPTICFLOW_FAST9_PADDING" MODULE="computer_vision/opticflow_module" MIN="0" MAX="50"/>
              <dl_setting VAR="opticflow.fast9_region_detect" VALUES="OFF|ON" STEP="1" SHORTNAME="fast9_region_detect" PARAM="OPTICFLOW_FAST9_REGION_DETECT" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.fast9_num_regions" STEP="1" SHORTNAME="fast9_num_regions" PARAM="OPTICFLOW_FAST9_NUM_REGIONS" MODULE="computer_vision/opticflow_module" MIN="1" MAX="25"/>
              <dl_setting VAR="opticflow.actfast_long_step" STEP="1" SHORTNAME="actfast_long_step" PARAM="OPTICFLOW_ACTFAST_LONG_STEP" MODULE="computer_vision/opticflow_module" MIN="1" MAX="100"/>
              <dl_setting VAR="opticflow.actfast_short_step" STEP="1" SHORTNAME="actfast_short_step" PARAM="OPTICFLOW_ACTFAST_SHORT_STEP" MODULE="computer_vision/opticflow_module" MIN="1" MAX="10"/>
              <dl_setting VAR="opticflow.actfast_min_gradient" STEP="1" SHORTNAME="actfast_min_gradient" PARAM="OPTICFLOW_ACTFAST_MIN_GRADIENT" MODULE="computer_vision/opticflow_module" MIN="1" MAX="255"/>
              <dl_setting VAR="opticflow.actfast_gradient_method" VALUES="SIMPLE|SOBEL" STEP="1" SHORTNAME="actfast_gradient_method" PARAM="OPTICFLOW_ACTFAST_GRADIENT_METHOD" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.pyramid_level" STEP="1" SHORTNAME="pyramid_level" PARAM="OPTICFLOW_PYRAMID_LEVEL" MODULE="computer_vision/opticflow_module" MIN="0" MAX="10"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="ublox">
            <dl_settings NAME="ucenter">
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_h" STEP="1" SHORTNAME="sw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_l" STEP="1" SHORTNAME="sw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_h" STEP="1" SHORTNAME="hw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_l" STEP="1" SHORTNAME="hw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_init" STEP="100" SHORTNAME="inibaud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_run" STEP="100" SHORTNAME="baud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="Ins Extended">
            <dl_settings NAME="INS">
              <dl_setting VAR="vff.accel_noise" STEP="0.1" SHORTNAME="accel_noise" MODULE="subsystems/ins/vf_extended_float" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_baro" STEP="0.1" SHORTNAME="r_baro" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_alt" STEP="0.1" SHORTNAME="r_alt" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_obs_height" STEP="0.1" SHORTNAME="r_obs_height" MIN="0" MAX="10"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
              <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
              <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
              <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
              <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Att Loop">
              <dl_setting VAR="stabilization_gains.p.x" TYPE="int32" STEP="1" SHORTNAME="pgain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_PGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="8000"/>
              <dl_setting VAR="stabilization_gains.d.x" TYPE="int32" STEP="1" SHORTNAME="dgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.x" TYPE="int32" STEP="1" SHORTNAME="igain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_IGAIN" MIN="0" MAX="800"/>
              <dl_setting VAR="stabilization_gains.dd.x" TYPE="int32" STEP="1" SHORTNAME="ddgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="stabilization_gains.p.y" TYPE="int32" STEP="1" SHORTNAME="pgain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_PGAIN" MIN="1" MAX="8000"/>
              <dl_setting VAR="stabilization_gains.d.y" TYPE="int32" STEP="1" SHORTNAME="dgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.y" TYPE="int32" STEP="1" SHORTNAME="igain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_IGAIN" MIN="0" MAX="800"/>
              <dl_setting VAR="stabilization_gains.dd.y" TYPE="int32" STEP="1" SHORTNAME="ddgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="stabilization_gains.p.z" TYPE="int32" STEP="1" SHORTNAME="pgain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_PGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.d.z" TYPE="int32" STEP="1" SHORTNAME="dgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.z" TYPE="int32" STEP="1" SHORTNAME="igain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_IGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="stabilization_gains.dd.z" TYPE="int32" STEP="1" SHORTNAME="ddgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.p" UNIT="rad/s" STEP="1" SHORTNAME="omega p" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_P" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaP" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.p" STEP="0.05" SHORTNAME="zeta p" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_P" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaP"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.q" UNIT="rad/s" STEP="1" SHORTNAME="omega q" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_Q" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaQ" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.q" STEP="0.05" SHORTNAME="zeta q" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_Q" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaQ"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.r" UNIT="rad/s" STEP="1" SHORTNAME="omega r" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_R" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaR" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.r" STEP="0.05" SHORTNAME="zeta r" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_R" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaR"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="NAV">
              <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
              <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
              <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MIN="-50" MAX="50"/>
              <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MIN="0" MAX="10.0"/>
              <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MIN="-10.0" MAX="0.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Vert Loop">
              <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
              <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MIN="0.2" MAX="0.8"/>
              <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MIN="0" MAX="1"/>
              <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
            <dl_settings NAME="Horiz Loop">
              <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="true" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
              <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
              <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MIN="0" MAX="1"/>
              <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
              <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
              <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
              <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
              <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
              <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="ardrone2_opticflow">
        <description>ARDrone2, Opticflow hover</description>
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="ardrone2"/>
          <define VALUE="TRUE" NAME="USE_SONAR"/>
          <module TYPE="transparent_udp" NAME="telemetry"/>
          <module TYPE="datalink" NAME="radio_control"/>
          <module NAME="motor_mixing"/>
          <module TYPE="ardrone2" NAME="actuators"/>
          <module TYPE="ardrone2" NAME="imu"/>
          <module TYPE="ublox" NAME="gps"/>
          <module TYPE="int_quat" NAME="stabilization"/>
          <module TYPE="int_cmpl_quat" NAME="ahrs">
            <configure VALUE="TRUE" NAME="USE_MAGNETOMETER"/>
            <define VALUE="FALSE" NAME="AHRS_USE_GPS_HEADING"/>
          </module>
          <module TYPE="hff_extended" NAME="ins"/>
          <module NAME="bat_voltage_ardrone2"/>
          <module TYPE="ubx_ucenter" NAME="gps"/>
          <module NAME="send_imu_mag_current"/>
          <module NAME="logger_file"/>
          <module NAME="video_thread"/>
          <module NAME="pose_history"/>
          <module NAME="cv_opticflow">
            <define VALUE="bottom_camera" NAME="OPTICFLOW_CAMERA"/>
            <define VALUE="0" NAME="OPTICFLOW_PYRAMID_LEVEL"/>
            <define VALUE="1" NAME="OPTICFLOW_FEATURE_MANAGEMENT"/>
          </module>
          <module NAME="video_capture">
            <define VALUE="bottom_camera" NAME="VIDEO_CAPTURE_CAMERA"/>
            <define VALUE="/data/ftp/internal_000/images" NAME="VIDEO_CAPTURE_PATH"/>
          </module>
        </firmware>
        <commands>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="3000"/>
        </commands>
        <servos DRIVER="Default">
          <servo NO="0" NEUTRAL="1" NAME="TOP_LEFT" MIN="0" MAX="500"/>
          <servo NO="1" NEUTRAL="1" NAME="TOP_RIGHT" MIN="0" MAX="500"/>
          <servo NO="2" NEUTRAL="1" NAME="BOTTOM_RIGHT" MIN="0" MAX="500"/>
          <servo NO="3" NEUTRAL="1" NAME="BOTTOM_LEFT" MIN="0" MAX="500"/>
        </servos>
        <section PREFIX="MOTOR_MIXING_" NAME="MIXING">
          <define VALUE="0" NAME="TRIM_ROLL"/>
          <define VALUE="0" NAME="TRIM_PITCH"/>
          <define VALUE="0" NAME="TRIM_YAW"/>
          <define VALUE="QUAD_X" NAME="TYPE"/>
        </section>
        <command_laws>
          <call FUN="motor_mixing_run(autopilot_get_motors_on(),FALSE,values)"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_LEFT]" SERVO="TOP_LEFT"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_RIGHT]" SERVO="TOP_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_RIGHT]" SERVO="BOTTOM_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_LEFT]" SERVO="BOTTOM_LEFT"/>
        </command_laws>
        <section PREFIX="VISION_" NAME="VISION">
          <define VALUE="FALSE" NAME="HOVER"/>
          <define VALUE="1500" NAME="PHI_PGAIN"/>
          <define VALUE="800" NAME="PHI_IGAIN"/>
          <define VALUE="1500" NAME="THETA_PGAIN"/>
          <define VALUE="800" NAME="THETA_IGAIN"/>
          <define VALUE="0" NAME="DESIRED_VX"/>
          <define VALUE="0" NAME="DESIRED_VY"/>
        </section>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="2048" NAME="ACCEL_X_NEUTRAL"/>
          <define VALUE="2048" NAME="ACCEL_Y_NEUTRAL"/>
          <define VALUE="2048" NAME="ACCEL_Z_NEUTRAL"/>
          <define VALUE="0" NAME="MAG_X_NEUTRAL"/>
          <define VALUE="0" NAME="MAG_Y_NEUTRAL"/>
          <define VALUE="-180" NAME="MAG_Z_NEUTRAL"/>
          <define VALUE="16." NAME="MAG_X_SENS" INTEGER="16"/>
          <define VALUE="16." NAME="MAG_Y_SENS" INTEGER="16"/>
          <define VALUE="16." NAME="MAG_Z_SENS" INTEGER="16"/>
          <define VALUE="0.0" NAME="MAG_X_CURRENT_COEF"/>
          <define VALUE="0.0" NAME="MAG_Y_CURRENT_COEF"/>
          <define VALUE="0.0" NAME="MAG_Z_CURRENT_COEF"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.3892503" NAME="H_X"/>
          <define VALUE="0.0017972" NAME="H_Y"/>
          <define VALUE="0.9211303" NAME="H_Z"/>
        </section>
        <section PREFIX="INS_" NAME="INS">
          <define VALUE="2.2" NAME="SONAR_MAX_RANGE"/>
          <define VALUE="TRUE" NAME="SONAR_UPDATE_ON_AGL"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="STABILIZATION_ATTITUDE">
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="600" UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="0" NAME="DEADBAND_A"/>
          <define VALUE="0" NAME="DEADBAND_E"/>
          <define VALUE="250" NAME="DEADBAND_R"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.9" NAME="REF_ZETA_P"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.9" NAME="REF_ZETA_Q"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="200" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.9" NAME="REF_ZETA_R"/>
          <define VALUE="300." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(4000.)" NAME="REF_MAX_RDOT"/>
          <define VALUE="850" NAME="PHI_PGAIN"/>
          <define VALUE="425" NAME="PHI_DGAIN"/>
          <define VALUE="0" NAME="PHI_IGAIN"/>
          <define VALUE="850" NAME="THETA_PGAIN"/>
          <define VALUE="425" NAME="THETA_DGAIN"/>
          <define VALUE="0" NAME="THETA_IGAIN"/>
          <define VALUE="1000" NAME="PSI_PGAIN"/>
          <define VALUE="700" NAME="PSI_DGAIN"/>
          <define VALUE="0" NAME="PSI_IGAIN"/>
          <define VALUE="0" NAME="PHI_DDGAIN"/>
          <define VALUE="0" NAME="THETA_DDGAIN"/>
          <define VALUE="100" NAME="PSI_DDGAIN"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="283" NAME="HOVER_KP"/>
          <define VALUE="82" NAME="HOVER_KD"/>
          <define VALUE="13" NAME="HOVER_KI"/>
          <define VALUE="0.655" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="FALSE" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="20" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="79" NAME="PGAIN"/>
          <define VALUE="100" NAME="DGAIN"/>
          <define VALUE="30" NAME="IGAIN"/>
        </section>
        <section PREFIX="NPS_" NAME="SIMULATOR">
          <define VALUE="nw_motor, ne_motor, se_motor, sw_motor" TYPE="string[]" NAME="ACTUATOR_NAMES"/>
          <define VALUE="simple_ardrone2" TYPE="string" NAME="JSBSIM_MODEL"/>
          <define VALUE="nps_sensors_params_ardrone2.h" TYPE="string" NAME="SENSORS_PARAMS"/>
        </section>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_NAV" NAME="MODE_STARTUP"/>
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_MODULE" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_HOVER_Z_HOLD" NAME="MODE_AUTO2"/>
          <define VALUE="TRUE" NAME="NO_RC_THRUST_LIMIT"/>
        </section>
        <section NAME="BAT">
          <define VALUE="8700" NAME="MILLIAMP_AT_FULL_THROTTLE"/>
          <define VALUE="9.3" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="9.6" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="9.7" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="12.4" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.05" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
            <message PERIOD="0.05" NAME="OPTICAL_FLOW_HOVER"/>
            <message PERIOD="0.10" NAME="VISUALTARGET"/>
            <message PERIOD="0.1" NAME="VISION_POSITION_ESTIMATE"/>
            <message PERIOD="0.05" NAME="DIVERGENCE"/>
            <message PERIOD="0.02" NAME="DRAGSPEED"/>
            <message PERIOD="5.1" NAME="LOGGER_STATUS"/>
            <message PERIOD="1.2" NAME="LIDAR"/>
            <message PERIOD=".25" NAME="INS_EKF2"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="BEBOP_ACTUATORS"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_FLOAT"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
            <message PERIOD="2.0" NAME="INDI_G"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="vel_guidance" KEY_PRESS="q">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HYBRID_GUIDANCE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1.0" NAME="GPS_INT"/>
            <message PERIOD="1.0" NAME="INS"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="RTCM3">
            <message PERIOD="1" NAME="GPS_RXMRTCM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD="1" NAME="GPS_RTK"/>
          </mode>
        </process>
        <process NAME="FlightRecorder">
          <mode NAME="default">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD=".1" NAME="GPS_INT"/>
            <message PERIOD=".1" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".2" NAME="IMU_MAG_SCALED"/>
            <message PERIOD="0.05" NAME="LIDAR"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="19"/>
            <dl_setting VAR="autopilot.kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot.power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot.mode" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="19" HANDLER="SetModeHandler"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="ARDrone2_optitrack" ac_id="11" airframe="airframes/tudelft/ardrone2_optitrack.xml" radio="radios/dummy.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/rotorcraft_optitrack.xml" settings="settings/rotorcraft_basic.xml" settings_modules="modules/ins_extended.xml modules/ahrs_int_cmpl_quat.xml modules/stabilization_indi_simple.xml modules/nav_basic_rotorcraft.xml modules/guidance_rotorcraft.xml modules/gps.xml modules/imu_common.xml" gui_color="#fffff996b847">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitMM" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1120" MIN="1120" MAX="2000" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="0.3" name="Rotorcraft Optitrack (Delft)" max_dist_from_home="20" lon0="4.376789" lat0="51.990634" ground_alt="0" alt="1.5">
          <header>#include &quot;autopilot.h&quot;</header>
          <waypoints>
            <waypoint y="0.0" x="0.0" name="HOME"/>
            <waypoint y="-0.6" x="1.2" name="CLIMB"/>
            <waypoint y="2.0" x="2.0" name="GOAL"/>
            <waypoint y="-0.8" x="-0.7" name="STDBY"/>
            <waypoint y="-1.7" x="0.8" name="TD"/>
            <waypoint name="p1" lon="4.376823" lat="51.990630" x="2.34" y="-0.40"/>
            <waypoint name="p2" lon="4.376779" lat="51.990614" x="-0.64" y="-2.24"/>
            <waypoint name="p3" lon="4.376759" lat="51.990636" x="-2.06" y="0.18"/>
            <waypoint name="p4" lon="4.376805" lat="51.990651" x="1.06" y="1.91"/>
            <waypoint name="FA1" lon="4.3768628" lat="51.9906213" x="5.09" y="-1.32"/>
            <waypoint name="FA2" lon="4.3767766" lat="51.9905874" x="-0.75" y="-5.20"/>
            <waypoint name="FA3" lon="4.3767226" lat="51.9906409" x="-4.57" y="0.68"/>
            <waypoint name="FA4" lon="4.3768074" lat="51.9906737" x="1.18" y="4.44"/>
          </waypoints>
          <sectors>
            <sector name="Flight_Area" color="red">
              <corner name="FA4"/>
              <corner name="FA3"/>
              <corner name="FA2"/>
              <corner name="FA1"/>
            </sector>
          </sectors>
          <blocks>
            <block name="Wait GPS" no="0">
              <call_once fun="NavKillThrottle()" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Holding point" no="1">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="Start Engine" no="2">
              <call_once fun="NavResurrect()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff" name="Takeoff" no="3">
              <exception deroute="Standby" cond="stateGetPositionEnu_f()->z > 1.0"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="4">
              <stay wp="STDBY" no="0"/>
            </block>
            <block strip_icon="lookfore.png" strip_button="Go" name="START" no="5">
              <call_once fun="NavSetWaypointHere(WP_GOAL)" no="0"/>
            </block>
            <block name="StayGoal" no="6">
              <stay wp="GOAL" no="0"/>
            </block>
            <block name="stay_p1" no="7">
              <stay wp="p1" no="0"/>
            </block>
            <block name="go_p2" no="8">
              <call_once fun="nav_set_heading_deg(90)" no="0"/>
              <go wp="p2" no="1"/>
              <deroute block="stay_p1" no="2"/>
            </block>
            <block name="line_p1_p2" no="9">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <stay wp="p2" until="stage_time>10" no="1"/>
              <go wp="p1" hmode="route" from="p2" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="route" no="10">
              <go wp="p3" hmode="route" from="p1" no="0"/>
              <go wp="p4" hmode="route" from="p3" no="1"/>
              <go wp="p1" hmode="route" from="p4" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="Oval" no="11">
              <oval radius="-1" p2="p2" p1="p1" no="1"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land Here" name="land here" no="12">
              <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
            </block>
            <block name="land" no="13">
              <go wp="TD" no="0"/>
            </block>
            <block name="flare" no="14">
              <exception deroute="Holding point" cond="NavDetectGround()"/>
              <exception deroute="landed" cond="!nav_is_in_flight()"/>
              <call_once fun="NavStartDetectGround()" no="0"/>
              <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
            </block>
            <block name="landed" no="15">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="HOME" no="16">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="16" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="15" block_name="landed" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="15" block_name="landed" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="14" block_name="flare" stage="1">
            <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
          </stage>
          <stage block="14" block_name="flare" stage="0">
            <call_once fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="13" block_name="land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="12" block_name="land here" stage="0">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="11" block_name="Oval" stage="1">
            <oval radius="-1" p2="p2" p1="p1" no="1"/>
          </stage>
          <stage block="10" block_name="route" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="10" block_name="route" stage="2">
            <go wp="p1" hmode="route" from="p4" no="2"/>
          </stage>
          <stage block="10" block_name="route" stage="1">
            <go wp="p4" hmode="route" from="p3" no="1"/>
          </stage>
          <stage block="10" block_name="route" stage="0">
            <go wp="p3" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="9" block_name="line_p1_p2" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="9" block_name="line_p1_p2" stage="2">
            <go wp="p1" hmode="route" from="p2" no="2"/>
          </stage>
          <stage block="9" block_name="line_p1_p2" stage="1">
            <stay wp="p2" until="stage_time>10" no="1"/>
          </stage>
          <stage block="9" block_name="line_p1_p2" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="8" block_name="go_p2" stage="2">
            <deroute block="stay_p1" no="2"/>
          </stage>
          <stage block="8" block_name="go_p2" stage="1">
            <go wp="p2" no="1"/>
          </stage>
          <stage block="8" block_name="go_p2" stage="0">
            <call_once fun="nav_set_heading_deg(90)" no="0"/>
          </stage>
          <stage block="7" block_name="stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="6" block_name="StayGoal" stage="0">
            <stay wp="GOAL" no="0"/>
          </stage>
          <stage block="5" block_name="START" stage="0">
            <call_once fun="NavSetWaypointHere(WP_GOAL)" no="0"/>
          </stage>
          <stage block="4" block_name="Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="3" block_name="Takeoff" stage="1">
            <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
          </stage>
          <stage block="3" block_name="Takeoff" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="2" block_name="Start Engine" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="2" block_name="Start Engine" stage="0">
            <call_once fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="1" block_name="Holding point" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="1" block_name="Holding point" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings NAME="Ins Extended">
            <dl_settings NAME="INS">
              <dl_setting VAR="vff.accel_noise" STEP="0.1" SHORTNAME="accel_noise" MODULE="subsystems/ins/vf_extended_float" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_baro" STEP="0.1" SHORTNAME="r_baro" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_alt" STEP="0.1" SHORTNAME="r_alt" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_obs_height" STEP="0.1" SHORTNAME="r_obs_height" MIN="0" MAX="10"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
              <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
              <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
              <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
              <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="indi">
              <dl_setting VAR="indi.reference_acceleration.err_p" STEP="1" SHORTNAME="kp_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_P" MODULE="stabilization/stabilization_indi_simple" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_p" STEP="0.1" SHORTNAME="kd_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.p" STEP="0.001" SHORTNAME="ctl_eff_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_P" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.reference_acceleration.err_q" STEP="1" SHORTNAME="kp_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_Q" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_q" STEP="0.1" SHORTNAME="kd_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.q" STEP="0.001" SHORTNAME="ctl_eff_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_Q" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.reference_acceleration.err_r" STEP="1" SHORTNAME="kp_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_R" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_r" STEP="0.1" SHORTNAME="kd_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.r" STEP="0.001" SHORTNAME="ctl_eff_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_R" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.g2" STEP="0.01" SHORTNAME="g2" PERSISTENT="true" PARAM="STABILIZATION_INDI_G2_R" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.adaptive" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="use_adaptive" PERSISTENT="true" PARAM="STABILIZATION_INDI_USE_ADAPTIVE" MIN="0" MAX="1"/>
              <dl_setting VAR="indi.max_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_rate" PARAM="STABILIZATION_INDI_MAX_RATE" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
              <dl_setting VAR="indi.attitude_max_yaw_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_yaw_rate_attitude" PARAM="STABILIZATION_INDI_MAX_R" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="NAV">
              <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
              <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
              <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MIN="-50" MAX="50"/>
              <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MIN="0" MAX="10.0"/>
              <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MIN="-10.0" MAX="0.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Vert Loop">
              <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
              <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MIN="0.2" MAX="0.8"/>
              <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MIN="0" MAX="1"/>
              <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
            <dl_settings NAME="Horiz Loop">
              <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="true" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
              <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
              <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MIN="0" MAX="1"/>
              <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
              <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
              <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
              <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
              <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
              <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="ardrone2_optitrack">
        <description></description>
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="ardrone2">
            <configure VALUE="FALSE" NAME="USE_BARO_BOARD"/>
          </target>
          <target NAME="nps" BOARD="pc">
            <module TYPE="jsbsim" NAME="fdm"/>
          </target>
          <define VALUE="0.5" NAME="FAILSAFE_DESCENT_SPEED"/>
          <define VALUE="0" NAME="USE_SONAR"/>
          <configure VALUE="0" NAME="USE_MAGNETOMETER"/>
          <module TYPE="transparent_udp" NAME="telemetry"/>
          <module TYPE="datalink" NAME="radio_control"/>
          <module NAME="motor_mixing"/>
          <module TYPE="ardrone2" NAME="actuators"/>
          <module TYPE="ardrone2" NAME="imu"/>
          <module TYPE="datalink" NAME="gps"/>
          <module TYPE="indi_simple" NAME="stabilization"/>
          <module TYPE="int_cmpl_quat" NAME="ahrs"/>
          <module TYPE="extended" NAME="ins"/>
          <module NAME="bat_voltage_ardrone2"/>
        </firmware>
        <commands>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="3000"/>
        </commands>
        <servos DRIVER="Default">
          <servo NO="0" NEUTRAL="1" NAME="TOP_LEFT" MIN="0" MAX="500"/>
          <servo NO="1" NEUTRAL="1" NAME="TOP_RIGHT" MIN="0" MAX="500"/>
          <servo NO="2" NEUTRAL="1" NAME="BOTTOM_RIGHT" MIN="0" MAX="500"/>
          <servo NO="3" NEUTRAL="1" NAME="BOTTOM_LEFT" MIN="0" MAX="500"/>
        </servos>
        <section PREFIX="MOTOR_MIXING_" NAME="MIXING">
          <define VALUE="0" NAME="TRIM_ROLL"/>
          <define VALUE="0" NAME="TRIM_PITCH"/>
          <define VALUE="0" NAME="TRIM_YAW"/>
          <define VALUE="QUAD_X" NAME="TYPE"/>
        </section>
        <command_laws>
          <call FUN="motor_mixing_run(autopilot_get_motors_on(),FALSE,values)"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_LEFT]" SERVO="TOP_LEFT"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_RIGHT]" SERVO="TOP_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_RIGHT]" SERVO="BOTTOM_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_LEFT]" SERVO="BOTTOM_LEFT"/>
        </command_laws>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="2048" NAME="ACCEL_X_NEUTRAL"/>
          <define VALUE="2048" NAME="ACCEL_Y_NEUTRAL"/>
          <define VALUE="2048" NAME="ACCEL_Z_NEUTRAL"/>
          <define VALUE="0" NAME="MAG_X_NEUTRAL"/>
          <define VALUE="0" NAME="MAG_Y_NEUTRAL"/>
          <define VALUE="-180" NAME="MAG_Z_NEUTRAL"/>
          <define VALUE="16." NAME="MAG_X_SENS" INTEGER="16"/>
          <define VALUE="16." NAME="MAG_Y_SENS" INTEGER="16"/>
          <define VALUE="16." NAME="MAG_Z_SENS" INTEGER="16"/>
          <define VALUE="0.0" NAME="MAG_X_CURRENT_COEF"/>
          <define VALUE="0.0" NAME="MAG_Y_CURRENT_COEF"/>
          <define VALUE="0.0" NAME="MAG_Z_CURRENT_COEF"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.3892503" NAME="H_X"/>
          <define VALUE="0.0017972" NAME="H_Y"/>
          <define VALUE="0.9211303" NAME="H_Z"/>
          <define VALUE="1" NAME="USE_GPS_HEADING"/>
          <define VALUE="0" NAME="HEADING_UPDATE_GPS_MIN_SPEED"/>
        </section>
        <section PREFIX="INS_" NAME="INS">
          <define VALUE="1" NAME="USE_GPS_ALT"/>
          <define VALUE="0.01" NAME="VFF_R_GPS"/>
        </section>
        <section PREFIX="STABILIZATION_INDI_" NAME="STABILIZATION_ATTITUDE_INDI">
          <define VALUE="0.028551973" NAME="G1_P"/>
          <define VALUE="0.023775417" NAME="G1_Q"/>
          <define VALUE="0.00173069" NAME="G1_R"/>
          <define VALUE="0.086460732" NAME="G2_R"/>
          <define VALUE="380.0" NAME="REF_ERR_P"/>
          <define VALUE="380.0" NAME="REF_ERR_Q"/>
          <define VALUE="70.0" NAME="REF_ERR_R"/>
          <define VALUE="21.6" NAME="REF_RATE_P"/>
          <define VALUE="21.6" NAME="REF_RATE_Q"/>
          <define VALUE="11.0" NAME="REF_RATE_R"/>
          <define VALUE="3.2" NAME="FILT_CUTOFF"/>
          <define VALUE="3.2" NAME="FILT_CUTOFF_R"/>
          <define VALUE="0.06" NAME="ACT_DYN_P"/>
          <define VALUE="0.06" NAME="ACT_DYN_Q"/>
          <define VALUE="0.06" NAME="ACT_DYN_R"/>
          <define VALUE="FALSE" NAME="USE_ADAPTIVE"/>
          <define VALUE="0.0001" NAME="ADAPTIVE_MU"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="STABILIZATION_ATTITUDE">
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="180" UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="0" NAME="DEADBAND_A"/>
          <define VALUE="0" NAME="DEADBAND_E"/>
          <define VALUE="250" NAME="DEADBAND_R"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.9" NAME="REF_ZETA_P"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.9" NAME="REF_ZETA_Q"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.9" NAME="REF_ZETA_R"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_RDOT"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="583" NAME="HOVER_KP"/>
          <define VALUE="82" NAME="HOVER_KD"/>
          <define VALUE="13" NAME="HOVER_KI"/>
          <define VALUE="0.645" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="false" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="20" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="363" NAME="PGAIN"/>
          <define VALUE="237" NAME="DGAIN"/>
          <define VALUE="30" NAME="IGAIN"/>
          <define VALUE="0" NAME="VGAIN"/>
          <define VALUE="0" NAME="AGAIN"/>
        </section>
        <section PREFIX="NPS_" NAME="SIMULATOR">
          <define VALUE="nw_motor, ne_motor, se_motor, sw_motor" TYPE="string[]" NAME="ACTUATOR_NAMES"/>
          <define VALUE="simple_ardrone2" TYPE="string" NAME="JSBSIM_MODEL"/>
          <define VALUE="reset00" TYPE="string" NAME="JSBSIM_INIT"/>
          <define VALUE="nps_sensors_params_ardrone2.h" TYPE="string" NAME="SENSORS_PARAMS"/>
        </section>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_NAV" NAME="MODE_STARTUP"/>
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_HOVER_Z_HOLD" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_NAV" NAME="MODE_AUTO2"/>
          <define VALUE="0.15" NAME="ARRIVED_AT_WAYPOINT"/>
          <define VALUE="1500" NAME="AUTOPILOT_IN_FLIGHT_MIN_THRUST"/>
        </section>
        <section NAME="BAT">
          <define VALUE="8700" NAME="MILLIAMP_AT_FULL_THROTTLE"/>
          <define VALUE="9.3" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="9.9" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="10.1" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="12.4" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.05" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
            <message PERIOD="0.05" NAME="OPTICAL_FLOW_HOVER"/>
            <message PERIOD="0.10" NAME="VISUALTARGET"/>
            <message PERIOD="0.1" NAME="VISION_POSITION_ESTIMATE"/>
            <message PERIOD="0.05" NAME="DIVERGENCE"/>
            <message PERIOD="0.02" NAME="DRAGSPEED"/>
            <message PERIOD="5.1" NAME="LOGGER_STATUS"/>
            <message PERIOD="1.2" NAME="LIDAR"/>
            <message PERIOD=".25" NAME="INS_EKF2"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="BEBOP_ACTUATORS"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_FLOAT"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
            <message PERIOD="2.0" NAME="INDI_G"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="vel_guidance" KEY_PRESS="q">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HYBRID_GUIDANCE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1.0" NAME="GPS_INT"/>
            <message PERIOD="1.0" NAME="INS"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="RTCM3">
            <message PERIOD="1" NAME="GPS_RXMRTCM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD="1" NAME="GPS_RTK"/>
          </mode>
        </process>
        <process NAME="FlightRecorder">
          <mode NAME="default">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD=".1" NAME="GPS_INT"/>
            <message PERIOD=".1" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".2" NAME="IMU_MAG_SCALED"/>
            <message PERIOD="0.05" NAME="LIDAR"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="19"/>
            <dl_setting VAR="autopilot.kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot.power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot.mode" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="19" HANDLER="SetModeHandler"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="BebopMavlink" ac_id="9" airframe="airframes/tudelft/bebop_mavlink.xml" radio="radios/dummy.xml" telemetry="telemetry/default_rotorcraft_mavlink.xml" flight_plan="flight_plans/tudelft/rotorcraft_survey_delft.xml" settings="settings/rotorcraft_basic.xml settings/estimation/ahrs_secondary.xml settings/control/rotorcraft_speed.xml" settings_modules="modules/digital_cam_video.xml modules/video_capture.xml [modules/nav_survey_poly_rotorcraft.xml] [modules/nav_survey_rectangle_rotorcraft.xml] modules/cv_blob_locator.xml modules/air_data.xml modules/geo_mag.xml modules/ins_extended.xml modules/ahrs_int_cmpl_quat.xml modules/stabilization_indi_simple.xml modules/nav_basic_rotorcraft.xml modules/guidance_rotorcraft.xml modules/gps.xml modules/imu_common.xml" gui_color="#ffff0689b7a1">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitMM" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1120" MIN="1120" MAX="2000" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="2" name="Survey-Drop-Race-Delft" max_dist_from_home="150" lon0="4.378142" lat0="51.991126" ground_alt="0" alt="15">
          <modules/>
          <exceptions>
            <exception cond="(electrical.bat_low&&(exception_flag[0]==0))" deroute="Mission.ComeBackAndLand" exec="set_exception_flag(0)"/>
            <exception cond="(electrical.bat_critical&&(exception_flag[1]==0))" deroute="Mission.land_here" exec="set_exception_flag(1)"/>
            <exception cond="((((!(InsideRED(GetPosX(),GetPosY()))&&!((nav_block==IndexOfBlock('Mission.flare'))))&&!((nav_block==IndexOfBlock('Mission.landed'))))&&!((nav_block==IndexOfBlock('Mission.WaitGPS'))))&&!((nav_block==IndexOfBlock('Mission.GeoInit'))))" deroute="Mission.land_emergency"/>
          </exceptions>
          <header>#include &quot;autopilot.h&quot;
#include &quot;subsystems/electrical.h&quot;
#ifdef dc_Survey
#define LINE_START_FUNCTION dc_Survey(dc_distance_interval);
#define LINE_STOP_FUNCTION {dc_autoshoot = DC_AUTOSHOOT_STOP;}
#endif
#ifndef DropOpen
#define DropOpen() FALSE
#endif
#ifndef StartVision
#define StartVision() FALSE
#endif
#ifndef StartVisionLand
#define StartVisionLand() FALSE
#endif
#ifndef StopVision
#define StopVision() FALSE
#endif
#define WpAlt(X) (30)</header>
          <waypoints>
            <waypoint y="0.0" x="0.0" name="HOME"/>
            <waypoint y="5.0" x="0.0" name="CLIMB"/>
            <waypoint y="-6.7" x="6.8" name="STDBY"/>
            <waypoint y="13.3" x="-0.5" name="raceA"/>
            <waypoint y="-43.3" x="21.0" name="raceB"/>
            <waypoint y="-28.5" x="17.9" name="WG"/>
            <waypoint y="-19.0" x="13.6" name="WD"/>
            <waypoint y="-29.1" x="31.8" name="DROP"/>
            <waypoint y="-29.1" x="31.8" name="RZ1"/>
            <waypoint y="-34.0" x="20.4" name="RZ2"/>
            <waypoint y="-38.7" x="9.9" name="RZ3"/>
            <waypoint y="-11.4" x="9.4" name="FC"/>
            <waypoint y="5.0" x="-40.9" name="S1"/>
            <waypoint y="28.0" x="14.2" name="S2"/>
            <waypoint y="-47.7" x="49.5" name="S3"/>
            <waypoint y="-72.7" x="-7.5" name="S4"/>
            <waypoint y="-47.1" x="19.1" name="p1"/>
            <waypoint y="-43.9" x="25.5" name="p2"/>
            <waypoint y="16.8" x="0.7" name="p3"/>
            <waypoint y="14.4" x="-4.5" name="p4"/>
            <waypoint y="-55" x="19" name="CAM"/>
            <waypoint y="-56" x="19" name="CRUISE" height="20"/>
            <waypoint y="-3.4" x="2.8" name="TD" height="5"/>
            <waypoint y="-57" x="19" name="ETD" height="5"/>
            <waypoint y="114.6" x="75.2" name="_red1"/>
            <waypoint y="-44.7" x="140.7" name="_red2"/>
            <waypoint y="-127.4" x="-32.5" name="_red3"/>
            <waypoint y="49.5" x="-106.7" name="_red4"/>
            <waypoint y="58.5" x="-56.1" name="_green1A"/>
            <waypoint y="84.0" x="-63.6" name="_green1B"/>
            <waypoint y="91.2" x="-38.6" name="_green1C"/>
            <waypoint y="68.8" x="-28.1" name="_green1D"/>
            <waypoint y="-102.5" x="-23.9" name="_green2A"/>
            <waypoint y="30.9" x="-77.1" name="_green2B"/>
            <waypoint y="66.9" x="12.8" name="_green2C"/>
            <waypoint y="-62.8" x="71.8" name="_green2D"/>
          </waypoints>
          <sectors>
            <sector name="RED" color="red">
              <corner name="_red1"/>
              <corner name="_red2"/>
              <corner name="_red3"/>
              <corner name="_red4"/>
            </sector>
            <sector name="GREEN1" color="green">
              <corner name="_green1A"/>
              <corner name="_green1B"/>
              <corner name="_green1C"/>
              <corner name="_green1D"/>
            </sector>
            <sector name="GREEN2" color="green">
              <corner name="_green2A"/>
              <corner name="_green2B"/>
              <corner name="_green2C"/>
              <corner name="_green2D"/>
            </sector>
            <sector name="TENNIS" color="red">
              <corner name="_red1"/>
              <corner name="_red2"/>
              <corner name="_red3"/>
              <corner name="_red4"/>
            </sector>
            <sector name="LAND" color="red">
              <corner name="_red1"/>
              <corner name="_red2"/>
              <corner name="_red3"/>
              <corner name="_red4"/>
            </sector>
          </sectors>
          <blocks>
            <block name="Dummy" no="0"/>
            <block name="Mission.WaitGPS" no="1">
              <call_once fun="NavKillThrottle()" no="0"/>
              <while cond="!(GpsFixValid())" no="1"/>
            </block>
            <block name="Mission.GeoInit" no="2">
              <while cond="LessThan(NavBlockTime(),10)" no="0"/>
              <call_once fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Mission.holding_point" no="3">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="1"/>
            </block>
            <block strip_button="Start Engine" strip_icon="resurrect.png" group="engine" name="Mission.Start Engine" no="4">
              <call_once fun="NavResurrect()" no="0"/>
              <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="1"/>
            </block>
            <block strip_button="Takeoff-Standby" strip_icon="takeoff.png" group="takeoff" name="Mission.Takeoff-Standby" no="5">
              <exception cond="((stateGetPositionEnu_f())->z>10.000000)" deroute="Mission.Standby"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
            </block>
            <block strip_button="Takeoff-Map" strip_icon="survey.png" group="takeoff" name="Mission.Takeoff-Map" no="6">
              <exception cond="((stateGetPositionEnu_f())->z>10.000000)" deroute="Mission.SurveyPoly"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
            </block>
            <block strip_button="Takeoff-Drop" strip_icon="parachute.png" group="takeoff" name="Mission.Takeoff-Drop" no="7">
              <exception cond="((stateGetPositionEnu_f())->z>10.000000)" deroute="Mission.drop"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
            </block>
            <block strip_button="Takeoff-Water" group="takeoff" name="Mission.Takeoff-Water" no="8">
              <exception cond="((stateGetPositionEnu_f())->z>27.000000)" deroute="Mission.drop_water"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
            </block>
            <block strip_button="Standby" strip_icon="home.png" group="hover" name="Mission.Standby" no="9">
              <stay wp="STDBY" no="0"/>
            </block>
            <block strip_button="LookRobot-FC" strip_icon="lookdown.png" group="hover" name="Mission.GoTennis" no="10">
              <call_once fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_FC)" no="0"/>
              <go wp="CRUISE" no="1"/>
            </block>
            <block name="Mission.LookRobot" no="11">
              <stay climb="nav_descend_vspeed" vmode="climb" wp="FC" until="LessThan((stateGetPositionEnu_f())->z,20)" no="0"/>
              <call_once fun="NavCopyWaypointPositionOnly(WP_CAM,WP_FC)" no="1"/>
            </block>
            <block name="Mission.Vision" no="12">
              <exception cond="!(InsideTENNIS(GetPosX(),GetPosY()))" deroute="Mission.NoVision"/>
              <exception cond="(block_time>60)" deroute="Mission.ComeBackAndVisualLand"/>
              <call_once fun="StartVision()" no="0"/>
              <stay wp="CAM" no="1"/>
            </block>
            <block name="Mission.NoVision" no="13">
              <exception cond="(block_time>60)" deroute="Mission.ComeBackAndLand"/>
              <call_once fun="StartVision()" no="0"/>
              <stay wp="FC" no="1"/>
            </block>
            <block strip_button="ComeBackAndLand" strip_icon="land-right.png" group="hover" name="Mission.ComeBackAndLand" no="14">
              <call_once fun="StopVision()" no="0"/>
              <call_once fun="NavSetWaypointHere(WP_CRUISE)" no="1"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CRUISE" until="((stateGetPositionEnu_f())->z>30)" no="2"/>
              <call_once fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_TD)" no="3"/>
              <go wp="CRUISE" no="4"/>
              <deroute block="Mission.land" no="5"/>
            </block>
            <block name="Mission.ComeBackAndVisualLand" no="15">
              <call_once fun="StopVision()" no="0"/>
              <call_once fun="NavSetWaypointHere(WP_CRUISE)" no="1"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CRUISE" until="((stateGetPositionEnu_f())->z>30)" no="2"/>
              <call_once fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_TD)" no="3"/>
              <call_once fun="NavCopyWaypointPositionOnly(WP_CAM,WP_TD)" no="4"/>
              <go wp="CRUISE" no="5"/>
              <deroute block="Mission.visual_flare" no="6"/>
            </block>
            <block strip_button="Follow-Vision-Geolocation-Results" strip_icon="lookdown.png" group="hover" name="Mission.CAM" no="16">
              <stay wp="CAM" no="0"/>
            </block>
            <block name="Mission.stay_p1" no="17">
              <stay wp="p1" no="0"/>
            </block>
            <block name="Mission.go_p2" no="18">
              <go wp="p2" no="0"/>
              <deroute block="Mission.stay_p1" no="1"/>
            </block>
            <block name="Mission.line_p1_p2" no="19">
              <go from="p1" hmode="route" wp="p2" no="0"/>
              <stay until="(stage_time>10)" wp="p2" no="1"/>
              <go from="p2" hmode="route" wp="p1" no="2"/>
              <deroute block="Mission.stay_p1" no="3"/>
            </block>
            <block pre_call="nav_set_heading_towards_waypoint(WP_CAM)" name="Mission.circle CV" no="20">
              <circle radius="nav_radius" wp="CAM" no="0"/>
            </block>
            <block group="drop" name="Mission.drop" no="21">
              <go wp="DROP" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="DROP" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
              <call_once fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="DROP" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block group="drop" name="Mission.drop_zone1" no="22">
              <go wp="RZ1" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ1" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
              <call_once fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ1" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block group="drop" name="Mission.drop_zone2" no="23">
              <go wp="RZ2" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ2" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
              <call_once fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ2" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block group="drop" name="Mission.drop_zone3" no="24">
              <go wp="RZ3" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ3" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
              <call_once fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ3" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block group="drop" name="Mission.drop_water" no="25">
              <go wp="WD" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="WD" until="LessThan((stateGetPositionEnu_f())->z,8)" no="1"/>
              <call_once fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="WD" until="((stateGetPositionEnu_f())->z>12)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block strip_button="Oval p1-p2-p3-p4" strip_icon="oval.png" group="race" name="Mission.race" no="26">
              <go from="p1" hmode="route" wp="p2" no="0"/>
              <go from="p2" hmode="route" wp="p3" no="1"/>
              <go from="p3" hmode="route" wp="p4" no="2"/>
              <go from="p4" hmode="route" wp="p1" no="3"/>
              <deroute block="Mission.race" no="4"/>
            </block>
            <block strip_button="Line raceA-raceB" strip_icon="line.png" group="race" name="Mission.raceline" no="27">
              <go from="raceA" hmode="route" wp="raceB" no="0"/>
              <go from="raceB" hmode="route" wp="raceA" no="1"/>
              <deroute block="Mission.raceline" no="2"/>
            </block>
            <block group="survey" strip_button="Survey-Polygon-S1-S2-S3-S4" strip_icon="googleearth.png" name="Mission.SurveyPoly" no="28">
              <call_once fun="nav_survey_poly_setup_towards(WP_S1,4,sweep,WP_S2)" no="0"/>
              <deroute block="Mission.Survey Poly RUN" no="1"/>
            </block>
            <block name="Mission.Survey Poly RUN" no="29">
              <exception cond="(PolySurveySweepNum>=5)" deroute="Mission.GoTennis"/>
              <call fun="nav_survey_poly_run()" no="0"/>
            </block>
            <block strip_button="Land Here" strip_icon="downdown.png" group="landing" name="Mission.land_here" no="30">
              <call_once fun="NavCopyWaypoint(WP_CAM,WP_TD)" no="0"/>
              <call_once fun="NavSetWaypointHere(WP_TD)" no="1"/>
              <deroute block="Mission.flare" no="2"/>
            </block>
            <block strip_button="Land at TD" strip_icon="land-right.png" group="landing" name="Mission.land" no="31">
              <go wp="TD" no="0"/>
              <call_once fun="StartVisionLand()" no="1"/>
              <deroute block="Mission.flare" no="2"/>
            </block>
            <block strip_button="VisualLanding-CAM" strip_icon="cam_lock.png" group="landing" name="Mission.visual_flare" no="32">
              <exception cond="NavDetectGround()" deroute="Mission.holding_point"/>
              <exception cond="!(nav_is_in_flight())" deroute="Mission.landed"/>
              <exception cond="!(InsideLAND(GetPosX(),GetPosY()))" deroute="Mission.land"/>
              <call_once fun="NavStartDetectGround()" no="0"/>
              <stay climb="-(0.200000)" vmode="climb" wp="CAM" no="1"/>
              <deroute block="Mission.landed" no="2"/>
            </block>
            <block name="Mission.flare" no="33">
              <exception cond="NavDetectGround()" deroute="Mission.holding_point"/>
              <exception cond="!(nav_is_in_flight())" deroute="Mission.landed"/>
              <call_once fun="NavStartDetectGround()" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="TD" no="1"/>
              <deroute block="Mission.landed" no="2"/>
            </block>
            <block strip_button="Kill" strip_icon="kill.png" group="landing" name="Mission.landed" no="34">
              <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="0"/>
            </block>
            <block name="Mission.land_emergency" no="35">
              <call_once fun="NavSetWaypointHere(WP_ETD)" no="0"/>
              <deroute block="Mission.flare_emergency" no="1"/>
            </block>
            <block name="Mission.flare_emergency" no="36">
              <exception cond="NavDetectGround()" deroute="Mission.landed_emergency"/>
              <exception cond="!(nav_is_in_flight())" deroute="Mission.landed_emergency"/>
              <call_once fun="NavStartDetectGround()" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="ETD" no="1"/>
              <deroute block="Mission.landed" no="2"/>
            </block>
            <block name="Mission.landed_emergency" no="37">
              <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="0"/>
            </block>
            <block name="HOME" no="38">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="38" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="37" block_name="Mission.landed_emergency" stage="0">
            <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="0"/>
          </stage>
          <stage block="36" block_name="Mission.flare_emergency" stage="2">
            <deroute block="Mission.landed" no="2"/>
          </stage>
          <stage block="36" block_name="Mission.flare_emergency" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="ETD" no="1"/>
          </stage>
          <stage block="36" block_name="Mission.flare_emergency" stage="0">
            <call_once fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="35" block_name="Mission.land_emergency" stage="1">
            <deroute block="Mission.flare_emergency" no="1"/>
          </stage>
          <stage block="35" block_name="Mission.land_emergency" stage="0">
            <call_once fun="NavSetWaypointHere(WP_ETD)" no="0"/>
          </stage>
          <stage block="34" block_name="Mission.landed" stage="0">
            <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="0"/>
          </stage>
          <stage block="33" block_name="Mission.flare" stage="2">
            <deroute block="Mission.landed" no="2"/>
          </stage>
          <stage block="33" block_name="Mission.flare" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="TD" no="1"/>
          </stage>
          <stage block="33" block_name="Mission.flare" stage="0">
            <call_once fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="32" block_name="Mission.visual_flare" stage="2">
            <deroute block="Mission.landed" no="2"/>
          </stage>
          <stage block="32" block_name="Mission.visual_flare" stage="1">
            <stay climb="-(0.200000)" vmode="climb" wp="CAM" no="1"/>
          </stage>
          <stage block="32" block_name="Mission.visual_flare" stage="0">
            <call_once fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="31" block_name="Mission.land" stage="2">
            <deroute block="Mission.flare" no="2"/>
          </stage>
          <stage block="31" block_name="Mission.land" stage="1">
            <call_once fun="StartVisionLand()" no="1"/>
          </stage>
          <stage block="31" block_name="Mission.land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="30" block_name="Mission.land_here" stage="2">
            <deroute block="Mission.flare" no="2"/>
          </stage>
          <stage block="30" block_name="Mission.land_here" stage="1">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="1"/>
          </stage>
          <stage block="30" block_name="Mission.land_here" stage="0">
            <call_once fun="NavCopyWaypoint(WP_CAM,WP_TD)" no="0"/>
          </stage>
          <stage block="29" block_name="Mission.Survey Poly RUN" stage="0">
            <call fun="nav_survey_poly_run()" no="0"/>
          </stage>
          <stage block="28" block_name="Mission.SurveyPoly" stage="1">
            <deroute block="Mission.Survey Poly RUN" no="1"/>
          </stage>
          <stage block="28" block_name="Mission.SurveyPoly" stage="0">
            <call_once fun="nav_survey_poly_setup_towards(WP_S1,4,sweep,WP_S2)" no="0"/>
          </stage>
          <stage block="27" block_name="Mission.raceline" stage="2">
            <deroute block="Mission.raceline" no="2"/>
          </stage>
          <stage block="27" block_name="Mission.raceline" stage="1">
            <go from="raceB" hmode="route" wp="raceA" no="1"/>
          </stage>
          <stage block="27" block_name="Mission.raceline" stage="0">
            <go from="raceA" hmode="route" wp="raceB" no="0"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="4">
            <deroute block="Mission.race" no="4"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="3">
            <go from="p4" hmode="route" wp="p1" no="3"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="2">
            <go from="p3" hmode="route" wp="p4" no="2"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="1">
            <go from="p2" hmode="route" wp="p3" no="1"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="0">
            <go from="p1" hmode="route" wp="p2" no="0"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="WD" until="((stateGetPositionEnu_f())->z>12)" no="3"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="2">
            <call_once fun="DropOpen()" no="2"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="WD" until="LessThan((stateGetPositionEnu_f())->z,8)" no="1"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="0">
            <go wp="WD" no="0"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ3" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="2">
            <call_once fun="DropOpen()" no="2"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ3" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="0">
            <go wp="RZ3" no="0"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ2" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="2">
            <call_once fun="DropOpen()" no="2"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ2" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="0">
            <go wp="RZ2" no="0"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ1" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="2">
            <call_once fun="DropOpen()" no="2"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ1" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="0">
            <go wp="RZ1" no="0"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="DROP" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="2">
            <call_once fun="DropOpen()" no="2"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="DROP" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="0">
            <go wp="DROP" no="0"/>
          </stage>
          <stage block="20" block_name="Mission.circle CV" stage="0">
            <circle radius="nav_radius" wp="CAM" no="0"/>
          </stage>
          <stage block="19" block_name="Mission.line_p1_p2" stage="3">
            <deroute block="Mission.stay_p1" no="3"/>
          </stage>
          <stage block="19" block_name="Mission.line_p1_p2" stage="2">
            <go from="p2" hmode="route" wp="p1" no="2"/>
          </stage>
          <stage block="19" block_name="Mission.line_p1_p2" stage="1">
            <stay until="(stage_time>10)" wp="p2" no="1"/>
          </stage>
          <stage block="19" block_name="Mission.line_p1_p2" stage="0">
            <go from="p1" hmode="route" wp="p2" no="0"/>
          </stage>
          <stage block="18" block_name="Mission.go_p2" stage="1">
            <deroute block="Mission.stay_p1" no="1"/>
          </stage>
          <stage block="18" block_name="Mission.go_p2" stage="0">
            <go wp="p2" no="0"/>
          </stage>
          <stage block="17" block_name="Mission.stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="16" block_name="Mission.CAM" stage="0">
            <stay wp="CAM" no="0"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="6">
            <deroute block="Mission.visual_flare" no="6"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="5">
            <go wp="CRUISE" no="5"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="4">
            <call_once fun="NavCopyWaypointPositionOnly(WP_CAM,WP_TD)" no="4"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="3">
            <call_once fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_TD)" no="3"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="2">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CRUISE" until="((stateGetPositionEnu_f())->z>30)" no="2"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="1">
            <call_once fun="NavSetWaypointHere(WP_CRUISE)" no="1"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="0">
            <call_once fun="StopVision()" no="0"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="5">
            <deroute block="Mission.land" no="5"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="4">
            <go wp="CRUISE" no="4"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="3">
            <call_once fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_TD)" no="3"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="2">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CRUISE" until="((stateGetPositionEnu_f())->z>30)" no="2"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="1">
            <call_once fun="NavSetWaypointHere(WP_CRUISE)" no="1"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="0">
            <call_once fun="StopVision()" no="0"/>
          </stage>
          <stage block="13" block_name="Mission.NoVision" stage="1">
            <stay wp="FC" no="1"/>
          </stage>
          <stage block="13" block_name="Mission.NoVision" stage="0">
            <call_once fun="StartVision()" no="0"/>
          </stage>
          <stage block="12" block_name="Mission.Vision" stage="1">
            <stay wp="CAM" no="1"/>
          </stage>
          <stage block="12" block_name="Mission.Vision" stage="0">
            <call_once fun="StartVision()" no="0"/>
          </stage>
          <stage block="11" block_name="Mission.LookRobot" stage="1">
            <call_once fun="NavCopyWaypointPositionOnly(WP_CAM,WP_FC)" no="1"/>
          </stage>
          <stage block="11" block_name="Mission.LookRobot" stage="0">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="FC" until="LessThan((stateGetPositionEnu_f())->z,20)" no="0"/>
          </stage>
          <stage block="10" block_name="Mission.GoTennis" stage="1">
            <go wp="CRUISE" no="1"/>
          </stage>
          <stage block="10" block_name="Mission.GoTennis" stage="0">
            <call_once fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_FC)" no="0"/>
          </stage>
          <stage block="9" block_name="Mission.Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="8" block_name="Mission.Takeoff-Water" stage="1">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
          </stage>
          <stage block="8" block_name="Mission.Takeoff-Water" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="7" block_name="Mission.Takeoff-Drop" stage="1">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
          </stage>
          <stage block="7" block_name="Mission.Takeoff-Drop" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="6" block_name="Mission.Takeoff-Map" stage="1">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
          </stage>
          <stage block="6" block_name="Mission.Takeoff-Map" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="5" block_name="Mission.Takeoff-Standby" stage="1">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
          </stage>
          <stage block="5" block_name="Mission.Takeoff-Standby" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="4" block_name="Mission.Start Engine" stage="1">
            <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="1"/>
          </stage>
          <stage block="4" block_name="Mission.Start Engine" stage="0">
            <call_once fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="3" block_name="Mission.holding_point" stage="1">
            <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="1"/>
          </stage>
          <stage block="3" block_name="Mission.holding_point" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="2" block_name="Mission.GeoInit" stage="2">
            <call_once fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="2" block_name="Mission.GeoInit" stage="0">
            <while cond="LessThan(NavBlockTime(),10)" no="0"/>
          </stage>
          <stage block="1" block_name="Mission.WaitGPS" stage="1">
            <while cond="!(GpsFixValid())" no="1"/>
          </stage>
          <stage block="1" block_name="Mission.WaitGPS" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings NAME="control">
            <dl_settings NAME="dc">
              <dl_setting VAR="0" STEP="1" SHORTNAME="Shutter" MODULE="digital_cam/dc" MIN="0" MAX="255" HANDLER="send_command">
                <strip_button VALUE="32" NAME="Photo" ICON="digital-camera.png" GROUP="dc"/>
              </dl_setting>
              <dl_setting VAR="dc_autoshoot" VALUES="STOP|PERIODIC|DISTANCE|EXT_TRIG" STEP="1" MIN="0" MAX="3">
                <strip_button VALUE="1" NAME="Start Autoshoot" ICON="dcstart.png" GROUP="dc"/>
                <strip_button VALUE="0" NAME="Stop Autoshoot" ICON="dcstop.png" GROUP="dc"/>
              </dl_setting>
              <dl_setting VAR="dc_autoshoot_period" UNIT="sec" STEP="0.5" SHORTNAME="Periodic" PARAM="DC_AUTOSHOOT_PERIOD" MIN="0.1" MAX="60"/>
              <dl_setting VAR="dc_distance_interval" UNIT="meter" STEP="1" SHORTNAME="dist" PARAM="DC_AUTOSHOOT_DISTANCE_INTERVAL" MIN="0" MAX="255"/>
              <dl_setting VAR="dc_survey_interval" STEP="5" SHORTNAME="Survey-Interval" MODULE="digital_cam/dc" MIN="0" MAX="250" HANDLER="Survey"/>
              <dl_setting VAR="dc_circle_interval" STEP="5" SHORTNAME="Circle-Interval" MODULE="digital_cam/dc" MIN="5" MAX="90" HANDLER="Circle"/>
              <dl_setting VAR="dc_cam_tracing" STEP="1" SHORTNAME="Cam-Tracing" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="video">
              <dl_setting VAR="video_capture_record_video" STEP="1" SHORTNAME="record_video" MODULE="computer_vision/video_capture" MIN="0" MAX="1">
                <strip_button VALUE="1" NAME="Start video capture" ICON="dcstart.png" GROUP="cv"/>
                <strip_button VALUE="0" NAME="Stop video capture" ICON="dcstop.png" GROUP="cv"/>
              </dl_setting>
              <dl_setting VAR="video_capture_take_shot" STEP="1" SHORTNAME="take_shot" MODULE="computer_vision/video_capture" MIN="0" MAX="1">
                <strip_button VALUE="1" NAME="Save Image" ICON="digital-camera.png" GROUP="cv"/>
              </dl_setting>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="ColorFilter">
              <dl_setting VAR="color_lum_min" STEP="1" SHORTNAME="y_min" MIN="0" MAX="255"/>
              <dl_setting VAR="color_lum_max" STEP="1" SHORTNAME="y_max" MIN="0" MAX="255"/>
              <dl_setting VAR="color_cb_min" STEP="1" SHORTNAME="u_min" MIN="0" MAX="255"/>
              <dl_setting VAR="color_cb_max" STEP="1" SHORTNAME="u_max" MIN="0" MAX="255"/>
              <dl_setting VAR="color_cr_min" STEP="1" SHORTNAME="v_min" MIN="0" MAX="255"/>
              <dl_setting VAR="color_cr_max" STEP="1" SHORTNAME="v_max" MIN="0" MAX="255"/>
              <dl_setting VAR="marker_size" STEP="1" SHORTNAME="marker" MIN="1" MAX="20"/>
              <dl_setting VAR="geofilter_length" STEP="1" SHORTNAME="filter" MIN="1" MAX="100"/>
              <dl_setting VAR="record_video" VALUES="OFF|ON" STEP="1" SHORTNAME="record" MIN="0" MAX="1"/>
              <dl_setting VAR="cv_blob_locator_reset" STEP="1" MODULE="computer_vision/cv_blob_locator" MIN="0" MAX="1" HANDLER="GeoReset">
                <strip_button VALUE="1" NAME="Reset Geoprojection Filter" ICON="resurrect.png" GROUP="cv"/>
              </dl_setting>
              <dl_setting VAR="cv_blob_locator_type" VALUES="NONE|BLOB|IMAVMARKER|WINDOW" STEP="1" MODULE="computer_vision/cv_blob_locator" MIN="0" MAX="2">
                <strip_button VALUE="0" NAME="CV: None" ICON="off.png" GROUP="cv"/>
                <strip_button VALUE="1" NAME="CV: Colored Blob" ICON="cv_blob.png" GROUP="cv"/>
                <strip_button VALUE="2" NAME="CV: Marker" ICON="cv_marker.png" GROUP="cv"/>
                <strip_button VALUE="3" NAME="CV: Window Finder" ICON="cv_window.png" GROUP="cv"/>
              </dl_setting>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="air_data">
              <dl_setting VAR="air_data.qnh" STEP="1" SHORTNAME="QNH" MODULE="air_data/air_data" MIN="800" MAX="1200"/>
              <dl_setting VAR="air_data.tas_factor" TYPE="float" STEP="0.01" SHORTNAME="TASfactor" PERSISTENT="true" PARAM="AIR_DATA_TAS_FACTOR" MODULE="air_data/air_data" MIN="0.8" MAX="1.3"/>
              <dl_setting VAR="air_data.calc_qnh_once" STEP="1" SHORTNAME="calcQNH" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_airspeed" TYPE="uint8" STEP="1" SHORTNAME="calcAirspeed" PERSISTENT="true" PARAM="AIR_DATA_CALC_AIRSPEED" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_tas_factor" TYPE="uint8" STEP="1" SHORTNAME="calcTASfactor" PERSISTENT="true" PARAM="AIR_DATA_CALC_TAS_FACTOR" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_amsl_baro" TYPE="uint8" STEP="1" SHORTNAME="calcAMSL" PERSISTENT="true" PARAM="AIR_DATA_CALC_AMSL_BARO" MODULE="air_data/air_data" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="geo_mag">
              <dl_setting VAR="geo_mag.calc_once" VALUES="OFF|CALC" STEP="1" SHORTNAME="calcNow" MODULE="geo_mag/geo_mag" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="Ins Extended">
            <dl_settings NAME="INS">
              <dl_setting VAR="vff.accel_noise" STEP="0.1" SHORTNAME="accel_noise" MODULE="subsystems/ins/vf_extended_float" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_baro" STEP="0.1" SHORTNAME="r_baro" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_alt" STEP="0.1" SHORTNAME="r_alt" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_obs_height" STEP="0.1" SHORTNAME="r_obs_height" MIN="0" MAX="10"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
              <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
              <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
              <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
              <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="indi">
              <dl_setting VAR="indi.reference_acceleration.err_p" STEP="1" SHORTNAME="kp_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_P" MODULE="stabilization/stabilization_indi_simple" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_p" STEP="0.1" SHORTNAME="kd_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.p" STEP="0.001" SHORTNAME="ctl_eff_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_P" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.reference_acceleration.err_q" STEP="1" SHORTNAME="kp_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_Q" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_q" STEP="0.1" SHORTNAME="kd_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.q" STEP="0.001" SHORTNAME="ctl_eff_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_Q" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.reference_acceleration.err_r" STEP="1" SHORTNAME="kp_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_R" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_r" STEP="0.1" SHORTNAME="kd_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.r" STEP="0.001" SHORTNAME="ctl_eff_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_R" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.g2" STEP="0.01" SHORTNAME="g2" PERSISTENT="true" PARAM="STABILIZATION_INDI_G2_R" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.adaptive" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="use_adaptive" PERSISTENT="true" PARAM="STABILIZATION_INDI_USE_ADAPTIVE" MIN="0" MAX="1"/>
              <dl_setting VAR="indi.max_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_rate" PARAM="STABILIZATION_INDI_MAX_RATE" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
              <dl_setting VAR="indi.attitude_max_yaw_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_yaw_rate_attitude" PARAM="STABILIZATION_INDI_MAX_R" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="NAV">
              <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
              <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
              <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MIN="-50" MAX="50"/>
              <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MIN="0" MAX="10.0"/>
              <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MIN="-10.0" MAX="0.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Vert Loop">
              <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
              <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MIN="0.2" MAX="0.8"/>
              <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MIN="0" MAX="1"/>
              <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
            <dl_settings NAME="Horiz Loop">
              <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="true" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
              <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
              <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MIN="0" MAX="1"/>
              <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
              <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
              <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
              <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
              <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
              <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="bebop_indi">
        <description>Bebop with MavLink</description>
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="bebop">
            <define VALUE="0.1450" NAME="STABILIZATION_INDI_G2_R"/>
          </target>
          <target NAME="nps" BOARD="pc">
            <module TYPE="jsbsim" NAME="fdm"/>
            <module NAME="udp"/>
            <define VALUE="0.0" NAME="STABILIZATION_INDI_G2_R"/>
          </target>
          <module TYPE="transparent_udp" NAME="telemetry"/>
          <module TYPE="datalink" NAME="radio_control"/>
          <module NAME="motor_mixing"/>
          <module TYPE="bebop" NAME="actuators"/>
          <module TYPE="bebop" NAME="imu"/>
          <module TYPE="furuno" NAME="gps"/>
          <module TYPE="indi_simple" NAME="stabilization"/>
          <module TYPE="int_cmpl_quat" NAME="ahrs">
            <configure VALUE="TRUE" NAME="USE_MAGNETOMETER"/>
            <define VALUE="FALSE" NAME="AHRS_USE_GPS_HEADING"/>
          </module>
          <module TYPE="extended" NAME="ins"/>
          <module NAME="geo_mag"/>
          <module NAME="air_data"/>
          <module NAME="send_imu_mag_current"/>
          <module NAME="bebop_cam"/>
          <module NAME="cv_blob_locator">
            <define VALUE="bottom_camera" NAME="BLOB_LOCATOR_CAMERA"/>
          </module>
          <module TYPE="survey_rectangle_rotorcraft" NAME="nav">
            <define VALUE="10" NAME="RECTANGLE_SURVEY_DEFAULT_SWEEP"/>
          </module>
          <module TYPE="survey_poly_rotorcraft" NAME="nav">
            <define VALUE="10" NAME="POLYSURVEY_DEFAULT_DISTANCE"/>
          </module>
          <module NAME="video_capture">
            <define VALUE="bottom_camera" NAME="VIDEO_CAPTURE_CAMERA"/>
          </module>
          <module NAME="digital_cam_video">
            <define VALUE="5" NAME="DC_AUTOSHOOT_DISTANCE_INTERVAL"/>
          </module>
          <module NAME="video_exif"/>
          <module NAME="mavlink">
            <define VALUE="5000" NAME="UDP1_PORT_OUT"/>
            <define VALUE="5000" NAME="UDP1_PORT_IN"/>
            <define VALUE="192.168.42.2" NAME="UDP1_HOST"/>
            <configure VALUE="UDP1" NAME="MAVLINK_PORT"/>
            <define VALUE="1" NAME="MAVLINK_SYSID"/>
          </module>
        </firmware>
        <commands>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="6000"/>
        </commands>
        <servos DRIVER="Default">
          <servo NO="0" NEUTRAL="3000" NAME="TOP_LEFT" MIN="3000" MAX="12000"/>
          <servo NO="1" NEUTRAL="3000" NAME="TOP_RIGHT" MIN="3000" MAX="12000"/>
          <servo NO="2" NEUTRAL="3000" NAME="BOTTOM_RIGHT" MIN="3000" MAX="12000"/>
          <servo NO="3" NEUTRAL="3000" NAME="BOTTOM_LEFT" MIN="3000" MAX="12000"/>
        </servos>
        <section PREFIX="MOTOR_MIXING_" NAME="MIXING">
          <define VALUE="0" NAME="TRIM_ROLL"/>
          <define VALUE="0" NAME="TRIM_PITCH"/>
          <define VALUE="0" NAME="TRIM_YAW"/>
          <define VALUE="QUAD_X" NAME="TYPE"/>
        </section>
        <command_laws>
          <call FUN="motor_mixing_run(autopilot_get_motors_on(),FALSE,values)"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_LEFT]" SERVO="TOP_LEFT"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_RIGHT]" SERVO="TOP_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_RIGHT]" SERVO="BOTTOM_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_LEFT]" SERVO="BOTTOM_LEFT"/>
        </command_laws>
        <section PREFIX="AIR_DATA_" NAME="AIR_DATA">
          <define VALUE="FALSE" NAME="CALC_AIRSPEED"/>
          <define VALUE="FALSE" NAME="CALC_TAS_FACTOR"/>
          <define VALUE="TRUE" NAME="CALC_AMSL_BARO"/>
        </section>
        <include HREF="conf/airframes/tudelft/calibrations/bebop5.xml"/>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.3892503" NAME="H_X"/>
          <define VALUE="0.0017972" NAME="H_Y"/>
          <define VALUE="0.9211303" NAME="H_Z"/>
        </section>
        <section PREFIX="INS_" NAME="INS">
          <define VALUE="2.2" NAME="SONAR_MAX_RANGE"/>
          <define VALUE="TRUE" NAME="SONAR_UPDATE_ON_AGL"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="RC_SETPOINT">
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="300" UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="0" NAME="DEADBAND_A"/>
          <define VALUE="0" NAME="DEADBAND_E"/>
          <define VALUE="50" NAME="DEADBAND_R"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="ATTITUDE_REFERENCE">
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.9" NAME="REF_ZETA_P"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.9" NAME="REF_ZETA_Q"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.9" NAME="REF_ZETA_R"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_RDOT"/>
        </section>
        <section PREFIX="STABILIZATION_INDI_" NAME="STABILIZATION_ATTITUDE_INDI">
          <define VALUE="0.0639" NAME="G1_P"/>
          <define VALUE="0.0361" NAME="G1_Q"/>
          <define VALUE="0.0022" NAME="G1_R"/>
          <define VALUE="600.0" NAME="REF_ERR_P"/>
          <define VALUE="600.0" NAME="REF_ERR_Q"/>
          <define VALUE="600.0" NAME="REF_ERR_R"/>
          <define VALUE="28.0" NAME="REF_RATE_P"/>
          <define VALUE="28.0" NAME="REF_RATE_Q"/>
          <define VALUE="28.0" NAME="REF_RATE_R"/>
          <define VALUE="8.0" NAME="FILT_CUTOFF"/>
          <define VALUE="8.0" NAME="FILT_CUTOFF_R"/>
          <define VALUE="0.1" NAME="ACT_DYN_P"/>
          <define VALUE="0.1" NAME="ACT_DYN_Q"/>
          <define VALUE="0.1" NAME="ACT_DYN_R"/>
          <define VALUE="FALSE" NAME="USE_ADAPTIVE"/>
          <define VALUE="0.0001" NAME="ADAPTIVE_MU"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="283" NAME="HOVER_KP"/>
          <define VALUE="82" NAME="HOVER_KD"/>
          <define VALUE="20" NAME="HOVER_KI"/>
          <define VALUE="0.655" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="TRUE" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="20" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="2" UNIT="m/s" NAME="REF_MAX_SPEED"/>
          <define VALUE="79" NAME="PGAIN"/>
          <define VALUE="100" NAME="DGAIN"/>
          <define VALUE="30" NAME="IGAIN"/>
        </section>
        <section PREFIX="NAV_" NAME="NAVIGATION">
          <define VALUE="2.5" NAME="CLIMB_VSPEED"/>
          <define VALUE="-1.0" NAME="DESCEND_VSPEED"/>
        </section>
        <section PREFIX="NPS_" NAME="SIMULATOR">
          <define VALUE="nw_motor, ne_motor, se_motor, sw_motor" TYPE="string[]" NAME="ACTUATOR_NAMES"/>
          <define VALUE="simple_x_quad_ccw" TYPE="string" NAME="JSBSIM_MODEL"/>
          <define VALUE="nps_sensors_params_default.h" TYPE="string" NAME="SENSORS_PARAMS"/>
        </section>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_NAV" NAME="MODE_STARTUP"/>
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_ATTITUDE_Z_HOLD" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_NAV" NAME="MODE_AUTO2"/>
        </section>
        <section NAME="BAT">
          <define VALUE="8700" NAME="MILLIAMP_AT_FULL_THROTTLE"/>
          <define VALUE="9.9" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="11.0" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="11.1" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="12.4" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
      </airframe>
      <telemetry>
        <process TYPE="mavlink" NAME="Mavlink">
          <mode NAME="default">
            <message PERIOD="0.5" NAME="HEARTBEAT"/>
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.2" NAME="SYS_STATUS"/>
            <message PERIOD="2.0" NAME="SYSTEM_TIME"/>
            <message PERIOD="0.5" NAME="ATTITUDE"/>
            <message PERIOD="1.5" NAME="ATTITUDE_QUATERNION"/>
            <message PERIOD="0.8" NAME="LOCAL_POSITION_NED"/>
            <message PERIOD="0.9" NAME="GLOBAL_POSITION_INT"/>
            <message PERIOD="4.0" NAME="BATTERY_STATUS"/>
            <message PERIOD="5.1" NAME="GPS_GLOBAL_ORIGIN"/>
            <message PERIOD="1.3" NAME="VFR_HUD"/>
          </mode>
          <mode NAME="RC">
            <message PERIOD="0.5" NAME="HEARTBEAT"/>
            <message PERIOD="1.2" NAME="SYS_STATUS"/>
            <message PERIOD="0.5" NAME="ATTITUDE"/>
            <message PERIOD="0.9" NAME="GLOBAL_POSITION_INT"/>
            <message PERIOD="4.0" NAME="BATTERY_STATUS"/>
            <message PERIOD="1.2" NAME="RC_CHANNELS"/>
          </mode>
          <mode NAME="GPS">
            <message PERIOD="0.5" NAME="HEARTBEAT"/>
            <message PERIOD="1.2" NAME="SYS_STATUS"/>
            <message PERIOD="0.5" NAME="ATTITUDE"/>
            <message PERIOD="0.9" NAME="GLOBAL_POSITION_INT"/>
            <message PERIOD="1.0" NAME="GPS_RAW_INT"/>
            <message PERIOD="5.1" NAME="GPS_GLOBAL_ORIGIN"/>
            <message PERIOD="2.3" NAME="GPS_STATUS"/>
          </mode>
        </process>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.25" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="BEBOP_ACTUATORS"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_FLOAT"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="19"/>
            <dl_setting VAR="autopilot.kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot.power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot.mode" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="19" HANDLER="SetModeHandler"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps|test_ahrs">
        <dl_settings>
          <dl_settings NAME="AHRS">
            <dl_setting VAR="ahrs_output_idx" VALUES="PRIMARY|SECONDARY" STEP="1" SHORTNAME="ahrs output" MODULE="subsystems/ahrs" MIN="0" MAX="1" HANDLER="switch"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Horiz Loop">
            <dl_setting VAR="gh_ref.max_speed" STEP="0.1" SHORTNAME="max_speed" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed">
              <strip_button VALUE="1" NAME="V1" GROUP="speed"/>
              <strip_button VALUE="2" NAME="V2" GROUP="speed"/>
              <strip_button VALUE="5" NAME="V5" GROUP="speed"/>
              <strip_button VALUE="10" NAME="V10" GROUP="speed"/>
            </dl_setting>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="Bebop_Chris" ac_id="151" airframe="airframes/CDW/cdw_bebop.xml" radio="radios/dummy.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/tudelft/rotorcraft_survey_imav2015_competition.xml" settings="settings/rotorcraft_basic.xml settings/control/rotorcraft_speed.xml" settings_modules="modules/digital_cam_video.xml modules/video_capture.xml modules/nav_survey_poly_rotorcraft.xml [modules/nav_survey_rectangle_rotorcraft.xml] modules/video_rtp_stream.xml modules/cv_blob_locator.xml modules/bebop_cam.xml modules/air_data.xml [modules/geo_mag.xml] modules/ins_extended.xml modules/ahrs_int_cmpl_quat.xml modules/stabilization_indi_simple.xml modules/nav_basic_rotorcraft.xml modules/guidance_rotorcraft.xml modules/gps.xml modules/imu_common.xml" gui_color="#f84eb57ae827">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitMM" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1120" MIN="1120" MAX="2000" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="2" name="IMAV2015_competition_outdoor" max_dist_from_home="500" lon0="6.04692" lat0="50.788595" ground_alt="260" alt="290">
          <modules/>
          <exceptions>
            <exception cond="(electrical.bat_low&&(exception_flag[0]==0))" deroute="Mission.ComeBackAndLand" exec="set_exception_flag(0)"/>
            <exception cond="(electrical.bat_critical&&(exception_flag[1]==0))" deroute="Mission.land_here" exec="set_exception_flag(1)"/>
            <exception cond="((((!(InsideRED(GetPosX(),GetPosY()))&&!((nav_block==IndexOfBlock('Mission.flare'))))&&!((nav_block==IndexOfBlock('Mission.landed'))))&&!((nav_block==IndexOfBlock('Mission.WaitGPS'))))&&!((nav_block==IndexOfBlock('Mission.GeoInit'))))" deroute="Mission.land_emergency"/>
          </exceptions>
          <header>#include &quot;autopilot.h&quot;
#include &quot;subsystems/electrical.h&quot;
#ifdef dc_Survey
#define LINE_START_FUNCTION dc_Survey(dc_distance_interval);
#define LINE_STOP_FUNCTION {dc_autoshoot = DC_AUTOSHOOT_STOP;}
#endif
#ifndef DropOpen
#define DropOpen() FALSE
#endif
#ifndef StartVision
#define StartVision() FALSE
#endif
#ifndef StartVisionLand
#define StartVisionLand() FALSE
#endif
#ifndef StopVision
#define StopVision() FALSE
#endif
#define WpAlt(X) (30)</header>
          <waypoints>
            <waypoint name="_PLATE1" lon="6.04674224830944" lat="50.7888090239206" x="-11.57" y="24.29"/>
            <waypoint name="_PLATE2" lon="6.04647268082583" lat="50.7890460391004" x="-29.52" y="51.40"/>
            <waypoint name="_PLATE3" lon="6.04631880264475" lat="50.7888723417903" x="-41.13" y="32.53"/>
            <waypoint y=".0" x="0.0" name="HOME"/>
            <waypoint y="15.4" x="-7.6" name="CLIMB"/>
            <waypoint y="24.0" x="-3.7" name="STDBY"/>
            <waypoint name="raceA" lon="6.047899" lat="50.790483" x="77.38" y="207.13"/>
            <waypoint name="raceB" lon="6.050200" lat="50.791800" x="245.37" y="347.07"/>
            <waypoint name="WG" lon="6.047431" lat="50.789794" x="41.34" y="131.85"/>
            <waypoint name="WD" lon="6.04677769236132" lat="50.7889307058111" height="30" x="-8.54" y="37.72"/>
            <waypoint name="DROP" lon="6.04652336854142" lat="50.788775526101" height="15" x="-27.15" y="21.19"/>
            <waypoint name="RZ1" lon="6.04652336854142" lat="50.788775526101" height="15" x="-27.15" y="21.19"/>
            <waypoint name="RZ2" lon="6.04640018582595" lat="50.7889170568219" height="15" x="-35.20" y="37.27"/>
            <waypoint name="RZ3" lon="6.04642327267965" lat="50.7889755961272" height="15" x="-33.31" y="43.71"/>
            <waypoint name="FC" lon="6.047118" lat="50.789522" height="20" x="18.07" y="102.50"/>
            <waypoint y="95.0" x="27.5" name="CAM" height="20"/>
            <waypoint name="S1" lon="6.046721" lat="50.788597" x="-14.01" y="0.78"/>
            <waypoint name="S2" lon="6.045944" lat="50.788973" x="-67.10" y="44.77"/>
            <waypoint name="S3" lon="6.046330" lat="50.789323" x="-38.34" y="82.59"/>
            <waypoint name="S4" lon="6.047113" lat="50.788917" x="15.03" y="35.25"/>
            <waypoint name="p1" lon="6.047864" lat="50.790483" x="74.91" y="207.23"/>
            <waypoint name="p2" lon="6.047897" lat="50.790463" x="77.15" y="204.91"/>
            <waypoint name="p3" lon="6.050232" lat="50.791799" x="247.62" y="346.87"/>
            <waypoint name="p4" lon="6.050201" lat="50.791818" x="245.52" y="349.07"/>
            <waypoint y="-55.4" x="19.2" name="CRUISE" height="25"/>
            <waypoint name="TD" lon="6.04695109268497" lat="50.7887171157922" height="15" x="2.73" y="13.49"/>
            <waypoint y="0" x="0" name="ETD" height="15"/>
            <waypoint name="_green1A" lon="6.046879" lat="50.790144" x="3.99" y="172.32"/>
            <waypoint name="_green1B" lon="6.047844" lat="50.789748" x="70.24" y="125.58"/>
            <waypoint name="_green1C" lon="6.047072" lat="50.789058" x="12.77" y="51.04"/>
            <waypoint name="_green1D" lon="6.047391" lat="50.788919" x="34.63" y="34.69"/>
            <waypoint name="_green1E" lon="6.046880" lat="50.788477" x="-3.34" y="-13.01"/>
            <waypoint name="_green1F" lon="6.045554" lat="50.789113" x="-93.96" y="61.43"/>
            <waypoint name="_green2A" lon="6.050405" lat="50.792252" x="261.82" y="396.74"/>
            <waypoint name="_green2B" lon="6.050962" lat="50.791915" x="299.57" y="357.71"/>
            <waypoint name="_green2C" lon="6.047761" lat="50.790077" x="65.85" y="162.39"/>
            <waypoint name="_green2D" lon="6.047251" lat="50.790426" x="31.46" y="202.62"/>
            <waypoint name="_red1" lon="6.050093" lat="50.792552" x="241.16" y="430.97"/>
            <waypoint name="_red2" lon="6.051268" lat="50.791882" x="320.98" y="353.18"/>
            <waypoint name="_red3" lon="6.047834" lat="50.789988" x="70.60" y="152.29"/>
            <waypoint name="_red4" lon="6.048204" lat="50.789781" x="95.75" y="128.23"/>
            <waypoint name="_red5" lon="6.047626" lat="50.788865" x="50.95" y="28.03"/>
            <waypoint name="_red6" lon="6.046744" lat="50.788209" x="-14.12" y="-42.42"/>
            <waypoint name="_red7" lon="6.045032" lat="50.789046" x="-131.04" y="55.46"/>
            <waypoint name="_red8" lon="6.046338" lat="50.790416" x="-32.92" y="204.08"/>
            <waypoint name="_vision1" lon="6.047338" lat="50.789622" x="34.02" y="112.99"/>
            <waypoint name="_vision2" lon="6.047115" lat="50.789352" x="17.11" y="83.61"/>
            <waypoint name="_vision3" lon="6.046932" lat="50.789443" x="4.61" y="94.24"/>
            <waypoint name="_vision4" lon="6.047205" lat="50.789662" x="24.82" y="117.82"/>
            <waypoint name="_land1" lon="6.046939" lat="50.788606" x="1.39" y="1.17"/>
            <waypoint name="_land2" lon="6.046810" lat="50.788686" x="-7.35" y="10.43"/>
            <waypoint name="_land3" lon="6.046949" lat="50.788813" x="3.01" y="24.15"/>
            <waypoint name="_land4" lon="6.047124" lat="50.788737" x="15.01" y="15.21"/>
          </waypoints>
          <sectors>
            <sector name="RED" color="red">
              <corner name="_red1"/>
              <corner name="_red2"/>
              <corner name="_red3"/>
              <corner name="_red4"/>
              <corner name="_red5"/>
              <corner name="_red6"/>
              <corner name="_red7"/>
              <corner name="_red8"/>
            </sector>
            <sector name="GREEN1" color="green">
              <corner name="_green1A"/>
              <corner name="_green1B"/>
              <corner name="_green1C"/>
              <corner name="_green1D"/>
              <corner name="_green1E"/>
              <corner name="_green1F"/>
            </sector>
            <sector name="GREEN2" color="green">
              <corner name="_green2A"/>
              <corner name="_green2B"/>
              <corner name="_green2C"/>
              <corner name="_green2D"/>
            </sector>
            <sector name="TENNIS" color="green">
              <corner name="_vision1"/>
              <corner name="_vision2"/>
              <corner name="_vision3"/>
              <corner name="_vision4"/>
            </sector>
            <sector name="LAND" color="green">
              <corner name="_land1"/>
              <corner name="_land2"/>
              <corner name="_land3"/>
              <corner name="_land4"/>
            </sector>
          </sectors>
          <blocks>
            <block name="Dummy" no="0"/>
            <block name="Mission.WaitGPS" no="1">
              <call_once fun="NavKillThrottle()" no="0"/>
              <while cond="!(GpsFixValid())" no="1"/>
            </block>
            <block name="Mission.GeoInit" no="2">
              <while cond="LessThan(NavBlockTime(),10)" no="0"/>
              <call_once fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Mission.holding_point" no="3">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="1"/>
            </block>
            <block strip_button="Start Engine" strip_icon="resurrect.png" group="engine" name="Mission.Start Engine" no="4">
              <call_once fun="NavResurrect()" no="0"/>
              <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="1"/>
            </block>
            <block strip_button="Takeoff-Standby" strip_icon="takeoff.png" group="takeoff" name="Mission.Takeoff-Standby" no="5">
              <exception cond="((stateGetPositionEnu_f())->z>10.000000)" deroute="Mission.Standby"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
            </block>
            <block strip_button="Takeoff-Map" strip_icon="survey.png" group="takeoff" name="Mission.Takeoff-Map" no="6">
              <exception cond="((stateGetPositionEnu_f())->z>10.000000)" deroute="Mission.SurveyPoly"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
            </block>
            <block strip_button="Takeoff-Drop" strip_icon="parachute.png" group="takeoff" name="Mission.Takeoff-Drop" no="7">
              <exception cond="((stateGetPositionEnu_f())->z>10.000000)" deroute="Mission.drop"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
            </block>
            <block strip_button="Takeoff-Water" group="takeoff" name="Mission.Takeoff-Water" no="8">
              <exception cond="((stateGetPositionEnu_f())->z>27.000000)" deroute="Mission.drop_water"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
            </block>
            <block strip_button="Standby" strip_icon="home.png" group="hover" name="Mission.Standby" no="9">
              <stay wp="STDBY" no="0"/>
            </block>
            <block strip_button="LookRobot-FC" strip_icon="lookdown.png" group="hover" name="Mission.GoTennis" no="10">
              <call_once fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_FC)" no="0"/>
              <go wp="CRUISE" no="1"/>
            </block>
            <block name="Mission.LookRobot" no="11">
              <stay climb="nav_descend_vspeed" vmode="climb" wp="FC" until="LessThan((stateGetPositionEnu_f())->z,20)" no="0"/>
              <call_once fun="NavCopyWaypointPositionOnly(WP_CAM,WP_FC)" no="1"/>
            </block>
            <block name="Mission.Vision" no="12">
              <exception cond="!(InsideTENNIS(GetPosX(),GetPosY()))" deroute="Mission.NoVision"/>
              <exception cond="(block_time>60)" deroute="Mission.ComeBackAndVisualLand"/>
              <call_once fun="StartVision()" no="0"/>
              <stay wp="CAM" no="1"/>
            </block>
            <block name="Mission.NoVision" no="13">
              <exception cond="(block_time>60)" deroute="Mission.ComeBackAndLand"/>
              <call_once fun="StartVision()" no="0"/>
              <stay wp="FC" no="1"/>
            </block>
            <block strip_button="ComeBackAndLand" strip_icon="land-right.png" group="hover" name="Mission.ComeBackAndLand" no="14">
              <call_once fun="StopVision()" no="0"/>
              <call_once fun="NavSetWaypointHere(WP_CRUISE)" no="1"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CRUISE" until="((stateGetPositionEnu_f())->z>30)" no="2"/>
              <call_once fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_TD)" no="3"/>
              <go wp="CRUISE" no="4"/>
              <deroute block="Mission.land" no="5"/>
            </block>
            <block name="Mission.ComeBackAndVisualLand" no="15">
              <call_once fun="StopVision()" no="0"/>
              <call_once fun="NavSetWaypointHere(WP_CRUISE)" no="1"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CRUISE" until="((stateGetPositionEnu_f())->z>30)" no="2"/>
              <call_once fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_TD)" no="3"/>
              <call_once fun="NavCopyWaypointPositionOnly(WP_CAM,WP_TD)" no="4"/>
              <go wp="CRUISE" no="5"/>
              <deroute block="Mission.visual_flare" no="6"/>
            </block>
            <block strip_button="Follow-Vision-Geolocation-Results" strip_icon="lookdown.png" group="hover" name="Mission.CAM" no="16">
              <stay wp="CAM" no="0"/>
            </block>
            <block name="Mission.stay_p1" no="17">
              <stay wp="p1" no="0"/>
            </block>
            <block name="Mission.go_p2" no="18">
              <go wp="p2" no="0"/>
              <deroute block="Mission.stay_p1" no="1"/>
            </block>
            <block name="Mission.line_p1_p2" no="19">
              <go from="p1" hmode="route" wp="p2" no="0"/>
              <stay until="(stage_time>10)" wp="p2" no="1"/>
              <go from="p2" hmode="route" wp="p1" no="2"/>
              <deroute block="Mission.stay_p1" no="3"/>
            </block>
            <block pre_call="nav_set_heading_towards_waypoint(WP_CAM)" name="Mission.circle CV" no="20">
              <circle radius="nav_radius" wp="CAM" no="0"/>
            </block>
            <block group="drop" name="Mission.drop" no="21">
              <go wp="DROP" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="DROP" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
              <call_once fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="DROP" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block group="drop" name="Mission.drop_zone1" no="22">
              <go wp="RZ1" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ1" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
              <call_once fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ1" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block group="drop" name="Mission.drop_zone2" no="23">
              <go wp="RZ2" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ2" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
              <call_once fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ2" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block group="drop" name="Mission.drop_zone3" no="24">
              <go wp="RZ3" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ3" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
              <call_once fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ3" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block group="drop" name="Mission.drop_water" no="25">
              <go wp="WD" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="WD" until="LessThan((stateGetPositionEnu_f())->z,8)" no="1"/>
              <call_once fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="WD" until="((stateGetPositionEnu_f())->z>12)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block strip_button="Oval p1-p2-p3-p4" strip_icon="oval.png" group="race" name="Mission.race" no="26">
              <go from="p1" hmode="route" wp="p2" no="0"/>
              <go from="p2" hmode="route" wp="p3" no="1"/>
              <go from="p3" hmode="route" wp="p4" no="2"/>
              <go from="p4" hmode="route" wp="p1" no="3"/>
              <deroute block="Mission.race" no="4"/>
            </block>
            <block strip_button="Line raceA-raceB" strip_icon="line.png" group="race" name="Mission.raceline" no="27">
              <go from="raceA" hmode="route" wp="raceB" no="0"/>
              <go from="raceB" hmode="route" wp="raceA" no="1"/>
              <deroute block="Mission.raceline" no="2"/>
            </block>
            <block group="survey" strip_button="Survey-Polygon-S1-S2-S3-S4" strip_icon="googleearth.png" name="Mission.SurveyPoly" no="28">
              <call_once fun="nav_survey_poly_setup_towards(WP_S1,4,sweep,WP_S2)" no="0"/>
              <deroute block="Mission.Survey Poly RUN" no="1"/>
            </block>
            <block name="Mission.Survey Poly RUN" no="29">
              <exception cond="(PolySurveySweepNum>=5)" deroute="Mission.GoTennis"/>
              <call fun="nav_survey_poly_run()" no="0"/>
            </block>
            <block strip_button="Land Here" strip_icon="downdown.png" group="landing" name="Mission.land_here" no="30">
              <call_once fun="NavCopyWaypoint(WP_CAM,WP_TD)" no="0"/>
              <call_once fun="NavSetWaypointHere(WP_TD)" no="1"/>
              <deroute block="Mission.flare" no="2"/>
            </block>
            <block strip_button="Land at TD" strip_icon="land-right.png" group="landing" name="Mission.land" no="31">
              <go wp="TD" no="0"/>
              <call_once fun="StartVisionLand()" no="1"/>
              <deroute block="Mission.flare" no="2"/>
            </block>
            <block strip_button="VisualLanding-CAM" strip_icon="cam_lock.png" group="landing" name="Mission.visual_flare" no="32">
              <exception cond="NavDetectGround()" deroute="Mission.holding_point"/>
              <exception cond="!(nav_is_in_flight())" deroute="Mission.landed"/>
              <exception cond="!(InsideLAND(GetPosX(),GetPosY()))" deroute="Mission.land"/>
              <call_once fun="NavStartDetectGround()" no="0"/>
              <stay climb="-(0.200000)" vmode="climb" wp="CAM" no="1"/>
              <deroute block="Mission.landed" no="2"/>
            </block>
            <block name="Mission.flare" no="33">
              <exception cond="NavDetectGround()" deroute="Mission.holding_point"/>
              <exception cond="!(nav_is_in_flight())" deroute="Mission.landed"/>
              <call_once fun="NavStartDetectGround()" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="TD" no="1"/>
              <deroute block="Mission.landed" no="2"/>
            </block>
            <block strip_button="Kill" strip_icon="kill.png" group="landing" name="Mission.landed" no="34">
              <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="0"/>
            </block>
            <block name="Mission.land_emergency" no="35">
              <call_once fun="NavSetWaypointHere(WP_ETD)" no="0"/>
              <deroute block="Mission.flare_emergency" no="1"/>
            </block>
            <block name="Mission.flare_emergency" no="36">
              <exception cond="NavDetectGround()" deroute="Mission.landed_emergency"/>
              <exception cond="!(nav_is_in_flight())" deroute="Mission.landed_emergency"/>
              <call_once fun="NavStartDetectGround()" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="ETD" no="1"/>
              <deroute block="Mission.landed" no="2"/>
            </block>
            <block name="Mission.landed_emergency" no="37">
              <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="0"/>
            </block>
            <block name="HOME" no="38">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="38" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="37" block_name="Mission.landed_emergency" stage="0">
            <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="0"/>
          </stage>
          <stage block="36" block_name="Mission.flare_emergency" stage="2">
            <deroute block="Mission.landed" no="2"/>
          </stage>
          <stage block="36" block_name="Mission.flare_emergency" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="ETD" no="1"/>
          </stage>
          <stage block="36" block_name="Mission.flare_emergency" stage="0">
            <call_once fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="35" block_name="Mission.land_emergency" stage="1">
            <deroute block="Mission.flare_emergency" no="1"/>
          </stage>
          <stage block="35" block_name="Mission.land_emergency" stage="0">
            <call_once fun="NavSetWaypointHere(WP_ETD)" no="0"/>
          </stage>
          <stage block="34" block_name="Mission.landed" stage="0">
            <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="0"/>
          </stage>
          <stage block="33" block_name="Mission.flare" stage="2">
            <deroute block="Mission.landed" no="2"/>
          </stage>
          <stage block="33" block_name="Mission.flare" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="TD" no="1"/>
          </stage>
          <stage block="33" block_name="Mission.flare" stage="0">
            <call_once fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="32" block_name="Mission.visual_flare" stage="2">
            <deroute block="Mission.landed" no="2"/>
          </stage>
          <stage block="32" block_name="Mission.visual_flare" stage="1">
            <stay climb="-(0.200000)" vmode="climb" wp="CAM" no="1"/>
          </stage>
          <stage block="32" block_name="Mission.visual_flare" stage="0">
            <call_once fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="31" block_name="Mission.land" stage="2">
            <deroute block="Mission.flare" no="2"/>
          </stage>
          <stage block="31" block_name="Mission.land" stage="1">
            <call_once fun="StartVisionLand()" no="1"/>
          </stage>
          <stage block="31" block_name="Mission.land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="30" block_name="Mission.land_here" stage="2">
            <deroute block="Mission.flare" no="2"/>
          </stage>
          <stage block="30" block_name="Mission.land_here" stage="1">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="1"/>
          </stage>
          <stage block="30" block_name="Mission.land_here" stage="0">
            <call_once fun="NavCopyWaypoint(WP_CAM,WP_TD)" no="0"/>
          </stage>
          <stage block="29" block_name="Mission.Survey Poly RUN" stage="0">
            <call fun="nav_survey_poly_run()" no="0"/>
          </stage>
          <stage block="28" block_name="Mission.SurveyPoly" stage="1">
            <deroute block="Mission.Survey Poly RUN" no="1"/>
          </stage>
          <stage block="28" block_name="Mission.SurveyPoly" stage="0">
            <call_once fun="nav_survey_poly_setup_towards(WP_S1,4,sweep,WP_S2)" no="0"/>
          </stage>
          <stage block="27" block_name="Mission.raceline" stage="2">
            <deroute block="Mission.raceline" no="2"/>
          </stage>
          <stage block="27" block_name="Mission.raceline" stage="1">
            <go from="raceB" hmode="route" wp="raceA" no="1"/>
          </stage>
          <stage block="27" block_name="Mission.raceline" stage="0">
            <go from="raceA" hmode="route" wp="raceB" no="0"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="4">
            <deroute block="Mission.race" no="4"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="3">
            <go from="p4" hmode="route" wp="p1" no="3"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="2">
            <go from="p3" hmode="route" wp="p4" no="2"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="1">
            <go from="p2" hmode="route" wp="p3" no="1"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="0">
            <go from="p1" hmode="route" wp="p2" no="0"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="WD" until="((stateGetPositionEnu_f())->z>12)" no="3"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="2">
            <call_once fun="DropOpen()" no="2"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="WD" until="LessThan((stateGetPositionEnu_f())->z,8)" no="1"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="0">
            <go wp="WD" no="0"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ3" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="2">
            <call_once fun="DropOpen()" no="2"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ3" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="0">
            <go wp="RZ3" no="0"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ2" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="2">
            <call_once fun="DropOpen()" no="2"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ2" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="0">
            <go wp="RZ2" no="0"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ1" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="2">
            <call_once fun="DropOpen()" no="2"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ1" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="0">
            <go wp="RZ1" no="0"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="DROP" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="2">
            <call_once fun="DropOpen()" no="2"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="DROP" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="0">
            <go wp="DROP" no="0"/>
          </stage>
          <stage block="20" block_name="Mission.circle CV" stage="0">
            <circle radius="nav_radius" wp="CAM" no="0"/>
          </stage>
          <stage block="19" block_name="Mission.line_p1_p2" stage="3">
            <deroute block="Mission.stay_p1" no="3"/>
          </stage>
          <stage block="19" block_name="Mission.line_p1_p2" stage="2">
            <go from="p2" hmode="route" wp="p1" no="2"/>
          </stage>
          <stage block="19" block_name="Mission.line_p1_p2" stage="1">
            <stay until="(stage_time>10)" wp="p2" no="1"/>
          </stage>
          <stage block="19" block_name="Mission.line_p1_p2" stage="0">
            <go from="p1" hmode="route" wp="p2" no="0"/>
          </stage>
          <stage block="18" block_name="Mission.go_p2" stage="1">
            <deroute block="Mission.stay_p1" no="1"/>
          </stage>
          <stage block="18" block_name="Mission.go_p2" stage="0">
            <go wp="p2" no="0"/>
          </stage>
          <stage block="17" block_name="Mission.stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="16" block_name="Mission.CAM" stage="0">
            <stay wp="CAM" no="0"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="6">
            <deroute block="Mission.visual_flare" no="6"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="5">
            <go wp="CRUISE" no="5"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="4">
            <call_once fun="NavCopyWaypointPositionOnly(WP_CAM,WP_TD)" no="4"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="3">
            <call_once fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_TD)" no="3"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="2">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CRUISE" until="((stateGetPositionEnu_f())->z>30)" no="2"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="1">
            <call_once fun="NavSetWaypointHere(WP_CRUISE)" no="1"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="0">
            <call_once fun="StopVision()" no="0"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="5">
            <deroute block="Mission.land" no="5"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="4">
            <go wp="CRUISE" no="4"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="3">
            <call_once fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_TD)" no="3"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="2">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CRUISE" until="((stateGetPositionEnu_f())->z>30)" no="2"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="1">
            <call_once fun="NavSetWaypointHere(WP_CRUISE)" no="1"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="0">
            <call_once fun="StopVision()" no="0"/>
          </stage>
          <stage block="13" block_name="Mission.NoVision" stage="1">
            <stay wp="FC" no="1"/>
          </stage>
          <stage block="13" block_name="Mission.NoVision" stage="0">
            <call_once fun="StartVision()" no="0"/>
          </stage>
          <stage block="12" block_name="Mission.Vision" stage="1">
            <stay wp="CAM" no="1"/>
          </stage>
          <stage block="12" block_name="Mission.Vision" stage="0">
            <call_once fun="StartVision()" no="0"/>
          </stage>
          <stage block="11" block_name="Mission.LookRobot" stage="1">
            <call_once fun="NavCopyWaypointPositionOnly(WP_CAM,WP_FC)" no="1"/>
          </stage>
          <stage block="11" block_name="Mission.LookRobot" stage="0">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="FC" until="LessThan((stateGetPositionEnu_f())->z,20)" no="0"/>
          </stage>
          <stage block="10" block_name="Mission.GoTennis" stage="1">
            <go wp="CRUISE" no="1"/>
          </stage>
          <stage block="10" block_name="Mission.GoTennis" stage="0">
            <call_once fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_FC)" no="0"/>
          </stage>
          <stage block="9" block_name="Mission.Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="8" block_name="Mission.Takeoff-Water" stage="1">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
          </stage>
          <stage block="8" block_name="Mission.Takeoff-Water" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="7" block_name="Mission.Takeoff-Drop" stage="1">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
          </stage>
          <stage block="7" block_name="Mission.Takeoff-Drop" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="6" block_name="Mission.Takeoff-Map" stage="1">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
          </stage>
          <stage block="6" block_name="Mission.Takeoff-Map" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="5" block_name="Mission.Takeoff-Standby" stage="1">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
          </stage>
          <stage block="5" block_name="Mission.Takeoff-Standby" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="4" block_name="Mission.Start Engine" stage="1">
            <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="1"/>
          </stage>
          <stage block="4" block_name="Mission.Start Engine" stage="0">
            <call_once fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="3" block_name="Mission.holding_point" stage="1">
            <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="1"/>
          </stage>
          <stage block="3" block_name="Mission.holding_point" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="2" block_name="Mission.GeoInit" stage="2">
            <call_once fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="2" block_name="Mission.GeoInit" stage="0">
            <while cond="LessThan(NavBlockTime(),10)" no="0"/>
          </stage>
          <stage block="1" block_name="Mission.WaitGPS" stage="1">
            <while cond="!(GpsFixValid())" no="1"/>
          </stage>
          <stage block="1" block_name="Mission.WaitGPS" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings NAME="control">
            <dl_settings NAME="dc">
              <dl_setting VAR="0" STEP="1" SHORTNAME="Shutter" MODULE="digital_cam/dc" MIN="0" MAX="255" HANDLER="send_command">
                <strip_button VALUE="32" NAME="Photo" ICON="digital-camera.png" GROUP="dc"/>
              </dl_setting>
              <dl_setting VAR="dc_autoshoot" VALUES="STOP|PERIODIC|DISTANCE|EXT_TRIG" STEP="1" MIN="0" MAX="3">
                <strip_button VALUE="1" NAME="Start Autoshoot" ICON="dcstart.png" GROUP="dc"/>
                <strip_button VALUE="0" NAME="Stop Autoshoot" ICON="dcstop.png" GROUP="dc"/>
              </dl_setting>
              <dl_setting VAR="dc_autoshoot_period" UNIT="sec" STEP="0.5" SHORTNAME="Periodic" PARAM="DC_AUTOSHOOT_PERIOD" MIN="0.1" MAX="60"/>
              <dl_setting VAR="dc_distance_interval" UNIT="meter" STEP="1" SHORTNAME="dist" PARAM="DC_AUTOSHOOT_DISTANCE_INTERVAL" MIN="0" MAX="255"/>
              <dl_setting VAR="dc_survey_interval" STEP="5" SHORTNAME="Survey-Interval" MODULE="digital_cam/dc" MIN="0" MAX="250" HANDLER="Survey"/>
              <dl_setting VAR="dc_circle_interval" STEP="5" SHORTNAME="Circle-Interval" MODULE="digital_cam/dc" MIN="5" MAX="90" HANDLER="Circle"/>
              <dl_setting VAR="dc_cam_tracing" STEP="1" SHORTNAME="Cam-Tracing" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="video">
              <dl_setting VAR="video_capture_record_video" STEP="1" SHORTNAME="record_video" MODULE="computer_vision/video_capture" MIN="0" MAX="1">
                <strip_button VALUE="1" NAME="Start video capture" ICON="dcstart.png" GROUP="cv"/>
                <strip_button VALUE="0" NAME="Stop video capture" ICON="dcstop.png" GROUP="cv"/>
              </dl_setting>
              <dl_setting VAR="video_capture_take_shot" STEP="1" SHORTNAME="take_shot" MODULE="computer_vision/video_capture" MIN="0" MAX="1">
                <strip_button VALUE="1" NAME="Save Image" ICON="digital-camera.png" GROUP="cv"/>
              </dl_setting>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="P_Survey">
              <dl_setting VAR="Poly_Size" TYPE="uint8_t" STEP="1" SHORTNAME="Size" MODULE="modules/nav/nav_survey_poly_rotorcraft" MIN="0" MAX="20"/>
              <dl_setting VAR="Poly_Distance" TYPE="float" STEP="1" SHORTNAME="Sweep" MODULE="modules/nav/nav_survey_poly_rotorcraft" MIN="0" MAX="500"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="video">
              <dl_setting VAR="viewvideo.use_rtp" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="rtp" PARAM="VIEWVIDEO_USE_RTP" MODULE="computer_vision/viewvideo" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="ColorFilter">
              <dl_setting VAR="color_lum_min" STEP="1" SHORTNAME="y_min" MIN="0" MAX="255"/>
              <dl_setting VAR="color_lum_max" STEP="1" SHORTNAME="y_max" MIN="0" MAX="255"/>
              <dl_setting VAR="color_cb_min" STEP="1" SHORTNAME="u_min" MIN="0" MAX="255"/>
              <dl_setting VAR="color_cb_max" STEP="1" SHORTNAME="u_max" MIN="0" MAX="255"/>
              <dl_setting VAR="color_cr_min" STEP="1" SHORTNAME="v_min" MIN="0" MAX="255"/>
              <dl_setting VAR="color_cr_max" STEP="1" SHORTNAME="v_max" MIN="0" MAX="255"/>
              <dl_setting VAR="marker_size" STEP="1" SHORTNAME="marker" MIN="1" MAX="20"/>
              <dl_setting VAR="geofilter_length" STEP="1" SHORTNAME="filter" MIN="1" MAX="100"/>
              <dl_setting VAR="record_video" VALUES="OFF|ON" STEP="1" SHORTNAME="record" MIN="0" MAX="1"/>
              <dl_setting VAR="cv_blob_locator_reset" STEP="1" MODULE="computer_vision/cv_blob_locator" MIN="0" MAX="1" HANDLER="GeoReset">
                <strip_button VALUE="1" NAME="Reset Geoprojection Filter" ICON="resurrect.png" GROUP="cv"/>
              </dl_setting>
              <dl_setting VAR="cv_blob_locator_type" VALUES="NONE|BLOB|IMAVMARKER|WINDOW" STEP="1" MODULE="computer_vision/cv_blob_locator" MIN="0" MAX="2">
                <strip_button VALUE="0" NAME="CV: None" ICON="off.png" GROUP="cv"/>
                <strip_button VALUE="1" NAME="CV: Colored Blob" ICON="cv_blob.png" GROUP="cv"/>
                <strip_button VALUE="2" NAME="CV: Marker" ICON="cv_marker.png" GROUP="cv"/>
                <strip_button VALUE="3" NAME="CV: Window Finder" ICON="cv_window.png" GROUP="cv"/>
              </dl_setting>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="Bebop camera control">
            <dl_settings NAME="Front camera">
              <dl_setting VAR="mt9f002.set_zoom" STEP="0.05" SHORTNAME="zoom" PARAM="MT9F002_ZOOM" MIN="1." MAX="2.5"/>
              <dl_setting VAR="mt9f002.set_offset_x" STEP="0.05" SHORTNAME="offset_x" PARAM="MT9F002_OFFSET_X" MIN="-0.5" MAX="0.5"/>
              <dl_setting VAR="mt9f002.set_offset_y" STEP="0.05" SHORTNAME="offset_y" PARAM="MT9F002_OFFSET_Y" MIN="-0.5" MAX="0.5"/>
              <dl_setting VAR="mt9f002_send_resolution" VALUES="SEND" STEP="1" SHORTNAME="update_resolution" MODULE="boards/bebop/mt9f002" MIN="1" MAX="1" HANDLER="setting_update_resolution"/>
              <dl_setting VAR="mt9f002.gain_green1" STEP="0.1" SHORTNAME="green_1" PARAM="MT9F002_GAIN_GREEN1" MIN="1" MAX="60"/>
              <dl_setting VAR="mt9f002.gain_green2" STEP="0.1" SHORTNAME="green_2" PARAM="MT9F002_GAIN_GREEN2" MIN="1" MAX="60"/>
              <dl_setting VAR="mt9f002.gain_blue" STEP="0.1" SHORTNAME="blue" PARAM="MT9F002_GAIN_BLUE" MIN="1" MAX="60"/>
              <dl_setting VAR="mt9f002.gain_red" STEP="0.1" SHORTNAME="red" PARAM="MT9F002_GAIN_RED" MIN="1" MAX="60"/>
              <dl_setting VAR="mt9f002_send_color" VALUES="SEND" STEP="1" SHORTNAME="update_color" MODULE="boards/bebop/mt9f002" MIN="1" MAX="1" HANDLER="setting_update_color"/>
              <dl_setting VAR="mt9f002.target_exposure " STEP="0.1" SHORTNAME="exposure" PARAM="MT9F002_TARGET_EXPOSURE" MIN="0.1" MAX="80"/>
              <dl_setting VAR="mt9f002_send_exposure" VALUES="SEND" STEP="1" SHORTNAME="update_exposure" MODULE="boards/bebop/mt9f002" MIN="1" MAX="1" HANDLER="setting_update_exposure"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="air_data">
              <dl_setting VAR="air_data.qnh" STEP="1" SHORTNAME="QNH" MODULE="air_data/air_data" MIN="800" MAX="1200"/>
              <dl_setting VAR="air_data.tas_factor" TYPE="float" STEP="0.01" SHORTNAME="TASfactor" PERSISTENT="true" PARAM="AIR_DATA_TAS_FACTOR" MODULE="air_data/air_data" MIN="0.8" MAX="1.3"/>
              <dl_setting VAR="air_data.calc_qnh_once" STEP="1" SHORTNAME="calcQNH" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_airspeed" TYPE="uint8" STEP="1" SHORTNAME="calcAirspeed" PERSISTENT="true" PARAM="AIR_DATA_CALC_AIRSPEED" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_tas_factor" TYPE="uint8" STEP="1" SHORTNAME="calcTASfactor" PERSISTENT="true" PARAM="AIR_DATA_CALC_TAS_FACTOR" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_amsl_baro" TYPE="uint8" STEP="1" SHORTNAME="calcAMSL" PERSISTENT="true" PARAM="AIR_DATA_CALC_AMSL_BARO" MODULE="air_data/air_data" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="Ins Extended">
            <dl_settings NAME="INS">
              <dl_setting VAR="vff.accel_noise" STEP="0.1" SHORTNAME="accel_noise" MODULE="subsystems/ins/vf_extended_float" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_baro" STEP="0.1" SHORTNAME="r_baro" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_alt" STEP="0.1" SHORTNAME="r_alt" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_obs_height" STEP="0.1" SHORTNAME="r_obs_height" MIN="0" MAX="10"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
              <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
              <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
              <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
              <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="indi">
              <dl_setting VAR="indi.reference_acceleration.err_p" STEP="1" SHORTNAME="kp_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_P" MODULE="stabilization/stabilization_indi_simple" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_p" STEP="0.1" SHORTNAME="kd_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.p" STEP="0.001" SHORTNAME="ctl_eff_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_P" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.reference_acceleration.err_q" STEP="1" SHORTNAME="kp_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_Q" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_q" STEP="0.1" SHORTNAME="kd_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.q" STEP="0.001" SHORTNAME="ctl_eff_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_Q" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.reference_acceleration.err_r" STEP="1" SHORTNAME="kp_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_R" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_r" STEP="0.1" SHORTNAME="kd_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.r" STEP="0.001" SHORTNAME="ctl_eff_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_R" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.g2" STEP="0.01" SHORTNAME="g2" PERSISTENT="true" PARAM="STABILIZATION_INDI_G2_R" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.adaptive" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="use_adaptive" PERSISTENT="true" PARAM="STABILIZATION_INDI_USE_ADAPTIVE" MIN="0" MAX="1"/>
              <dl_setting VAR="indi.max_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_rate" PARAM="STABILIZATION_INDI_MAX_RATE" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
              <dl_setting VAR="indi.attitude_max_yaw_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_yaw_rate_attitude" PARAM="STABILIZATION_INDI_MAX_R" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="NAV">
              <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
              <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
              <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MIN="-50" MAX="50"/>
              <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MIN="0" MAX="10.0"/>
              <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MIN="-10.0" MAX="0.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Vert Loop">
              <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
              <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MIN="0.2" MAX="0.8"/>
              <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MIN="0" MAX="1"/>
              <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
            <dl_settings NAME="Horiz Loop">
              <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="true" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
              <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
              <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MIN="0" MAX="1"/>
              <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
              <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
              <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
              <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
              <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
              <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="bebop_indi">
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="bebop">
            <define VALUE="0.1450" NAME="STABILIZATION_INDI_G2_R"/>
          </target>
          <target NAME="nps" BOARD="pc">
            <module TYPE="jsbsim" NAME="fdm"/>
            <module NAME="udp"/>
            <define VALUE="0.0" NAME="STABILIZATION_INDI_G2_R"/>
          </target>
          <module TYPE="transparent_udp" NAME="telemetry"/>
          <module TYPE="datalink" NAME="radio_control"/>
          <module NAME="motor_mixing"/>
          <module TYPE="bebop" NAME="actuators"/>
          <module TYPE="bebop" NAME="imu"/>
          <module TYPE="furuno" NAME="gps"/>
          <module TYPE="indi_simple" NAME="stabilization"/>
          <module TYPE="int_cmpl_quat" NAME="ahrs">
            <configure VALUE="TRUE" NAME="USE_MAGNETOMETER"/>
            <define VALUE="FALSE" NAME="AHRS_USE_GPS_HEADING"/>
          </module>
          <module TYPE="extended" NAME="ins"/>
        </firmware>
        <modules MAIN_FREQ="512">
          <module NAME="geo_mag"/>
          <module NAME="air_data"/>
          <module NAME="send_imu_mag_current"/>
          <module NAME="bebop_cam"/>
          <module NAME="cv_blob_locator">
            <define VALUE="bottom_camera" NAME="BLOB_LOCATOR_CAMERA"/>
          </module>
          <module NAME="video_rtp_stream">
            <define VALUE="bottom_camera" NAME="VIEWVIDEO_CAMERA"/>
            <define VALUE="80" NAME="VIEWVIDEO_QUALITY_FACTOR"/>
            <define VALUE="1" NAME="VIEWVIDEO_DOWNSIZE_FACTOR"/>
          </module>
          <module TYPE="survey_rectangle_rotorcraft" NAME="nav">
            <define VALUE="10" NAME="RECTANGLE_SURVEY_DEFAULT_SWEEP"/>
          </module>
          <module TYPE="survey_poly_rotorcraft" NAME="nav">
            <define VALUE="10" NAME="POLYSURVEY_DEFAULT_DISTANCE"/>
          </module>
          <module NAME="video_capture">
            <define VALUE="bottom_camera" NAME="VIDEO_CAPTURE_CAMERA"/>
          </module>
          <module NAME="digital_cam_video">
            <define VALUE="5" NAME="DC_AUTOSHOOT_DISTANCE_INTERVAL"/>
          </module>
          <module NAME="video_exif"/>
        </modules>
        <commands>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="6000"/>
        </commands>
        <servos DRIVER="Default">
          <servo NO="0" NEUTRAL="3000" NAME="TOP_RIGHT" MIN="3000" MAX="12000"/>
          <servo NO="1" NEUTRAL="3000" NAME="TOP_LEFT" MIN="3000" MAX="12000"/>
          <servo NO="2" NEUTRAL="3000" NAME="BOTTOM_LEFT" MIN="3000" MAX="12000"/>
          <servo NO="3" NEUTRAL="3000" NAME="BOTTOM_RIGHT" MIN="3000" MAX="12000"/>
        </servos>
        <section PREFIX="MOTOR_MIXING_" NAME="MIXING">
          <define VALUE="0" NAME="TRIM_ROLL"/>
          <define VALUE="0" NAME="TRIM_PITCH"/>
          <define VALUE="0" NAME="TRIM_YAW"/>
          <define VALUE="QUAD_X" NAME="TYPE"/>
        </section>
        <command_laws>
          <call FUN="motor_mixing_run(autopilot_get_motors_on(),FALSE,values)"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_LEFT]" SERVO="TOP_LEFT"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_RIGHT]" SERVO="TOP_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_RIGHT]" SERVO="BOTTOM_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_LEFT]" SERVO="BOTTOM_LEFT"/>
        </command_laws>
        <section PREFIX="AIR_DATA_" NAME="AIR_DATA">
          <define VALUE="FALSE" NAME="CALC_AIRSPEED"/>
          <define VALUE="FALSE" NAME="CALC_TAS_FACTOR"/>
          <define VALUE="TRUE" NAME="CALC_AMSL_BARO"/>
        </section>
        <include HREF="conf/airframes/tudelft/calibrations/bebop5.xml"/>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.3892503" NAME="H_X"/>
          <define VALUE="0.0017972" NAME="H_Y"/>
          <define VALUE="0.9211303" NAME="H_Z"/>
        </section>
        <section PREFIX="INS_" NAME="INS">
          <define VALUE="2.2" NAME="SONAR_MAX_RANGE"/>
          <define VALUE="TRUE" NAME="SONAR_UPDATE_ON_AGL"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="RC_SETPOINT">
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="300" UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="0" NAME="DEADBAND_A"/>
          <define VALUE="0" NAME="DEADBAND_E"/>
          <define VALUE="50" NAME="DEADBAND_R"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="ATTITUDE_REFERENCE">
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.9" NAME="REF_ZETA_P"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.9" NAME="REF_ZETA_Q"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.9" NAME="REF_ZETA_R"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_RDOT"/>
        </section>
        <section PREFIX="STABILIZATION_INDI_" NAME="STABILIZATION_ATTITUDE_INDI">
          <define VALUE="0.0639" NAME="G1_P"/>
          <define VALUE="0.0361" NAME="G1_Q"/>
          <define VALUE="0.0022" NAME="G1_R"/>
          <define VALUE="600.0" NAME="REF_ERR_P"/>
          <define VALUE="600.0" NAME="REF_ERR_Q"/>
          <define VALUE="600.0" NAME="REF_ERR_R"/>
          <define VALUE="28.0" NAME="REF_RATE_P"/>
          <define VALUE="28.0" NAME="REF_RATE_Q"/>
          <define VALUE="28.0" NAME="REF_RATE_R"/>
          <define VALUE="8.0" NAME="FILT_CUTOFF"/>
          <define VALUE="8.0" NAME="FILT_CUTOFF_R"/>
          <define VALUE="0.1" NAME="ACT_DYN_P"/>
          <define VALUE="0.1" NAME="ACT_DYN_Q"/>
          <define VALUE="0.1" NAME="ACT_DYN_R"/>
          <define VALUE="FALSE" NAME="USE_ADAPTIVE"/>
          <define VALUE="0.0001" NAME="ADAPTIVE_MU"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="283" NAME="HOVER_KP"/>
          <define VALUE="82" NAME="HOVER_KD"/>
          <define VALUE="20" NAME="HOVER_KI"/>
          <define VALUE="0.655" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="TRUE" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="20" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="2" UNIT="m/s" NAME="REF_MAX_SPEED"/>
          <define VALUE="79" NAME="PGAIN"/>
          <define VALUE="100" NAME="DGAIN"/>
          <define VALUE="30" NAME="IGAIN"/>
        </section>
        <section PREFIX="NAV_" NAME="NAVIGATION">
          <define VALUE="2.5" NAME="CLIMB_VSPEED"/>
          <define VALUE="-1.0" NAME="DESCEND_VSPEED"/>
        </section>
        <section PREFIX="NPS_" NAME="SIMULATOR">
          <define VALUE="nw_motor, ne_motor, se_motor, sw_motor" TYPE="string[]" NAME="ACTUATOR_NAMES"/>
          <define VALUE="simple_x_quad_ccw" TYPE="string" NAME="JSBSIM_MODEL"/>
          <define VALUE="nps_sensors_params_default.h" TYPE="string" NAME="SENSORS_PARAMS"/>
        </section>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_NAV" NAME="MODE_STARTUP"/>
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_ATTITUDE_Z_HOLD" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_NAV" NAME="MODE_AUTO2"/>
        </section>
        <section NAME="BAT">
          <define VALUE="8700" NAME="MILLIAMP_AT_FULL_THROTTLE"/>
          <define VALUE="9.9" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="11.0" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="11.1" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="12.4" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.05" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
            <message PERIOD="0.05" NAME="OPTICAL_FLOW_HOVER"/>
            <message PERIOD="0.10" NAME="VISUALTARGET"/>
            <message PERIOD="0.1" NAME="VISION_POSITION_ESTIMATE"/>
            <message PERIOD="0.05" NAME="DIVERGENCE"/>
            <message PERIOD="0.02" NAME="DRAGSPEED"/>
            <message PERIOD="5.1" NAME="LOGGER_STATUS"/>
            <message PERIOD="1.2" NAME="LIDAR"/>
            <message PERIOD=".25" NAME="INS_EKF2"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="BEBOP_ACTUATORS"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_FLOAT"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
            <message PERIOD="2.0" NAME="INDI_G"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="vel_guidance" KEY_PRESS="q">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HYBRID_GUIDANCE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1.0" NAME="GPS_INT"/>
            <message PERIOD="1.0" NAME="INS"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="RTCM3">
            <message PERIOD="1" NAME="GPS_RXMRTCM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD="1" NAME="GPS_RTK"/>
          </mode>
        </process>
        <process NAME="FlightRecorder">
          <mode NAME="default">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD=".1" NAME="GPS_INT"/>
            <message PERIOD=".1" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".2" NAME="IMU_MAG_SCALED"/>
            <message PERIOD="0.05" NAME="LIDAR"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="19"/>
            <dl_setting VAR="autopilot.kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot.power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot.mode" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="19" HANDLER="SetModeHandler"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Horiz Loop">
            <dl_setting VAR="gh_ref.max_speed" STEP="0.1" SHORTNAME="max_speed" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed">
              <strip_button VALUE="1" NAME="V1" GROUP="speed"/>
              <strip_button VALUE="2" NAME="V2" GROUP="speed"/>
              <strip_button VALUE="5" NAME="V5" GROUP="speed"/>
              <strip_button VALUE="10" NAME="V10" GROUP="speed"/>
            </dl_setting>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="Bebop_Smeur" ac_id="21" airframe="airframes/tudelft/bebop_indi.xml" radio="radios/dummy.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/tudelft/delft_basic.xml" settings="settings/rotorcraft_basic.xml settings/control/rotorcraft_speed.xml" settings_modules="modules/air_data.xml [modules/geo_mag.xml] modules/guidance_indi.xml modules/ins_extended.xml modules/ahrs_int_cmpl_quat.xml modules/stabilization_indi_simple.xml modules/nav_basic_rotorcraft.xml modules/guidance_rotorcraft.xml modules/gps.xml modules/imu_common.xml" gui_color="#ffffcccaccca">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitMM" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1120" MIN="1120" MAX="2000" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="2" name="Delft Basic" max_dist_from_home="1000" lon0="4 22 42.0" lat0="51 59 27.6" ground_alt="0" alt="4">
          <header>    #include &quot;autopilot.h&quot;
    #include &quot;subsystems/datalink/datalink.h&quot;
    #include &quot;subsystems/electrical.h&quot;
    #include &quot;subsystems/radio_control.h&quot;</header>
          <waypoints>
            <waypoint y="0.0" x="0.0" name="HOME"/>
            <waypoint y="5.0" x="0.0" name="CLIMB"/>
            <waypoint y="-5.0" x="-2.0" name="STDBY"/>
            <waypoint y="14.3" x="-19.9" name="p1"/>
            <waypoint y="21.6" x="-0.6" name="p2"/>
            <waypoint y="-26.5" x="22.2" name="p3"/>
            <waypoint y="-34.4" x="4.9" name="p4"/>
            <waypoint y="-29.4" x="14.2" name="CAM"/>
            <waypoint y="-10.9" x="5.6" name="TD"/>
          </waypoints>
          <exceptions>
            <exception deroute="ComeBackAndLand" cond="((radio_control.status == RC_REALLY_LOST) &&
      !(IndexOfBlock('Takeoff') > nav_block) &&
      !(nav_block >= IndexOfBlock('land here')) &&
      (autopilot_in_flight() == true) )"/>
            <exception deroute="DatalinkLoss" cond="(datalink_time > 60 &&
      !(datalink_time > 120) &&
      !(IndexOfBlock('Takeoff') > nav_block) &&
      !(nav_block >= IndexOfBlock('land here')) &&
      (autopilot_in_flight() == true) )"/>
            <exception deroute="ComeBackAndLand" cond="(electrical.bat_low &&
      !(IndexOfBlock('Holding point') > nav_block) &&
      !(nav_block >= IndexOfBlock('land here')) &&
      (autopilot_in_flight() == true) )"/>
            <exception deroute="land here" cond="(electrical.bat_critical &&
      !(IndexOfBlock('Holding point') > nav_block) &&
      !(nav_block >= IndexOfBlock('land here')) &&
      (autopilot_in_flight() == true) )"/>
          </exceptions>
          <blocks>
            <block name="Wait GPS" no="0">
              <call_once fun="NavKillThrottle()" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Geo init" no="1">
              <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
              <call_once fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Holding point" no="2">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="Start Engine" no="3">
              <call_once fun="NavResurrect()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff" name="Takeoff" no="4">
              <exception deroute="Standby" cond="stateGetPositionEnu_f()->z > 2.0"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="5">
              <stay wp="STDBY" no="0"/>
            </block>
            <block name="stay_p1" no="6">
              <stay wp="p1" no="0"/>
            </block>
            <block name="go_p2" no="7">
              <go wp="p2" no="0"/>
              <deroute block="stay_p1" no="1"/>
            </block>
            <block name="line_p1_p2" no="8">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <stay wp="p2" until="stage_time>10" no="1"/>
              <go wp="p1" hmode="route" from="p2" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="route" no="9">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <go wp="p3" hmode="route" from="p2" no="1"/>
              <go wp="p4" hmode="route" from="p3" no="2"/>
              <go wp="p1" hmode="route" from="p4" no="3"/>
              <deroute block="stay_p1" no="4"/>
            </block>
            <block name="test yaw" no="10">
              <go wp="p1" no="0"/>
              <for var="i" to="16" from="1" no="2">
                <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
              </for>
              <deroute block="Standby" no="5"/>
            </block>
            <block pre_call="nav_set_heading_towards_waypoint(WP_CAM)" name="circle CAM" no="11">
              <circle wp="CAM" radius="nav_radius" no="0"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land Here" name="land here" no="12">
              <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
            </block>
            <block name="land" no="13">
              <go wp="TD" no="0"/>
            </block>
            <block name="flare" no="14">
              <exception deroute="Holding point" cond="NavDetectGround()"/>
              <exception deroute="landed" cond="!nav_is_in_flight()"/>
              <call_once fun="NavStartDetectGround()" no="0"/>
              <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
            </block>
            <block name="landed" no="15">
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
            </block>
            <block name="ComeBackAndLand" no="16">
              <go wp="HOME" no="0"/>
              <deroute block="land here" no="1"/>
            </block>
            <block name="DatalinkLoss" no="17">
              <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
              <stay wp="TD" until="stage_time>60" no="1"/>
              <deroute block="ComeBackAndLand" no="2"/>
            </block>
            <block name="HOME" no="18">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="18" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="17" block_name="DatalinkLoss" stage="2">
            <deroute block="ComeBackAndLand" no="2"/>
          </stage>
          <stage block="17" block_name="DatalinkLoss" stage="1">
            <stay wp="TD" until="stage_time>60" no="1"/>
          </stage>
          <stage block="17" block_name="DatalinkLoss" stage="0">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="16" block_name="ComeBackAndLand" stage="1">
            <deroute block="land here" no="1"/>
          </stage>
          <stage block="16" block_name="ComeBackAndLand" stage="0">
            <go wp="HOME" no="0"/>
          </stage>
          <stage block="15" block_name="landed" stage="0">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
          </stage>
          <stage block="14" block_name="flare" stage="1">
            <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
          </stage>
          <stage block="14" block_name="flare" stage="0">
            <call_once fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="13" block_name="land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="12" block_name="land here" stage="0">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="11" block_name="circle CAM" stage="0">
            <circle wp="CAM" radius="nav_radius" no="0"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="5">
            <deroute block="Standby" no="5"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="3">
            <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="2">
            <for var="i" to="16" from="1" no="2">
              <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
            </for>
          </stage>
          <stage block="10" block_name="test yaw" stage="0">
            <go wp="p1" no="0"/>
          </stage>
          <stage block="9" block_name="route" stage="4">
            <deroute block="stay_p1" no="4"/>
          </stage>
          <stage block="9" block_name="route" stage="3">
            <go wp="p1" hmode="route" from="p4" no="3"/>
          </stage>
          <stage block="9" block_name="route" stage="2">
            <go wp="p4" hmode="route" from="p3" no="2"/>
          </stage>
          <stage block="9" block_name="route" stage="1">
            <go wp="p3" hmode="route" from="p2" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="2">
            <go wp="p1" hmode="route" from="p2" no="2"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="1">
            <stay wp="p2" until="stage_time>10" no="1"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="1">
            <deroute block="stay_p1" no="1"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="0">
            <go wp="p2" no="0"/>
          </stage>
          <stage block="6" block_name="stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="5" block_name="Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="1">
            <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="0">
            <call_once fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="2">
            <call_once fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="0">
            <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="air_data">
              <dl_setting VAR="air_data.qnh" STEP="1" SHORTNAME="QNH" MODULE="air_data/air_data" MIN="800" MAX="1200"/>
              <dl_setting VAR="air_data.tas_factor" TYPE="float" STEP="0.01" SHORTNAME="TASfactor" PERSISTENT="true" PARAM="AIR_DATA_TAS_FACTOR" MODULE="air_data/air_data" MIN="0.8" MAX="1.3"/>
              <dl_setting VAR="air_data.calc_qnh_once" STEP="1" SHORTNAME="calcQNH" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_airspeed" TYPE="uint8" STEP="1" SHORTNAME="calcAirspeed" PERSISTENT="true" PARAM="AIR_DATA_CALC_AIRSPEED" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_tas_factor" TYPE="uint8" STEP="1" SHORTNAME="calcTASfactor" PERSISTENT="true" PARAM="AIR_DATA_CALC_TAS_FACTOR" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_amsl_baro" TYPE="uint8" STEP="1" SHORTNAME="calcAMSL" PERSISTENT="true" PARAM="AIR_DATA_CALC_AMSL_BARO" MODULE="air_data/air_data" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="guidance_indi">
              <dl_setting VAR="guidance_indi_pos_gain" STEP="0.1" SHORTNAME="kp_p" PERSISTENT="true" PARAM="GUIDANCE_INDI_POS_GAIN" MIN="0" MAX="10.0"/>
              <dl_setting VAR="guidance_indi_speed_gain" STEP="0.1" SHORTNAME="kp_p" PERSISTENT="true" PARAM="GUIDANCE_INDI_SPEED_GAIN" MIN="0" MAX="10.0"/>
              <dl_setting VAR="guidance_indi_max_bank" STEP="0.1" SHORTNAME="max_bank" PARAM="GUIDANCE_H_MAX_BANK" MIN="0" MAX="80.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="Ins Extended">
            <dl_settings NAME="INS">
              <dl_setting VAR="vff.accel_noise" STEP="0.1" SHORTNAME="accel_noise" MODULE="subsystems/ins/vf_extended_float" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_baro" STEP="0.1" SHORTNAME="r_baro" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_alt" STEP="0.1" SHORTNAME="r_alt" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_obs_height" STEP="0.1" SHORTNAME="r_obs_height" MIN="0" MAX="10"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
              <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
              <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
              <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
              <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="indi">
              <dl_setting VAR="indi.reference_acceleration.err_p" STEP="1" SHORTNAME="kp_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_P" MODULE="stabilization/stabilization_indi_simple" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_p" STEP="0.1" SHORTNAME="kd_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.p" STEP="0.001" SHORTNAME="ctl_eff_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_P" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.reference_acceleration.err_q" STEP="1" SHORTNAME="kp_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_Q" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_q" STEP="0.1" SHORTNAME="kd_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.q" STEP="0.001" SHORTNAME="ctl_eff_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_Q" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.reference_acceleration.err_r" STEP="1" SHORTNAME="kp_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_R" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_r" STEP="0.1" SHORTNAME="kd_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.r" STEP="0.001" SHORTNAME="ctl_eff_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_R" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.g2" STEP="0.01" SHORTNAME="g2" PERSISTENT="true" PARAM="STABILIZATION_INDI_G2_R" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.adaptive" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="use_adaptive" PERSISTENT="true" PARAM="STABILIZATION_INDI_USE_ADAPTIVE" MIN="0" MAX="1"/>
              <dl_setting VAR="indi.max_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_rate" PARAM="STABILIZATION_INDI_MAX_RATE" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
              <dl_setting VAR="indi.attitude_max_yaw_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_yaw_rate_attitude" PARAM="STABILIZATION_INDI_MAX_R" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="NAV">
              <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
              <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
              <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MIN="-50" MAX="50"/>
              <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MIN="0" MAX="10.0"/>
              <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MIN="-10.0" MAX="0.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Vert Loop">
              <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
              <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MIN="0.2" MAX="0.8"/>
              <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MIN="0" MAX="1"/>
              <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
            <dl_settings NAME="Horiz Loop">
              <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="true" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
              <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
              <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MIN="0" MAX="1"/>
              <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
              <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
              <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
              <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
              <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
              <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="bebop_indi">
        <description>Outdoor bebop, INDI</description>
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="bebop">
            <define VALUE="0.1450" NAME="STABILIZATION_INDI_G2_R"/>
          </target>
          <target NAME="nps" BOARD="pc">
            <define VALUE="0.0" NAME="STABILIZATION_INDI_G2_R"/>
            <module TYPE="jsbsim" NAME="fdm"/>
            <module NAME="udp"/>
          </target>
          <module TYPE="transparent_udp" NAME="telemetry"/>
          <module TYPE="datalink" NAME="radio_control"/>
          <module NAME="motor_mixing"/>
          <module TYPE="bebop" NAME="actuators"/>
          <module TYPE="bebop" NAME="imu"/>
          <module TYPE="furuno" NAME="gps"/>
          <module TYPE="indi_simple" NAME="stabilization"/>
          <module TYPE="rate_indi" NAME="stabilization"/>
          <module TYPE="int_cmpl_quat" NAME="ahrs">
            <configure VALUE="TRUE" NAME="USE_MAGNETOMETER"/>
            <define VALUE="FALSE" NAME="AHRS_USE_GPS_HEADING"/>
          </module>
          <module TYPE="extended" NAME="ins"/>
          <module TYPE="indi" NAME="guidance">
            <define VALUE="-500.0" NAME="GUIDANCE_INDI_SPECIFIC_FORCE_GAIN"/>
          </module>
          <module NAME="geo_mag"/>
          <module NAME="air_data"/>
          <module NAME="send_imu_mag_current"/>
          <module NAME="logger_file">
            <define VALUE="/data/ftp/internal_000" NAME="FILE_LOGGER_PATH"/>
          </module>
        </firmware>
        <commands>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="6000"/>
        </commands>
        <servos DRIVER="Default">
          <servo NO="0" NEUTRAL="3000" NAME="TOP_LEFT" MIN="3000" MAX="12000"/>
          <servo NO="1" NEUTRAL="3000" NAME="TOP_RIGHT" MIN="3000" MAX="12000"/>
          <servo NO="2" NEUTRAL="3000" NAME="BOTTOM_RIGHT" MIN="3000" MAX="12000"/>
          <servo NO="3" NEUTRAL="3000" NAME="BOTTOM_LEFT" MIN="3000" MAX="12000"/>
        </servos>
        <section PREFIX="MOTOR_MIXING_" NAME="MIXING">
          <define VALUE="0" NAME="TRIM_ROLL"/>
          <define VALUE="0" NAME="TRIM_PITCH"/>
          <define VALUE="0" NAME="TRIM_YAW"/>
          <define VALUE="QUAD_X" NAME="TYPE"/>
        </section>
        <command_laws>
          <call FUN="motor_mixing_run(autopilot_get_motors_on(),FALSE,values)"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_LEFT]" SERVO="TOP_LEFT"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_RIGHT]" SERVO="TOP_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_RIGHT]" SERVO="BOTTOM_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_LEFT]" SERVO="BOTTOM_LEFT"/>
        </command_laws>
        <section PREFIX="AIR_DATA_" NAME="AIR_DATA">
          <define VALUE="FALSE" NAME="CALC_AIRSPEED"/>
          <define VALUE="FALSE" NAME="CALC_TAS_FACTOR"/>
          <define VALUE="TRUE" NAME="CALC_AMSL_BARO"/>
        </section>
        <include HREF="conf/airframes/tudelft/calibrations/bebop7.xml"/>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.3892503" NAME="H_X"/>
          <define VALUE="0.0017972" NAME="H_Y"/>
          <define VALUE="0.9211303" NAME="H_Z"/>
          <define VALUE="0" NAME="GRAVITY_HEURISTIC_FACTOR"/>
        </section>
        <section PREFIX="INS_" NAME="INS">
          <define VALUE="2.2" NAME="SONAR_MAX_RANGE"/>
          <define VALUE="TRUE" NAME="SONAR_UPDATE_ON_AGL"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="RC_SETPOINT">
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="120" UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="0" NAME="DEADBAND_A"/>
          <define VALUE="0" NAME="DEADBAND_E"/>
          <define VALUE="50" NAME="DEADBAND_R"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="ATTITUDE_REFERENCE">
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.9" NAME="REF_ZETA_P"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.9" NAME="REF_ZETA_Q"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.9" NAME="REF_ZETA_R"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_RDOT"/>
        </section>
        <section PREFIX="STABILIZATION_INDI_" NAME="STABILIZATION_ATTITUDE_INDI">
          <define VALUE="0.0639" NAME="G1_P"/>
          <define VALUE="0.0361" NAME="G1_Q"/>
          <define VALUE="0.0022" NAME="G1_R"/>
          <define VALUE="600.0" NAME="REF_ERR_P"/>
          <define VALUE="600.0" NAME="REF_ERR_Q"/>
          <define VALUE="600.0" NAME="REF_ERR_R"/>
          <define VALUE="28.0" NAME="REF_RATE_P"/>
          <define VALUE="28.0" NAME="REF_RATE_Q"/>
          <define VALUE="28.0" NAME="REF_RATE_R"/>
          <define VALUE="120.0" UNIT="deg/s" NAME="MAX_R"/>
          <define VALUE="8.0" NAME="FILT_CUTOFF"/>
          <define VALUE="8.0" NAME="ESTIMATION_FILT_CUTOFF"/>
          <define VALUE="0.1" NAME="ACT_DYN_P"/>
          <define VALUE="0.1" NAME="ACT_DYN_Q"/>
          <define VALUE="0.1" NAME="ACT_DYN_R"/>
          <define VALUE="FALSE" NAME="USE_ADAPTIVE"/>
          <define VALUE="0.0001" NAME="ADAPTIVE_MU"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="283" NAME="HOVER_KP"/>
          <define VALUE="82" NAME="HOVER_KD"/>
          <define VALUE="20" NAME="HOVER_KI"/>
          <define VALUE="0.655" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="TRUE" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="20" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="2" UNIT="m/s" NAME="REF_MAX_SPEED"/>
          <define VALUE="79" NAME="PGAIN"/>
          <define VALUE="100" NAME="DGAIN"/>
          <define VALUE="30" NAME="IGAIN"/>
        </section>
        <section PREFIX="NAV_" NAME="NAVIGATION">
          <define VALUE="2.5" NAME="CLIMB_VSPEED"/>
          <define VALUE="-1.0" NAME="DESCEND_VSPEED"/>
        </section>
        <section PREFIX="NPS_" NAME="SIMULATOR">
          <define VALUE="nw_motor, ne_motor, se_motor, sw_motor" TYPE="string[]" NAME="ACTUATOR_NAMES"/>
          <define VALUE="simple_x_quad_ccw" TYPE="string" NAME="JSBSIM_MODEL"/>
          <define VALUE="nps_sensors_params_default.h" TYPE="string" NAME="SENSORS_PARAMS"/>
        </section>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_NAV" NAME="MODE_STARTUP"/>
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_ATTITUDE_Z_HOLD" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_NAV" NAME="MODE_AUTO2"/>
          <define VALUE="TRUE" NAME="NO_RC_THRUST_LIMIT"/>
        </section>
        <section NAME="BAT">
          <define VALUE="8700" NAME="MILLIAMP_AT_FULL_THROTTLE"/>
          <define VALUE="9.9" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="11.0" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="11.1" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="12.4" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.05" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
            <message PERIOD="0.05" NAME="OPTICAL_FLOW_HOVER"/>
            <message PERIOD="0.10" NAME="VISUALTARGET"/>
            <message PERIOD="0.1" NAME="VISION_POSITION_ESTIMATE"/>
            <message PERIOD="0.05" NAME="DIVERGENCE"/>
            <message PERIOD="0.02" NAME="DRAGSPEED"/>
            <message PERIOD="5.1" NAME="LOGGER_STATUS"/>
            <message PERIOD="1.2" NAME="LIDAR"/>
            <message PERIOD=".25" NAME="INS_EKF2"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="BEBOP_ACTUATORS"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_FLOAT"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
            <message PERIOD="2.0" NAME="INDI_G"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="vel_guidance" KEY_PRESS="q">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HYBRID_GUIDANCE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1.0" NAME="GPS_INT"/>
            <message PERIOD="1.0" NAME="INS"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="RTCM3">
            <message PERIOD="1" NAME="GPS_RXMRTCM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD="1" NAME="GPS_RTK"/>
          </mode>
        </process>
        <process NAME="FlightRecorder">
          <mode NAME="default">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD=".1" NAME="GPS_INT"/>
            <message PERIOD=".1" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".2" NAME="IMU_MAG_SCALED"/>
            <message PERIOD="0.05" NAME="LIDAR"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="19"/>
            <dl_setting VAR="autopilot.kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot.power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot.mode" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="19" HANDLER="SetModeHandler"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Horiz Loop">
            <dl_setting VAR="gh_ref.max_speed" STEP="0.1" SHORTNAME="max_speed" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed">
              <strip_button VALUE="1" NAME="V1" GROUP="speed"/>
              <strip_button VALUE="2" NAME="V2" GROUP="speed"/>
              <strip_button VALUE="5" NAME="V5" GROUP="speed"/>
              <strip_button VALUE="10" NAME="V10" GROUP="speed"/>
            </dl_setting>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="Bebop_actuators" ac_id="24" airframe="airframes/tudelft/bebop_indi_actuators.xml" radio="radios/dummy.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/tudelft/delft_basic.xml" settings="settings/rotorcraft_basic.xml settings/control/rotorcraft_speed.xml" settings_modules="modules/air_data.xml [modules/geo_mag.xml] modules/guidance_indi.xml modules/ins_extended.xml modules/ahrs_int_cmpl_quat.xml modules/stabilization_indi.xml modules/nav_basic_rotorcraft.xml modules/guidance_rotorcraft.xml modules/gps.xml modules/imu_common.xml" gui_color="#ffffcccaccca">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitMM" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1120" MIN="1120" MAX="2000" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="2" name="Delft Basic" max_dist_from_home="1000" lon0="4 22 42.0" lat0="51 59 27.6" ground_alt="0" alt="4">
          <header>    #include &quot;autopilot.h&quot;
    #include &quot;subsystems/datalink/datalink.h&quot;
    #include &quot;subsystems/electrical.h&quot;
    #include &quot;subsystems/radio_control.h&quot;</header>
          <waypoints>
            <waypoint y="0.0" x="0.0" name="HOME"/>
            <waypoint y="5.0" x="0.0" name="CLIMB"/>
            <waypoint y="-5.0" x="-2.0" name="STDBY"/>
            <waypoint y="14.3" x="-19.9" name="p1"/>
            <waypoint y="21.6" x="-0.6" name="p2"/>
            <waypoint y="-26.5" x="22.2" name="p3"/>
            <waypoint y="-34.4" x="4.9" name="p4"/>
            <waypoint y="-29.4" x="14.2" name="CAM"/>
            <waypoint y="-10.9" x="5.6" name="TD"/>
          </waypoints>
          <exceptions>
            <exception deroute="ComeBackAndLand" cond="((radio_control.status == RC_REALLY_LOST) &&
      !(IndexOfBlock('Takeoff') > nav_block) &&
      !(nav_block >= IndexOfBlock('land here')) &&
      (autopilot_in_flight() == true) )"/>
            <exception deroute="DatalinkLoss" cond="(datalink_time > 60 &&
      !(datalink_time > 120) &&
      !(IndexOfBlock('Takeoff') > nav_block) &&
      !(nav_block >= IndexOfBlock('land here')) &&
      (autopilot_in_flight() == true) )"/>
            <exception deroute="ComeBackAndLand" cond="(electrical.bat_low &&
      !(IndexOfBlock('Holding point') > nav_block) &&
      !(nav_block >= IndexOfBlock('land here')) &&
      (autopilot_in_flight() == true) )"/>
            <exception deroute="land here" cond="(electrical.bat_critical &&
      !(IndexOfBlock('Holding point') > nav_block) &&
      !(nav_block >= IndexOfBlock('land here')) &&
      (autopilot_in_flight() == true) )"/>
          </exceptions>
          <blocks>
            <block name="Wait GPS" no="0">
              <call_once fun="NavKillThrottle()" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Geo init" no="1">
              <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
              <call_once fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Holding point" no="2">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="Start Engine" no="3">
              <call_once fun="NavResurrect()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff" name="Takeoff" no="4">
              <exception deroute="Standby" cond="stateGetPositionEnu_f()->z > 2.0"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="5">
              <stay wp="STDBY" no="0"/>
            </block>
            <block name="stay_p1" no="6">
              <stay wp="p1" no="0"/>
            </block>
            <block name="go_p2" no="7">
              <go wp="p2" no="0"/>
              <deroute block="stay_p1" no="1"/>
            </block>
            <block name="line_p1_p2" no="8">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <stay wp="p2" until="stage_time>10" no="1"/>
              <go wp="p1" hmode="route" from="p2" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="route" no="9">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <go wp="p3" hmode="route" from="p2" no="1"/>
              <go wp="p4" hmode="route" from="p3" no="2"/>
              <go wp="p1" hmode="route" from="p4" no="3"/>
              <deroute block="stay_p1" no="4"/>
            </block>
            <block name="test yaw" no="10">
              <go wp="p1" no="0"/>
              <for var="i" to="16" from="1" no="2">
                <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
              </for>
              <deroute block="Standby" no="5"/>
            </block>
            <block pre_call="nav_set_heading_towards_waypoint(WP_CAM)" name="circle CAM" no="11">
              <circle wp="CAM" radius="nav_radius" no="0"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land Here" name="land here" no="12">
              <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
            </block>
            <block name="land" no="13">
              <go wp="TD" no="0"/>
            </block>
            <block name="flare" no="14">
              <exception deroute="Holding point" cond="NavDetectGround()"/>
              <exception deroute="landed" cond="!nav_is_in_flight()"/>
              <call_once fun="NavStartDetectGround()" no="0"/>
              <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
            </block>
            <block name="landed" no="15">
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
            </block>
            <block name="ComeBackAndLand" no="16">
              <go wp="HOME" no="0"/>
              <deroute block="land here" no="1"/>
            </block>
            <block name="DatalinkLoss" no="17">
              <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
              <stay wp="TD" until="stage_time>60" no="1"/>
              <deroute block="ComeBackAndLand" no="2"/>
            </block>
            <block name="HOME" no="18">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="18" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="17" block_name="DatalinkLoss" stage="2">
            <deroute block="ComeBackAndLand" no="2"/>
          </stage>
          <stage block="17" block_name="DatalinkLoss" stage="1">
            <stay wp="TD" until="stage_time>60" no="1"/>
          </stage>
          <stage block="17" block_name="DatalinkLoss" stage="0">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="16" block_name="ComeBackAndLand" stage="1">
            <deroute block="land here" no="1"/>
          </stage>
          <stage block="16" block_name="ComeBackAndLand" stage="0">
            <go wp="HOME" no="0"/>
          </stage>
          <stage block="15" block_name="landed" stage="0">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
          </stage>
          <stage block="14" block_name="flare" stage="1">
            <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
          </stage>
          <stage block="14" block_name="flare" stage="0">
            <call_once fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="13" block_name="land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="12" block_name="land here" stage="0">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="11" block_name="circle CAM" stage="0">
            <circle wp="CAM" radius="nav_radius" no="0"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="5">
            <deroute block="Standby" no="5"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="3">
            <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="2">
            <for var="i" to="16" from="1" no="2">
              <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
            </for>
          </stage>
          <stage block="10" block_name="test yaw" stage="0">
            <go wp="p1" no="0"/>
          </stage>
          <stage block="9" block_name="route" stage="4">
            <deroute block="stay_p1" no="4"/>
          </stage>
          <stage block="9" block_name="route" stage="3">
            <go wp="p1" hmode="route" from="p4" no="3"/>
          </stage>
          <stage block="9" block_name="route" stage="2">
            <go wp="p4" hmode="route" from="p3" no="2"/>
          </stage>
          <stage block="9" block_name="route" stage="1">
            <go wp="p3" hmode="route" from="p2" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="2">
            <go wp="p1" hmode="route" from="p2" no="2"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="1">
            <stay wp="p2" until="stage_time>10" no="1"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="1">
            <deroute block="stay_p1" no="1"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="0">
            <go wp="p2" no="0"/>
          </stage>
          <stage block="6" block_name="stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="5" block_name="Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="1">
            <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="0">
            <call_once fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="2">
            <call_once fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="0">
            <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="air_data">
              <dl_setting VAR="air_data.qnh" STEP="1" SHORTNAME="QNH" MODULE="air_data/air_data" MIN="800" MAX="1200"/>
              <dl_setting VAR="air_data.tas_factor" TYPE="float" STEP="0.01" SHORTNAME="TASfactor" PERSISTENT="true" PARAM="AIR_DATA_TAS_FACTOR" MODULE="air_data/air_data" MIN="0.8" MAX="1.3"/>
              <dl_setting VAR="air_data.calc_qnh_once" STEP="1" SHORTNAME="calcQNH" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_airspeed" TYPE="uint8" STEP="1" SHORTNAME="calcAirspeed" PERSISTENT="true" PARAM="AIR_DATA_CALC_AIRSPEED" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_tas_factor" TYPE="uint8" STEP="1" SHORTNAME="calcTASfactor" PERSISTENT="true" PARAM="AIR_DATA_CALC_TAS_FACTOR" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_amsl_baro" TYPE="uint8" STEP="1" SHORTNAME="calcAMSL" PERSISTENT="true" PARAM="AIR_DATA_CALC_AMSL_BARO" MODULE="air_data/air_data" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="guidance_indi">
              <dl_setting VAR="guidance_indi_pos_gain" STEP="0.1" SHORTNAME="kp_p" PERSISTENT="true" PARAM="GUIDANCE_INDI_POS_GAIN" MIN="0" MAX="10.0"/>
              <dl_setting VAR="guidance_indi_speed_gain" STEP="0.1" SHORTNAME="kp_p" PERSISTENT="true" PARAM="GUIDANCE_INDI_SPEED_GAIN" MIN="0" MAX="10.0"/>
              <dl_setting VAR="guidance_indi_max_bank" STEP="0.1" SHORTNAME="max_bank" PARAM="GUIDANCE_H_MAX_BANK" MIN="0" MAX="80.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="Ins Extended">
            <dl_settings NAME="INS">
              <dl_setting VAR="vff.accel_noise" STEP="0.1" SHORTNAME="accel_noise" MODULE="subsystems/ins/vf_extended_float" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_baro" STEP="0.1" SHORTNAME="r_baro" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_alt" STEP="0.1" SHORTNAME="r_alt" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_obs_height" STEP="0.1" SHORTNAME="r_obs_height" MIN="0" MAX="10"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
              <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
              <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
              <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
              <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="indi">
              <dl_setting VAR="reference_acceleration.err_p" STEP="1" SHORTNAME="kp_p" PARAM="STABILIZATION_INDI_REF_ERR_P" MIN="0" MAX="2500"/>
              <dl_setting VAR="reference_acceleration.rate_p" STEP="0.1" SHORTNAME="kd_p" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="reference_acceleration.err_q" STEP="1" SHORTNAME="kp_q" PARAM="STABILIZATION_INDI_REF_ERR_Q" MIN="0" MAX="2500"/>
              <dl_setting VAR="reference_acceleration.rate_q" STEP="0.1" SHORTNAME="kd_q" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="reference_acceleration.err_r" STEP="1" SHORTNAME="kp_r" PARAM="STABILIZATION_INDI_REF_ERR_R" MIN="0" MAX="2500"/>
              <dl_setting VAR="reference_acceleration.rate_r" STEP="0.1" SHORTNAME="kd_r" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi_use_adaptive" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="use_adaptive" PARAM="STABILIZATION_INDI_USE_ADAPTIVE" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="NAV">
              <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
              <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
              <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MIN="-50" MAX="50"/>
              <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MIN="0" MAX="10.0"/>
              <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MIN="-10.0" MAX="0.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Vert Loop">
              <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
              <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MIN="0.2" MAX="0.8"/>
              <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MIN="0" MAX="1"/>
              <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
            <dl_settings NAME="Horiz Loop">
              <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="true" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
              <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
              <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MIN="0" MAX="1"/>
              <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
              <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
              <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
              <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
              <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
              <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="bebop_indi">
        <description>?</description>
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="bebop">
            <define VALUE="TRUE" NAME="INDI_RPM_FEEDBACK"/>
          </target>
          <target NAME="nps" BOARD="pc">
            <module TYPE="jsbsim" NAME="fdm"/>
            <module NAME="udp"/>
            <define VALUE="FALSE" NAME="INDI_RPM_FEEDBACK"/>
          </target>
          <module TYPE="transparent_udp" NAME="telemetry"/>
          <module TYPE="datalink" NAME="radio_control"/>
          <module TYPE="bebop" NAME="actuators"/>
          <module TYPE="bebop" NAME="imu"/>
          <module TYPE="furuno" NAME="gps"/>
          <module TYPE="indi" NAME="stabilization"/>
          <module TYPE="rate_indi" NAME="stabilization"/>
          <module TYPE="int_cmpl_quat" NAME="ahrs">
            <configure VALUE="TRUE" NAME="USE_MAGNETOMETER"/>
            <define VALUE="FALSE" NAME="AHRS_USE_GPS_HEADING"/>
          </module>
          <module TYPE="extended" NAME="ins"/>
          <module TYPE="indi" NAME="guidance">
            <define VALUE="-500.0" NAME="GUIDANCE_INDI_SPECIFIC_FORCE_GAIN"/>
            <define VALUE="0.1" NAME="GUIDANCE_INDI_THRUST_DYNAMICS"/>
            <define VALUE="FALSE" NAME="GUIDANCE_INDI_RC_DEBUG"/>
          </module>
          <module NAME="geo_mag"/>
          <module NAME="air_data"/>
          <module NAME="send_imu_mag_current"/>
        </firmware>
        <commands>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="6000"/>
        </commands>
        <servos DRIVER="Default">
          <servo NO="0" NEUTRAL="3000" NAME="TOP_LEFT" MIN="3000" MAX="9800"/>
          <servo NO="1" NEUTRAL="3000" NAME="TOP_RIGHT" MIN="3000" MAX="9800"/>
          <servo NO="2" NEUTRAL="3000" NAME="BOTTOM_RIGHT" MIN="3000" MAX="9800"/>
          <servo NO="3" NEUTRAL="3000" NAME="BOTTOM_LEFT" MIN="3000" MAX="9800"/>
        </servos>
        <command_laws>
          <set VALUE="autopilot_get_motors_on() ? actuators_pprz[0] : -MAX_PPRZ" SERVO="TOP_LEFT"/>
          <set VALUE="autopilot_get_motors_on() ? actuators_pprz[1] : -MAX_PPRZ" SERVO="TOP_RIGHT"/>
          <set VALUE="autopilot_get_motors_on() ? actuators_pprz[2] : -MAX_PPRZ" SERVO="BOTTOM_RIGHT"/>
          <set VALUE="autopilot_get_motors_on() ? actuators_pprz[3] : -MAX_PPRZ" SERVO="BOTTOM_LEFT"/>
        </command_laws>
        <section PREFIX="AIR_DATA_" NAME="AIR_DATA">
          <define VALUE="FALSE" NAME="CALC_AIRSPEED"/>
          <define VALUE="FALSE" NAME="CALC_TAS_FACTOR"/>
          <define VALUE="TRUE" NAME="CALC_AMSL_BARO"/>
        </section>
        <include HREF="conf/airframes/tudelft/calibrations/bebop7.xml"/>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.3892503" NAME="H_X"/>
          <define VALUE="0.0017972" NAME="H_Y"/>
          <define VALUE="0.9211303" NAME="H_Z"/>
          <define VALUE="0" NAME="GRAVITY_HEURISTIC_FACTOR"/>
        </section>
        <section PREFIX="INS_" NAME="INS">
          <define VALUE="2.2" NAME="SONAR_MAX_RANGE"/>
          <define VALUE="TRUE" NAME="SONAR_UPDATE_ON_AGL"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="RC_SETPOINT">
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="400" UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="0" NAME="DEADBAND_A"/>
          <define VALUE="0" NAME="DEADBAND_E"/>
          <define VALUE="50" NAME="DEADBAND_R"/>
        </section>
        <section PREFIX="STABILIZATION_INDI_" NAME="STABILIZATION_ATTITUDE_INDI">
          <define VALUE="{20 , -20, -20 , 20 }" NAME="G1_ROLL"/>
          <define VALUE="{14 , 14, -14 , -14 }" NAME="G1_PITCH"/>
          <define VALUE="{-1, 1, -1, 1}" NAME="G1_YAW"/>
          <define VALUE="{-.4, -.4, -.4, -.4}" NAME="G1_THRUST"/>
          <define VALUE="{-61.2093,   65.3670,  -65.7419,   65.4516}" NAME="G2"/>
          <define VALUE="600.0" NAME="REF_ERR_P"/>
          <define VALUE="600.0" NAME="REF_ERR_Q"/>
          <define VALUE="600.0" NAME="REF_ERR_R"/>
          <define VALUE="28.0" NAME="REF_RATE_P"/>
          <define VALUE="28.0" NAME="REF_RATE_Q"/>
          <define VALUE="28.0" NAME="REF_RATE_R"/>
          <define VALUE="4.0" NAME="ESTIMATION_FILT_CUTOFF"/>
          <define VALUE="5.0" NAME="FILT_CUTOFF"/>
          <define VALUE="{0.1, 0.1, 0.1, 0.1}" NAME="ACT_DYN"/>
          <define VALUE="TRUE" NAME="USE_ADAPTIVE"/>
          <define VALUE="0.0001" NAME="ADAPTIVE_MU"/>
          <define VALUE="{1000, 1000, 1, 100}" NAME="WLS_PRIORITIES"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="283" NAME="HOVER_KP"/>
          <define VALUE="82" NAME="HOVER_KD"/>
          <define VALUE="20" NAME="HOVER_KI"/>
          <define VALUE="0.655" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="TRUE" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="20" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="2" UNIT="m/s" NAME="REF_MAX_SPEED"/>
          <define VALUE="79" NAME="PGAIN"/>
          <define VALUE="100" NAME="DGAIN"/>
          <define VALUE="30" NAME="IGAIN"/>
        </section>
        <section PREFIX="NAV_" NAME="NAVIGATION">
          <define VALUE="2.5" NAME="CLIMB_VSPEED"/>
          <define VALUE="-1.0" NAME="DESCEND_VSPEED"/>
        </section>
        <section PREFIX="NPS_" NAME="SIMULATOR">
          <define VALUE="nw_motor, ne_motor, se_motor, sw_motor" TYPE="string[]" NAME="ACTUATOR_NAMES"/>
          <define VALUE="bebop" TYPE="string" NAME="JSBSIM_MODEL"/>
          <define VALUE="nps_sensors_params_default.h" TYPE="string" NAME="SENSORS_PARAMS"/>
          <define VALUE="TRUE" NAME="NO_MOTOR_MIXING"/>
        </section>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_NAV" NAME="MODE_STARTUP"/>
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_ATTITUDE_Z_HOLD" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_NAV" NAME="MODE_AUTO2"/>
          <define VALUE="TRUE" NAME="NO_RC_THRUST_LIMIT"/>
        </section>
        <section NAME="BAT">
          <define VALUE="8700" NAME="MILLIAMP_AT_FULL_THROTTLE"/>
          <define VALUE="9.9" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="11.0" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="11.1" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="12.4" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.05" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
            <message PERIOD="0.05" NAME="OPTICAL_FLOW_HOVER"/>
            <message PERIOD="0.10" NAME="VISUALTARGET"/>
            <message PERIOD="0.1" NAME="VISION_POSITION_ESTIMATE"/>
            <message PERIOD="0.05" NAME="DIVERGENCE"/>
            <message PERIOD="0.02" NAME="DRAGSPEED"/>
            <message PERIOD="5.1" NAME="LOGGER_STATUS"/>
            <message PERIOD="1.2" NAME="LIDAR"/>
            <message PERIOD=".25" NAME="INS_EKF2"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="BEBOP_ACTUATORS"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_FLOAT"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
            <message PERIOD="2.0" NAME="INDI_G"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="vel_guidance" KEY_PRESS="q">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HYBRID_GUIDANCE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1.0" NAME="GPS_INT"/>
            <message PERIOD="1.0" NAME="INS"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="RTCM3">
            <message PERIOD="1" NAME="GPS_RXMRTCM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD="1" NAME="GPS_RTK"/>
          </mode>
        </process>
        <process NAME="FlightRecorder">
          <mode NAME="default">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD=".1" NAME="GPS_INT"/>
            <message PERIOD=".1" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".2" NAME="IMU_MAG_SCALED"/>
            <message PERIOD="0.05" NAME="LIDAR"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="19"/>
            <dl_setting VAR="autopilot.kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot.power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot.mode" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="19" HANDLER="SetModeHandler"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Horiz Loop">
            <dl_setting VAR="gh_ref.max_speed" STEP="0.1" SHORTNAME="max_speed" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed">
              <strip_button VALUE="1" NAME="V1" GROUP="speed"/>
              <strip_button VALUE="2" NAME="V2" GROUP="speed"/>
              <strip_button VALUE="5" NAME="V5" GROUP="speed"/>
              <strip_button VALUE="10" NAME="V10" GROUP="speed"/>
            </dl_setting>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="Bebop_default" ac_id="20" airframe="airframes/examples/bebop.xml" radio="radios/dummy.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/rotorcraft_basic.xml" settings="settings/rotorcraft_basic.xml settings/control/rotorcraft_speed.xml" settings_modules="modules/bebop_ae_awb.xml modules/video_rtp_stream.xml modules/bebop_cam.xml modules/air_data.xml modules/geo_mag.xml modules/ins_extended.xml modules/ahrs_float_mlkf.xml modules/stabilization_int_quat.xml modules/nav_basic_rotorcraft.xml modules/guidance_rotorcraft.xml modules/gps.xml modules/imu_common.xml" gui_color="#ffffbc3bce5b">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitMM" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1120" MIN="1120" MAX="2000" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="2" name="Rotorcraft Basic (Enac)" max_dist_from_home="150" lon0="1 28 52.61" lat0="43 33 50.83" ground_alt="147" alt="152">
          <header>#include &quot;autopilot.h&quot;</header>
          <waypoints>
            <waypoint y="0.0" x="0.0" name="HOME"/>
            <waypoint y="5.0" x="0.0" name="CLIMB"/>
            <waypoint y="-5.0" x="-2.0" name="STDBY"/>
            <waypoint y="-13.9" x="3.6" name="p1"/>
            <waypoint y="-48.2" x="27.5" name="p2"/>
            <waypoint y="-19.6" x="16.7" name="p3"/>
            <waypoint y="-40.7" x="13.7" name="p4"/>
            <waypoint y="-50" x="-20" name="CAM" height="2."/>
            <waypoint y="-10.9" x="5.6" name="TD"/>
          </waypoints>
          <blocks>
            <block name="Wait GPS" no="0">
              <call_once fun="NavKillThrottle()" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Geo init" no="1">
              <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
              <call_once fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Holding point" no="2">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="Start Engine" no="3">
              <call_once fun="NavResurrect()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff" name="Takeoff" no="4">
              <exception deroute="Standby" cond="stateGetPositionEnu_f() @DEREF z @GT 2.0"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="5">
              <stay wp="STDBY" no="0"/>
            </block>
            <block name="stay_p1" no="6">
              <stay wp="p1" no="0"/>
            </block>
            <block name="go_p2" no="7">
              <call_once fun="nav_set_heading_deg(90)" no="0"/>
              <go wp="p2" no="1"/>
              <deroute block="stay_p1" no="2"/>
            </block>
            <block name="line_p1_p2" no="8">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <stay wp="p2" until="stage_time>10" no="1"/>
              <go wp="p1" hmode="route" from="p2" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="route" no="9">
              <go wp="p3" hmode="route" from="p1" no="0"/>
              <go wp="p4" hmode="route" from="p3" no="1"/>
              <go wp="p1" hmode="route" from="p4" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="Oval" no="10">
              <oval radius="-1" p2="p2" p1="p1" no="1"/>
            </block>
            <block name="test yaw" no="11">
              <go wp="p1" no="0"/>
              <for var="i" to="16" from="1" no="2">
                <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
              </for>
              <deroute block="Standby" no="5"/>
            </block>
            <block pre_call="nav_set_heading_towards_waypoint(WP_CAM)" name="circle CAM" no="12">
              <circle wp="CAM" radius="nav_radius" no="0"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land Here" name="land here" no="13">
              <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
            </block>
            <block name="land" no="14">
              <go wp="TD" no="0"/>
            </block>
            <block name="flare" no="15">
              <exception deroute="Holding point" cond="NavDetectGround()"/>
              <exception deroute="landed" cond="!nav_is_in_flight()"/>
              <call_once fun="NavStartDetectGround()" no="0"/>
              <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
            </block>
            <block name="landed" no="16">
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
            </block>
            <block name="HOME" no="17">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="17" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="16" block_name="landed" stage="0">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
          </stage>
          <stage block="15" block_name="flare" stage="1">
            <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
          </stage>
          <stage block="15" block_name="flare" stage="0">
            <call_once fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="14" block_name="land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="13" block_name="land here" stage="0">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="12" block_name="circle CAM" stage="0">
            <circle wp="CAM" radius="nav_radius" no="0"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="5">
            <deroute block="Standby" no="5"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="3">
            <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="2">
            <for var="i" to="16" from="1" no="2">
              <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
            </for>
          </stage>
          <stage block="11" block_name="test yaw" stage="0">
            <go wp="p1" no="0"/>
          </stage>
          <stage block="10" block_name="Oval" stage="1">
            <oval radius="-1" p2="p2" p1="p1" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="9" block_name="route" stage="2">
            <go wp="p1" hmode="route" from="p4" no="2"/>
          </stage>
          <stage block="9" block_name="route" stage="1">
            <go wp="p4" hmode="route" from="p3" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="0">
            <go wp="p3" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="2">
            <go wp="p1" hmode="route" from="p2" no="2"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="1">
            <stay wp="p2" until="stage_time>10" no="1"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="2">
            <deroute block="stay_p1" no="2"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="1">
            <go wp="p2" no="1"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="0">
            <call_once fun="nav_set_heading_deg(90)" no="0"/>
          </stage>
          <stage block="6" block_name="stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="5" block_name="Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="1">
            <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="0">
            <call_once fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="2">
            <call_once fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="0">
            <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AE/AWB">
              <dl_setting VAR="ae_set.active" VALUES="OFF|ON" STEP="1" SHORTNAME="AE active" MODULE="computer_vision/bebop_ae_awb" MIN="0" MAX="1"/>
              <dl_setting VAR="ae_set.exposure_gain" STEP="0.02" SHORTNAME="AE gain" MODULE="computer_vision/bebop_ae_awb" MIN="0" MAX="2"/>
              <dl_setting VAR="ae_set.middle_index" STEP="1" SHORTNAME="AE center bin" MODULE="computer_vision/bebop_ae_awb" MIN="6" MAX="249"/>
              <dl_setting VAR="ae_set.dark_bins" STEP="1" SHORTNAME="AE dark bins" MODULE="computer_vision/bebop_ae_awb" MIN="0" MAX="127"/>
              <dl_setting VAR="ae_set.bright_bins" STEP="1" SHORTNAME="AE bright bins" MODULE="computer_vision/bebop_ae_awb" MIN="0" MAX="127"/>
              <dl_setting VAR="ae_set.dark_ignore" STEP="0.01" SHORTNAME="AE ignore dark (%)" MODULE="computer_vision/bebop_ae_awb" MIN="0" MAX="1"/>
              <dl_setting VAR="ae_set.bright_ignore" STEP="0.01" SHORTNAME="AE ignore bright (%)" MODULE="computer_vision/bebop_ae_awb" MIN="0" MAX="1"/>
              <dl_setting VAR="awb_set.active" VALUES="OFF|ON" STEP="1" SHORTNAME="AWB Active" MODULE="computer_vision/bebop_ae_awb" MIN="0" MAX="1"/>
              <dl_setting VAR="awb_set.gain" STEP="0.02" SHORTNAME="AWB gain" MODULE="computer_vision/bebop_ae_awb" MIN="0" MAX="2"/>
              <dl_setting VAR="awb_set.gain_scheduling" VALUES="OFF|ON" STEP="1" SHORTNAME="AE gain sched" MODULE="computer_vision/bebop_ae_awb" MIN="0" MAX="1"/>
              <dl_setting VAR="awb_set.gain_scheduling_target" STEP="0.5" SHORTNAME="sched target" MODULE="computer_vision/bebop_ae_awb" MIN="1" MAX="20"/>
              <dl_setting VAR="awb_set.gain_scheduling_tolerance" STEP="0.5" SHORTNAME="sched tolerance" MODULE="computer_vision/bebop_ae_awb" MIN="1" MAX="20"/>
              <dl_setting VAR="awb_set.gain_scheduling_step" STEP="0.005" SHORTNAME="sched step" MODULE="computer_vision/bebop_ae_awb" MIN="0.005" MAX="0.1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="video">
              <dl_setting VAR="viewvideo.use_rtp" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="rtp" PARAM="VIEWVIDEO_USE_RTP" MODULE="computer_vision/viewvideo" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="Bebop camera control">
            <dl_settings NAME="Front camera">
              <dl_setting VAR="mt9f002.set_zoom" STEP="0.05" SHORTNAME="zoom" PARAM="MT9F002_ZOOM" MIN="1." MAX="2.5"/>
              <dl_setting VAR="mt9f002.set_offset_x" STEP="0.05" SHORTNAME="offset_x" PARAM="MT9F002_OFFSET_X" MIN="-0.5" MAX="0.5"/>
              <dl_setting VAR="mt9f002.set_offset_y" STEP="0.05" SHORTNAME="offset_y" PARAM="MT9F002_OFFSET_Y" MIN="-0.5" MAX="0.5"/>
              <dl_setting VAR="mt9f002_send_resolution" VALUES="SEND" STEP="1" SHORTNAME="update_resolution" MODULE="boards/bebop/mt9f002" MIN="1" MAX="1" HANDLER="setting_update_resolution"/>
              <dl_setting VAR="mt9f002.gain_green1" STEP="0.1" SHORTNAME="green_1" PARAM="MT9F002_GAIN_GREEN1" MIN="1" MAX="60"/>
              <dl_setting VAR="mt9f002.gain_green2" STEP="0.1" SHORTNAME="green_2" PARAM="MT9F002_GAIN_GREEN2" MIN="1" MAX="60"/>
              <dl_setting VAR="mt9f002.gain_blue" STEP="0.1" SHORTNAME="blue" PARAM="MT9F002_GAIN_BLUE" MIN="1" MAX="60"/>
              <dl_setting VAR="mt9f002.gain_red" STEP="0.1" SHORTNAME="red" PARAM="MT9F002_GAIN_RED" MIN="1" MAX="60"/>
              <dl_setting VAR="mt9f002_send_color" VALUES="SEND" STEP="1" SHORTNAME="update_color" MODULE="boards/bebop/mt9f002" MIN="1" MAX="1" HANDLER="setting_update_color"/>
              <dl_setting VAR="mt9f002.target_exposure " STEP="0.1" SHORTNAME="exposure" PARAM="MT9F002_TARGET_EXPOSURE" MIN="0.1" MAX="80"/>
              <dl_setting VAR="mt9f002_send_exposure" VALUES="SEND" STEP="1" SHORTNAME="update_exposure" MODULE="boards/bebop/mt9f002" MIN="1" MAX="1" HANDLER="setting_update_exposure"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="air_data">
              <dl_setting VAR="air_data.qnh" STEP="1" SHORTNAME="QNH" MODULE="air_data/air_data" MIN="800" MAX="1200"/>
              <dl_setting VAR="air_data.tas_factor" TYPE="float" STEP="0.01" SHORTNAME="TASfactor" PERSISTENT="true" PARAM="AIR_DATA_TAS_FACTOR" MODULE="air_data/air_data" MIN="0.8" MAX="1.3"/>
              <dl_setting VAR="air_data.calc_qnh_once" STEP="1" SHORTNAME="calcQNH" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_airspeed" TYPE="uint8" STEP="1" SHORTNAME="calcAirspeed" PERSISTENT="true" PARAM="AIR_DATA_CALC_AIRSPEED" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_tas_factor" TYPE="uint8" STEP="1" SHORTNAME="calcTASfactor" PERSISTENT="true" PARAM="AIR_DATA_CALC_TAS_FACTOR" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_amsl_baro" TYPE="uint8" STEP="1" SHORTNAME="calcAMSL" PERSISTENT="true" PARAM="AIR_DATA_CALC_AMSL_BARO" MODULE="air_data/air_data" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="geo_mag">
              <dl_setting VAR="geo_mag.calc_once" VALUES="OFF|CALC" STEP="1" SHORTNAME="calcNow" MODULE="geo_mag/geo_mag" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="Ins Extended">
            <dl_settings NAME="INS">
              <dl_setting VAR="vff.accel_noise" STEP="0.1" SHORTNAME="accel_noise" MODULE="subsystems/ins/vf_extended_float" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_baro" STEP="0.1" SHORTNAME="r_baro" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_alt" STEP="0.1" SHORTNAME="r_alt" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_obs_height" STEP="0.1" SHORTNAME="r_obs_height" MIN="0" MAX="10"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_mlkf.mag_noise.x" TYPE="float" STEP="0.02" SHORTNAME="mag_noise_x" PERSISTENT="true" PARAM="AHRS_MAG_NOISE_X" MODULE="subsystems/ahrs/ahrs_float_mlkf" MIN="0.0" MAX="1.0"/>
              <dl_setting VAR="ahrs_mlkf.mag_noise.y" TYPE="float" STEP="0.02" SHORTNAME="mag_noise_y" PERSISTENT="true" PARAM="AHRS_MAG_NOISE_Y" MODULE="subsystems/ahrs/ahrs_float_mlkf" MIN="0.0" MAX="1.0"/>
              <dl_setting VAR="ahrs_mlkf.mag_noise.z" TYPE="float" STEP="0.02" SHORTNAME="mag_noise_z" PERSISTENT="true" PARAM="AHRS_MAG_NOISE_Z" MODULE="subsystems/ahrs/ahrs_float_mlkf" MIN="0.0" MAX="1.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Att Loop">
              <dl_setting VAR="stabilization_gains.p.x" TYPE="int32" STEP="1" SHORTNAME="pgain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_PGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="8000"/>
              <dl_setting VAR="stabilization_gains.d.x" TYPE="int32" STEP="1" SHORTNAME="dgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.x" TYPE="int32" STEP="1" SHORTNAME="igain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_IGAIN" MIN="0" MAX="800"/>
              <dl_setting VAR="stabilization_gains.dd.x" TYPE="int32" STEP="1" SHORTNAME="ddgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="stabilization_gains.p.y" TYPE="int32" STEP="1" SHORTNAME="pgain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_PGAIN" MIN="1" MAX="8000"/>
              <dl_setting VAR="stabilization_gains.d.y" TYPE="int32" STEP="1" SHORTNAME="dgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.y" TYPE="int32" STEP="1" SHORTNAME="igain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_IGAIN" MIN="0" MAX="800"/>
              <dl_setting VAR="stabilization_gains.dd.y" TYPE="int32" STEP="1" SHORTNAME="ddgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="stabilization_gains.p.z" TYPE="int32" STEP="1" SHORTNAME="pgain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_PGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.d.z" TYPE="int32" STEP="1" SHORTNAME="dgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.z" TYPE="int32" STEP="1" SHORTNAME="igain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_IGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="stabilization_gains.dd.z" TYPE="int32" STEP="1" SHORTNAME="ddgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.p" UNIT="rad/s" STEP="1" SHORTNAME="omega p" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_P" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaP" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.p" STEP="0.05" SHORTNAME="zeta p" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_P" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaP"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.q" UNIT="rad/s" STEP="1" SHORTNAME="omega q" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_Q" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaQ" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.q" STEP="0.05" SHORTNAME="zeta q" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_Q" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaQ"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.r" UNIT="rad/s" STEP="1" SHORTNAME="omega r" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_R" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaR" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.r" STEP="0.05" SHORTNAME="zeta r" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_R" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaR"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="NAV">
              <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
              <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
              <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MIN="-50" MAX="50"/>
              <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MIN="0" MAX="10.0"/>
              <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MIN="-10.0" MAX="0.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Vert Loop">
              <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
              <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MIN="0.2" MAX="0.8"/>
              <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MIN="0" MAX="1"/>
              <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
            <dl_settings NAME="Horiz Loop">
              <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="true" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
              <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
              <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MIN="0" MAX="1"/>
              <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
              <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
              <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
              <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
              <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
              <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="bebop">
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="bebop"/>
          <target NAME="nps" BOARD="pc">
            <module TYPE="jsbsim" NAME="fdm"/>
            <module NAME="udp"/>
          </target>
          <define VALUE="true" NAME="USE_SONAR"/>
          <module TYPE="transparent_udp" NAME="telemetry"/>
          <module TYPE="datalink" NAME="radio_control"/>
          <module NAME="motor_mixing"/>
          <module TYPE="bebop" NAME="actuators"/>
          <module TYPE="bebop" NAME="imu"/>
          <module TYPE="furuno" NAME="gps"/>
          <module TYPE="int_quat" NAME="stabilization"/>
          <module TYPE="float_mlkf" NAME="ahrs"/>
          <module TYPE="extended" NAME="ins"/>
          <module NAME="geo_mag"/>
          <module NAME="air_data"/>
          <module NAME="send_imu_mag_current"/>
          <module NAME="bebop_cam"/>
          <module NAME="video_rtp_stream">
            <define VALUE="bottom_camera" NAME="VIEWVIDEO_CAMERA"/>
            <define VALUE="front_camera" NAME="VIEWVIDEO_CAMERA2"/>
            <define VALUE="2" NAME="VIEWVIDEO_DOWNSIZE_FACTOR"/>
            <define VALUE="40" NAME="VIEWVIDEO_QUALITY_FACTOR"/>
          </module>
          <module NAME="bebop_ae_awb"/>
        </firmware>
        <commands>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="6000"/>
        </commands>
        <servos DRIVER="Default">
          <servo NO="0" NEUTRAL="3000" NAME="TOP_LEFT" MIN="3000" MAX="12000"/>
          <servo NO="1" NEUTRAL="3000" NAME="TOP_RIGHT" MIN="3000" MAX="12000"/>
          <servo NO="2" NEUTRAL="3000" NAME="BOTTOM_RIGHT" MIN="3000" MAX="12000"/>
          <servo NO="3" NEUTRAL="3000" NAME="BOTTOM_LEFT" MIN="3000" MAX="12000"/>
        </servos>
        <section PREFIX="MOTOR_MIXING_" NAME="MIXING">
          <define VALUE="QUAD_X" NAME="TYPE"/>
        </section>
        <command_laws>
          <call FUN="motor_mixing_run(autopilot_get_motors_on(),FALSE,values)"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_LEFT]" SERVO="TOP_LEFT"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_RIGHT]" SERVO="TOP_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_RIGHT]" SERVO="BOTTOM_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_LEFT]" SERVO="BOTTOM_LEFT"/>
        </command_laws>
        <section PREFIX="MT9F002_" NAME="BEBOP_FRONT_CAMERA">
          <define VALUE="640" NAME="OUTPUT_HEIGHT"/>
          <define VALUE="640" NAME="OUTPUT_WIDTH"/>
          <define VALUE="0.15" NAME="OFFSET_X"/>
          <define VALUE="30" NAME="TARGET_EXPOSURE"/>
          <define VALUE="1.25" NAME="ZOOM"/>
        </section>
        <section PREFIX="AIR_DATA_" NAME="AIR_DATA">
          <define VALUE="FALSE" NAME="CALC_AIRSPEED"/>
          <define VALUE="FALSE" NAME="CALC_TAS_FACTOR"/>
          <define VALUE="TRUE" NAME="CALC_AMSL_BARO"/>
        </section>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="18" NAME="MAG_X_NEUTRAL"/>
          <define VALUE="157" NAME="MAG_Y_NEUTRAL"/>
          <define VALUE="49" NAME="MAG_Z_NEUTRAL"/>
          <define VALUE="10.5007722373" NAME="MAG_X_SENS" INTEGER="16"/>
          <define VALUE="11.1147400462" NAME="MAG_Y_SENS" INTEGER="16"/>
          <define VALUE="11.6479371722" NAME="MAG_Z_SENS" INTEGER="16"/>
          <define VALUE="0.0" NAME="MAG_X_CURRENT_COEF"/>
          <define VALUE="0.0" NAME="MAG_Y_CURRENT_COEF"/>
          <define VALUE="0.0" NAME="MAG_Z_CURRENT_COEF"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.3892503" NAME="H_X"/>
          <define VALUE="0.0017972" NAME="H_Y"/>
          <define VALUE="0.9211303" NAME="H_Z"/>
        </section>
        <section PREFIX="INS_" NAME="INS">
          <define VALUE="2.2" NAME="SONAR_MAX_RANGE"/>
          <define VALUE="TRUE" NAME="SONAR_UPDATE_ON_AGL"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="STABILIZATION_ATTITUDE">
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="300" UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="0" NAME="DEADBAND_A"/>
          <define VALUE="0" NAME="DEADBAND_E"/>
          <define VALUE="50" NAME="DEADBAND_R"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.9" NAME="REF_ZETA_P"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.9" NAME="REF_ZETA_Q"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.9" NAME="REF_ZETA_R"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_RDOT"/>
          <define VALUE="920" NAME="PHI_PGAIN"/>
          <define VALUE="425" NAME="PHI_DGAIN"/>
          <define VALUE="0" NAME="PHI_IGAIN"/>
          <define VALUE="920" NAME="THETA_PGAIN"/>
          <define VALUE="425" NAME="THETA_DGAIN"/>
          <define VALUE="0" NAME="THETA_IGAIN"/>
          <define VALUE="8000" NAME="PSI_PGAIN"/>
          <define VALUE="700" NAME="PSI_DGAIN"/>
          <define VALUE="0" NAME="PSI_IGAIN"/>
          <define VALUE="0" NAME="PHI_DDGAIN"/>
          <define VALUE="0" NAME="THETA_DDGAIN"/>
          <define VALUE="0" NAME="PSI_DDGAIN"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="283" NAME="HOVER_KP"/>
          <define VALUE="82" NAME="HOVER_KD"/>
          <define VALUE="13" NAME="HOVER_KI"/>
          <define VALUE="0.655" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="TRUE" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="20" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="79" NAME="PGAIN"/>
          <define VALUE="100" NAME="DGAIN"/>
          <define VALUE="30" NAME="IGAIN"/>
        </section>
        <section PREFIX="NAV_" NAME="NAVIGATION">
          <define VALUE="2.5" NAME="CLIMB_VSPEED"/>
          <define VALUE="-1.0" NAME="DESCEND_VSPEED"/>
        </section>
        <section PREFIX="NPS_" NAME="SIMULATOR">
          <define VALUE="nw_motor, ne_motor, se_motor, sw_motor" TYPE="string[]" NAME="ACTUATOR_NAMES"/>
          <define VALUE="simple_x_quad_ccw" TYPE="string" NAME="JSBSIM_MODEL"/>
          <define VALUE="nps_sensors_params_default.h" TYPE="string" NAME="SENSORS_PARAMS"/>
        </section>
        <include HREF="conf/simulator/gazebo/airframes/bebop.xml"/>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_NAV" NAME="MODE_STARTUP"/>
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_ATTITUDE_Z_HOLD" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_NAV" NAME="MODE_AUTO2"/>
        </section>
        <section NAME="BAT">
          <define VALUE="8700" NAME="MILLIAMP_AT_FULL_THROTTLE"/>
          <define VALUE="9.3" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="9.6" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="10.6" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="12.4" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.05" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
            <message PERIOD="0.05" NAME="OPTICAL_FLOW_HOVER"/>
            <message PERIOD="0.10" NAME="VISUALTARGET"/>
            <message PERIOD="0.1" NAME="VISION_POSITION_ESTIMATE"/>
            <message PERIOD="0.05" NAME="DIVERGENCE"/>
            <message PERIOD="0.02" NAME="DRAGSPEED"/>
            <message PERIOD="5.1" NAME="LOGGER_STATUS"/>
            <message PERIOD="1.2" NAME="LIDAR"/>
            <message PERIOD=".25" NAME="INS_EKF2"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="BEBOP_ACTUATORS"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_FLOAT"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
            <message PERIOD="2.0" NAME="INDI_G"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="vel_guidance" KEY_PRESS="q">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HYBRID_GUIDANCE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1.0" NAME="GPS_INT"/>
            <message PERIOD="1.0" NAME="INS"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="RTCM3">
            <message PERIOD="1" NAME="GPS_RXMRTCM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD="1" NAME="GPS_RTK"/>
          </mode>
        </process>
        <process NAME="FlightRecorder">
          <mode NAME="default">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD=".1" NAME="GPS_INT"/>
            <message PERIOD=".1" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".2" NAME="IMU_MAG_SCALED"/>
            <message PERIOD="0.05" NAME="LIDAR"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="19"/>
            <dl_setting VAR="autopilot.kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot.power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot.mode" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="19" HANDLER="SetModeHandler"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Horiz Loop">
            <dl_setting VAR="gh_ref.max_speed" STEP="0.1" SHORTNAME="max_speed" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed">
              <strip_button VALUE="1" NAME="V1" GROUP="speed"/>
              <strip_button VALUE="2" NAME="V2" GROUP="speed"/>
              <strip_button VALUE="5" NAME="V5" GROUP="speed"/>
              <strip_button VALUE="10" NAME="V10" GROUP="speed"/>
            </dl_setting>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="Bebop_opticflow" ac_id="115" airframe="airframes/tudelft/bebop_opticflow.xml" radio="radios/dummy.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/rotorcraft_basic.xml" settings="settings/rotorcraft_basic.xml settings/control/rotorcraft_speed.xml" settings_modules="modules/video_capture.xml modules/cv_opticflow.xml modules/bebop_cam.xml modules/air_data.xml modules/geo_mag.xml modules/ins_hff_extended.xml modules/ahrs_int_cmpl_quat.xml modules/stabilization_indi_simple.xml modules/nav_basic_rotorcraft.xml modules/guidance_rotorcraft.xml modules/gps.xml modules/imu_common.xml" gui_color="blue">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitMM" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1120" MIN="1120" MAX="2000" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="2" name="Rotorcraft Basic (Enac)" max_dist_from_home="150" lon0="1 28 52.61" lat0="43 33 50.83" ground_alt="147" alt="152">
          <header>#include &quot;autopilot.h&quot;</header>
          <waypoints>
            <waypoint y="0.0" x="0.0" name="HOME"/>
            <waypoint y="5.0" x="0.0" name="CLIMB"/>
            <waypoint y="-5.0" x="-2.0" name="STDBY"/>
            <waypoint y="-13.9" x="3.6" name="p1"/>
            <waypoint y="-48.2" x="27.5" name="p2"/>
            <waypoint y="-19.6" x="16.7" name="p3"/>
            <waypoint y="-40.7" x="13.7" name="p4"/>
            <waypoint y="-50" x="-20" name="CAM" height="2."/>
            <waypoint y="-10.9" x="5.6" name="TD"/>
          </waypoints>
          <blocks>
            <block name="Wait GPS" no="0">
              <call_once fun="NavKillThrottle()" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Geo init" no="1">
              <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
              <call_once fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Holding point" no="2">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="Start Engine" no="3">
              <call_once fun="NavResurrect()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff" name="Takeoff" no="4">
              <exception deroute="Standby" cond="stateGetPositionEnu_f() @DEREF z @GT 2.0"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="5">
              <stay wp="STDBY" no="0"/>
            </block>
            <block name="stay_p1" no="6">
              <stay wp="p1" no="0"/>
            </block>
            <block name="go_p2" no="7">
              <call_once fun="nav_set_heading_deg(90)" no="0"/>
              <go wp="p2" no="1"/>
              <deroute block="stay_p1" no="2"/>
            </block>
            <block name="line_p1_p2" no="8">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <stay wp="p2" until="stage_time>10" no="1"/>
              <go wp="p1" hmode="route" from="p2" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="route" no="9">
              <go wp="p3" hmode="route" from="p1" no="0"/>
              <go wp="p4" hmode="route" from="p3" no="1"/>
              <go wp="p1" hmode="route" from="p4" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="Oval" no="10">
              <oval radius="-1" p2="p2" p1="p1" no="1"/>
            </block>
            <block name="test yaw" no="11">
              <go wp="p1" no="0"/>
              <for var="i" to="16" from="1" no="2">
                <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
              </for>
              <deroute block="Standby" no="5"/>
            </block>
            <block pre_call="nav_set_heading_towards_waypoint(WP_CAM)" name="circle CAM" no="12">
              <circle wp="CAM" radius="nav_radius" no="0"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land Here" name="land here" no="13">
              <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
            </block>
            <block name="land" no="14">
              <go wp="TD" no="0"/>
            </block>
            <block name="flare" no="15">
              <exception deroute="Holding point" cond="NavDetectGround()"/>
              <exception deroute="landed" cond="!nav_is_in_flight()"/>
              <call_once fun="NavStartDetectGround()" no="0"/>
              <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
            </block>
            <block name="landed" no="16">
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
            </block>
            <block name="HOME" no="17">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="17" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="16" block_name="landed" stage="0">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
          </stage>
          <stage block="15" block_name="flare" stage="1">
            <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
          </stage>
          <stage block="15" block_name="flare" stage="0">
            <call_once fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="14" block_name="land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="13" block_name="land here" stage="0">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="12" block_name="circle CAM" stage="0">
            <circle wp="CAM" radius="nav_radius" no="0"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="5">
            <deroute block="Standby" no="5"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="3">
            <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="2">
            <for var="i" to="16" from="1" no="2">
              <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
            </for>
          </stage>
          <stage block="11" block_name="test yaw" stage="0">
            <go wp="p1" no="0"/>
          </stage>
          <stage block="10" block_name="Oval" stage="1">
            <oval radius="-1" p2="p2" p1="p1" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="9" block_name="route" stage="2">
            <go wp="p1" hmode="route" from="p4" no="2"/>
          </stage>
          <stage block="9" block_name="route" stage="1">
            <go wp="p4" hmode="route" from="p3" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="0">
            <go wp="p3" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="2">
            <go wp="p1" hmode="route" from="p2" no="2"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="1">
            <stay wp="p2" until="stage_time>10" no="1"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="2">
            <deroute block="stay_p1" no="2"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="1">
            <go wp="p2" no="1"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="0">
            <call_once fun="nav_set_heading_deg(90)" no="0"/>
          </stage>
          <stage block="6" block_name="stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="5" block_name="Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="1">
            <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="0">
            <call_once fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="2">
            <call_once fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="0">
            <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="video">
              <dl_setting VAR="video_capture_record_video" STEP="1" SHORTNAME="record_video" MODULE="computer_vision/video_capture" MIN="0" MAX="1">
                <strip_button VALUE="1" NAME="Start video capture" ICON="dcstart.png" GROUP="cv"/>
                <strip_button VALUE="0" NAME="Stop video capture" ICON="dcstop.png" GROUP="cv"/>
              </dl_setting>
              <dl_setting VAR="video_capture_take_shot" STEP="1" SHORTNAME="take_shot" MODULE="computer_vision/video_capture" MIN="0" MAX="1">
                <strip_button VALUE="1" NAME="Save Image" ICON="digital-camera.png" GROUP="cv"/>
              </dl_setting>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="Vision stabilization">
            <dl_settings NAME="vision_calc">
              <dl_setting VAR="opticflow.method" VALUES="LK_Fast9|EdgeFlow" STEP="1" SHORTNAME="method" PARAM="METHOD" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.corner_method" VALUES="exhaustive-FAST|ACT-FAST" STEP="1" SHORTNAME="corner_method" PARAM="CORNER_METHOD" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.window_size" STEP="1" SHORTNAME="window_size" PARAM="OPTICFLOW_WINDOW_SIZE" MODULE="computer_vision/opticflow_module" MIN="0" MAX="20"/>
              <dl_setting VAR="opticflow.search_distance" STEP="1" SHORTNAME="search_distance" PARAM="SEARCH_DISTANCE" MODULE="computer_vision/opticflow_module" MIN="0" MAX="50"/>
              <dl_setting VAR="opticflow.subpixel_factor" STEP="10" SHORTNAME="subpixel_factor" PARAM="OPTICFLOW_SUBPIXEL_FACTOR" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1000"/>
              <dl_setting VAR="opticflow.resolution_factor" STEP="10" SHORTNAME="resolution_factor" PARAM="OPTICFLOW_RESOLUTION_FACTOR" MODULE="computer_vision/opticflow_module" MIN="10" MAX="10000"/>
              <dl_setting VAR="opticflow.derotation" VALUES="OFF|ON" STEP="1" SHORTNAME="derotation" PARAM="OPTICFLOW_DEROTATION" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.median_filter" VALUES="OFF|ON" STEP="1" SHORTNAME="median_filter" PARAM="OPTICFLOW_MEDIAN_FILTER" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.feature_management" VALUES="OFF|ON" STEP="1" SHORTNAME="feature_management" PARAM="OPTICFLOW_FEATURE_MANAGEMENT" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.track_back" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="track_back" PARAM="OPTICFLOW_TRACK_BACK" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.show_flow" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="show_flow" PARAM="OPTICFLOW_SHOW_FLOW" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.max_track_corners" STEP="1" SHORTNAME="max_trck_corners" PARAM="OPTICFLOW_MAX_TRACK_CORNERS" MODULE="computer_vision/opticflow_module" MIN="0" MAX="500"/>
              <dl_setting VAR="opticflow.max_iterations" STEP="1" SHORTNAME="max_iterations" PARAM="OPTICFLOW_MAX_ITERATIONS" MODULE="computer_vision/opticflow_module" MIN="0" MAX="100"/>
              <dl_setting VAR="opticflow.threshold_vec" STEP="1" SHORTNAME="threshold_vec" PARAM="OPTICFLOW_THRESHOLD_VEC" MODULE="computer_vision/opticflow_module" MIN="0" MAX="100"/>
              <dl_setting VAR="opticflow.fast9_adaptive" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="fast9_adaptive" PARAM="OPTICFLOW_FAST9_ADAPTIVE" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.fast9_threshold" STEP="1" SHORTNAME="fast9_threshold" PARAM="OPTICFLOW_FAST9_THRESHOLD" MODULE="computer_vision/opticflow_module" MIN="0" MAX="255"/>
              <dl_setting VAR="opticflow.fast9_min_distance" STEP="1" SHORTNAME="fast9_min_distance" PARAM="OPTICFLOW_FAST9_MIN_DISTANCE" MODULE="computer_vision/opticflow_module" MIN="0" MAX="500"/>
              <dl_setting VAR="opticflow.fast9_padding" STEP="1" SHORTNAME="fast9_padding" PARAM="OPTICFLOW_FAST9_PADDING" MODULE="computer_vision/opticflow_module" MIN="0" MAX="50"/>
              <dl_setting VAR="opticflow.fast9_region_detect" VALUES="OFF|ON" STEP="1" SHORTNAME="fast9_region_detect" PARAM="OPTICFLOW_FAST9_REGION_DETECT" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.fast9_num_regions" STEP="1" SHORTNAME="fast9_num_regions" PARAM="OPTICFLOW_FAST9_NUM_REGIONS" MODULE="computer_vision/opticflow_module" MIN="1" MAX="25"/>
              <dl_setting VAR="opticflow.actfast_long_step" STEP="1" SHORTNAME="actfast_long_step" PARAM="OPTICFLOW_ACTFAST_LONG_STEP" MODULE="computer_vision/opticflow_module" MIN="1" MAX="100"/>
              <dl_setting VAR="opticflow.actfast_short_step" STEP="1" SHORTNAME="actfast_short_step" PARAM="OPTICFLOW_ACTFAST_SHORT_STEP" MODULE="computer_vision/opticflow_module" MIN="1" MAX="10"/>
              <dl_setting VAR="opticflow.actfast_min_gradient" STEP="1" SHORTNAME="actfast_min_gradient" PARAM="OPTICFLOW_ACTFAST_MIN_GRADIENT" MODULE="computer_vision/opticflow_module" MIN="1" MAX="255"/>
              <dl_setting VAR="opticflow.actfast_gradient_method" VALUES="SIMPLE|SOBEL" STEP="1" SHORTNAME="actfast_gradient_method" PARAM="OPTICFLOW_ACTFAST_GRADIENT_METHOD" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.pyramid_level" STEP="1" SHORTNAME="pyramid_level" PARAM="OPTICFLOW_PYRAMID_LEVEL" MODULE="computer_vision/opticflow_module" MIN="0" MAX="10"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="Bebop camera control">
            <dl_settings NAME="Front camera">
              <dl_setting VAR="mt9f002.set_zoom" STEP="0.05" SHORTNAME="zoom" PARAM="MT9F002_ZOOM" MIN="1." MAX="2.5"/>
              <dl_setting VAR="mt9f002.set_offset_x" STEP="0.05" SHORTNAME="offset_x" PARAM="MT9F002_OFFSET_X" MIN="-0.5" MAX="0.5"/>
              <dl_setting VAR="mt9f002.set_offset_y" STEP="0.05" SHORTNAME="offset_y" PARAM="MT9F002_OFFSET_Y" MIN="-0.5" MAX="0.5"/>
              <dl_setting VAR="mt9f002_send_resolution" VALUES="SEND" STEP="1" SHORTNAME="update_resolution" MODULE="boards/bebop/mt9f002" MIN="1" MAX="1" HANDLER="setting_update_resolution"/>
              <dl_setting VAR="mt9f002.gain_green1" STEP="0.1" SHORTNAME="green_1" PARAM="MT9F002_GAIN_GREEN1" MIN="1" MAX="60"/>
              <dl_setting VAR="mt9f002.gain_green2" STEP="0.1" SHORTNAME="green_2" PARAM="MT9F002_GAIN_GREEN2" MIN="1" MAX="60"/>
              <dl_setting VAR="mt9f002.gain_blue" STEP="0.1" SHORTNAME="blue" PARAM="MT9F002_GAIN_BLUE" MIN="1" MAX="60"/>
              <dl_setting VAR="mt9f002.gain_red" STEP="0.1" SHORTNAME="red" PARAM="MT9F002_GAIN_RED" MIN="1" MAX="60"/>
              <dl_setting VAR="mt9f002_send_color" VALUES="SEND" STEP="1" SHORTNAME="update_color" MODULE="boards/bebop/mt9f002" MIN="1" MAX="1" HANDLER="setting_update_color"/>
              <dl_setting VAR="mt9f002.target_exposure " STEP="0.1" SHORTNAME="exposure" PARAM="MT9F002_TARGET_EXPOSURE" MIN="0.1" MAX="80"/>
              <dl_setting VAR="mt9f002_send_exposure" VALUES="SEND" STEP="1" SHORTNAME="update_exposure" MODULE="boards/bebop/mt9f002" MIN="1" MAX="1" HANDLER="setting_update_exposure"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="air_data">
              <dl_setting VAR="air_data.qnh" STEP="1" SHORTNAME="QNH" MODULE="air_data/air_data" MIN="800" MAX="1200"/>
              <dl_setting VAR="air_data.tas_factor" TYPE="float" STEP="0.01" SHORTNAME="TASfactor" PERSISTENT="true" PARAM="AIR_DATA_TAS_FACTOR" MODULE="air_data/air_data" MIN="0.8" MAX="1.3"/>
              <dl_setting VAR="air_data.calc_qnh_once" STEP="1" SHORTNAME="calcQNH" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_airspeed" TYPE="uint8" STEP="1" SHORTNAME="calcAirspeed" PERSISTENT="true" PARAM="AIR_DATA_CALC_AIRSPEED" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_tas_factor" TYPE="uint8" STEP="1" SHORTNAME="calcTASfactor" PERSISTENT="true" PARAM="AIR_DATA_CALC_TAS_FACTOR" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_amsl_baro" TYPE="uint8" STEP="1" SHORTNAME="calcAMSL" PERSISTENT="true" PARAM="AIR_DATA_CALC_AMSL_BARO" MODULE="air_data/air_data" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="geo_mag">
              <dl_setting VAR="geo_mag.calc_once" VALUES="OFF|CALC" STEP="1" SHORTNAME="calcNow" MODULE="geo_mag/geo_mag" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="Ins Extended">
            <dl_settings NAME="INS">
              <dl_setting VAR="vff.accel_noise" STEP="0.1" SHORTNAME="accel_noise" MODULE="subsystems/ins/vf_extended_float" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_baro" STEP="0.1" SHORTNAME="r_baro" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_alt" STEP="0.1" SHORTNAME="r_alt" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_obs_height" STEP="0.1" SHORTNAME="r_obs_height" MIN="0" MAX="10"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
              <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
              <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
              <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
              <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="indi">
              <dl_setting VAR="indi.reference_acceleration.err_p" STEP="1" SHORTNAME="kp_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_P" MODULE="stabilization/stabilization_indi_simple" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_p" STEP="0.1" SHORTNAME="kd_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.p" STEP="0.001" SHORTNAME="ctl_eff_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_P" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.reference_acceleration.err_q" STEP="1" SHORTNAME="kp_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_Q" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_q" STEP="0.1" SHORTNAME="kd_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.q" STEP="0.001" SHORTNAME="ctl_eff_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_Q" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.reference_acceleration.err_r" STEP="1" SHORTNAME="kp_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_R" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_r" STEP="0.1" SHORTNAME="kd_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.r" STEP="0.001" SHORTNAME="ctl_eff_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_R" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.g2" STEP="0.01" SHORTNAME="g2" PERSISTENT="true" PARAM="STABILIZATION_INDI_G2_R" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.adaptive" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="use_adaptive" PERSISTENT="true" PARAM="STABILIZATION_INDI_USE_ADAPTIVE" MIN="0" MAX="1"/>
              <dl_setting VAR="indi.max_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_rate" PARAM="STABILIZATION_INDI_MAX_RATE" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
              <dl_setting VAR="indi.attitude_max_yaw_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_yaw_rate_attitude" PARAM="STABILIZATION_INDI_MAX_R" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="NAV">
              <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
              <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
              <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MIN="-50" MAX="50"/>
              <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MIN="0" MAX="10.0"/>
              <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MIN="-10.0" MAX="0.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Vert Loop">
              <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
              <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MIN="0.2" MAX="0.8"/>
              <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MIN="0" MAX="1"/>
              <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
            <dl_settings NAME="Horiz Loop">
              <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="true" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
              <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
              <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MIN="0" MAX="1"/>
              <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
              <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
              <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
              <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
              <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
              <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="bebop_opticflow">
        <description>Bebop, hover with optical flow from bottom camera</description>
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="bebop"/>
          <target NAME="nps" BOARD="pc">
            <module TYPE="jsbsim" NAME="fdm"/>
            <module NAME="udp"/>
          </target>
          <define NAME="USE_SONAR"/>
          <module TYPE="transparent_udp" NAME="telemetry"/>
          <module TYPE="datalink" NAME="radio_control"/>
          <module NAME="motor_mixing"/>
          <module TYPE="bebop" NAME="actuators"/>
          <module TYPE="bebop" NAME="imu"/>
          <module TYPE="datalink" NAME="gps"/>
          <module TYPE="indi_simple" NAME="stabilization"/>
          <module TYPE="int_cmpl_quat" NAME="ahrs">
            <configure VALUE="TRUE" NAME="USE_MAGNETOMETER"/>
            <define VALUE="FALSE" NAME="AHRS_USE_GPS_HEADING"/>
          </module>
          <module TYPE="hff_extended" NAME="ins"/>
          <module NAME="geo_mag"/>
          <module NAME="air_data"/>
          <module NAME="send_imu_mag_current"/>
          <module NAME="pose_history"/>
          <module NAME="bebop_cam"/>
          <module NAME="cv_opticflow">
            <define VALUE="bottom_camera" NAME="OPTICFLOW_CAMERA"/>
            <define VALUE="10" NAME="MAX_HORIZON"/>
            <define VALUE="0.8" NAME="OPTICFLOW_DEROTATION_CORRECTION_FACTOR_X"/>
            <define VALUE="0.85" NAME="OPTICFLOW_DEROTATION_CORRECTION_FACTOR_Y"/>
          </module>
          <module NAME="video_capture">
            <define VALUE="bottom_camera" NAME="VIDEO_CAPTURE_CAMERA"/>
            <define VALUE="/data/ftp/internal_000/images" NAME="VIDEO_CAPTURE_PATH"/>
          </module>
        </firmware>
        <commands>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="6000"/>
        </commands>
        <servos DRIVER="Default">
          <servo NO="0" NEUTRAL="3000" NAME="TOP_LEFT" MIN="3000" MAX="12000"/>
          <servo NO="1" NEUTRAL="3000" NAME="TOP_RIGHT" MIN="3000" MAX="12000"/>
          <servo NO="2" NEUTRAL="3000" NAME="BOTTOM_RIGHT" MIN="3000" MAX="12000"/>
          <servo NO="3" NEUTRAL="3000" NAME="BOTTOM_LEFT" MIN="3000" MAX="12000"/>
        </servos>
        <section PREFIX="MOTOR_MIXING_" NAME="MIXING">
          <define VALUE="QUAD_X" NAME="TYPE"/>
        </section>
        <command_laws>
          <call FUN="motor_mixing_run(autopilot_get_motors_on(),FALSE,values)"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_LEFT]" SERVO="TOP_LEFT"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_RIGHT]" SERVO="TOP_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_RIGHT]" SERVO="BOTTOM_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_LEFT]" SERVO="BOTTOM_LEFT"/>
        </command_laws>
        <section PREFIX="AIR_DATA_" NAME="AIR_DATA">
          <define VALUE="FALSE" NAME="CALC_AIRSPEED"/>
          <define VALUE="FALSE" NAME="CALC_TAS_FACTOR"/>
          <define VALUE="TRUE" NAME="CALC_AMSL_BARO"/>
        </section>
        <include HREF="conf/airframes/tudelft/calibrations/bebopTUBB17.xml"/>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.3892503" NAME="H_X"/>
          <define VALUE="0.0017972" NAME="H_Y"/>
          <define VALUE="0.9211303" NAME="H_Z"/>
        </section>
        <section PREFIX="INS_" NAME="INS">
          <define VALUE="2.2" NAME="SONAR_MAX_RANGE"/>
          <define VALUE="TRUE" NAME="SONAR_UPDATE_ON_AGL"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="RC_SETPOINT">
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="100" UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="0" NAME="DEADBAND_A"/>
          <define VALUE="0" NAME="DEADBAND_E"/>
          <define VALUE="50" NAME="DEADBAND_R"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="ATTITUDE_REFERENCE">
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.9" NAME="REF_ZETA_P"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.9" NAME="REF_ZETA_Q"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.9" NAME="REF_ZETA_R"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_RDOT"/>
        </section>
        <section PREFIX="STABILIZATION_INDI_" NAME="STABILIZATION_ATTITUDE_INDI">
          <define VALUE="0.052669" NAME="G1_P"/>
          <define VALUE="0.03326" NAME="G1_Q"/>
          <define VALUE="0.002377" NAME="G1_R"/>
          <define VALUE="0.136936" NAME="G2_R"/>
          <define VALUE="600.0" NAME="REF_ERR_P"/>
          <define VALUE="600.0" NAME="REF_ERR_Q"/>
          <define VALUE="600.0" NAME="REF_ERR_R"/>
          <define VALUE="28.0" NAME="REF_RATE_P"/>
          <define VALUE="28.0" NAME="REF_RATE_Q"/>
          <define VALUE="28.0" NAME="REF_RATE_R"/>
          <define VALUE="8.0" NAME="FILT_CUTOFF"/>
          <define VALUE="8.0" NAME="FILT_CUTOFF_R"/>
          <define VALUE="0.1" NAME="ACT_DYN_P"/>
          <define VALUE="0.1" NAME="ACT_DYN_Q"/>
          <define VALUE="0.1" NAME="ACT_DYN_R"/>
          <define VALUE="FALSE" NAME="USE_ADAPTIVE"/>
          <define VALUE="0.0001" NAME="ADAPTIVE_MU"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="283" NAME="HOVER_KP"/>
          <define VALUE="82" NAME="HOVER_KD"/>
          <define VALUE="70" NAME="HOVER_KI"/>
          <define VALUE="0.55" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="FALSE" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="TRUE" NAME="USE_SPEED_REF"/>
          <define VALUE="0.5" UNIT="m/s" NAME="REF_MAX_SPEED"/>
          <define VALUE="20" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="0" NAME="PGAIN"/>
          <define VALUE="80" NAME="DGAIN"/>
          <define VALUE="20" NAME="IGAIN"/>
        </section>
        <section PREFIX="NAV_" NAME="NAVIGATION">
          <define VALUE="1.0" NAME="CLIMB_VSPEED"/>
          <define VALUE="-1.0" NAME="DESCEND_VSPEED"/>
        </section>
        <section PREFIX="NPS_" NAME="SIMULATOR">
          <define VALUE="nw_motor, ne_motor, se_motor, sw_motor" TYPE="string[]" NAME="ACTUATOR_NAMES"/>
          <define VALUE="simple_x_quad_ccw" TYPE="string" NAME="JSBSIM_MODEL"/>
          <define VALUE="nps_sensors_params_default.h" TYPE="string" NAME="SENSORS_PARAMS"/>
        </section>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_NAV" NAME="MODE_STARTUP"/>
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_MODULE" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_HOVER_Z_HOLD" NAME="MODE_AUTO2"/>
          <define VALUE="TRUE" NAME="NO_RC_THRUST_LIMIT"/>
        </section>
        <section NAME="BAT">
          <define VALUE="8700" NAME="MILLIAMP_AT_FULL_THROTTLE"/>
          <define VALUE="9.9" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="11.0" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="11.3" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="12.4" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.05" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
            <message PERIOD="0.05" NAME="OPTICAL_FLOW_HOVER"/>
            <message PERIOD="0.10" NAME="VISUALTARGET"/>
            <message PERIOD="0.1" NAME="VISION_POSITION_ESTIMATE"/>
            <message PERIOD="0.05" NAME="DIVERGENCE"/>
            <message PERIOD="0.02" NAME="DRAGSPEED"/>
            <message PERIOD="5.1" NAME="LOGGER_STATUS"/>
            <message PERIOD="1.2" NAME="LIDAR"/>
            <message PERIOD=".25" NAME="INS_EKF2"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="BEBOP_ACTUATORS"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_FLOAT"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
            <message PERIOD="2.0" NAME="INDI_G"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="vel_guidance" KEY_PRESS="q">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HYBRID_GUIDANCE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1.0" NAME="GPS_INT"/>
            <message PERIOD="1.0" NAME="INS"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="RTCM3">
            <message PERIOD="1" NAME="GPS_RXMRTCM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD="1" NAME="GPS_RTK"/>
          </mode>
        </process>
        <process NAME="FlightRecorder">
          <mode NAME="default">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD=".1" NAME="GPS_INT"/>
            <message PERIOD=".1" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".2" NAME="IMU_MAG_SCALED"/>
            <message PERIOD="0.05" NAME="LIDAR"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="19"/>
            <dl_setting VAR="autopilot.kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot.power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot.mode" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="19" HANDLER="SetModeHandler"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Horiz Loop">
            <dl_setting VAR="gh_ref.max_speed" STEP="0.1" SHORTNAME="max_speed" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed">
              <strip_button VALUE="1" NAME="V1" GROUP="speed"/>
              <strip_button VALUE="2" NAME="V2" GROUP="speed"/>
              <strip_button VALUE="5" NAME="V5" GROUP="speed"/>
              <strip_button VALUE="10" NAME="V10" GROUP="speed"/>
            </dl_setting>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="Bebop_optitrack" ac_id="98" airframe="airframes/tudelft/bebop_optitrack.xml" radio="radios/dummy.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/rotorcraft_optitrack.xml" settings="settings/rotorcraft_basic.xml settings/control/rotorcraft_speed.xml" settings_modules="modules/ins_extended.xml modules/ahrs_int_cmpl_quat.xml modules/stabilization_indi.xml modules/nav_basic_rotorcraft.xml modules/guidance_rotorcraft.xml modules/gps.xml modules/imu_common.xml" gui_color="#ffffbc3bce5b" release="934f0e14c09da0a3bfe199b7685abd2f4b6badbe">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitMM" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1120" MIN="1120" MAX="2000" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="0.3" name="Rotorcraft Optitrack (Delft)" max_dist_from_home="20" lon0="4.376789" lat0="51.990634" ground_alt="0" alt="1.5">
          <header>#include &quot;autopilot.h&quot;</header>
          <waypoints>
            <waypoint y="0.0" x="0.0" name="HOME"/>
            <waypoint y="-0.6" x="1.2" name="CLIMB"/>
            <waypoint y="2.0" x="2.0" name="GOAL"/>
            <waypoint y="-0.8" x="-0.7" name="STDBY"/>
            <waypoint y="-1.7" x="0.8" name="TD"/>
            <waypoint name="p1" lon="4.376823" lat="51.990630" x="2.34" y="-0.40"/>
            <waypoint name="p2" lon="4.376779" lat="51.990614" x="-0.64" y="-2.24"/>
            <waypoint name="p3" lon="4.376759" lat="51.990636" x="-2.06" y="0.18"/>
            <waypoint name="p4" lon="4.376805" lat="51.990651" x="1.06" y="1.91"/>
            <waypoint name="FA1" lon="4.3768628" lat="51.9906213" x="5.09" y="-1.32"/>
            <waypoint name="FA2" lon="4.3767766" lat="51.9905874" x="-0.75" y="-5.20"/>
            <waypoint name="FA3" lon="4.3767226" lat="51.9906409" x="-4.57" y="0.68"/>
            <waypoint name="FA4" lon="4.3768074" lat="51.9906737" x="1.18" y="4.44"/>
          </waypoints>
          <sectors>
            <sector name="Flight_Area" color="red">
              <corner name="FA4"/>
              <corner name="FA3"/>
              <corner name="FA2"/>
              <corner name="FA1"/>
            </sector>
          </sectors>
          <blocks>
            <block name="Wait GPS" no="0">
              <call_once fun="NavKillThrottle()" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Holding point" no="1">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="Start Engine" no="2">
              <call_once fun="NavResurrect()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff" name="Takeoff" no="3">
              <exception deroute="Standby" cond="stateGetPositionEnu_f()->z > 1.0"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="4">
              <stay wp="STDBY" no="0"/>
            </block>
            <block strip_icon="lookfore.png" strip_button="Go" name="START" no="5">
              <call_once fun="NavSetWaypointHere(WP_GOAL)" no="0"/>
            </block>
            <block name="StayGoal" no="6">
              <stay wp="GOAL" no="0"/>
            </block>
            <block name="stay_p1" no="7">
              <stay wp="p1" no="0"/>
            </block>
            <block name="go_p2" no="8">
              <call_once fun="nav_set_heading_deg(90)" no="0"/>
              <go wp="p2" no="1"/>
              <deroute block="stay_p1" no="2"/>
            </block>
            <block name="line_p1_p2" no="9">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <stay wp="p2" until="stage_time>10" no="1"/>
              <go wp="p1" hmode="route" from="p2" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="route" no="10">
              <go wp="p3" hmode="route" from="p1" no="0"/>
              <go wp="p4" hmode="route" from="p3" no="1"/>
              <go wp="p1" hmode="route" from="p4" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="Oval" no="11">
              <oval radius="-1" p2="p2" p1="p1" no="1"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land Here" name="land here" no="12">
              <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
            </block>
            <block name="land" no="13">
              <go wp="TD" no="0"/>
            </block>
            <block name="flare" no="14">
              <exception deroute="Holding point" cond="NavDetectGround()"/>
              <exception deroute="landed" cond="!nav_is_in_flight()"/>
              <call_once fun="NavStartDetectGround()" no="0"/>
              <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
            </block>
            <block name="landed" no="15">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="HOME" no="16">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="16" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="15" block_name="landed" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="15" block_name="landed" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="14" block_name="flare" stage="1">
            <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
          </stage>
          <stage block="14" block_name="flare" stage="0">
            <call_once fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="13" block_name="land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="12" block_name="land here" stage="0">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="11" block_name="Oval" stage="1">
            <oval radius="-1" p2="p2" p1="p1" no="1"/>
          </stage>
          <stage block="10" block_name="route" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="10" block_name="route" stage="2">
            <go wp="p1" hmode="route" from="p4" no="2"/>
          </stage>
          <stage block="10" block_name="route" stage="1">
            <go wp="p4" hmode="route" from="p3" no="1"/>
          </stage>
          <stage block="10" block_name="route" stage="0">
            <go wp="p3" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="9" block_name="line_p1_p2" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="9" block_name="line_p1_p2" stage="2">
            <go wp="p1" hmode="route" from="p2" no="2"/>
          </stage>
          <stage block="9" block_name="line_p1_p2" stage="1">
            <stay wp="p2" until="stage_time>10" no="1"/>
          </stage>
          <stage block="9" block_name="line_p1_p2" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="8" block_name="go_p2" stage="2">
            <deroute block="stay_p1" no="2"/>
          </stage>
          <stage block="8" block_name="go_p2" stage="1">
            <go wp="p2" no="1"/>
          </stage>
          <stage block="8" block_name="go_p2" stage="0">
            <call_once fun="nav_set_heading_deg(90)" no="0"/>
          </stage>
          <stage block="7" block_name="stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="6" block_name="StayGoal" stage="0">
            <stay wp="GOAL" no="0"/>
          </stage>
          <stage block="5" block_name="START" stage="0">
            <call_once fun="NavSetWaypointHere(WP_GOAL)" no="0"/>
          </stage>
          <stage block="4" block_name="Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="3" block_name="Takeoff" stage="1">
            <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
          </stage>
          <stage block="3" block_name="Takeoff" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="2" block_name="Start Engine" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="2" block_name="Start Engine" stage="0">
            <call_once fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="1" block_name="Holding point" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="1" block_name="Holding point" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings NAME="Ins Extended">
            <dl_settings NAME="INS">
              <dl_setting VAR="vff.accel_noise" STEP="0.1" SHORTNAME="accel_noise" MODULE="subsystems/ins/vf_extended_float" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_baro" STEP="0.1" SHORTNAME="r_baro" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_alt" STEP="0.1" SHORTNAME="r_alt" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_obs_height" STEP="0.1" SHORTNAME="r_obs_height" MIN="0" MAX="10"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
              <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
              <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
              <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
              <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="indi">
              <dl_setting VAR="reference_acceleration.err_p" STEP="1" SHORTNAME="kp_p" PARAM="STABILIZATION_INDI_REF_ERR_P" MIN="0" MAX="2500"/>
              <dl_setting VAR="reference_acceleration.rate_p" STEP="0.1" SHORTNAME="kd_p" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="reference_acceleration.err_q" STEP="1" SHORTNAME="kp_q" PARAM="STABILIZATION_INDI_REF_ERR_Q" MIN="0" MAX="2500"/>
              <dl_setting VAR="reference_acceleration.rate_q" STEP="0.1" SHORTNAME="kd_q" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="reference_acceleration.err_r" STEP="1" SHORTNAME="kp_r" PARAM="STABILIZATION_INDI_REF_ERR_R" MIN="0" MAX="2500"/>
              <dl_setting VAR="reference_acceleration.rate_r" STEP="0.1" SHORTNAME="kd_r" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi_use_adaptive" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="use_adaptive" PARAM="STABILIZATION_INDI_USE_ADAPTIVE" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="NAV">
              <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
              <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
              <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MIN="-50" MAX="50"/>
              <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MIN="0" MAX="10.0"/>
              <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MIN="-10.0" MAX="0.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Vert Loop">
              <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
              <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MIN="0.2" MAX="0.8"/>
              <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MIN="0" MAX="1"/>
              <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
            <dl_settings NAME="Horiz Loop">
              <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="true" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
              <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
              <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MIN="0" MAX="1"/>
              <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
              <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
              <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
              <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
              <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
              <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="bebop_optitrack">
        <description>    Airframe file to fly a Bebop1 drone, in stable smooth flight, through waypoints using an optitrack system, such as the Cyberzoo of TUDelft. The values are tuned so that the flight speed is limited and the drone does not over-shoot the waypoints as it would in outdoor settings.</description>
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="bebop"/>
          <module TYPE="transparent_udp" NAME="telemetry"/>
          <module TYPE="datalink" NAME="radio_control"/>
          <module TYPE="bebop" NAME="actuators"/>
          <module TYPE="bebop" NAME="imu"/>
          <module TYPE="datalink" NAME="gps"/>
          <module TYPE="indi" NAME="stabilization">
            <define VALUE="TRUE" NAME="INDI_RPM_FEEDBACK"/>
          </module>
          <module TYPE="int_cmpl_quat" NAME="ahrs">
            <configure VALUE="FALSE" NAME="USE_MAGNETOMETER"/>
            <define VALUE="TRUE" NAME="AHRS_USE_GPS_HEADING"/>
          </module>
          <module TYPE="extended" NAME="ins"/>
          <module NAME="logger_file">
            <define VALUE="/data/ftp/internal_000" NAME="FILE_LOGGER_PATH"/>
          </module>
        </firmware>
        <commands>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="6000"/>
        </commands>
        <servos DRIVER="Default">
          <servo NO="0" NEUTRAL="1000" NAME="TOP_LEFT" MIN="1000" MAX="9800"/>
          <servo NO="1" NEUTRAL="1000" NAME="TOP_RIGHT" MIN="1000" MAX="9800"/>
          <servo NO="2" NEUTRAL="1000" NAME="BOTTOM_RIGHT" MIN="1000" MAX="9800"/>
          <servo NO="3" NEUTRAL="1000" NAME="BOTTOM_LEFT" MIN="1000" MAX="9800"/>
        </servos>
        <command_laws>
          <set VALUE="autopilot_get_motors_on() ? actuators_pprz[0] : -MAX_PPRZ" SERVO="TOP_LEFT"/>
          <set VALUE="autopilot_get_motors_on() ? actuators_pprz[1] : -MAX_PPRZ" SERVO="TOP_RIGHT"/>
          <set VALUE="autopilot_get_motors_on() ? actuators_pprz[2] : -MAX_PPRZ" SERVO="BOTTOM_RIGHT"/>
          <set VALUE="autopilot_get_motors_on() ? actuators_pprz[3] : -MAX_PPRZ" SERVO="BOTTOM_LEFT"/>
        </command_laws>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0" NAME="HEADING_UPDATE_GPS_MIN_SPEED"/>
        </section>
        <section PREFIX="INS_" NAME="INS">
          <define VALUE="1" NAME="USE_GPS_ALT"/>
          <define VALUE="1" NAME="USE_GPS_ALT_SPEED"/>
          <define VALUE="0.01" NAME="VFF_R_GPS"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="RC_SETPOINT">
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="120" UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="0" NAME="DEADBAND_A"/>
          <define VALUE="0" NAME="DEADBAND_E"/>
          <define VALUE="50" NAME="DEADBAND_R"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="ATTITUDE_REFERENCE">
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.9" NAME="REF_ZETA_P"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.9" NAME="REF_ZETA_Q"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.9" NAME="REF_ZETA_R"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_RDOT"/>
        </section>
        <section PREFIX="STABILIZATION_INDI_" NAME="STABILIZATION_ATTITUDE_INDI">
          <define VALUE="{11.0, -11.0, -11.0 , 11.0 }" NAME="G1_ROLL"/>
          <define VALUE="{8.5 , 8.5, -8.5 , -8.5}" NAME="G1_PITCH"/>
          <define VALUE="{-0.50, 0.50, -0.50, 0.50}" NAME="G1_YAW"/>
          <define VALUE="{-.40, -.40, -.40, -.40}" NAME="G1_THRUST"/>
          <define VALUE="{-48.0,   48.0,  -48.0,   48.0}" NAME="G2"/>
          <define VALUE="600.0" NAME="REF_ERR_P"/>
          <define VALUE="600.0" NAME="REF_ERR_Q"/>
          <define VALUE="600.0" NAME="REF_ERR_R"/>
          <define VALUE="28.0" NAME="REF_RATE_P"/>
          <define VALUE="28.0" NAME="REF_RATE_Q"/>
          <define VALUE="28.0" NAME="REF_RATE_R"/>
          <define VALUE="4.0" NAME="ESTIMATION_FILT_CUTOFF"/>
          <define VALUE="5.0" NAME="FILT_CUTOFF"/>
          <define VALUE="{0.1, 0.1, 0.1, 0.1}" NAME="ACT_DYN"/>
          <define VALUE="FALSE" NAME="USE_ADAPTIVE"/>
          <define VALUE="0.00001" NAME="ADAPTIVE_MU"/>
          <define VALUE="{1000, 1000, 1, 100}" NAME="WLS_PRIORITIES"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="283" NAME="HOVER_KP"/>
          <define VALUE="82" NAME="HOVER_KD"/>
          <define VALUE="20" NAME="HOVER_KI"/>
          <define VALUE="0.68" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="TRUE" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="20" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="1.0" UNIT="m/s" NAME="REF_MAX_SPEED"/>
          <define VALUE="120" NAME="PGAIN"/>
          <define VALUE="100" NAME="DGAIN"/>
          <define VALUE="30" NAME="IGAIN"/>
          <define VALUE="1.0" NAME="REF_ZETA"/>
        </section>
        <section NAME="MISC">
          <define VALUE="0.2" UNIT="m" NAME="ARRIVED_AT_WAYPOINT"/>
          <define VALUE="40.0" NAME="THRESHOLD_GROUND_DETECT"/>
        </section>
        <section PREFIX="NAV_" NAME="NAVIGATION">
          <define VALUE="0.5" NAME="CLIMB_VSPEED"/>
          <define VALUE="-1.0" NAME="DESCEND_VSPEED"/>
        </section>
        <section PREFIX="NPS_" NAME="SIMULATOR">
          <define VALUE="nw_motor, ne_motor, se_motor, sw_motor" TYPE="string[]" NAME="ACTUATOR_NAMES"/>
          <define VALUE="simple_x_quad_ccw" TYPE="string" NAME="JSBSIM_MODEL"/>
          <define VALUE="nps_sensors_params_default.h" TYPE="string" NAME="SENSORS_PARAMS"/>
        </section>
        <include HREF="conf/simulator/gazebo/airframes/bebop.xml"/>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_NAV" NAME="MODE_STARTUP"/>
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_ATTITUDE_Z_HOLD" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_NAV" NAME="MODE_AUTO2"/>
        </section>
        <section NAME="BAT">
          <define VALUE="8700" NAME="MILLIAMP_AT_FULL_THROTTLE"/>
          <define VALUE="9.6" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="9.9" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="10.4" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="12.4" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.05" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
            <message PERIOD="0.05" NAME="OPTICAL_FLOW_HOVER"/>
            <message PERIOD="0.10" NAME="VISUALTARGET"/>
            <message PERIOD="0.1" NAME="VISION_POSITION_ESTIMATE"/>
            <message PERIOD="0.05" NAME="DIVERGENCE"/>
            <message PERIOD="0.02" NAME="DRAGSPEED"/>
            <message PERIOD="5.1" NAME="LOGGER_STATUS"/>
            <message PERIOD="1.2" NAME="LIDAR"/>
            <message PERIOD=".25" NAME="INS_EKF2"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="BEBOP_ACTUATORS"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_FLOAT"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
            <message PERIOD="2.0" NAME="INDI_G"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="vel_guidance" KEY_PRESS="q">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HYBRID_GUIDANCE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1.0" NAME="GPS_INT"/>
            <message PERIOD="1.0" NAME="INS"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="RTCM3">
            <message PERIOD="1" NAME="GPS_RXMRTCM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD="1" NAME="GPS_RTK"/>
          </mode>
        </process>
        <process NAME="FlightRecorder">
          <mode NAME="default">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD=".1" NAME="GPS_INT"/>
            <message PERIOD=".1" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".2" NAME="IMU_MAG_SCALED"/>
            <message PERIOD="0.05" NAME="LIDAR"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="19"/>
            <dl_setting VAR="autopilot.kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot.power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot.mode" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="19" HANDLER="SetModeHandler"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Horiz Loop">
            <dl_setting VAR="gh_ref.max_speed" STEP="0.1" SHORTNAME="max_speed" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed">
              <strip_button VALUE="1" NAME="V1" GROUP="speed"/>
              <strip_button VALUE="2" NAME="V2" GROUP="speed"/>
              <strip_button VALUE="5" NAME="V5" GROUP="speed"/>
              <strip_button VALUE="10" NAME="V10" GROUP="speed"/>
            </dl_setting>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="CX10" ac_id="18" airframe="airframes/tudelft/cx10.xml" radio="radios/dummy.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/rotorcraft_basic.xml" settings="settings/rotorcraft_basic.xml" settings_modules="modules/gps_ubx_ucenter.xml modules/air_data.xml modules/ahrs_int_cmpl_quat.xml modules/stabilization_int_quat.xml modules/nav_basic_rotorcraft.xml modules/guidance_rotorcraft.xml modules/gps.xml modules/imu_common.xml" gui_color="blue">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitMM" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1120" MIN="1120" MAX="2000" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="2" name="Rotorcraft Basic (Enac)" max_dist_from_home="150" lon0="1 28 52.61" lat0="43 33 50.83" ground_alt="147" alt="152">
          <header>#include &quot;autopilot.h&quot;</header>
          <waypoints>
            <waypoint y="0.0" x="0.0" name="HOME"/>
            <waypoint y="5.0" x="0.0" name="CLIMB"/>
            <waypoint y="-5.0" x="-2.0" name="STDBY"/>
            <waypoint y="-13.9" x="3.6" name="p1"/>
            <waypoint y="-48.2" x="27.5" name="p2"/>
            <waypoint y="-19.6" x="16.7" name="p3"/>
            <waypoint y="-40.7" x="13.7" name="p4"/>
            <waypoint y="-50" x="-20" name="CAM" height="2."/>
            <waypoint y="-10.9" x="5.6" name="TD"/>
          </waypoints>
          <blocks>
            <block name="Wait GPS" no="0">
              <call_once fun="NavKillThrottle()" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Geo init" no="1">
              <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
              <call_once fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Holding point" no="2">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="Start Engine" no="3">
              <call_once fun="NavResurrect()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff" name="Takeoff" no="4">
              <exception deroute="Standby" cond="stateGetPositionEnu_f() @DEREF z @GT 2.0"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="5">
              <stay wp="STDBY" no="0"/>
            </block>
            <block name="stay_p1" no="6">
              <stay wp="p1" no="0"/>
            </block>
            <block name="go_p2" no="7">
              <call_once fun="nav_set_heading_deg(90)" no="0"/>
              <go wp="p2" no="1"/>
              <deroute block="stay_p1" no="2"/>
            </block>
            <block name="line_p1_p2" no="8">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <stay wp="p2" until="stage_time>10" no="1"/>
              <go wp="p1" hmode="route" from="p2" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="route" no="9">
              <go wp="p3" hmode="route" from="p1" no="0"/>
              <go wp="p4" hmode="route" from="p3" no="1"/>
              <go wp="p1" hmode="route" from="p4" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="Oval" no="10">
              <oval radius="-1" p2="p2" p1="p1" no="1"/>
            </block>
            <block name="test yaw" no="11">
              <go wp="p1" no="0"/>
              <for var="i" to="16" from="1" no="2">
                <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
              </for>
              <deroute block="Standby" no="5"/>
            </block>
            <block pre_call="nav_set_heading_towards_waypoint(WP_CAM)" name="circle CAM" no="12">
              <circle wp="CAM" radius="nav_radius" no="0"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land Here" name="land here" no="13">
              <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
            </block>
            <block name="land" no="14">
              <go wp="TD" no="0"/>
            </block>
            <block name="flare" no="15">
              <exception deroute="Holding point" cond="NavDetectGround()"/>
              <exception deroute="landed" cond="!nav_is_in_flight()"/>
              <call_once fun="NavStartDetectGround()" no="0"/>
              <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
            </block>
            <block name="landed" no="16">
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
            </block>
            <block name="HOME" no="17">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="17" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="16" block_name="landed" stage="0">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
          </stage>
          <stage block="15" block_name="flare" stage="1">
            <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
          </stage>
          <stage block="15" block_name="flare" stage="0">
            <call_once fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="14" block_name="land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="13" block_name="land here" stage="0">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="12" block_name="circle CAM" stage="0">
            <circle wp="CAM" radius="nav_radius" no="0"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="5">
            <deroute block="Standby" no="5"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="3">
            <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="2">
            <for var="i" to="16" from="1" no="2">
              <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
            </for>
          </stage>
          <stage block="11" block_name="test yaw" stage="0">
            <go wp="p1" no="0"/>
          </stage>
          <stage block="10" block_name="Oval" stage="1">
            <oval radius="-1" p2="p2" p1="p1" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="9" block_name="route" stage="2">
            <go wp="p1" hmode="route" from="p4" no="2"/>
          </stage>
          <stage block="9" block_name="route" stage="1">
            <go wp="p4" hmode="route" from="p3" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="0">
            <go wp="p3" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="2">
            <go wp="p1" hmode="route" from="p2" no="2"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="1">
            <stay wp="p2" until="stage_time>10" no="1"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="2">
            <deroute block="stay_p1" no="2"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="1">
            <go wp="p2" no="1"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="0">
            <call_once fun="nav_set_heading_deg(90)" no="0"/>
          </stage>
          <stage block="6" block_name="stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="5" block_name="Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="1">
            <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="0">
            <call_once fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="2">
            <call_once fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="0">
            <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings NAME="ublox">
            <dl_settings NAME="ucenter">
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_h" STEP="1" SHORTNAME="sw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_l" STEP="1" SHORTNAME="sw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_h" STEP="1" SHORTNAME="hw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_l" STEP="1" SHORTNAME="hw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_init" STEP="100" SHORTNAME="inibaud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_run" STEP="100" SHORTNAME="baud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="air_data">
              <dl_setting VAR="air_data.qnh" STEP="1" SHORTNAME="QNH" MODULE="air_data/air_data" MIN="800" MAX="1200"/>
              <dl_setting VAR="air_data.tas_factor" TYPE="float" STEP="0.01" SHORTNAME="TASfactor" PERSISTENT="true" PARAM="AIR_DATA_TAS_FACTOR" MODULE="air_data/air_data" MIN="0.8" MAX="1.3"/>
              <dl_setting VAR="air_data.calc_qnh_once" STEP="1" SHORTNAME="calcQNH" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_airspeed" TYPE="uint8" STEP="1" SHORTNAME="calcAirspeed" PERSISTENT="true" PARAM="AIR_DATA_CALC_AIRSPEED" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_tas_factor" TYPE="uint8" STEP="1" SHORTNAME="calcTASfactor" PERSISTENT="true" PARAM="AIR_DATA_CALC_TAS_FACTOR" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_amsl_baro" TYPE="uint8" STEP="1" SHORTNAME="calcAMSL" PERSISTENT="true" PARAM="AIR_DATA_CALC_AMSL_BARO" MODULE="air_data/air_data" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
              <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
              <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
              <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
              <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Att Loop">
              <dl_setting VAR="stabilization_gains.p.x" TYPE="int32" STEP="1" SHORTNAME="pgain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_PGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="8000"/>
              <dl_setting VAR="stabilization_gains.d.x" TYPE="int32" STEP="1" SHORTNAME="dgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.x" TYPE="int32" STEP="1" SHORTNAME="igain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_IGAIN" MIN="0" MAX="800"/>
              <dl_setting VAR="stabilization_gains.dd.x" TYPE="int32" STEP="1" SHORTNAME="ddgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="stabilization_gains.p.y" TYPE="int32" STEP="1" SHORTNAME="pgain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_PGAIN" MIN="1" MAX="8000"/>
              <dl_setting VAR="stabilization_gains.d.y" TYPE="int32" STEP="1" SHORTNAME="dgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.y" TYPE="int32" STEP="1" SHORTNAME="igain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_IGAIN" MIN="0" MAX="800"/>
              <dl_setting VAR="stabilization_gains.dd.y" TYPE="int32" STEP="1" SHORTNAME="ddgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="stabilization_gains.p.z" TYPE="int32" STEP="1" SHORTNAME="pgain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_PGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.d.z" TYPE="int32" STEP="1" SHORTNAME="dgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.z" TYPE="int32" STEP="1" SHORTNAME="igain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_IGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="stabilization_gains.dd.z" TYPE="int32" STEP="1" SHORTNAME="ddgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.p" UNIT="rad/s" STEP="1" SHORTNAME="omega p" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_P" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaP" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.p" STEP="0.05" SHORTNAME="zeta p" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_P" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaP"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.q" UNIT="rad/s" STEP="1" SHORTNAME="omega q" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_Q" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaQ" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.q" STEP="0.05" SHORTNAME="zeta q" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_Q" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaQ"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.r" UNIT="rad/s" STEP="1" SHORTNAME="omega r" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_R" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaR" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.r" STEP="0.05" SHORTNAME="zeta r" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_R" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaR"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="NAV">
              <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
              <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
              <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MIN="-50" MAX="50"/>
              <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MIN="0" MAX="10.0"/>
              <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MIN="-10.0" MAX="0.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Vert Loop">
              <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
              <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MIN="0.2" MAX="0.8"/>
              <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MIN="0" MAX="1"/>
              <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
            <dl_settings NAME="Horiz Loop">
              <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="true" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
              <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
              <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MIN="0" MAX="1"/>
              <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
              <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
              <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
              <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
              <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
              <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="quadrotor_lisa_mxs">
        <description>Lisa MX-CX10 (F4)</description>
        <servos DRIVER="Pwm">
          <servo NO="0" NEUTRAL="50" NAME="NE" MIN="0" MAX="1000"/>
          <servo NO="5" NEUTRAL="50" NAME="SE" MIN="0" MAX="1000"/>
          <servo NO="4" NEUTRAL="50" NAME="SW" MIN="0" MAX="1000"/>
          <servo NO="1" NEUTRAL="50" NAME="NW" MIN="0" MAX="1000"/>
        </servos>
        <commands>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="0"/>
        </commands>
        <command_laws>
          <call FUN="motor_mixing_run(autopilot_get_motors_on(),FALSE,values)"/>
          <set VALUE="motor_mixing.commands[0]" SERVO="NE"/>
          <set VALUE="motor_mixing.commands[1]" SERVO="SE"/>
          <set VALUE="motor_mixing.commands[2]" SERVO="SW"/>
          <set VALUE="motor_mixing.commands[3]" SERVO="NW"/>
        </command_laws>
        <section PREFIX="MOTOR_MIXING_" NAME="MIXING">
          <define VALUE="0" NAME="TRIM_ROLL"/>
          <define VALUE="0" NAME="TRIM_PITCH"/>
          <define VALUE="0" NAME="TRIM_YAW"/>
          <define VALUE="4" NAME="NB_MOTOR"/>
          <define VALUE="256" NAME="SCALE"/>
          <define VALUE="{  -256, -256,  256,  256 }" NAME="ROLL_COEF"/>
          <define VALUE="{  256, -256, -256,  256 }" NAME="PITCH_COEF"/>
          <define VALUE="{    256, -256,  256, -256 }" NAME="YAW_COEF"/>
          <define VALUE="{ 256,  256,  256,  256 }" NAME="THRUST_COEF"/>
        </section>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="135." UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
          <define VALUE="0" NAME="ACCEL_X_NEUTRAL"/>
          <define VALUE="0" NAME="ACCEL_Y_NEUTRAL"/>
          <define VALUE="0" NAME="ACCEL_Z_NEUTRAL"/>
          <define VALUE="286" NAME="MAG_X_NEUTRAL"/>
          <define VALUE="-72" NAME="MAG_Y_NEUTRAL"/>
          <define VALUE="97" NAME="MAG_Z_NEUTRAL"/>
          <define VALUE="3.94431833863" NAME="MAG_X_SENS" INTEGER="16"/>
          <define VALUE="4.14629702271" NAME="MAG_Y_SENS" INTEGER="16"/>
          <define VALUE="4.54518768636" NAME="MAG_Z_SENS" INTEGER="16"/>
          <define VALUE="0.0103422023767" NAME="MAG_X_CURRENT_COEF"/>
          <define VALUE="0.0084568317783" NAME="MAG_Y_CURRENT_COEF"/>
          <define VALUE="-0.01935617335" NAME="MAG_Z_CURRENT_COEF"/>
        </section>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_NAV" NAME="MODE_STARTUP"/>
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_HOVER_Z_HOLD" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_NAV" NAME="MODE_AUTO2"/>
        </section>
        <section NAME="BAT">
          <define VALUE="14000" NAME="MILLIAMP_AT_FULL_THROTTLE"/>
          <define VALUE="3.0" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="3.3" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="3.5" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="4.1" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="STABILIZATION_ATTITUDE">
          <define VALUE="45." UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="45." UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="45." UNIT="deg" NAME="SP_MAX_PSI"/>
          <define VALUE="90." UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="90." UNIT="deg/s" NAME="SP_MAX_P"/>
          <define VALUE="250" NAME="DEADBAND_R"/>
          <define VALUE="250" NAME="DEADBAND_A"/>
          <define VALUE="800" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.85" NAME="REF_ZETA_P"/>
          <define VALUE="400." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="800" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.85" NAME="REF_ZETA_Q"/>
          <define VALUE="400." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="500" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.85" NAME="REF_ZETA_R"/>
          <define VALUE="90." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(900.)" NAME="REF_MAX_RDOT"/>
          <define VALUE="400" NAME="PHI_PGAIN"/>
          <define VALUE="200" NAME="PHI_DGAIN"/>
          <define VALUE="100" NAME="PHI_IGAIN"/>
          <define VALUE="400" NAME="THETA_PGAIN"/>
          <define VALUE="200" NAME="THETA_DGAIN"/>
          <define VALUE="100" NAME="THETA_IGAIN"/>
          <define VALUE="500" NAME="PSI_PGAIN"/>
          <define VALUE="300" NAME="PSI_DGAIN"/>
          <define VALUE="10" NAME="PSI_IGAIN"/>
          <define VALUE="0" NAME="PHI_DDGAIN"/>
          <define VALUE="0" NAME="THETA_DDGAIN"/>
          <define VALUE=" 300" NAME="PSI_DDGAIN"/>
          <define VALUE="0" NAME="PHI_AGAIN"/>
          <define VALUE="0" NAME="THETA_AGAIN"/>
          <define VALUE="0" NAME="PSI_AGAIN"/>
        </section>
        <section PREFIX="INS_" NAME="INS"/>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="276" NAME="HOVER_KP"/>
          <define VALUE="455" NAME="HOVER_KD"/>
          <define VALUE="100" NAME="HOVER_KI"/>
          <define VALUE="0.5" NAME="GUIDANCE_V_NOMINAL_HOVER_THROTTLE"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE=" 0.47577" NAME="H_X"/>
          <define VALUE=" 0.11811" NAME="H_Y"/>
          <define VALUE=" 0.87161" NAME="H_Z"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="39" NAME="PGAIN"/>
          <define VALUE="50" NAME="DGAIN"/>
          <define VALUE="19" NAME="IGAIN"/>
        </section>
        <section NAME="MISC">
          <define VALUE="(adc)*0.00162f" NAME="VoltageOfAdc(adc)"/>
        </section>
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="lisa_mxs_1.0">
            <define VALUE="TRUE" NAME="REMAP_UART3"/>
            <module TYPE="datalink" NAME="radio_control"/>
            <configure VALUE="500" NAME="AHRS_PROPAGATE_FREQUENCY"/>
            <define VALUE="TRUE" NAME="USE_PERSISTENT_SETTINGS"/>
          </target>
          <module NAME="motor_mixing"/>
          <module TYPE="pwm" NAME="actuators">
            <define VALUE="36000000" NAME="PWM_BASE_FREQ"/>
            <define VALUE="36000" NAME="SERVO_HZ"/>
          </module>
          <module TYPE="transparent" NAME="telemetry">
            <configure VALUE="UART3" NAME="MODEM_PORT"/>
            <configure VALUE="B115200" NAME="MODEM_BAUD"/>
          </module>
          <module TYPE="lisa_mx_v2.1" NAME="imu"/>
          <module TYPE="ublox" NAME="gps">
            <configure VALUE="UART2" NAME="GPS_PORT"/>
            <configure VALUE="B38400" NAME="GPS_BAUD"/>
          </module>
          <module TYPE="int_quat" NAME="stabilization"/>
          <module TYPE="int_cmpl_quat" NAME="ahrs"/>
          <module NAME="ins"/>
          <module NAME="air_data">
            <define VALUE="TRUE" NAME="AIR_DATA_CALC_AMSL_BARO"/>
          </module>
          <module TYPE="ubx_ucenter" NAME="gps"/>
          <module NAME="send_imu_mag_current"/>
        </firmware>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.05" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
            <message PERIOD="0.05" NAME="OPTICAL_FLOW_HOVER"/>
            <message PERIOD="0.10" NAME="VISUALTARGET"/>
            <message PERIOD="0.1" NAME="VISION_POSITION_ESTIMATE"/>
            <message PERIOD="0.05" NAME="DIVERGENCE"/>
            <message PERIOD="0.02" NAME="DRAGSPEED"/>
            <message PERIOD="5.1" NAME="LOGGER_STATUS"/>
            <message PERIOD="1.2" NAME="LIDAR"/>
            <message PERIOD=".25" NAME="INS_EKF2"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="BEBOP_ACTUATORS"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_FLOAT"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
            <message PERIOD="2.0" NAME="INDI_G"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="vel_guidance" KEY_PRESS="q">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HYBRID_GUIDANCE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1.0" NAME="GPS_INT"/>
            <message PERIOD="1.0" NAME="INS"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="RTCM3">
            <message PERIOD="1" NAME="GPS_RXMRTCM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD="1" NAME="GPS_RTK"/>
          </mode>
        </process>
        <process NAME="FlightRecorder">
          <mode NAME="default">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD=".1" NAME="GPS_INT"/>
            <message PERIOD=".1" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".2" NAME="IMU_MAG_SCALED"/>
            <message PERIOD="0.05" NAME="LIDAR"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="19"/>
            <dl_setting VAR="autopilot.kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot.power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot.mode" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="19" HANDLER="SetModeHandler"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="ChouChou_LisaS" ac_id="135" airframe="airframes/tudelft/IMAV2013/chouchou_lisa_s.xml" radio="radios/cockpitSX.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/rotorcraft_basic.xml" settings="settings/rotorcraft_basic.xml" settings_modules="modules/ahrs_int_cmpl_quat.xml modules/stabilization_int_quat.xml modules/nav_basic_rotorcraft.xml modules/guidance_rotorcraft.xml modules/gps.xml modules/imu_common.xml modules/radio_control_superbitrf_rc.xml modules/gps_ubx_ucenter.xml" gui_color="blue">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitSX (easy)" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1500" MIN="2050" MAX="950" FUNCTION="ROLL" CTL="D" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="2050" MAX="950" FUNCTION="PITCH" CTL="C" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="950" MAX="2050" FUNCTION="YAW" CTL="B" AVERAGE="0"/>
        <channel NEUTRAL="1223" MIN="1223" MAX="2050" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="2050" MAX="950" FUNCTION="UNUSED" CTL="G" AVERAGE="1"/>
        <channel NEUTRAL="1496" MIN="2050" MAX="948" FUNCTION="GAIN1" CTL="E" AVERAGE="1"/>
        <channel NEUTRAL="1500" MIN="2050" MAX="948" FUNCTION="MODE" CTL="PHAUX2" AVERAGE="1"/>
      </radio>
      <dump>
        <flight_plan security_height="2" name="Rotorcraft Basic (Enac)" max_dist_from_home="150" lon0="1 28 52.61" lat0="43 33 50.83" ground_alt="147" alt="152">
          <header>#include &quot;autopilot.h&quot;</header>
          <waypoints>
            <waypoint y="0.0" x="0.0" name="HOME"/>
            <waypoint y="5.0" x="0.0" name="CLIMB"/>
            <waypoint y="-5.0" x="-2.0" name="STDBY"/>
            <waypoint y="-13.9" x="3.6" name="p1"/>
            <waypoint y="-48.2" x="27.5" name="p2"/>
            <waypoint y="-19.6" x="16.7" name="p3"/>
            <waypoint y="-40.7" x="13.7" name="p4"/>
            <waypoint y="-50" x="-20" name="CAM" height="2."/>
            <waypoint y="-10.9" x="5.6" name="TD"/>
          </waypoints>
          <blocks>
            <block name="Wait GPS" no="0">
              <call_once fun="NavKillThrottle()" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Geo init" no="1">
              <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
              <call_once fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Holding point" no="2">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="Start Engine" no="3">
              <call_once fun="NavResurrect()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff" name="Takeoff" no="4">
              <exception deroute="Standby" cond="stateGetPositionEnu_f() @DEREF z @GT 2.0"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="5">
              <stay wp="STDBY" no="0"/>
            </block>
            <block name="stay_p1" no="6">
              <stay wp="p1" no="0"/>
            </block>
            <block name="go_p2" no="7">
              <call_once fun="nav_set_heading_deg(90)" no="0"/>
              <go wp="p2" no="1"/>
              <deroute block="stay_p1" no="2"/>
            </block>
            <block name="line_p1_p2" no="8">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <stay wp="p2" until="stage_time>10" no="1"/>
              <go wp="p1" hmode="route" from="p2" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="route" no="9">
              <go wp="p3" hmode="route" from="p1" no="0"/>
              <go wp="p4" hmode="route" from="p3" no="1"/>
              <go wp="p1" hmode="route" from="p4" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="Oval" no="10">
              <oval radius="-1" p2="p2" p1="p1" no="1"/>
            </block>
            <block name="test yaw" no="11">
              <go wp="p1" no="0"/>
              <for var="i" to="16" from="1" no="2">
                <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
              </for>
              <deroute block="Standby" no="5"/>
            </block>
            <block pre_call="nav_set_heading_towards_waypoint(WP_CAM)" name="circle CAM" no="12">
              <circle wp="CAM" radius="nav_radius" no="0"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land Here" name="land here" no="13">
              <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
            </block>
            <block name="land" no="14">
              <go wp="TD" no="0"/>
            </block>
            <block name="flare" no="15">
              <exception deroute="Holding point" cond="NavDetectGround()"/>
              <exception deroute="landed" cond="!nav_is_in_flight()"/>
              <call_once fun="NavStartDetectGround()" no="0"/>
              <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
            </block>
            <block name="landed" no="16">
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
            </block>
            <block name="HOME" no="17">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="17" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="16" block_name="landed" stage="0">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
          </stage>
          <stage block="15" block_name="flare" stage="1">
            <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
          </stage>
          <stage block="15" block_name="flare" stage="0">
            <call_once fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="14" block_name="land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="13" block_name="land here" stage="0">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="12" block_name="circle CAM" stage="0">
            <circle wp="CAM" radius="nav_radius" no="0"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="5">
            <deroute block="Standby" no="5"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="3">
            <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="2">
            <for var="i" to="16" from="1" no="2">
              <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
            </for>
          </stage>
          <stage block="11" block_name="test yaw" stage="0">
            <go wp="p1" no="0"/>
          </stage>
          <stage block="10" block_name="Oval" stage="1">
            <oval radius="-1" p2="p2" p1="p1" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="9" block_name="route" stage="2">
            <go wp="p1" hmode="route" from="p4" no="2"/>
          </stage>
          <stage block="9" block_name="route" stage="1">
            <go wp="p4" hmode="route" from="p3" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="0">
            <go wp="p3" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="2">
            <go wp="p1" hmode="route" from="p2" no="2"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="1">
            <stay wp="p2" until="stage_time>10" no="1"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="2">
            <deroute block="stay_p1" no="2"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="1">
            <go wp="p2" no="1"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="0">
            <call_once fun="nav_set_heading_deg(90)" no="0"/>
          </stage>
          <stage block="6" block_name="stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="5" block_name="Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="1">
            <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="0">
            <call_once fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="2">
            <call_once fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="0">
            <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
              <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
              <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
              <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
              <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Att Loop">
              <dl_setting VAR="stabilization_gains.p.x" TYPE="int32" STEP="1" SHORTNAME="pgain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_PGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="8000"/>
              <dl_setting VAR="stabilization_gains.d.x" TYPE="int32" STEP="1" SHORTNAME="dgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.x" TYPE="int32" STEP="1" SHORTNAME="igain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_IGAIN" MIN="0" MAX="800"/>
              <dl_setting VAR="stabilization_gains.dd.x" TYPE="int32" STEP="1" SHORTNAME="ddgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="stabilization_gains.p.y" TYPE="int32" STEP="1" SHORTNAME="pgain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_PGAIN" MIN="1" MAX="8000"/>
              <dl_setting VAR="stabilization_gains.d.y" TYPE="int32" STEP="1" SHORTNAME="dgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.y" TYPE="int32" STEP="1" SHORTNAME="igain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_IGAIN" MIN="0" MAX="800"/>
              <dl_setting VAR="stabilization_gains.dd.y" TYPE="int32" STEP="1" SHORTNAME="ddgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="stabilization_gains.p.z" TYPE="int32" STEP="1" SHORTNAME="pgain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_PGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.d.z" TYPE="int32" STEP="1" SHORTNAME="dgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.z" TYPE="int32" STEP="1" SHORTNAME="igain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_IGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="stabilization_gains.dd.z" TYPE="int32" STEP="1" SHORTNAME="ddgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.p" UNIT="rad/s" STEP="1" SHORTNAME="omega p" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_P" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaP" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.p" STEP="0.05" SHORTNAME="zeta p" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_P" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaP"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.q" UNIT="rad/s" STEP="1" SHORTNAME="omega q" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_Q" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaQ" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.q" STEP="0.05" SHORTNAME="zeta q" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_Q" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaQ"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.r" UNIT="rad/s" STEP="1" SHORTNAME="omega r" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_R" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaR" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.r" STEP="0.05" SHORTNAME="zeta r" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_R" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaR"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="NAV">
              <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
              <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
              <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MIN="-50" MAX="50"/>
              <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MIN="0" MAX="10.0"/>
              <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MIN="-10.0" MAX="0.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Vert Loop">
              <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
              <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MIN="0.2" MAX="0.8"/>
              <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MIN="0" MAX="1"/>
              <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
            <dl_settings NAME="Horiz Loop">
              <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="true" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
              <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
              <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MIN="0" MAX="1"/>
              <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
              <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
              <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
              <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
              <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
              <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="Superbit">
              <dl_setting VAR="settings_store_flag" VALUES="Store" STEP="1" SHORTNAME="store" MODULE="subsystems/settings" MIN="1" MAX="1" HANDLER="StoreSettings"/>
              <dl_setting VAR="superbitrf.bind_mfg_id32" TYPE="uint32" STEP="1" SHORTNAME="mfg_id" PERSISTENT="true" MODULE="subsystems/datalink/superbitrf" MIN="0" MAX="4294967295" HANDLER="set_mfg_id"/>
              <dl_setting VAR="superbitrf.num_channels" TYPE="uint8" STEP="1" SHORTNAME="#chan" PERSISTENT="true" MODULE="subsystems/datalink/superbitrf" MIN="0" MAX="14"/>
              <dl_setting VAR="superbitrf.protocol" TYPE="uint8" STEP="1" SHORTNAME="prot" PERSISTENT="true" MODULE="subsystems/datalink/superbitrf" MIN="0" MAX="32" HANDLER="set_protocol"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="ublox">
            <dl_settings NAME="ucenter">
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_h" STEP="1" SHORTNAME="sw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_l" STEP="1" SHORTNAME="sw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_h" STEP="1" SHORTNAME="hw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_l" STEP="1" SHORTNAME="hw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_init" STEP="100" SHORTNAME="inibaud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_run" STEP="100" SHORTNAME="baud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe name="quadrotor_lisa_s">
        <servos driver="Pwm">
          <servo name="RIGHT" no="5" min="1000" neutral="1150" max="1830"/>
          <servo name="BACK" no="0" min="1000" neutral="1150" max="1830"/>
          <servo name="LEFT" no="1" min="1000" neutral="1150" max="1830"/>
          <servo name="FRONT" no="4" min="1000" neutral="1150" max="1830"/>
        </servos>
        <commands>
          <axis name="PITCH" failsafe_value="0"/>
          <axis name="ROLL" failsafe_value="0"/>
          <axis name="YAW" failsafe_value="0"/>
          <axis name="THRUST" failsafe_value="0"/>
        </commands>
        <command_laws>
          <call fun="motor_mixing_run(autopilot_get_motors_on(),FALSE,values)"/>
          <set servo="FRONT" value="motor_mixing.commands[0]"/>
          <set servo="BACK" value="motor_mixing.commands[1]"/>
          <set servo="LEFT" value="motor_mixing.commands[2]"/>
          <set servo="RIGHT" value="motor_mixing.commands[3]"/>
        </command_laws>
        <section name="MIXING" prefix="MOTOR_MIXING_">
          <define name="TRIM_ROLL" value="0"/>
          <define name="TRIM_PITCH" value="0"/>
          <define name="TRIM_YAW" value="0"/>
          <define name="NB_MOTOR" value="4"/>
          <define name="SCALE" value="256"/>
          <define name="ROLL_COEF" value="{     0,     0,  256, -256 }"/>
          <define name="PITCH_COEF" value="{  256,  -256,    0,    0 }"/>
          <define name="YAW_COEF" value="{   -256,  -256,  256,  256 }"/>
          <define name="THRUST_COEF" value="{ 256,   256,  256,  256 }"/>
        </section>
        <section name="IMU" prefix="IMU_">
          <define name="BODY_TO_IMU_PHI" value="182." unit="deg"/>
          <define name="BODY_TO_IMU_THETA" value="0." unit="deg"/>
          <define name="BODY_TO_IMU_PSI" value="0." unit="deg"/>
          <define name="ACCEL_X_NEUTRAL" value="0"/>
          <define name="ACCEL_Y_NEUTRAL" value="0"/>
          <define name="ACCEL_Z_NEUTRAL" value="0"/>
          <define name="MAG_X_NEUTRAL" value="-157"/>
          <define name="MAG_Y_NEUTRAL" value="-379"/>
          <define name="MAG_Z_NEUTRAL" value="130"/>
          <define name="MAG_X_SENS" value="3.65789837026" integer="16"/>
          <define name="MAG_Y_SENS" value="3.85373116155" integer="16"/>
          <define name="MAG_Z_SENS" value="4.28038049955" integer="16"/>
          <define name="MAG_X_CURRENT_COEF" value="0.0103422023767"/>
          <define name="MAG_Y_CURRENT_COEF" value="0.0084568317783"/>
          <define name="MAG_Z_CURRENT_COEF" value="-0.01935617335"/>
        </section>
        <section name="AUTOPILOT">
          <define name="MODE_MANUAL" value="AP_MODE_ATTITUDE_DIRECT"/>
          <define name="MODE_AUTO1" value="AP_MODE_ATTITUDE_DIRECT"/>
          <define name="MODE_AUTO2" value="AP_MODE_ATTITUDE_Z_HOLD"/>
        </section>
        <section name="BAT">
          <define name="MILLIAMP_AT_FULL_THROTTLE" value="14000"/>
          <define name="CATASTROPHIC_BAT_LEVEL" value="3.0" unit="V"/>
        </section>
        <section name="STABILIZATION_ATTITUDE" prefix="STABILIZATION_ATTITUDE_">
          <define name="SP_MAX_PHI" value="45." unit="deg"/>
          <define name="SP_MAX_THETA" value="45." unit="deg"/>
          <define name="SP_MAX_PSI" value="45." unit="deg"/>
          <define name="SP_MAX_R" value="90." unit="deg/s"/>
          <define name="SP_MAX_P" value="90." unit="deg/s"/>
          <define name="DEADBAND_R" value="250"/>
          <define name="DEADBAND_A" value="250"/>
          <define name="REF_OMEGA_P" value="1500" unit="deg/s"/>
          <define name="REF_ZETA_P" value="0.85"/>
          <define name="REF_MAX_P" value="400." unit="deg/s"/>
          <define name="REF_MAX_PDOT" value="RadOfDeg(8000.)"/>
          <define name="REF_OMEGA_Q" value="1500" unit="deg/s"/>
          <define name="REF_ZETA_Q" value="0.85"/>
          <define name="REF_MAX_Q" value="400." unit="deg/s"/>
          <define name="REF_MAX_QDOT" value="RadOfDeg(8000.)"/>
          <define name="REF_OMEGA_R" value="500" unit="deg/s"/>
          <define name="REF_ZETA_R" value="0.85"/>
          <define name="REF_MAX_R" value="180." unit="deg/s"/>
          <define name="REF_MAX_RDOT" value="RadOfDeg(1000.)"/>
          <define name="PHI_PGAIN" value="180"/>
          <define name="PHI_DGAIN" value="140"/>
          <define name="PHI_IGAIN" value="80"/>
          <define name="THETA_PGAIN" value="180"/>
          <define name="THETA_DGAIN" value="140"/>
          <define name="THETA_IGAIN" value="80"/>
          <define name="PSI_PGAIN" value="500"/>
          <define name="PSI_DGAIN" value="200"/>
          <define name="PSI_IGAIN" value="10"/>
          <define name="PHI_DDGAIN" value="0"/>
          <define name="THETA_DDGAIN" value="0"/>
          <define name="PSI_DDGAIN" value="0"/>
          <define name="PHI_AGAIN" value="0"/>
          <define name="THETA_AGAIN" value="0"/>
          <define name="PSI_AGAIN" value="0"/>
        </section>
        <section name="INS" prefix="INS_"/>
        <section name="GUIDANCE_V" prefix="GUIDANCE_V_">
          <define name="HOVER_KP" value="531"/>
          <define name="HOVER_KD" value="356"/>
          <define name="HOVER_KI" value="0"/>
          <define name="NOMINAL_HOVER_THROTTLE" value="0.669"/>
        </section>
        <section name="AHRS" prefix="AHRS_">
          <define name="H_X" value=" 0.47577"/>
          <define name="H_Y" value=" 0.11811"/>
          <define name="H_Z" value=" 0.87161"/>
        </section>
        <section name="GUIDANCE_H" prefix="GUIDANCE_H_">
          <define name="PGAIN" value="50"/>
          <define name="DGAIN" value="50"/>
          <define name="IGAIN" value="0"/>
        </section>
        <section name="SIMULATOR" prefix="NPS_">
          <define name="ACTUATOR_NAMES" value="front_motor, back_motor, right_motor, left_motor" type="string[]"/>
          <define name="SENSORS_PARAMS" value="nps_sensors_params_default.h" type="string"/>
        </section>
        <modules main_freq="512">
          <module name="gps" type="ubx_ucenter"/>
          <module name="send_imu_mag_current"/>
        </modules>
        <firmware name="rotorcraft">
          <target name="ap" board="lisa_s_1.0">
            <module name="radio_control" type="superbitrf_rc">
              <define name="RADIO_TRANSMITTER_ID" value="2008496626"/>
              <define name="RADIO_TRANSMITTER_CHAN" value="6"/>
              <define name="RADIO_TRANSMITTER_PROTOCOL" value="0x01"/>
            </module>
            <configure name="AHRS_PROPAGATE_FREQUENCY" value="500"/>
          </target>
          <target name="nps" board="pc">
            <module name="fdm" type="jsbsim"/>
            <module name="radio_control" type="ppm"/>
          </target>
          <module name="motor_mixing"/>
          <module name="actuators" type="pwm">
            <define name="SERVO_HZ" value="400"/>
            <define name="USE_SERVOS_1AND2"/>
          </module>
          <module name="telemetry" type="superbitrf"/>
          <module name="imu" type="lisa_s_v1.0"/>
          <module name="gps" type="ublox"/>
          <module name="stabilization" type="int_quat"/>
          <module name="ahrs" type="int_cmpl_quat"/>
          <module name="ins"/>
        </firmware>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.05" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
            <message PERIOD="0.05" NAME="OPTICAL_FLOW_HOVER"/>
            <message PERIOD="0.10" NAME="VISUALTARGET"/>
            <message PERIOD="0.1" NAME="VISION_POSITION_ESTIMATE"/>
            <message PERIOD="0.05" NAME="DIVERGENCE"/>
            <message PERIOD="0.02" NAME="DRAGSPEED"/>
            <message PERIOD="5.1" NAME="LOGGER_STATUS"/>
            <message PERIOD="1.2" NAME="LIDAR"/>
            <message PERIOD=".25" NAME="INS_EKF2"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="BEBOP_ACTUATORS"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_FLOAT"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
            <message PERIOD="2.0" NAME="INDI_G"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="vel_guidance" KEY_PRESS="q">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HYBRID_GUIDANCE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1.0" NAME="GPS_INT"/>
            <message PERIOD="1.0" NAME="INS"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="RTCM3">
            <message PERIOD="1" NAME="GPS_RXMRTCM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD="1" NAME="GPS_RTK"/>
          </mode>
        </process>
        <process NAME="FlightRecorder">
          <mode NAME="default">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD=".1" NAME="GPS_INT"/>
            <message PERIOD=".1" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".2" NAME="IMU_MAG_SCALED"/>
            <message PERIOD="0.05" NAME="LIDAR"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="19"/>
            <dl_setting VAR="autopilot.kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot.power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot.mode" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="19" HANDLER="SetModeHandler"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="DelftaCopter" ac_id="6" airframe="airframes/tudelft/outback.xml" radio="radios/dummy.xml" telemetry="telemetry/tudelft/outback.xml" flight_plan="flight_plans/rotorcraft_basic.xml" settings="settings/rotorcraft_basic.xml" settings_modules="modules/heli_throttle_curve.xml modules/gps_ubx_ucenter.xml modules/logger_sd_spi_direct.xml modules/temp_adc.xml modules/air_data.xml modules/geo_mag.xml modules/opa_controller.xml modules/guidance_indi.xml modules/ahrs_int_cmpl_quat.xml modules/stabilization_rate.xml modules/stabilization_int_quat.xml modules/nav_basic_rotorcraft.xml modules/guidance_rotorcraft.xml modules/gps.xml modules/imu_common.xml" gui_color="#ffffdffac31f" release="7c6064c5c3522e3286af8ecbc7498773b421ba7d">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitMM" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1120" MIN="1120" MAX="2000" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="2" name="Rotorcraft Basic (Enac)" max_dist_from_home="150" lon0="1 28 52.61" lat0="43 33 50.83" ground_alt="147" alt="152">
          <header>#include &quot;autopilot.h&quot;</header>
          <waypoints>
            <waypoint y="0.0" x="0.0" name="HOME"/>
            <waypoint y="5.0" x="0.0" name="CLIMB"/>
            <waypoint y="-5.0" x="-2.0" name="STDBY"/>
            <waypoint y="-13.9" x="3.6" name="p1"/>
            <waypoint y="-48.2" x="27.5" name="p2"/>
            <waypoint y="-19.6" x="16.7" name="p3"/>
            <waypoint y="-40.7" x="13.7" name="p4"/>
            <waypoint y="-50" x="-20" name="CAM" height="2."/>
            <waypoint y="-10.9" x="5.6" name="TD"/>
          </waypoints>
          <blocks>
            <block name="Wait GPS" no="0">
              <call_once fun="NavKillThrottle()" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Geo init" no="1">
              <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
              <call_once fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Holding point" no="2">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="Start Engine" no="3">
              <call_once fun="NavResurrect()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff" name="Takeoff" no="4">
              <exception deroute="Standby" cond="stateGetPositionEnu_f() @DEREF z @GT 2.0"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="5">
              <stay wp="STDBY" no="0"/>
            </block>
            <block name="stay_p1" no="6">
              <stay wp="p1" no="0"/>
            </block>
            <block name="go_p2" no="7">
              <call_once fun="nav_set_heading_deg(90)" no="0"/>
              <go wp="p2" no="1"/>
              <deroute block="stay_p1" no="2"/>
            </block>
            <block name="line_p1_p2" no="8">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <stay wp="p2" until="stage_time>10" no="1"/>
              <go wp="p1" hmode="route" from="p2" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="route" no="9">
              <go wp="p3" hmode="route" from="p1" no="0"/>
              <go wp="p4" hmode="route" from="p3" no="1"/>
              <go wp="p1" hmode="route" from="p4" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="Oval" no="10">
              <oval radius="-1" p2="p2" p1="p1" no="1"/>
            </block>
            <block name="test yaw" no="11">
              <go wp="p1" no="0"/>
              <for var="i" to="16" from="1" no="2">
                <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
              </for>
              <deroute block="Standby" no="5"/>
            </block>
            <block pre_call="nav_set_heading_towards_waypoint(WP_CAM)" name="circle CAM" no="12">
              <circle wp="CAM" radius="nav_radius" no="0"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land Here" name="land here" no="13">
              <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
            </block>
            <block name="land" no="14">
              <go wp="TD" no="0"/>
            </block>
            <block name="flare" no="15">
              <exception deroute="Holding point" cond="NavDetectGround()"/>
              <exception deroute="landed" cond="!nav_is_in_flight()"/>
              <call_once fun="NavStartDetectGround()" no="0"/>
              <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
            </block>
            <block name="landed" no="16">
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
            </block>
            <block name="HOME" no="17">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="17" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="16" block_name="landed" stage="0">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
          </stage>
          <stage block="15" block_name="flare" stage="1">
            <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
          </stage>
          <stage block="15" block_name="flare" stage="0">
            <call_once fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="14" block_name="land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="13" block_name="land here" stage="0">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="12" block_name="circle CAM" stage="0">
            <circle wp="CAM" radius="nav_radius" no="0"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="5">
            <deroute block="Standby" no="5"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="3">
            <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="2">
            <for var="i" to="16" from="1" no="2">
              <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
            </for>
          </stage>
          <stage block="11" block_name="test yaw" stage="0">
            <go wp="p1" no="0"/>
          </stage>
          <stage block="10" block_name="Oval" stage="1">
            <oval radius="-1" p2="p2" p1="p1" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="9" block_name="route" stage="2">
            <go wp="p1" hmode="route" from="p4" no="2"/>
          </stage>
          <stage block="9" block_name="route" stage="1">
            <go wp="p4" hmode="route" from="p3" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="0">
            <go wp="p3" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="2">
            <go wp="p1" hmode="route" from="p2" no="2"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="1">
            <stay wp="p2" until="stage_time>10" no="1"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="2">
            <deroute block="stay_p1" no="2"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="1">
            <go wp="p2" no="1"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="0">
            <call_once fun="nav_set_heading_deg(90)" no="0"/>
          </stage>
          <stage block="6" block_name="stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="5" block_name="Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="1">
            <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="0">
            <call_once fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="2">
            <call_once fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="0">
            <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="ThrottleCurve">
              <dl_setting VAR="throttle_curve.rpm_fb_p" STEP="0.005" SHORTNAME="rpm_fb_p" PARAM="THROTTLE_CURVE_RPM_FB_P" MIN="0.00" MAX="100"/>
              <dl_setting VAR="throttle_curve.rpm_fb_i" STEP="0.005" SHORTNAME="rpm_fb_i" PARAM="THROTTLE_CURVE_RPM_FB_I" MIN="0.00" MAX="100"/>
              <dl_setting VAR="throttle_curve.throttle_trim" STEP="0" SHORTNAME="throttle_trim" MIN="-9600" MAX="9600"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="ublox">
            <dl_settings NAME="ucenter">
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_h" STEP="1" SHORTNAME="sw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_l" STEP="1" SHORTNAME="sw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_h" STEP="1" SHORTNAME="hw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_l" STEP="1" SHORTNAME="hw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_init" STEP="100" SHORTNAME="inibaud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_run" STEP="100" SHORTNAME="baud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="sdlogger">
            <dl_settings NAME="SD Logger">
              <dl_setting VAR="sdlogger_spi.status" VALUES="UnInit|Error|Init|Index|Ready|Log|FinalBlock|Stop|GetIndexUp|UpInd|GetIndDwn|Down" STEP="1" MODULE="loggers/sdlogger_spi_direct" MIN="0" MAX="20"/>
              <dl_setting VAR="sdcard1.status" VALUES="UnInit|Error|Idle|Busy|Other" STEP="1" MODULE="loggers/sdlogger_spi_direct" MIN="0" MAX="40"/>
              <dl_setting VAR="sdcard1.error_status" VALUES="None|NoResp|CardInfo|Timeout|NoRes4|NoRes8|CCInval|SBNoRes|WBNoRes|SPIErr|BlockErr|RBNoRes|RBTimeout|MWNoRes|MWErr" STEP="1" MODULE="loggers/sdlogger_spi_direct" MIN="0" MAX="15"/>
              <dl_setting VAR="sdlogger_spi.command" STEP="1" MODULE="loggers/sdlogger_spi_direct" MIN="1" MAX="42"/>
              <dl_setting VAR="sdlogger_spi.do_log" VALUES="Off|On" STEP="1" MODULE="loggers/sdlogger_spi_direct" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="temp_adc">
              <dl_setting VAR="temp_adc_sync_send" VALUES="Off|On" STEP="1" SHORTNAME="sync_send" PARAM="TEMP_ADC_SYNC_SEND" MODULE="sensors/temp_adc" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="air_data">
              <dl_setting VAR="air_data.qnh" STEP="1" SHORTNAME="QNH" MODULE="air_data/air_data" MIN="800" MAX="1200"/>
              <dl_setting VAR="air_data.tas_factor" TYPE="float" STEP="0.01" SHORTNAME="TASfactor" PERSISTENT="true" PARAM="AIR_DATA_TAS_FACTOR" MODULE="air_data/air_data" MIN="0.8" MAX="1.3"/>
              <dl_setting VAR="air_data.calc_qnh_once" STEP="1" SHORTNAME="calcQNH" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_airspeed" TYPE="uint8" STEP="1" SHORTNAME="calcAirspeed" PERSISTENT="true" PARAM="AIR_DATA_CALC_AIRSPEED" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_tas_factor" TYPE="uint8" STEP="1" SHORTNAME="calcTASfactor" PERSISTENT="true" PARAM="AIR_DATA_CALC_TAS_FACTOR" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_amsl_baro" TYPE="uint8" STEP="1" SHORTNAME="calcAMSL" PERSISTENT="true" PARAM="AIR_DATA_CALC_AMSL_BARO" MODULE="air_data/air_data" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="geo_mag">
              <dl_setting VAR="geo_mag.calc_once" VALUES="OFF|CALC" STEP="1" SHORTNAME="calcNow" MODULE="geo_mag/geo_mag" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="Board">
              <dl_setting VAR="opa_controller_vision_power" VALUES="OFF|ON" STEP="1" SHORTNAME="vision_pwr" MIN="0" MAX="1"/>
              <dl_setting VAR="opa_controller_ftd_disarm" VALUES="NONE|DISARM" STEP="1" SHORTNAME="ftd_disarm" MODULE="boards/opa_controller_ap" MIN="0" MAX="1" HANDLER="disarm"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="guidance_indi">
              <dl_setting VAR="guidance_indi_pos_gain" STEP="0.1" SHORTNAME="kp_p" PERSISTENT="true" PARAM="GUIDANCE_INDI_POS_GAIN" MIN="0" MAX="10.0"/>
              <dl_setting VAR="guidance_indi_speed_gain" STEP="0.1" SHORTNAME="kp_p" PERSISTENT="true" PARAM="GUIDANCE_INDI_SPEED_GAIN" MIN="0" MAX="10.0"/>
              <dl_setting VAR="guidance_indi_max_bank" STEP="0.1" SHORTNAME="max_bank" PARAM="GUIDANCE_H_MAX_BANK" MIN="0" MAX="80.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
              <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
              <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
              <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
              <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Rate Loop">
              <dl_setting VAR="stabilization_rate_gain.p" TYPE="int32" STEP="1" SHORTNAME="pgain p" PERSISTENT="true" PARAM="STABILIZATION_RATE_GAIN_P" MODULE="stabilization/stabilization_rate" MIN="1" MAX="1000"/>
              <dl_setting VAR="stabilization_rate_gain.q" TYPE="int32" STEP="1" SHORTNAME="pgain q" PERSISTENT="true" PARAM="STABILIZATION_RATE_GAIN_Q" MIN="1" MAX="1000"/>
              <dl_setting VAR="stabilization_rate_gain.r" TYPE="int32" STEP="1" SHORTNAME="pgain r" PERSISTENT="true" PARAM="STABILIZATION_RATE_GAIN_R" MIN="1" MAX="1000"/>
              <dl_setting VAR="stabilization_rate_igain.p" TYPE="int32" STEP="1" SHORTNAME="igain p" PERSISTENT="true" PARAM="STABILIZATION_RATE_IGAIN_P" MIN="0" MAX="500"/>
              <dl_setting VAR="stabilization_rate_igain.q" TYPE="int32" STEP="1" SHORTNAME="igain q" PERSISTENT="true" PARAM="STABILIZATION_RATE_IGAIN_Q" MIN="0" MAX="500"/>
              <dl_setting VAR="stabilization_rate_igain.r" TYPE="int32" STEP="1" SHORTNAME="igain r" PERSISTENT="true" PARAM="STABILIZATION_RATE_IGAIN_R" MIN="0" MAX="500"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Att Loop">
              <dl_setting VAR="stabilization_gains.p.x" TYPE="int32" STEP="1" SHORTNAME="pgain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_PGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="8000"/>
              <dl_setting VAR="stabilization_gains.d.x" TYPE="int32" STEP="1" SHORTNAME="dgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.x" TYPE="int32" STEP="1" SHORTNAME="igain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_IGAIN" MIN="0" MAX="800"/>
              <dl_setting VAR="stabilization_gains.dd.x" TYPE="int32" STEP="1" SHORTNAME="ddgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="stabilization_gains.p.y" TYPE="int32" STEP="1" SHORTNAME="pgain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_PGAIN" MIN="1" MAX="8000"/>
              <dl_setting VAR="stabilization_gains.d.y" TYPE="int32" STEP="1" SHORTNAME="dgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.y" TYPE="int32" STEP="1" SHORTNAME="igain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_IGAIN" MIN="0" MAX="800"/>
              <dl_setting VAR="stabilization_gains.dd.y" TYPE="int32" STEP="1" SHORTNAME="ddgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="stabilization_gains.p.z" TYPE="int32" STEP="1" SHORTNAME="pgain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_PGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.d.z" TYPE="int32" STEP="1" SHORTNAME="dgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.z" TYPE="int32" STEP="1" SHORTNAME="igain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_IGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="stabilization_gains.dd.z" TYPE="int32" STEP="1" SHORTNAME="ddgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.p" UNIT="rad/s" STEP="1" SHORTNAME="omega p" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_P" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaP" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.p" STEP="0.05" SHORTNAME="zeta p" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_P" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaP"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.q" UNIT="rad/s" STEP="1" SHORTNAME="omega q" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_Q" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaQ" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.q" STEP="0.05" SHORTNAME="zeta q" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_Q" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaQ"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.r" UNIT="rad/s" STEP="1" SHORTNAME="omega r" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_R" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaR" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.r" STEP="0.05" SHORTNAME="zeta r" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_R" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaR"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="NAV">
              <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
              <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
              <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MIN="-50" MAX="50"/>
              <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MIN="0" MAX="10.0"/>
              <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MIN="-10.0" MAX="0.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Vert Loop">
              <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
              <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MIN="0.2" MAX="0.8"/>
              <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MIN="0" MAX="1"/>
              <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
            <dl_settings NAME="Horiz Loop">
              <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="true" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
              <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
              <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MIN="0" MAX="1"/>
              <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
              <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
              <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
              <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
              <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
              <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="Outback">
        <description>Helicopter with a double wing as frame
     * Autopilot:   OPA/FTD 1.0 and OPA/AP 1.0 with STM32F4
     * IMU:         MPU6000 (FTD), MPU6000 (AP)
     * Baro:        MS5611 (AP)
     * Actuators:   10 PWM (FTD)
     * GPS:         UBlox ??
     * RC:          Spektrum sats (2x)
     * Telemetry:   Iridium (FTD), 900Mhz ??? (AP)</description>
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="opa_ap_1.0">
            <module TYPE="xbee_api" NAME="telemetry"/>
            <module TYPE="mpu6000" NAME="imu"/>
            <module TYPE="ublox" NAME="gps">
              <define VALUE="2" NAME="GPS_TIMEOUT"/>
            </module>
            <module TYPE="int_quat" NAME="stabilization"/>
            <module TYPE="rate" NAME="stabilization"/>
            <module TYPE="int_cmpl_quat" NAME="ahrs">
              <define VALUE="TRUE" NAME="AHRS_GRAVITY_UPDATE_COORDINATED_TURN"/>
              <define VALUE="TRUE" NAME="AHRS_GPS_SPEED_IN_NEGATIVE_Z_DIRECTION"/>
            </module>
            <module TYPE="hff" NAME="ins"/>
            <module TYPE="indi" NAME="guidance"/>
            <module TYPE="uart" NAME="intermcu"/>
            <module TYPE="intermcu" NAME="telemetry"/>
            <module NAME="current_sensor"/>
            <module NAME="opa_controller"/>
            <module NAME="mag_pitot_uart"/>
            <module NAME="pwm_meas"/>
            <module NAME="rpm_sensor"/>
            <module NAME="geo_mag"/>
            <module NAME="air_data">
              <define VALUE="BARO_BOARD_SENDER_ID" NAME="AIR_DATA_BARO_ABS_ID"/>
              <define VALUE="BARO_BOARD_SENDER_ID" NAME="AIR_DATA_TEMPERATURE_ID"/>
              <define VALUE="TRUE" NAME="AIR_DATA_CALC_AMSL_BARO"/>
            </module>
            <module NAME="temp_adc"/>
            <module NAME="logger_sd_spi_direct">
              <define VALUE="TRUE" NAME="SDLOGGER_ON_ARM"/>
            </module>
            <module NAME="gps_ubx_ucenter"/>
            <module NAME="heli_throttle_curve"/>
            <define VALUE="TRUE" NAME="ROTORCRAFT_IS_HELI"/>
            <define VALUE="AP_MODE_NAV" NAME="RC_LOST_MODE"/>
          </target>
          <target NAME="fbw" BOARD="opa_ftd_1.0">
            <module TYPE="spektrum" NAME="radio_control">
              <configure VALUE="1" NAME="USE_SECONDARY_SPEKTRUM_RECEIVER"/>
              <define VALUE="1" NAME="RADIO_CONTROL_SPEKTRUM_NO_SIGN"/>
              <define VALUE="TRUE" NAME="USE_DSMX"/>
            </module>
            <module TYPE="pwm" NAME="actuators">
              <define VALUE="300" NAME="SERVO_HZ"/>
            </module>
            <module TYPE="uart" NAME="intermcu"/>
            <module TYPE="intermcu" NAME="telemetry"/>
            <module NAME="opa_controller"/>
            <module NAME="heli_swashplate_mixing"/>
            <module TYPE="ublox" NAME="gps"/>
            <module NAME="gps_ubx_ucenter"/>
            <define VALUE="FBW_MODE_FAILSAFE" NAME="RC_LOST_FBW_MODE"/>
            <define VALUE="FBW_MODE_AUTO" NAME="RC_LOST_IN_AUTO_FBW_MODE"/>
            <define VALUE="FBW_MODE_MANUAL" NAME="AP_LOST_FBW_MODE"/>
            <define VALUE="7" NAME="RADIO_FBW_MODE"/>
          </target>
        </firmware>
        <section NAME="BAT">
          <define VALUE="21.0" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="21.6" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="22.2" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="25.2" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
        <servos DRIVER="Pwm">
          <servo NO="0" NEUTRAL="1000" NAME="THROTTLE" MIN="1000" MAX="2000"/>
          <servo NO="1" NEUTRAL="1500" NAME="SW_BACK" MIN="1900" MAX="1100"/>
          <servo NO="2" NEUTRAL="1570" NAME="SW_LEFTFRONT" MIN="1170" MAX="1970"/>
          <servo NO="3" NEUTRAL="1480" NAME="SW_RIGHTFRONT" MIN="1880" MAX="1080"/>
          <servo NO="4" NEUTRAL="1500" NAME="TAIL_LEFT" MIN="1100" MAX="1900"/>
          <servo NO="5" NEUTRAL="1500" NAME="TAIL_RIGHT" MIN="1100" MAX="1900"/>
          <servo NO="6" NEUTRAL="1475" NAME="AIL_LEFTLOW" MIN="1075" MAX="1875"/>
          <servo NO="7" NEUTRAL="1520" NAME="AIL_RIGHTLOW" MIN="1120" MAX="1920"/>
          <servo NO="8" NEUTRAL="1530" NAME="AIL_LEFTUP" MIN="1130" MAX="1930"/>
          <servo NO="9" NEUTRAL="1565" NAME="AIL_RIGHTUP" MIN="1165" MAX="1965"/>
        </servos>
        <section NAME="RADIO">
          <define VALUE="RADIO_AUX1" NAME="RADIO_TH_HOLD"/>
          <define VALUE="RADIO_AUX2" NAME="RADIO_FMODE"/>
        </section>
        <rc_commands>
          <set VALUE="@THROTTLE" COMMAND="THRUST"/>
          <set VALUE="@ROLL" COMMAND="ROLL"/>
          <set VALUE="@PITCH" COMMAND="PITCH"/>
          <set VALUE="@YAW" COMMAND="YAW"/>
        </rc_commands>
        <commands>
          <axis NAME="THRUST" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="9600"/>
          <axis NAME="COLLECTIVE" FAILSAFE_VALUE="-9600"/>
        </commands>
        <section PREFIX="SW_MIXING_" NAME="MIXING">
          <define VALUE="HR120" NAME="TYPE"/>
          <define VALUE="0" NAME="TRIM_ROLL"/>
          <define VALUE="-682" NAME="TRIM_PITCH"/>
          <define VALUE="0" NAME="TRIM_COLL"/>
        </section>
        <section PREFIX="THROTTLE_CURVE_" NAME="THROTTLE_CURVE">
          <define VALUE="5.0" NAME="RPM_FB_P"/>
          <define VALUE="5.0" NAME="RPM_FB_I"/>
        </section>
        <command_laws>
          <call FUN="swashplate_mixing_run(values)"/>
          <let VAR="th_hold" VALUE="LessThan(RadioControlValues(RADIO_TH_HOLD), -4800)"/>
          <let VAR="forward_curve" VALUE="INTERMCU_GET_CMD_STATUS(INTERMCU_CMD_TIPPROPS)"/>
          <call FUN="INTERMCU_CLR_CMD_STATUS(INTERMCU_CMD_TIPPROPS)"/>
          <set VALUE="($th_hold? -9600 : @THRUST)" SERVO="THROTTLE"/>
          <set VALUE="swashplate_mixing.commands[SW_BACK]" SERVO="SW_BACK"/>
          <set VALUE="swashplate_mixing.commands[SW_LEFTFRONT]" SERVO="SW_LEFTFRONT"/>
          <set VALUE="swashplate_mixing.commands[SW_RIGHTFRONT]" SERVO="SW_RIGHTFRONT"/>
          <set VALUE="(Or($th_hold, $forward_curve)? 0 : (-@YAW - @THRUST*0.25) )" SERVO="TAIL_LEFT"/>
          <set VALUE="(Or($th_hold, $forward_curve)? 0 : (-@YAW - @THRUST*0.25) )" SERVO="TAIL_RIGHT"/>
          <set VALUE=" 2*@PITCH + 3*@YAW" SERVO="AIL_LEFTLOW"/>
          <set VALUE="-2*@PITCH + 3*@YAW" SERVO="AIL_RIGHTLOW"/>
          <set VALUE=" 2*@PITCH + 3*@YAW" SERVO="AIL_LEFTUP"/>
          <set VALUE="-2*@PITCH + 3*@YAW" SERVO="AIL_RIGHTUP"/>
        </command_laws>
        <heli_curves>
          <curve THROTTLE="0,6000,0,0,0" COLLECTIVE="-9600,-8150,-6700,-5250,-3800"/>
          <curve THROTTLE="5000,6500,8000" RPM="1650,1650,1650" COLLECTIVE="-9600,-6500,-2300"/>
          <curve THROTTLE="8600,8600,8600,8600,9600" COLLECTIVE="-9600,-7300,-5000,-2300,500"/>
        </heli_curves>
        <section NAME="MISC">
          <define VALUE="2.5" NAME="NAV_CLIMB_VSPEED"/>
          <define VALUE="-0.7" NAME="NAV_DESCEND_VSPEED"/>
          <define VALUE="TRUE" NAME="NO_RC_THRUST_LIMIT"/>
        </section>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="11" NAME="ACCEL_X_NEUTRAL"/>
          <define VALUE="11" NAME="ACCEL_Y_NEUTRAL"/>
          <define VALUE="-25" NAME="ACCEL_Z_NEUTRAL"/>
          <define VALUE="57" NAME="MAG_X_NEUTRAL"/>
          <define VALUE="-26" NAME="MAG_Y_NEUTRAL"/>
          <define VALUE="7" NAME="MAG_Z_NEUTRAL"/>
          <define VALUE="19.7209165598" NAME="MAG_X_SENS" INTEGER="16"/>
          <define VALUE="16.6482878341" NAME="MAG_Y_SENS" INTEGER="16"/>
          <define VALUE="16.7156762257" NAME="MAG_Z_SENS" INTEGER="16"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="180." UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
          <define VALUE="0." UNIT="deg" NAME="TO_MAG_PHI"/>
          <define VALUE="0." UNIT="deg" NAME="TO_MAG_THETA"/>
          <define VALUE="90." UNIT="deg" NAME="TO_MAG_PSI"/>
          <define VALUE="1" NAME="MAG_X_SIGN"/>
          <define VALUE="1" NAME="MAG_Y_SIGN"/>
          <define VALUE="1" NAME="MAG_Z_SIGN"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0" NAME="GRAVITY_HEURISTIC_FACTOR"/>
          <define VALUE="TRUE" NAME="PROPAGATE_LOW_PASS_RATES"/>
          <define VALUE="19" NAME="PROPAGATE_LOW_PASS_RATES_MUL"/>
          <define VALUE="20" NAME="PROPAGATE_LOW_PASS_RATES_DIV"/>
          <define VALUE="0.5293" NAME="H_X"/>
          <define VALUE="0.0971" NAME="H_Y"/>
          <define VALUE="-0.8429" NAME="H_Z"/>
        </section>
        <section PREFIX="STABILIZATION_RATE_" NAME="STABILIZATION_RATE">
          <define VALUE="280" UNIT="deg/s" NAME="SP_MAX_P"/>
          <define VALUE="350" UNIT="deg/s" NAME="SP_MAX_Q"/>
          <define VALUE="200" UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="20" NAME="DEADBAND_P"/>
          <define VALUE="20" NAME="DEADBAND_Q"/>
          <define VALUE="200" NAME="DEADBAND_R"/>
          <define VALUE="880" NAME="GAIN_P"/>
          <define VALUE="880" NAME="GAIN_Q"/>
          <define VALUE="4100" NAME="GAIN_R"/>
          <define VALUE="75" NAME="IGAIN_P"/>
          <define VALUE="75" NAME="IGAIN_Q"/>
          <define VALUE="50" NAME="IGAIN_R"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="STABILIZATION_ATTITUDE">
          <define VALUE="60." UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="60." UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="150." UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="200" NAME="DEADBAND_R"/>
          <define VALUE="800" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.85" NAME="REF_ZETA_P"/>
          <define VALUE="300." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(7000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="800" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.85" NAME="REF_ZETA_Q"/>
          <define VALUE="300." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(7000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="500" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.85" NAME="REF_ZETA_R"/>
          <define VALUE="180." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(1800.)" NAME="REF_MAX_RDOT"/>
          <define VALUE="854" NAME="PHI_PGAIN"/>
          <define VALUE="369" NAME="PHI_DGAIN"/>
          <define VALUE="180" NAME="PHI_IGAIN"/>
          <define VALUE="1605" NAME="THETA_PGAIN"/>
          <define VALUE="293" NAME="THETA_DGAIN"/>
          <define VALUE="180" NAME="THETA_IGAIN"/>
          <define VALUE="500" NAME="PSI_PGAIN"/>
          <define VALUE="1360" NAME="PSI_DGAIN"/>
          <define VALUE="151" NAME="PSI_IGAIN"/>
          <define VALUE="0" NAME="PHI_DDGAIN"/>
          <define VALUE="0" NAME="THETA_DDGAIN"/>
          <define VALUE="0" NAME="PSI_DDGAIN"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="75" NAME="HOVER_KP"/>
          <define VALUE="40" NAME="HOVER_KD"/>
          <define VALUE="6" NAME="HOVER_KI"/>
          <define VALUE="0.42" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="FALSE" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="35" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="TRUE" NAME="USE_SPEED_REF"/>
          <define VALUE="20" NAME="PGAIN"/>
          <define VALUE="40" NAME="DGAIN"/>
          <define VALUE="30" NAME="AGAIN"/>
          <define VALUE="10" NAME="IGAIN"/>
        </section>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_RATE_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_RATE_DIRECT" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_AUTO2"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.25" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
            <message PERIOD="3.0" NAME="TEMP_ADC"/>
            <message PERIOD="2.0" NAME="FBW_STATUS"/>
            <message PERIOD="0.5" NAME="MOTOR"/>
            <message PERIOD="0.5" NAME="THROTTLE_CURVE"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="BEBOP_ACTUATORS"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_INT"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="empty"/>
        </process>
        <process NAME="Logger">
          <mode NAME="default">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD=".002" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
            <message PERIOD=".002" NAME="ROTORCRAFT_CMD"/>
          </mode>
        </process>
        <process NAME="InterMCU">
          <mode NAME="default">
            <message PERIOD="0.1" NAME="ROTORCRAFT_STATUS"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="19"/>
            <dl_setting VAR="autopilot.kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot.power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot.mode" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="19" HANDLER="SetModeHandler"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="Disco" ac_id="16" airframe="airframes/ENAC/fixed-wing/disco.xml" radio="radios/T14SG_SBUS.xml" telemetry="telemetry/default_fixedwing.xml" flight_plan="flight_plans/basic.xml" settings="settings/fixedwing_basic.xml" settings_modules="modules/nav_basic_fw.xml modules/guidance_full_pid_fw.xml modules/stabilization_adaptive_fw.xml modules/air_data.xml modules/airspeed_ms45xx_i2c.xml modules/gps_ubx_ucenter.xml modules/gps.xml modules/ahrs_float_dcm.xml modules/imu_common.xml" gui_color="blue" release="dfba3220f5b3500611231d02fca8799f9f045cb8">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSTIVE" NAME="Futaba T14SG with SBUS" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1500" MIN="1000" MAX="2000" FUNCTION="ROLL" CTL="A" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1000" MAX="2000" FUNCTION="PITCH" CTL="B" AVERAGE="0"/>
        <channel NEUTRAL="1000" MIN="1000" MAX="2000" FUNCTION="THROTTLE" CTL="C" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1000" MAX="2000" FUNCTION="YAW" CTL="D" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="2000" MAX="1000" FUNCTION="UNUSED1" CTL="E" AVERAGE="1"/>
        <channel NEUTRAL="1500" MIN="1000" MAX="2000" FUNCTION="KILL" CTL="F" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1000" MAX="2000" FUNCTION="AUX2" CTL="G" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1000" MAX="2000" FUNCTION="MODE" CTL="H" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1000" MAX="2000" FUNCTION="UNUSED3" CTL="I" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1000" MAX="2000" FUNCTION="AUX3" CTL="J" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1000" MAX="2000" FUNCTION="UNUSED5" CTL="K" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1000" MAX="2000" FUNCTION="UNUSED6" CTL="L" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="25" name="Basic" max_dist_from_home="1500" lon0="1.27289" lat0="43.46223" ground_alt="185" alt="260">
          <header>#include &quot;subsystems/datalink/datalink.h&quot;</header>
          <waypoints>
            <waypoint y="0" x="0" name="HOME"/>
            <waypoint y="100.1" x="49.5" name="STDBY"/>
            <waypoint y="189.9" x="10.1" name="1"/>
            <waypoint y="139.1" x="132.3" name="2"/>
            <waypoint y="-11.6" x="137.0" name="MOB"/>
            <waypoint y="69.6" x="-119.2" name="S1"/>
            <waypoint y="209.5" x="274.4" name="S2"/>
            <waypoint y="45.1" x="177.4" name="AF" alt="215.0"/>
            <waypoint y="57.0" x="28.8" name="TD" alt="185.0"/>
            <waypoint y="-13.8" x="168.8" name="_BASELEG"/>
            <waypoint y="162.3" x="-114.5" name="CLIMB"/>
          </waypoints>
          <exceptions/>
          <blocks>
            <block name="Wait GPS" no="0">
              <set var="autopilot.kill_throttle" value="1" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Geo init" no="1">
              <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
              <call_once fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Holding point" no="2">
              <set var="autopilot.kill_throttle" value="1" no="0"/>
              <attitude vmode="throttle" throttle="0" roll="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff (wp CLIMB)" name="Takeoff" key="t" group="home" no="3">
              <exception deroute="Standby" cond="GetPosAlt() > GetAltRef()+25"/>
              <set var="autopilot.kill_throttle" value="0" no="0"/>
              <set var="autopilot.flight_time" value="0" no="1"/>
              <go wp="CLIMB" vmode="throttle" throttle="1.0" pitch="15" from="HOME" no="2"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" key="Ctrl+a" group="home" no="4">
              <circle wp="STDBY" radius="nav_radius" no="0"/>
            </block>
            <block strip_icon="eight.png" strip_button="Figure 8 (wp 1-2)" name="Figure 8 around wp 1" key="F8" group="base_pattern" no="5">
              <eight turn_around="2" radius="nav_radius" center="1" no="1"/>
            </block>
            <block strip_icon="oval.png" strip_button="Oval (wp 1-2)" name="Oval 1-2" group="base_pattern" no="6">
              <oval radius="nav_radius" p2="2" p1="1" no="1"/>
            </block>
            <block strip_icon="mob.png" strip_button="Circle around here" name="MOB" group="base_pattern" no="7">
              <call_once fun="NavSetWaypointHere(WP_MOB)" no="0"/>
              <set var="nav_radius" value="DEFAULT_CIRCLE_RADIUS" no="1"/>
              <circle wp="MOB" radius="nav_radius" no="2"/>
            </block>
            <block strip_icon="survey.png" strip_button="Survey (wp S1-S2)" name="Survey S1-S2" group="extra_pattern" no="8">
              <survey_rectangle wp2="S2" wp1="S1" grid="150" no="1"/>
            </block>
            <block strip_icon="path.png" strip_button="Path (1,2,S1,S2,STDBY)" name="Path 1,2,S1,S2,STDBY" group="extra_pattern" no="9">
              <go from="1" hmode="route" wp="2" wpts="1,2 S1" no="0"/>
              <go from="2" hmode="route" wp="S1" wpts="1,2 S1" no="1"/>
              <go from="S1" hmode="route" wp="S2" wpts="S1, S2 STDBY" throttle="0.4" pitch="auto" approaching_time="1" no="2"/>
              <go from="S2" hmode="route" wp="STDBY" wpts="S1, S2 STDBY" throttle="0.4" pitch="auto" approaching_time="1" no="3"/>
              <deroute block="Standby" no="4"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land right (wp AF-TD)" name="Land Right AF-TD" group="land" no="10">
              <set var="nav_radius" value="DEFAULT_CIRCLE_RADIUS" no="0"/>
              <deroute block="land" no="1"/>
            </block>
            <block strip_icon="land-left.png" strip_button="Land left (wp AF-TD)" name="Land Left AF-TD" group="land" no="11">
              <set var="nav_radius" value="-DEFAULT_CIRCLE_RADIUS" no="0"/>
              <deroute block="land" no="1"/>
            </block>
            <block name="land" no="12">
              <call_once fun="nav_compute_baseleg(WP_AF, WP_TD, WP__BASELEG, nav_radius)" no="0"/>
              <circle wp="_BASELEG" until="NavCircleCount() > 0.5" radius="nav_radius" no="1"/>
              <circle wp="_BASELEG" until="NavQdrCloseTo(DegOfRad(baseleg_out_qdr)-(nav_radius/fabs(nav_radius))*10) @AND (fabs(GetPosAlt() - WaypointAlt(WP__BASELEG)) @LT 10)" radius="nav_radius" no="2"/>
            </block>
            <block name="final" no="13">
              <exception deroute="flare" cond="GetAltRef() + 10 > GetPosAlt()"/>
              <go wp="TD" vmode="glide" hmode="route" from="AF" no="0"/>
            </block>
            <block name="flare" no="14">
              <go wp="TD" vmode="throttle" throttle="0.0" hmode="route" from="AF" approaching_time="0" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0.0" roll="0.0" no="1"/>
            </block>
            <block name="HOME" no="15">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="15" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="14" block_name="flare" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0.0" roll="0.0" no="1"/>
          </stage>
          <stage block="14" block_name="flare" stage="0">
            <go wp="TD" vmode="throttle" throttle="0.0" hmode="route" from="AF" approaching_time="0" no="0"/>
          </stage>
          <stage block="13" block_name="final" stage="0">
            <go wp="TD" vmode="glide" hmode="route" from="AF" no="0"/>
          </stage>
          <stage block="12" block_name="land" stage="2">
            <circle wp="_BASELEG" until="NavQdrCloseTo(DegOfRad(baseleg_out_qdr)-(nav_radius/fabs(nav_radius))*10) @AND (fabs(GetPosAlt() - WaypointAlt(WP__BASELEG)) @LT 10)" radius="nav_radius" no="2"/>
          </stage>
          <stage block="12" block_name="land" stage="1">
            <circle wp="_BASELEG" until="NavCircleCount() > 0.5" radius="nav_radius" no="1"/>
          </stage>
          <stage block="12" block_name="land" stage="0">
            <call_once fun="nav_compute_baseleg(WP_AF, WP_TD, WP__BASELEG, nav_radius)" no="0"/>
          </stage>
          <stage block="11" block_name="Land Left AF-TD" stage="1">
            <deroute block="land" no="1"/>
          </stage>
          <stage block="11" block_name="Land Left AF-TD" stage="0">
            <set var="nav_radius" value="-DEFAULT_CIRCLE_RADIUS" no="0"/>
          </stage>
          <stage block="10" block_name="Land Right AF-TD" stage="1">
            <deroute block="land" no="1"/>
          </stage>
          <stage block="10" block_name="Land Right AF-TD" stage="0">
            <set var="nav_radius" value="DEFAULT_CIRCLE_RADIUS" no="0"/>
          </stage>
          <stage block="9" block_name="Path 1,2,S1,S2,STDBY" stage="4">
            <deroute block="Standby" no="4"/>
          </stage>
          <stage block="9" block_name="Path 1,2,S1,S2,STDBY" stage="3">
            <go from="S2" hmode="route" wp="STDBY" wpts="S1, S2 STDBY" throttle="0.4" pitch="auto" approaching_time="1" no="3"/>
          </stage>
          <stage block="9" block_name="Path 1,2,S1,S2,STDBY" stage="2">
            <go from="S1" hmode="route" wp="S2" wpts="S1, S2 STDBY" throttle="0.4" pitch="auto" approaching_time="1" no="2"/>
          </stage>
          <stage block="9" block_name="Path 1,2,S1,S2,STDBY" stage="1">
            <go from="2" hmode="route" wp="S1" wpts="1,2 S1" no="1"/>
          </stage>
          <stage block="9" block_name="Path 1,2,S1,S2,STDBY" stage="0">
            <go from="1" hmode="route" wp="2" wpts="1,2 S1" no="0"/>
          </stage>
          <stage block="8" block_name="Survey S1-S2" stage="1">
            <survey_rectangle wp2="S2" wp1="S1" grid="150" no="1"/>
          </stage>
          <stage block="7" block_name="MOB" stage="2">
            <circle wp="MOB" radius="nav_radius" no="2"/>
          </stage>
          <stage block="7" block_name="MOB" stage="1">
            <set var="nav_radius" value="DEFAULT_CIRCLE_RADIUS" no="1"/>
          </stage>
          <stage block="7" block_name="MOB" stage="0">
            <call_once fun="NavSetWaypointHere(WP_MOB)" no="0"/>
          </stage>
          <stage block="6" block_name="Oval 1-2" stage="1">
            <oval radius="nav_radius" p2="2" p1="1" no="1"/>
          </stage>
          <stage block="5" block_name="Figure 8 around wp 1" stage="1">
            <eight turn_around="2" radius="nav_radius" center="1" no="1"/>
          </stage>
          <stage block="4" block_name="Standby" stage="0">
            <circle wp="STDBY" radius="nav_radius" no="0"/>
          </stage>
          <stage block="3" block_name="Takeoff" stage="2">
            <go wp="CLIMB" vmode="throttle" throttle="1.0" pitch="15" from="HOME" no="2"/>
          </stage>
          <stage block="3" block_name="Takeoff" stage="1">
            <set var="autopilot.flight_time" value="0" no="1"/>
          </stage>
          <stage block="3" block_name="Takeoff" stage="0">
            <set var="autopilot.kill_throttle" value="0" no="0"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="1">
            <attitude vmode="throttle" throttle="0" roll="0" no="1"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="0">
            <set var="autopilot.kill_throttle" value="1" no="0"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="2">
            <call_once fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="0">
            <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <set var="autopilot.kill_throttle" value="1" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="nav">
              <dl_setting VAR="nav_radius" STEP="5" MIN="-500" MAX="500"/>
              <dl_setting VAR="nav_course" STEP="5" MIN="0" MAX="359"/>
              <dl_setting VAR="nav_mode" STEP="1" MIN="1" MAX="2"/>
              <dl_setting VAR="nav_climb" STEP="0.5" MIN="-5" MAX="5"/>
              <dl_setting VAR="fp_pitch" STEP="1" MIN="-15" MAX="15"/>
              <dl_setting VAR="fp_throttle" STEP="0.01" MIN="0.0" MAX="1.0"/>
              <dl_setting VAR="fp_climb" STEP="0.1" MIN="-5.0" MAX="5.0"/>
              <dl_setting VAR="nav_shift" STEP="5" SHORTNAME="inc. shift" MODULE="firmwares/fixedwing/nav" MIN="-50" MAX="50" HANDLER="IncreaseShift"/>
              <dl_setting VAR="nav_ground_speed_setpoint" STEP="0.5" SHORTNAME="ground speed" MIN="5" MAX="50"/>
              <dl_setting VAR="nav_ground_speed_pgain" STEP="0.01" SHORTNAME="ground speed pgain" MIN="0" MAX="0.2"/>
              <dl_setting VAR="nav_survey_shift" STEP="5" MIN="50" MAX="500"/>
              <dl_setting VAR="nav_survey_sweep" TYPE="float" STEP="1" SHORTNAME="Distance" MODULE="subsystems/navigation/nav_survey_rectangle" MIN="10" MAX="500"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="control vert">
              <dl_settings NAME="alt">
                <dl_setting VAR="v_ctl_altitude_pgain" STEP="0.01" SHORTNAME="alt_pgain" PARAM="V_CTL_ALTITUDE_PGAIN" MIN="0" MAX="0.2"/>
              </dl_settings>
              <dl_settings NAME="climb">
                <dl_setting VAR="v_ctl_speed_mode" VALUES="THROTTLE|AIRSPEED|GROUNDSPEED" STEP="1" SHORTNAME="speed mode" MIN="0" MAX="2">
                  <strip_button VALUE="0" NAME="TH" GROUP="speed_mode"/>
                  <strip_button VALUE="1" NAME="AS" GROUP="speed_mode"/>
                  <strip_button VALUE="2" NAME="GS" GROUP="speed_mode"/>
                </dl_setting>
                <dl_setting VAR="v_ctl_auto_throttle_min_cruise_throttle" STEP="0.05" SHORTNAME="min cruise thr" PARAM="V_CTL_AUTO_THROTTLE_MIN_CRUISE_THROTTLE" MODULE="guidance/guidance_v" MIN="0.0" MAX="1"/>
                <dl_setting VAR="v_ctl_auto_throttle_max_cruise_throttle" STEP="0.05" SHORTNAME="max cruise thr" PARAM="V_CTL_AUTO_THROTTLE_MAX_CRUISE_THROTTLE" MODULE="guidance/guidance_v" MIN="0.0" MAX="1"/>
                <dl_setting VAR="v_ctl_auto_throttle_cruise_throttle" STEP="0.05" SHORTNAME="cruise throttle" PARAM="V_CTL_AUTO_THROTTLE_NOMINAL_CRUISE_THROTTLE" MODULE="guidance/guidance_v" MIN="0.0" MAX="1" HANDLER="SetCruiseThrottle"/>
                <dl_setting VAR="v_ctl_pitch_trim" UNIT="rad" STEP="0.1" SHORTNAME="pitch trim" PARAM="V_CTL_PITCH_TRIM" MIN="-15" MAX="15" ALT_UNIT="deg"/>
                <dl_setting VAR="v_ctl_auto_pitch_pgain" STEP="0.001" SHORTNAME="pitch_p" PARAM="V_CTL_AUTO_PITCH_PGAIN" MIN="0" MAX="0.1"/>
                <dl_setting VAR="v_ctl_auto_pitch_igain" STEP="0.001" SHORTNAME="pitch_i" PARAM="V_CTL_AUTO_PITCH_IGAIN" MIN="0" MAX="0.1"/>
                <dl_setting VAR="v_ctl_auto_pitch_dgain" STEP="0.001" SHORTNAME="pitch_d" PARAM="V_CTL_AUTO_PITCH_DGAIN" MODULE="guidance/guidance_v_n" MIN="0" MAX="0.1"/>
                <dl_setting VAR="v_ctl_auto_throttle_pgain" STEP="0.001" SHORTNAME="throttle_p" PARAM="V_CTL_AUTO_THROTTLE_PGAIN" MIN="0" MAX="0.1"/>
                <dl_setting VAR="v_ctl_auto_throttle_igain" STEP="0.001" SHORTNAME="throttle_i" PARAM="V_CTL_AUTO_THROTTLE_IGAIN" MIN="0" MAX="0.1"/>
                <dl_setting VAR="v_ctl_auto_throttle_dgain" STEP="0.001" SHORTNAME="throttle_d" PARAM="V_CTL_AUTO_THROTTLE_DGAIN" MIN="0" MAX="0.1"/>
                <dl_setting VAR="v_ctl_auto_throttle_climb_throttle_increment" STEP="0.01" SHORTNAME="throttle_incr" PARAM="V_CTL_AUTO_THROTTLE_CLIMB_THROTTLE_INCREMENT" MIN="0" MAX="1"/>
                <dl_setting VAR="v_ctl_auto_throttle_pitch_of_vz_pgain" STEP="0.01" SHORTNAME="pitch_of_vz" PARAM="V_CTL_AUTO_THROTTLE_PITCH_OF_VZ_PGAIN" MIN="0" MAX="1"/>
              </dl_settings>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="control horiz">
              <dl_settings NAME="trim">
                <dl_setting VAR="ap_state->command_roll_trim" STEP="1" SHORTNAME="roll_trim" PARAM="COMMAND_ROLL_TRIM" MODULE="inter_mcu" MIN="-960" MAX="960"/>
                <dl_setting VAR="ap_state->command_pitch_trim" STEP="1" SHORTNAME="pitch_trim" PARAM="COMMAND_PITCH_TRIM" MIN="-960" MAX="960"/>
                <dl_setting VAR="ap_state->command_yaw_trim" STEP="1" SHORTNAME="yaw_trim" PARAM="COMMAND_YAW_TRIM" MIN="-9000" MAX="9000"/>
              </dl_settings>
              <dl_settings NAME="attitude">
                <dl_setting VAR="h_ctl_roll_attitude_gain" STEP="250" SHORTNAME="roll_pgain" PARAM="H_CTL_ROLL_ATTITUDE_GAIN" MODULE="stabilization/stabilization_attitude" MIN="0" MAX="15000"/>
                <dl_setting VAR="h_ctl_roll_rate_gain" STEP="250" SHORTNAME="roll_dgain" PARAM="H_CTL_ROLL_RATE_GAIN" MODULE="stabilization/stabilization_attitude" MIN="0" MAX="15000"/>
                <dl_setting VAR="h_ctl_roll_igain" STEP="10" SHORTNAME="roll_igain" PARAM="H_CTL_ROLL_IGAIN" MODULE="stabilization/stabilization_adaptive" MIN="0" MAX="5000" HANDLER="SetRollIGain"/>
                <dl_setting VAR="h_ctl_pitch_pgain" STEP="250" SHORTNAME="pitch_pgain" PARAM="H_CTL_PITCH_PGAIN" MODULE="stabilization/stabilization_attitude" MIN="0" MAX="25000"/>
                <dl_setting VAR="h_ctl_pitch_dgain" STEP="250" SHORTNAME="pitch_dgain" PARAM="H_CTL_PITCH_DGAIN" MODULE="stabilization/stabilization_attitude" MIN="0" MAX="50000"/>
                <dl_setting VAR="h_ctl_pitch_igain" STEP="10" SHORTNAME="pitch_igain" PARAM="H_CTL_PITCH_IGAIN" MODULE="stabilization/stabilization_adaptive" MIN="0" MAX="5000" HANDLER="SetPitchIGain"/>
                <dl_setting VAR="h_ctl_pitch_of_roll" STEP="0.001" SHORTNAME="pitch_of_roll" PARAM="H_CTL_PITCH_OF_ROLL" MODULE="stabilization/stabilization_attitude" MIN="0." MAX=".3"/>
                <dl_setting VAR="h_ctl_aileron_of_throttle" STEP="100" SHORTNAME="aileron_of_throttle" MODULE="stabilization/stabilization_adaptive" MIN="0" MAX="5000"/>
                <dl_setting VAR="h_ctl_roll_max_setpoint" UNIT="rad" STEP="1." SHORTNAME="max_roll" PARAM="H_CTL_ROLL_MAX_SETPOINT" MIN="0" MAX="60" ALT_UNIT="deg"/>
                <dl_setting VAR="use_airspeed_ratio" VALUES="FALSE|TRUE" STEP="1" MIN="0" MAX="1"/>
              </dl_settings>
              <dl_settings NAME="feedforward">
                <dl_setting VAR="h_ctl_roll_Kffa" STEP="10" SHORTNAME="roll_Kffa" PARAM="H_CTL_ROLL_KFFA" MIN="0" MAX="5000"/>
                <dl_setting VAR="h_ctl_roll_Kffd" STEP="10" SHORTNAME="roll_Kffd" PARAM="H_CTL_ROLL_KFFD" MIN="0" MAX="5000"/>
                <dl_setting VAR="h_ctl_pitch_Kffa" STEP="10" SHORTNAME="pitch_Kffa" PARAM="H_CTL_PITCH_KFFA" MIN="0" MAX="5000"/>
                <dl_setting VAR="h_ctl_pitch_Kffd" STEP="10" SHORTNAME="pitch_Kffd" PARAM="H_CTL_PITCH_KFFD" MIN="0" MAX="5000"/>
              </dl_settings>
              <dl_settings NAME="course">
                <dl_setting VAR="h_ctl_course_pgain" STEP="0.05" SHORTNAME="course pgain" PARAM="H_CTL_COURSE_PGAIN" MIN="0.1" MAX="3"/>
                <dl_setting VAR="h_ctl_course_dgain" STEP="0.1" SHORTNAME="course dgain" MIN="0" MAX="2"/>
                <dl_setting VAR="h_ctl_course_pre_bank_correction" STEP="0.05" SHORTNAME="pre bank cor" MIN="0.1" MAX="2"/>
                <dl_setting VAR="h_ctl_roll_slew" STEP="0.01" SHORTNAME="roll slew" MIN="0.02" MAX="1"/>
              </dl_settings>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="air_data">
              <dl_setting VAR="air_data.qnh" STEP="1" SHORTNAME="QNH" MODULE="air_data/air_data" MIN="800" MAX="1200"/>
              <dl_setting VAR="air_data.tas_factor" TYPE="float" STEP="0.01" SHORTNAME="TASfactor" PERSISTENT="true" PARAM="AIR_DATA_TAS_FACTOR" MODULE="air_data/air_data" MIN="0.8" MAX="1.3"/>
              <dl_setting VAR="air_data.calc_qnh_once" STEP="1" SHORTNAME="calcQNH" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_airspeed" TYPE="uint8" STEP="1" SHORTNAME="calcAirspeed" PERSISTENT="true" PARAM="AIR_DATA_CALC_AIRSPEED" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_tas_factor" TYPE="uint8" STEP="1" SHORTNAME="calcTASfactor" PERSISTENT="true" PARAM="AIR_DATA_CALC_TAS_FACTOR" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_amsl_baro" TYPE="uint8" STEP="1" SHORTNAME="calcAMSL" PERSISTENT="true" PARAM="AIR_DATA_CALC_AMSL_BARO" MODULE="air_data/air_data" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="MS45XX">
              <dl_setting VAR="ms45xx.sync_send" VALUES="FALSE|TRUE" TYPE="bool" STEP="1" SHORTNAME="sync_send" PERSISTENT="true" PARAM="MS45XX_SYNC_SEND" MODULE="modules/sensors/airspeed_ms45xx_i2c" MIN="0" MAX="1"/>
              <dl_setting VAR="ms45xx.autoset_offset" VALUES="FALSE|TRUE" TYPE="bool" STEP="1" SHORTNAME="autoset offset" PERSISTENT="true" PARAM="MS45XX_SYNC_SEND" MODULE="modules/sensors/airspeed_ms45xx_i2c" MIN="0" MAX="1"/>
              <dl_setting VAR="ms45xx.pressure_scale" TYPE="float" STEP="0.01" SHORTNAME="PressScale" PERSISTENT="true" PARAM="MS45XX_PRESSURE_SCALE" MODULE="modules/sensors/airspeed_ms45xx_i2c" MIN="0.9" MAX="1.2"/>
              <dl_setting VAR="ms45xx.pressure_type" VALUES="FALSE|TRUE" TYPE="bool" STEP="1" SHORTNAME="Type G" PERSISTENT="true" PARAM="MS45XX_PRESSURE_TYPE" MODULE="modules/sensors/airspeed_ms45xx_i2c" MIN="0" MAX="1"/>
              <dl_setting VAR="ms45xx.pressure_offset" TYPE="float" STEP="0.1" SHORTNAME="PressOffset" PERSISTENT="true" PARAM="MS45XX_PRESSURE_OFFSET" MODULE="modules/sensors/airspeed_ms45xx_i2c" MIN="8300.0" MAX="8900.0"/>
              <dl_setting VAR="ms45xx.airspeed_scale" TYPE="float" STEP="0.01" SHORTNAME="AirScale" PERSISTENT="true" PARAM="MS45XX_AIRSPEED_SCALE" MODULE="modules/sensors/airspeed_ms45xx_i2c" MIN="1.0" MAX="2.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="ublox">
            <dl_settings NAME="ucenter">
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_h" STEP="1" SHORTNAME="sw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_l" STEP="1" SHORTNAME="sw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_h" STEP="1" SHORTNAME="hw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_l" STEP="1" SHORTNAME="hw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_init" STEP="100" SHORTNAME="inibaud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_run" STEP="100" SHORTNAME="baud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="imu_health" STEP="1" SHORTNAME="health" MODULE="subsystems/ahrs" MIN="0" MAX="100"/>
              <dl_setting VAR="renorm_sqrt_count" STEP="1" SHORTNAME="err_norm" MODULE="subsystems/ahrs" MIN="0" MAX="100"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="Disco">
        <firmware NAME="fixedwing">
          <configure VALUE="120" NAME="PERIODIC_FREQUENCY"/>
          <configure VALUE="TRUE" NAME="USE_MAGNETOMETER"/>
          <target NAME="ap" BOARD="disco">
            <module TYPE="sbus" NAME="radio_control"/>
          </target>
          <target NAME="sim" BOARD="pc">
            <module TYPE="ppm" NAME="radio_control"/>
          </target>
          <module TYPE="transparent_udp" NAME="telemetry"/>
          <module TYPE="disco" NAME="imu"/>
          <module TYPE="float_dcm" NAME="ahrs"/>
          <module TYPE="ublox" NAME="gps"/>
          <module TYPE="ubx_ucenter" NAME="gps"/>
          <module TYPE="alt_float" NAME="ins"/>
          <module TYPE="ms45xx_i2c" NAME="airspeed">
            <define VALUE="i2c1" NAME="MS45XX_I2C_DEV"/>
            <define VALUE="0.05" NAME="MS45XX_PRESSURE_RANVE"/>
          </module>
          <module NAME="air_data"/>
          <module TYPE="disco" NAME="actuators"/>
          <module TYPE="new" NAME="control"/>
          <module NAME="navigation"/>
          <module NAME="sonar_bebop">
            <define NAME="USE_SONAR"/>
            <define NAME="SENSOR_SYNC_SEND_SONAR"/>
          </module>
        </firmware>
        <servos>
          <servo NO="0" NEUTRAL="1000" NAME="MOTOR" MIN="1000" MAX="12500"/>
          <servo NO="6" NEUTRAL="1500" NAME="AILEVON_RIGHT" MIN="1900" MAX="1100"/>
          <servo NO="1" NEUTRAL="1500" NAME="AILEVON_LEFT" MIN="1100" MAX="1900"/>
        </servos>
        <commands>
          <axis NAME="THROTTLE" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
        </commands>
        <rc_commands>
          <set VALUE="@THROTTLE" COMMAND="THROTTLE"/>
          <set VALUE="@ROLL" COMMAND="ROLL"/>
          <set VALUE="@PITCH" COMMAND="PITCH"/>
        </rc_commands>
        <section NAME="MIXER">
          <define VALUE="0.75" NAME="AILEVON_AILERON_RATE"/>
          <define VALUE="0.75" NAME="AILEVON_ELEVATOR_RATE"/>
        </section>
        <command_laws>
          <let VAR="aileron" VALUE="@ROLL  * AILEVON_AILERON_RATE"/>
          <let VAR="elevator" VALUE="@PITCH * AILEVON_ELEVATOR_RATE"/>
          <set VALUE="@THROTTLE" SERVO="MOTOR"/>
          <set VALUE="$elevator - $aileron" SERVO="AILEVON_LEFT"/>
          <set VALUE="$elevator + $aileron" SERVO="AILEVON_RIGHT"/>
        </command_laws>
        <section PREFIX="AUTO1_" NAME="AUTO1">
          <define VALUE="0.85" NAME="MAX_ROLL"/>
          <define VALUE="0.6" NAME="MAX_PITCH"/>
        </section>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="-141" NAME="ACCEL_X_NEUTRAL"/>
          <define VALUE="13" NAME="ACCEL_Y_NEUTRAL"/>
          <define VALUE="-12" NAME="ACCEL_Z_NEUTRAL"/>
          <define VALUE="2.43116617606" NAME="ACCEL_X_SENS" INTEGER="16"/>
          <define VALUE="2.46264528353" NAME="ACCEL_Y_SENS" INTEGER="16"/>
          <define VALUE="2.41899590699" NAME="ACCEL_Z_SENS" INTEGER="16"/>
          <define VALUE="-164" NAME="MAG_X_NEUTRAL"/>
          <define VALUE="-244" NAME="MAG_Y_NEUTRAL"/>
          <define VALUE="-590" NAME="MAG_Z_NEUTRAL"/>
          <define VALUE="7.76268606256" NAME="MAG_X_SENS" INTEGER="16"/>
          <define VALUE="7.53777959342" NAME="MAG_Y_SENS" INTEGER="16"/>
          <define VALUE="8.13033580043" NAME="MAG_Z_SENS" INTEGER="16"/>
          <define VALUE="0" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="0" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="INS_" NAME="INS">
          <define VALUE="0" UNIT="deg" NAME="ROLL_NEUTRAL_DEFAULT"/>
          <define VALUE="0" UNIT="deg" NAME="PITCH_NEUTRAL_DEFAULT"/>
          <define VALUE="0.5141" NAME="H_X"/>
          <define VALUE="0.0002" NAME="H_Y"/>
          <define VALUE="0.8576" NAME="H_Z"/>
        </section>
        <section NAME="BAT">
          <define VALUE="9.3" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="(_adc-632)*4.14" NAME="MilliAmpereOfAdc(_adc)"/>
        </section>
        <section NAME="MISC">
          <define VALUE="12." UNIT="m/s" NAME="NOMINAL_AIRSPEED"/>
          <define VALUE="5." UNIT="s" NAME="CARROT"/>
          <define VALUE="(1.5*MAX_DIST_FROM_HOME)" NAME="KILL_MODE_DISTANCE"/>
          <define VALUE="80." NAME="DEFAULT_CIRCLE_RADIUS"/>
          <define VALUE="TRUE" NAME="UNLOCKED_HOME_MODE"/>
          <define VALUE="8" UNIT="deg" NAME="APP_ANGLE"/>
        </section>
        <section PREFIX="V_CTL_" NAME="VERTICAL CONTROL">
          <define VALUE="0.12" NAME="ALTITUDE_PGAIN"/>
          <define VALUE="4." NAME="ALTITUDE_MAX_CLIMB"/>
          <define VALUE="2*V_CTL_ALTITUDE_MAX_CLIMB" NAME="AUTO_CLIMB_LIMIT"/>
          <define VALUE="0.4" NAME="AUTO_THROTTLE_NOMINAL_CRUISE_THROTTLE"/>
          <define VALUE="0.25" NAME="AUTO_THROTTLE_MIN_CRUISE_THROTTLE"/>
          <define VALUE="0.85" NAME="AUTO_THROTTLE_MAX_CRUISE_THROTTLE"/>
          <define VALUE="0.088" UNIT="%/(m/s)" NAME="AUTO_THROTTLE_CLIMB_THROTTLE_INCREMENT"/>
          <define VALUE="0.004" NAME="AUTO_THROTTLE_PGAIN"/>
          <define VALUE="0.0" NAME="AUTO_THROTTLE_DGAIN"/>
          <define VALUE="0." NAME="AUTO_THROTTLE_IGAIN"/>
          <define VALUE="0.077" NAME="AUTO_THROTTLE_PITCH_OF_VZ_PGAIN"/>
          <define VALUE="0.027" NAME="AUTO_PITCH_PGAIN"/>
          <define VALUE="0.01" NAME="AUTO_PITCH_DGAIN"/>
          <define VALUE="0.0" NAME="AUTO_PITCH_IGAIN"/>
          <define VALUE="20" UNIT="deg" NAME="AUTO_PITCH_MAX_PITCH"/>
          <define VALUE="-20" UNIT="deg" NAME="AUTO_PITCH_MIN_PITCH"/>
          <define VALUE="16." NAME="AUTO_AIRSPEED_SETPOINT"/>
          <define VALUE="0.1" NAME="AUTO_AIRSPEED_THROTTLE_PGAIN"/>
          <define VALUE="0.12" NAME="AUTO_AIRSPEED_THROTTLE_DGAIN"/>
          <define VALUE="0.0" NAME="AUTO_AIRSPEED_THROTTLE_IGAIN"/>
          <define VALUE="0.06" NAME="AUTO_AIRSPEED_PITCH_PGAIN"/>
          <define VALUE="0.0" NAME="AUTO_AIRSPEED_PITCH_DGAIN"/>
          <define VALUE="0.042" NAME="AUTO_AIRSPEED_PITCH_IGAIN"/>
          <define VALUE="30" NAME="AIRSPEED_MAX"/>
          <define VALUE="10" NAME="AIRSPEED_MIN"/>
          <define VALUE="15" NAME="AUTO_GROUNDSPEED_SETPOINT"/>
          <define VALUE="1." NAME="AUTO_GROUNDSPEED_PGAIN"/>
          <define VALUE="0." NAME="AUTO_GROUNDSPEED_IGAIN"/>
          <define VALUE="0." UNIT="deg" NAME="PITCH_LOITER_TRIM"/>
          <define VALUE="0." UNIT="deg" NAME="PITCH_DASH_TRIM"/>
          <define VALUE="0.1" NAME="THROTTLE_SLEW"/>
        </section>
        <section PREFIX="H_CTL_" NAME="HORIZONTAL CONTROL">
          <define VALUE="0.743" NAME="COURSE_PGAIN"/>
          <define VALUE="0.5" NAME="COURSE_TAU"/>
          <define VALUE="30." UNIT="deg" NAME="ROLL_MAX_SETPOINT"/>
          <define VALUE="30." UNIT="deg" NAME="PITCH_MAX_SETPOINT"/>
          <define VALUE="-30." UNIT="deg" NAME="PITCH_MIN_SETPOINT"/>
          <define VALUE="11000." NAME="ROLL_ATTITUDE_GAIN"/>
          <define VALUE="1000." NAME="ROLL_RATE_GAIN"/>
          <define VALUE="100." NAME="ROLL_IGAIN"/>
          <define VALUE="0" NAME="ROLL_KFFA"/>
          <define VALUE="0" NAME="ROLL_KFFD"/>
          <define VALUE="17250" NAME="PITCH_PGAIN"/>
          <define VALUE="500." NAME="PITCH_DGAIN"/>
          <define VALUE="400" NAME="PITCH_IGAIN"/>
          <define VALUE="0." NAME="PITCH_KFFA"/>
          <define VALUE="0." NAME="PITCH_KFFD"/>
          <define VALUE="1." UNIT="deg" NAME="PITCH_OF_ROLL"/>
          <define VALUE="0.0" NAME="AILERON_OF_THROTTLE"/>
          <define VALUE="1400" NAME="ELEVATOR_OF_ROLL"/>
        </section>
        <section NAME="NAV">
          <define VALUE="0" NAME="NAV_GLIDE_PITCH_TRIM"/>
        </section>
        <section PREFIX="FAILSAFE_" NAME="FAILSAFE">
          <define VALUE="2" UNIT="s" NAME="DELAY_WITHOUT_GPS"/>
          <define VALUE="0.3" UNIT="%" NAME="DEFAULT_THROTTLE"/>
          <define VALUE="0.3" UNIT="rad" NAME="DEFAULT_ROLL"/>
          <define VALUE="0.5" UNIT="rad" NAME="DEFAULT_PITCH"/>
          <define VALUE="100" UNIT="m" NAME="HOME_RADIUS"/>
        </section>
        <section PREFIX="AGR_" NAME="AGGRESSIVE">
          <define VALUE="50" NAME="BLEND_START"/>
          <define VALUE="15" NAME="BLEND_END"/>
          <define VALUE="0.9" NAME="CLIMB_THROTTLE"/>
          <define VALUE="0.35" NAME="CLIMB_PITCH"/>
          <define VALUE="0.05" NAME="DESCENT_THROTTLE"/>
          <define VALUE="-0.35" NAME="DESCENT_PITCH"/>
          <define VALUE="0.8" NAME="CLIMB_NAV_RATIO"/>
          <define VALUE="1.0" NAME="DESCENT_NAV_RATIO"/>
        </section>
        <section NAME="SIMU">
          <define VALUE="20" NAME="ROLL_RESPONSE_FACTOR"/>
          <define VALUE="&quot;Malolo1&quot;" NAME="JSBSIM_MODEL"/>
          <define VALUE="15.0" NAME="JSBSIM_LAUNCHSPEED"/>
          <define VALUE="RadOfDeg(0.)" NAME="JSBSIM_IR_ROLL_NEUTRAL"/>
          <define VALUE="RadOfDeg(0.)" NAME="JSBSIM_IR_PITCH_NEUTRAL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Ap">
          <mode NAME="default">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1" NAME="AIRSPEED"/>
            <message PERIOD="5" NAME="ALIVE"/>
            <message PERIOD="0.25" NAME="GPS"/>
            <message PERIOD="1." NAME="NAVIGATION"/>
            <message PERIOD="0.5" NAME="ATTITUDE"/>
            <message PERIOD="0.5" NAME="ESTIMATOR"/>
            <message PERIOD="1.1" NAME="ENERGY"/>
            <message PERIOD="0.5" NAME="WP_MOVED"/>
            <message PERIOD="1.05" NAME="CIRCLE"/>
            <message PERIOD="1.05" NAME="DESIRED"/>
            <message PERIOD="1.2" NAME="SEGMENT"/>
            <message PERIOD="2.1" NAME="CALIBRATION"/>
            <message PERIOD="9." NAME="NAVIGATION_REF"/>
            <message PERIOD="5." NAME="PPRZ_MODE"/>
            <message PERIOD="5." NAME="SETTINGS"/>
            <message PERIOD="5." NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="1.5" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="IR_SENSORS"/>
            <message PERIOD="1.1" NAME="IMU_GYRO"/>
            <message PERIOD="2.1" NAME="SURVEY"/>
            <message PERIOD="2.0" NAME="GPS_SOL"/>
            <message PERIOD="0.5" NAME="CAM"/>
            <message PERIOD="1.0" NAME="CAM_POINT"/>
            <message PERIOD="5" NAME="COMMANDS"/>
            <message PERIOD="2" NAME="FBW_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
          </mode>
          <mode NAME="minimal">
            <message PERIOD="5" NAME="ALIVE"/>
            <message PERIOD="4" NAME="ATTITUDE"/>
            <message PERIOD="1.05" NAME="GPS"/>
            <message PERIOD="1.3" NAME="ESTIMATOR"/>
            <message PERIOD="1.4" NAME="WP_MOVED"/>
            <message PERIOD="3.05" NAME="CIRCLE"/>
            <message PERIOD="4.05" NAME="DESIRED"/>
            <message PERIOD="1.1" NAME="ENERGY"/>
            <message PERIOD="3.2" NAME="SEGMENT"/>
            <message PERIOD="5.1" NAME="CALIBRATION"/>
            <message PERIOD="9." NAME="NAVIGATION_REF"/>
            <message PERIOD="3." NAME="NAVIGATION"/>
            <message PERIOD="5." NAME="PPRZ_MODE"/>
            <message PERIOD="5." NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="1.5" NAME="DL_VALUE"/>
            <message PERIOD="5.2" NAME="IR_SENSORS"/>
            <message PERIOD="10.1" NAME="IMU_GYRO"/>
            <message PERIOD="2.1" NAME="SURVEY"/>
            <message PERIOD="5.0" NAME="GPS_SOL"/>
          </mode>
          <mode NAME="extremal">
            <message PERIOD="5" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="GPS"/>
            <message PERIOD="5.3" NAME="ESTIMATOR"/>
            <message PERIOD="10.1" NAME="ENERGY"/>
            <message PERIOD="10.2" NAME="DESIRED"/>
            <message PERIOD="5.4" NAME="NAVIGATION"/>
            <message PERIOD="5.5" NAME="PPRZ_MODE"/>
            <message PERIOD="7." NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="5.7" NAME="DATALINK_REPORT"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.5" NAME="BARO_RAW"/>
            <message PERIOD="0.5" NAME="IR_SENSORS"/>
            <message PERIOD="0.1" NAME="IMU_GYRO_RAW"/>
          </mode>
        </process>
        <process NAME="Fbw">
          <mode NAME="default">
            <message PERIOD="5" NAME="COMMANDS"/>
            <message PERIOD="2" NAME="FBW_STATUS"/>
            <message PERIOD="5" NAME="ACTUATORS"/>
          </mode>
          <mode NAME="debug">
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="COMMANDS"/>
            <message PERIOD="1" NAME="FBW_STATUS"/>
            <message PERIOD="5" NAME="ACTUATORS"/>
          </mode>
        </process>
      </telemetry>
      <settings>
        <dl_settings>
          <dl_settings NAME="flight params">
            <dl_setting VAR="flight_altitude" STEP="10" SHORTNAME="altitude" MIN="0" MAX="1000"/>
            <dl_setting VAR="nav_course" STEP="1" MIN="0" MAX="360"/>
            <dl_setting VAR="nav_shift" STEP="5" SHORTNAME="inc. shift" MODULE="firmwares/fixedwing/nav" MIN="-10" MAX="10" HANDLER="IncreaseShift"/>
            <dl_setting VAR="autopilot.flight_time" STEP="1" SHORTNAME="flight time" MODULE="autopilot" MIN="0" MAX="0" HANDLER="ResetFlightTimeAndLaunch"/>
            <dl_setting VAR="nav_radius" STEP="10" MODULE="firmwares/fixedwing/nav" MIN="-200" MAX="200" HANDLER="SetNavRadius">
              <strip_button VALUE="1" NAME="Circle right" ICON="circle-right.png" GROUP="circle"/>
              <strip_button VALUE="-1" NAME="Circle left" ICON="circle-left.png" GROUP="circle"/>
              <key_press VALUE="1" KEY="greater"/>
              <key_press VALUE="-1" KEY="less"/>
            </dl_setting>
          </dl_settings>
          <dl_settings NAME="mode">
            <dl_setting VAR="autopilot.mode" VALUES="MANUAL|AUTO1|AUTO2|HOME|NOGPS|FAILSAFE" STEP="1" MODULE="autopilot" MIN="0" MAX="2"/>
            <dl_setting VAR="autopilot.launch" STEP="1" MIN="0" MAX="1"/>
            <dl_setting VAR="autopilot.kill_throttle" STEP="1" MIN="0" MAX="1"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="Disco_FlatSpin" ac_id="185" airframe="airframes/tudelft/disco_modified.xml" radio="radios/crossfire_sbus.xml" telemetry="telemetry/fixedwing_flight_recorder.xml" flight_plan="flight_plans/basic.xml" settings="settings/fixedwing_basic.xml" settings_modules="modules/fs_landing.xml modules/geo_mag.xml modules/air_data.xml modules/nav_basic_fw.xml modules/guidance_basic_fw.xml modules/stabilization_attitude_fw.xml modules/ahrs_float_cmpl_quat.xml modules/gps.xml modules/gps_ubx_ucenter.xml modules/imu_common.xml" gui_color="blue" release="57fa5506ad03c85215b0ff7659d9f2a26131db1f">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="Crossfire SBUS" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1100" MIN="1100" MAX="1900" FUNCTION="THROTTLE" CTL="left_stick_vert" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="ROLL" CTL="right_stick_horiz" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="PITCH" CTL="right_stick_vert" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="YAW" CTL="left_stick_horiz" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="MODE" CTL="aux0" AVERAGE="1"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="AUX1" CTL="aux1" AVERAGE="1"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="AUX2" CTL="aux2" AVERAGE="1"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="AUX3" CTL="aux3" AVERAGE="1"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="AUX4" CTL="aux4" AVERAGE="1"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="AUX5" CTL="aux5" AVERAGE="1"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="AUX6" CTL="aux6" AVERAGE="1"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="AUX7" CTL="aux7" AVERAGE="1"/>
      </radio>
      <dump>
        <flight_plan security_height="25" name="Basic" max_dist_from_home="1500" lon0="1.27289" lat0="43.46223" ground_alt="185" alt="260">
          <header>#include &quot;subsystems/datalink/datalink.h&quot;</header>
          <waypoints>
            <waypoint y="0" x="0" name="HOME"/>
            <waypoint y="100.1" x="49.5" name="STDBY"/>
            <waypoint y="189.9" x="10.1" name="1"/>
            <waypoint y="139.1" x="132.3" name="2"/>
            <waypoint y="-11.6" x="137.0" name="MOB"/>
            <waypoint y="69.6" x="-119.2" name="S1"/>
            <waypoint y="209.5" x="274.4" name="S2"/>
            <waypoint y="45.1" x="177.4" name="AF" alt="215.0"/>
            <waypoint y="57.0" x="28.8" name="TD" alt="185.0"/>
            <waypoint y="-13.8" x="168.8" name="_BASELEG"/>
            <waypoint y="162.3" x="-114.5" name="CLIMB"/>
          </waypoints>
          <exceptions/>
          <blocks>
            <block name="Wait GPS" no="0">
              <set var="autopilot.kill_throttle" value="1" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Geo init" no="1">
              <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
              <call_once fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Holding point" no="2">
              <set var="autopilot.kill_throttle" value="1" no="0"/>
              <attitude vmode="throttle" throttle="0" roll="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff (wp CLIMB)" name="Takeoff" key="t" group="home" no="3">
              <exception deroute="Standby" cond="GetPosAlt() > GetAltRef()+25"/>
              <set var="autopilot.kill_throttle" value="0" no="0"/>
              <set var="autopilot.flight_time" value="0" no="1"/>
              <go wp="CLIMB" vmode="throttle" throttle="1.0" pitch="15" from="HOME" no="2"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" key="Ctrl+a" group="home" no="4">
              <circle wp="STDBY" radius="nav_radius" no="0"/>
            </block>
            <block strip_icon="eight.png" strip_button="Figure 8 (wp 1-2)" name="Figure 8 around wp 1" key="F8" group="base_pattern" no="5">
              <eight turn_around="2" radius="nav_radius" center="1" no="1"/>
            </block>
            <block strip_icon="oval.png" strip_button="Oval (wp 1-2)" name="Oval 1-2" group="base_pattern" no="6">
              <oval radius="nav_radius" p2="2" p1="1" no="1"/>
            </block>
            <block strip_icon="mob.png" strip_button="Circle around here" name="MOB" group="base_pattern" no="7">
              <call_once fun="NavSetWaypointHere(WP_MOB)" no="0"/>
              <set var="nav_radius" value="DEFAULT_CIRCLE_RADIUS" no="1"/>
              <circle wp="MOB" radius="nav_radius" no="2"/>
            </block>
            <block strip_icon="survey.png" strip_button="Survey (wp S1-S2)" name="Survey S1-S2" group="extra_pattern" no="8">
              <survey_rectangle wp2="S2" wp1="S1" grid="150" no="1"/>
            </block>
            <block strip_icon="path.png" strip_button="Path (1,2,S1,S2,STDBY)" name="Path 1,2,S1,S2,STDBY" group="extra_pattern" no="9">
              <go from="1" hmode="route" wp="2" wpts="1,2 S1" no="0"/>
              <go from="2" hmode="route" wp="S1" wpts="1,2 S1" no="1"/>
              <go from="S1" hmode="route" wp="S2" wpts="S1, S2 STDBY" throttle="0.4" pitch="auto" approaching_time="1" no="2"/>
              <go from="S2" hmode="route" wp="STDBY" wpts="S1, S2 STDBY" throttle="0.4" pitch="auto" approaching_time="1" no="3"/>
              <deroute block="Standby" no="4"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land right (wp AF-TD)" name="Land Right AF-TD" group="land" no="10">
              <set var="nav_radius" value="DEFAULT_CIRCLE_RADIUS" no="0"/>
              <deroute block="land" no="1"/>
            </block>
            <block strip_icon="land-left.png" strip_button="Land left (wp AF-TD)" name="Land Left AF-TD" group="land" no="11">
              <set var="nav_radius" value="-DEFAULT_CIRCLE_RADIUS" no="0"/>
              <deroute block="land" no="1"/>
            </block>
            <block name="land" no="12">
              <call_once fun="nav_compute_baseleg(WP_AF, WP_TD, WP__BASELEG, nav_radius)" no="0"/>
              <circle wp="_BASELEG" until="NavCircleCount() > 0.5" radius="nav_radius" no="1"/>
              <circle wp="_BASELEG" until="NavQdrCloseTo(DegOfRad(baseleg_out_qdr)-(nav_radius/fabs(nav_radius))*10) @AND (fabs(GetPosAlt() - WaypointAlt(WP__BASELEG)) @LT 10)" radius="nav_radius" no="2"/>
            </block>
            <block name="final" no="13">
              <exception deroute="flare" cond="GetAltRef() + 10 > GetPosAlt()"/>
              <go wp="TD" vmode="glide" hmode="route" from="AF" no="0"/>
            </block>
            <block name="flare" no="14">
              <go wp="TD" vmode="throttle" throttle="0.0" hmode="route" from="AF" approaching_time="0" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0.0" roll="0.0" no="1"/>
            </block>
            <block name="HOME" no="15">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="15" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="14" block_name="flare" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0.0" roll="0.0" no="1"/>
          </stage>
          <stage block="14" block_name="flare" stage="0">
            <go wp="TD" vmode="throttle" throttle="0.0" hmode="route" from="AF" approaching_time="0" no="0"/>
          </stage>
          <stage block="13" block_name="final" stage="0">
            <go wp="TD" vmode="glide" hmode="route" from="AF" no="0"/>
          </stage>
          <stage block="12" block_name="land" stage="2">
            <circle wp="_BASELEG" until="NavQdrCloseTo(DegOfRad(baseleg_out_qdr)-(nav_radius/fabs(nav_radius))*10) @AND (fabs(GetPosAlt() - WaypointAlt(WP__BASELEG)) @LT 10)" radius="nav_radius" no="2"/>
          </stage>
          <stage block="12" block_name="land" stage="1">
            <circle wp="_BASELEG" until="NavCircleCount() > 0.5" radius="nav_radius" no="1"/>
          </stage>
          <stage block="12" block_name="land" stage="0">
            <call_once fun="nav_compute_baseleg(WP_AF, WP_TD, WP__BASELEG, nav_radius)" no="0"/>
          </stage>
          <stage block="11" block_name="Land Left AF-TD" stage="1">
            <deroute block="land" no="1"/>
          </stage>
          <stage block="11" block_name="Land Left AF-TD" stage="0">
            <set var="nav_radius" value="-DEFAULT_CIRCLE_RADIUS" no="0"/>
          </stage>
          <stage block="10" block_name="Land Right AF-TD" stage="1">
            <deroute block="land" no="1"/>
          </stage>
          <stage block="10" block_name="Land Right AF-TD" stage="0">
            <set var="nav_radius" value="DEFAULT_CIRCLE_RADIUS" no="0"/>
          </stage>
          <stage block="9" block_name="Path 1,2,S1,S2,STDBY" stage="4">
            <deroute block="Standby" no="4"/>
          </stage>
          <stage block="9" block_name="Path 1,2,S1,S2,STDBY" stage="3">
            <go from="S2" hmode="route" wp="STDBY" wpts="S1, S2 STDBY" throttle="0.4" pitch="auto" approaching_time="1" no="3"/>
          </stage>
          <stage block="9" block_name="Path 1,2,S1,S2,STDBY" stage="2">
            <go from="S1" hmode="route" wp="S2" wpts="S1, S2 STDBY" throttle="0.4" pitch="auto" approaching_time="1" no="2"/>
          </stage>
          <stage block="9" block_name="Path 1,2,S1,S2,STDBY" stage="1">
            <go from="2" hmode="route" wp="S1" wpts="1,2 S1" no="1"/>
          </stage>
          <stage block="9" block_name="Path 1,2,S1,S2,STDBY" stage="0">
            <go from="1" hmode="route" wp="2" wpts="1,2 S1" no="0"/>
          </stage>
          <stage block="8" block_name="Survey S1-S2" stage="1">
            <survey_rectangle wp2="S2" wp1="S1" grid="150" no="1"/>
          </stage>
          <stage block="7" block_name="MOB" stage="2">
            <circle wp="MOB" radius="nav_radius" no="2"/>
          </stage>
          <stage block="7" block_name="MOB" stage="1">
            <set var="nav_radius" value="DEFAULT_CIRCLE_RADIUS" no="1"/>
          </stage>
          <stage block="7" block_name="MOB" stage="0">
            <call_once fun="NavSetWaypointHere(WP_MOB)" no="0"/>
          </stage>
          <stage block="6" block_name="Oval 1-2" stage="1">
            <oval radius="nav_radius" p2="2" p1="1" no="1"/>
          </stage>
          <stage block="5" block_name="Figure 8 around wp 1" stage="1">
            <eight turn_around="2" radius="nav_radius" center="1" no="1"/>
          </stage>
          <stage block="4" block_name="Standby" stage="0">
            <circle wp="STDBY" radius="nav_radius" no="0"/>
          </stage>
          <stage block="3" block_name="Takeoff" stage="2">
            <go wp="CLIMB" vmode="throttle" throttle="1.0" pitch="15" from="HOME" no="2"/>
          </stage>
          <stage block="3" block_name="Takeoff" stage="1">
            <set var="autopilot.flight_time" value="0" no="1"/>
          </stage>
          <stage block="3" block_name="Takeoff" stage="0">
            <set var="autopilot.kill_throttle" value="0" no="0"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="1">
            <attitude vmode="throttle" throttle="0" roll="0" no="1"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="0">
            <set var="autopilot.kill_throttle" value="1" no="0"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="2">
            <call_once fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="0">
            <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <set var="autopilot.kill_throttle" value="1" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings NAME="Flat Spin Landing">
            <dl_settings NAME="Feed Forward Settings">
              <dl_setting VAR="ff_duration" TYPE="float" STEP="0.1" SHORTNAME="FF Duration" MODULE="fs_landing/feed_forward" MIN="0.1" MAX="10" HANDLER="ff_duration_handler"/>
              <dl_setting VAR="thr_l_ff" TYPE="float" STEP="50" SHORTNAME="THR_L FF" MODULE="fs_landing/feed_forward" MIN="-9600" MAX="9600" HANDLER="thr_l_ff_handler"/>
              <dl_setting VAR="thr_r_ff" TYPE="float" STEP="50" SHORTNAME="THR_R FF" MODULE="fs_landing/feed_forward" MIN="-9600" MAX="9600" HANDLER="thr_r_ff_handler"/>
              <dl_setting VAR="elev_l_ff" TYPE="float" STEP="50" SHORTNAME="ELEV_L FF" MODULE="fs_landing/feed_forward" MIN="-9600" MAX="9600" HANDLER="elev_l_ff_handler"/>
              <dl_setting VAR="elev_r_ff" TYPE="float" STEP="50" SHORTNAME="ELEV_R FF" MODULE="fs_landing/feed_forward" MIN="-9600" MAX="9600" HANDLER="elev_l_ff_handler"/>
              <dl_setting VAR="thr_l_spinning" TYPE="float" STEP="50" SHORTNAME="THR_L Spin" MODULE="fs_landing/feed_forward" MIN="-9600" MAX="9600" HANDLER="thr_l_spin_handler"/>
              <dl_setting VAR="thr_r_spinning" TYPE="float" STEP="50" SHORTNAME="THR_R Spin" MODULE="fs_landing/feed_forward" MIN="-9600" MAX="9600" HANDLER="thr_r_spin_handler"/>
              <dl_setting VAR="elev_l_spinning" TYPE="float" STEP="50" SHORTNAME="ELEV_L Spin" MODULE="fs_landing/feed_forward" MIN="-9600" MAX="9600" HANDLER="elev_l_spin_handler"/>
              <dl_setting VAR="elev_r_spinning" TYPE="float" STEP="50" SHORTNAME="ELEV_R Spin" MODULE="fs_landing/feed_forward" MIN="-9600" MAX="9600" HANDLER="elev_l_spin_handler"/>
            </dl_settings>
            <dl_settings NAME="Pilot Control">
              <dl_setting VAR="pilot_has_control" TYPE="uint8_t" STEP="1" SHORTNAME="Active" MODULE="fs_landing/fs_landing" MIN="0" MAX="1" HANDLER="pilot_control_handler"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="geo_mag">
              <dl_setting VAR="geo_mag.calc_once" VALUES="OFF|CALC" STEP="1" SHORTNAME="calcNow" MODULE="geo_mag/geo_mag" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="air_data">
              <dl_setting VAR="air_data.qnh" STEP="1" SHORTNAME="QNH" MODULE="air_data/air_data" MIN="800" MAX="1200"/>
              <dl_setting VAR="air_data.tas_factor" TYPE="float" STEP="0.01" SHORTNAME="TASfactor" PERSISTENT="true" PARAM="AIR_DATA_TAS_FACTOR" MODULE="air_data/air_data" MIN="0.8" MAX="1.3"/>
              <dl_setting VAR="air_data.calc_qnh_once" STEP="1" SHORTNAME="calcQNH" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_airspeed" TYPE="uint8" STEP="1" SHORTNAME="calcAirspeed" PERSISTENT="true" PARAM="AIR_DATA_CALC_AIRSPEED" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_tas_factor" TYPE="uint8" STEP="1" SHORTNAME="calcTASfactor" PERSISTENT="true" PARAM="AIR_DATA_CALC_TAS_FACTOR" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_amsl_baro" TYPE="uint8" STEP="1" SHORTNAME="calcAMSL" PERSISTENT="true" PARAM="AIR_DATA_CALC_AMSL_BARO" MODULE="air_data/air_data" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="nav">
              <dl_setting VAR="nav_radius" STEP="5" MIN="-500" MAX="500"/>
              <dl_setting VAR="nav_course" STEP="5" MIN="0" MAX="359"/>
              <dl_setting VAR="nav_mode" STEP="1" MIN="1" MAX="2"/>
              <dl_setting VAR="nav_climb" STEP="0.5" MIN="-5" MAX="5"/>
              <dl_setting VAR="fp_pitch" STEP="1" MIN="-15" MAX="15"/>
              <dl_setting VAR="fp_throttle" STEP="0.01" MIN="0.0" MAX="1.0"/>
              <dl_setting VAR="fp_climb" STEP="0.1" MIN="-5.0" MAX="5.0"/>
              <dl_setting VAR="nav_shift" STEP="5" SHORTNAME="inc. shift" MODULE="firmwares/fixedwing/nav" MIN="-50" MAX="50" HANDLER="IncreaseShift"/>
              <dl_setting VAR="nav_ground_speed_setpoint" STEP="0.5" SHORTNAME="ground speed" MIN="5" MAX="50"/>
              <dl_setting VAR="nav_ground_speed_pgain" STEP="0.01" SHORTNAME="ground speed pgain" MIN="0" MAX="0.2"/>
              <dl_setting VAR="nav_survey_shift" STEP="5" MIN="50" MAX="500"/>
              <dl_setting VAR="nav_survey_sweep" TYPE="float" STEP="1" SHORTNAME="Distance" MODULE="subsystems/navigation/nav_survey_rectangle" MIN="10" MAX="500"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="control vert">
              <dl_settings NAME="auto_throttle">
                <dl_setting VAR="v_ctl_auto_throttle_cruise_throttle" STEP="0.05" SHORTNAME="cruise throttle" PARAM="V_CTL_AUTO_THROTTLE_NOMINAL_CRUISE_THROTTLE" MODULE="guidance/guidance_v" MIN="0.0" MAX="1" HANDLER="SetCruiseThrottle">
                  <strip_button VALUE="0.1" NAME="Loiter" GROUP="dash_loiter"/>
                  <strip_button VALUE="0" NAME="Cruise" GROUP="dash_loiter"/>
                  <strip_button VALUE="1" NAME="Dash" GROUP="dash_loiter"/>
                </dl_setting>
                <dl_setting VAR="v_ctl_pitch_trim" UNIT="rad" STEP="0.1" SHORTNAME="pitch trim" PARAM="V_CTL_PITCH_TRIM" MIN="-15" MAX="15" ALT_UNIT="deg"/>
                <dl_setting VAR="v_ctl_auto_throttle_pgain" STEP="0.005" SHORTNAME="throttle_pgain" PARAM="V_CTL_AUTO_THROTTLE_PGAIN" MIN="0.00" MAX="0.05"/>
                <dl_setting VAR="v_ctl_auto_throttle_igain" STEP="0.05" SHORTNAME="throttle_igain" PARAM="V_CTL_AUTO_THROTTLE_IGAIN" MIN="0.0" MAX="1"/>
                <dl_setting VAR="v_ctl_auto_throttle_dgain" STEP="0.1" SHORTNAME="throttle_dgain" MIN="0.0" MAX="2"/>
                <dl_setting VAR="v_ctl_auto_throttle_climb_throttle_increment" STEP="0.01" SHORTNAME="throttle_incr" PARAM="V_CTL_AUTO_THROTTLE_CLIMB_THROTTLE_INCREMENT" MIN="0" MAX="1"/>
                <dl_setting VAR="v_ctl_auto_throttle_pitch_of_vz_pgain" STEP="0.01" SHORTNAME="pitch_of_vz" PARAM="V_CTL_AUTO_THROTTLE_PITCH_OF_VZ_PGAIN" MIN="0" MAX="1"/>
                <dl_setting VAR="v_ctl_auto_throttle_pitch_of_vz_dgain" STEP="0.1" SHORTNAME="pitch_of_vz (d)" MIN="-10" MAX="10"/>
              </dl_settings>
              <dl_settings NAME="auto_pitch">
                <dl_setting VAR="v_ctl_auto_pitch_pgain" STEP="0.01" SHORTNAME="pgain" PARAM="V_CTL_AUTO_PITCH_PGAIN" MIN="0.01" MAX="0.1"/>
                <dl_setting VAR="v_ctl_auto_pitch_igain" STEP="0.01" SHORTNAME="igain" PARAM="V_CTL_AUTO_PITCH_IGAIN" MIN="0" MAX="1"/>
              </dl_settings>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="control horiz">
              <dl_settings NAME="trim">
                <dl_setting VAR="ap_state->command_roll_trim" STEP="1" SHORTNAME="roll_trim" PARAM="COMMAND_ROLL_TRIM" MODULE="inter_mcu" MIN="-960" MAX="960"/>
                <dl_setting VAR="ap_state->command_pitch_trim" STEP="1" SHORTNAME="pitch_trim" PARAM="COMMAND_PITCH_TRIM" MIN="-960" MAX="960"/>
                <dl_setting VAR="ap_state->command_yaw_trim" STEP="1" SHORTNAME="yaw_trim" PARAM="COMMAND_YAW_TRIM" MIN="-9000" MAX="9000"/>
              </dl_settings>
              <dl_settings NAME="attitude">
                <dl_setting VAR="h_ctl_roll_pgain" STEP="250" SHORTNAME="roll_pgain" MODULE="stabilization/stabilization_attitude" MIN="000" MAX="25000"/>
                <dl_setting VAR="h_ctl_roll_max_setpoint" UNIT="rad" STEP="1." SHORTNAME="max_roll" PARAM="H_CTL_ROLL_MAX_SETPOINT" MIN="0" MAX="60" ALT_UNIT="deg"/>
                <dl_setting VAR="h_ctl_pitch_pgain" STEP="250" SHORTNAME="pitch_pgain" PARAM="H_CTL_PITCH_PGAIN" MIN="0" MAX="25000"/>
                <dl_setting VAR="h_ctl_pitch_dgain" STEP="10" SHORTNAME="pitch_dgain" PARAM="H_CTL_PITCH_DGAIN" MIN="0" MAX="50000"/>
                <dl_setting VAR="h_ctl_elevator_of_roll" STEP="100" SHORTNAME="elevator_of_roll" PARAM="H_CTL_ELEVATOR_OF_ROLL" MIN="0" MAX="5000"/>
                <dl_setting VAR="h_ctl_aileron_of_throttle" STEP="100" SHORTNAME="aileron_of_throttle" MIN="0" MAX="5000"/>
                <dl_setting VAR="h_ctl_roll_attitude_gain" STEP="250" SHORTNAME="roll attitude pgain" PARAM="H_CTL_ROLL_ATTITUDE_GAIN" MIN="0" MAX="15000"/>
                <dl_setting VAR="h_ctl_roll_rate_gain" STEP="250" SHORTNAME="roll rate gain" PARAM="H_CTL_ROLL_RATE_GAIN" MIN="0" MAX="15000"/>
              </dl_settings>
              <dl_settings NAME="course">
                <dl_setting VAR="h_ctl_course_pgain" STEP="0.05" SHORTNAME="course pgain" PARAM="H_CTL_COURSE_PGAIN" MIN="0.1" MAX="3"/>
                <dl_setting VAR="h_ctl_course_dgain" STEP="0.1" SHORTNAME="course dgain" PARAM="H_CTL_COURSE_DGAIN" MIN="0" MAX="2"/>
                <dl_setting VAR="h_ctl_course_pre_bank_correction" STEP="0.05" SHORTNAME="pre bank cor" PARAM="H_CTL_COURSE_PRE_BANK_CORRECTION" MIN="0.1" MAX="2"/>
                <dl_setting VAR="h_ctl_roll_slew" STEP="0.01" SHORTNAME="roll slew" MIN="0.02" MAX="1"/>
              </dl_settings>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_fc.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_float_cmpl" MIN="0" MAX="50"/>
              <dl_setting VAR="ahrs_fc.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_float_cmpl" MIN="0.02" MAX="0.2"/>
              <dl_setting VAR="ahrs_fc.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_float_cmpl" MIN="0.7" MAX="1.5"/>
              <dl_setting VAR="ahrs_fc.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_float_cmpl" MIN="0.02" MAX="0.1"/>
              <dl_setting VAR="ahrs_fc.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_float_cmpl" MIN="0.7" MAX="1.5"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="ublox">
            <dl_settings NAME="ucenter">
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_h" STEP="1" SHORTNAME="sw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_l" STEP="1" SHORTNAME="sw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_h" STEP="1" SHORTNAME="hw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_l" STEP="1" SHORTNAME="hw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_init" STEP="100" SHORTNAME="inibaud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_run" STEP="100" SHORTNAME="baud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="Disco_FlatSpin">
        <description>    * Parrot Disco Fixedwing Modified Hardware with added Pixracer board.
    + Airframe to validate all onboard functionally...
    Disco FlatSpin
    + Autopilot:   Pixracer 1
    + Actuators:   Hitec HS5055 servos
    + GPS:         uBlox M8N GNSS
    + TELEMETRY:   3DR Si1000 based 868
    + CURRENT:     V/A power block sensing
    + RC RX:       R-XSR FrSky Receiver with SBUS out
    NOTES:
    + Hey, calibrate your magneto! Yes, you too ;), unit UKF auto works... output
    + One could make a flightplan mimicking exact default behaviour of Parrot assisted flight
    + Enlarged battery bay ,and option fit a 5200 mAh 3S battery. The all-up weight (AUW)) of the airframe will be  ~150g more
    Center of gravity still the same, flighttime doubles...
    + If you change your control from ETECS to Classic or New make sure to disable the settings/estimation/ac_char
    + PPRZLink v2 advised for tcas fun
    WIP:
    RC:
    The RC receiver Orange R620X make sure to set modeswitch to Auto2 on your TX when binding!
    else if one would lose RC or switch of transmitter during Auto2 flight, it will hop to manual.. very bad...
    A PPM receiver could theoretically be used, only for Linux ARCH no software to handle it is written (hint!)
    SUMD also. For the PPRZ Spektum could also, but not if you also want to fly it with RC but without PPRZ as AP only original
    since Spektrum serial is not handled by the Parrot main AP
    The setup ot Transmitter is in such a way that one could fly without PPRC just Parrot with a 3rd party transmitter
    Thus modeswitch on 5 for well.. mode
    TX Channel Nr  Function                        Control type        Comments
    1              Roll                            Stick
    2              Pitch                           Stick
    3              Throttle                        Stick
    4              Yaw                             Stick               Used to set the Disco in loiter
    5              Gear                            3-position switch   Used to configure the piloting mode:
    Auto-pilot with Parrot SkyController2 (Risky so better limit this one exept if you teaching people to fly with Skycontroller student AND RCTX for teacher )
    Auto-pilot with RC controller
    Full manual with RC controller
    6              Automatic Take-off/Landing      2-position trainer switch Used in “Auto-pilot with RC controller” mode
    Start: SWx    Landing: SWy
    Motor off in manual mode    SW?</description>
        <firmware NAME="fixedwing">
          <target NAME="ap" BOARD="px4fmu_4.0_chibios"/>
          <define VALUE="ADC_1" NAME="ADC_CHANNEL_VSUPPLY"/>
          <configure VALUE="512" NAME="PERIODIC_FREQUENCY"/>
          <configure VALUE="500" NAME="AHRS_PROPAGATE_FREQUENCY"/>
          <configure VALUE="500" NAME="AHRS_CORRECT_FREQUENCY"/>
          <configure VALUE="50" NAME="AHRS_MAG_CORRECT_FREQUENCY"/>
          <configure VALUE="16" NAME="NAVIGATION_FREQUENCY"/>
          <configure VALUE="120" NAME="CONTROL_FREQUENCY"/>
          <configure VALUE="60" NAME="TELEMETRY_FREQUENCY"/>
          <configure VALUE="512" NAME="MODULES_FREQUENCY"/>
          <module TYPE="mpu9250_spi" NAME="imu">
            <configure VALUE="spi1" NAME="IMU_MPU9250_SPI_DEV"/>
            <configure VALUE="SPI_SLAVE2" NAME="IMU_MPU9250_SPI_SLAVE_IDX"/>
            <define VALUE="FALSE" NAME="IMU_MPU9250_READ_MAG"/>
            <define VALUE="MPU9250_GYRO_RANGE_2000" NAME="IMU_MPU9250_GYRO_RANGE"/>
          </module>
          <module TYPE="hmc58xx" NAME="mag">
            <configure VALUE="i2c1" NAME="MAG_HMC58XX_I2C_DEV"/>
            <define VALUE="FALSE" NAME="MODULE_HMC58XX_UPDATE_AHRS"/>
            <define VALUE="1" NAME="HMC58XX_CHAN_X"/>
            <define VALUE="0" NAME="HMC58XX_CHAN_Y"/>
            <define VALUE="2" NAME="HMC58XX_CHAN_Z"/>
            <define VALUE="-" NAME="HMC58XX_CHAN_X_SIGN"/>
            <define VALUE="+" NAME="HMC58XX_CHAN_Y_SIGN"/>
            <define VALUE="+" NAME="HMC58XX_CHAN_Z_SIGN"/>
          </module>
          <define VALUE="0.0" UNIT="deg" NAME="MAG_TO_IMU_PHI"/>
          <define VALUE="0.0" UNIT="deg" NAME="MAG_TO_IMU_PSI"/>
          <define VALUE="0.0" UNIT="deg" NAME="MAG_TO_IMU_THETA"/>
          <module TYPE="ubx_ucenter" NAME="gps"/>
          <module TYPE="sbus" NAME="radio_control"/>
          <module NAME="current_sensor">
            <define NAME="USE_ADC_3"/>
            <configure VALUE="ADC_3" NAME="ADC_CURRENT_SENSOR"/>
            <define VALUE="1.3" NAME="CURRENT_ESTIMATION_NONLINEARITY"/>
          </module>
          <module TYPE="transparent" NAME="telemetry">
            <configure VALUE="UART2" NAME="MODEM_PORT"/>
            <configure VALUE="B57600" NAME="MODEM_BAUD"/>
          </module>
          <module TYPE="ublox" NAME="gps">
            <configure VALUE="B57600" NAME="GPS_BAUD"/>
          </module>
          <define NAME="AGR_CLIMB"/>
          <define NAME="TUNE_AGRESSIVE_CLIMB"/>
          <define NAME="STRONG_WIND"/>
          <define NAME="WIND_INFO"/>
          <define NAME="WIND_INFO_RET"/>
          <define VALUE="FALSE" NAME="autopilot_motors_on"/>
          <define NAME="SENSOR_SYNC_SEND"/>
          <configure VALUE="TRUE" NAME="USE_BARO_BOARD"/>
          <define VALUE="80" UNIT="s/10" NAME="BAT_CHECKER_DELAY"/>
          <define VALUE="410" UNIT="s/10" NAME="CATASTROPHIC_BATTERY_KILL_DELAY"/>
          <define NAME="AHRS_TRIGGERED_ATTITUDE_LOOP"/>
          <define VALUE="TRUE" NAME="USE_AHRS_GPS_ACCELERATIONS"/>
          <define VALUE="TRUE" NAME="USE_MAGNETOMETER_ONGROUND"/>
          <configure VALUE="TRUE" NAME="USE_MAGNETOMETER"/>
          <module TYPE="float_cmpl_quat" NAME="ahrs">
            <configure VALUE="TRUE" NAME="AHRS_USE_MAGNETOMETER"/>
            <configure VALUE="2" NAME="AHRS_ALIGNER_LED"/>
            <define VALUE="TRUE" NAME="AHRS_MAG_UPDATE_ALL_AXES"/>
            <define VALUE="TRUE" NAME="AHRS_USE_GPS_HEADING"/>
            <define VALUE="FALSE" NAME="AHRS_GPS_SPEED_IN_NEGATIVE_Z_DIRECTION"/>
            <define VALUE="FALSE" NAME="AHRS_PROPAGATE_LOW_PASS_RATES"/>
            <define VALUE="0.174533" UNIT="rad" NAME="AHRS_BIAS_UPDATE_HEADING_THRESHOLD"/>
            <define VALUE="3.0" UNIT="m/s" NAME="AHRS_HEADING_UPDATE_GPS_MIN_SPEED"/>
            <define VALUE="10" NAME="AHRS_GRAVITY_HEURISTIC_FACTOR"/>
            <define VALUE="ABI_BROADCAST" NAME="AHRS_ICQ_IMU_ID"/>
            <define VALUE="MAG_CALIB_UKF_ID" NAME="AHRS_ICQ_MAG_ID"/>
          </module>
          <module TYPE="alt_float" NAME="ins"/>
          <module NAME="control"/>
          <module NAME="navigation"/>
          <module NAME="send_imu_mag_current"/>
          <module NAME="air_data">
            <define VALUE="FALSE" NAME="CALC_AIRSPEED"/>
            <define VALUE="FALSE" NAME="CALC_TAS_FACTOR"/>
            <define VALUE="TRUE" NAME="CALC_AMSL_BARO"/>
          </module>
          <module NAME="geo_mag"/>
          <module TYPE="line" NAME="nav"/>
          <module NAME="tlsf"/>
          <module NAME="pprzlog"/>
          <module TYPE="sd_chibios" NAME="logger"/>
          <module NAME="flight_recorder"/>
          <module NAME="fs_landing"/>
        </firmware>
        <servos>
          <servo NO="0" NEUTRAL="1500" NAME="S_THROTTLE_LEFT" MIN="1100" MAX="1900"/>
          <servo NO="1" NEUTRAL="1500" NAME="S_ELEVON_LEFT" MIN="1100" MAX="1900"/>
          <servo NO="2" NEUTRAL="1500" NAME="S_ELEVON_RIGHT" MIN="1900" MAX="1100"/>
          <servo NO="3" NEUTRAL="1500" NAME="S_THROTTLE_RIGHT" MIN="1100" MAX="1900"/>
        </servos>
        <section NAME="ServoPositions">
          <define VALUE="(imcu_get_command(COMMAND_THROTTLE)>9600/2)" NAME="ThrottleHigh()"/>
        </section>
        <section NAME="MIXER">
          <define VALUE="0.7f" NAME="ELEVON_ROLL_FACTOR"/>
          <define VALUE="-0.6f" NAME="ELEVON_PITCH_FACTOR"/>
          <define VALUE="0.9f" NAME="ELEVON_YAW_FACTOR"/>
          <define VALUE="0.3f" NAME="ELEVON_DIFF"/>
        </section>
        <commands>
          <axis NAME="THROTTLE" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="5"/>
          <axis NAME="PITCH" FAILSAFE_VALUE="-6"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="FS_LANDING" FAILSAFE_VALUE="0"/>
        </commands>
        <rc_commands>
          <set VALUE="@THROTTLE" COMMAND="THROTTLE"/>
          <set VALUE="@ROLL" COMMAND="ROLL"/>
          <set VALUE="@PITCH" COMMAND="PITCH"/>
          <set VALUE="@YAW" COMMAND="YAW"/>
          <set VALUE="@AUX2" COMMAND="FS_LANDING"/>
        </rc_commands>
        <auto_rc_commands>
          <set VALUE="@YAW" COMMAND="YAW"/>
        </auto_rc_commands>
        <command_laws>
          <let VAR="aileron" VALUE="@ROLL * ELEVON_ROLL_FACTOR"/>
          <let VAR="elevator" VALUE="@PITCH * ELEVON_PITCH_FACTOR"/>
          <let VAR="leftyaw" VALUE="(@YAW >= 0? 0 : 1)"/>
          <let VAR="rightyaw" VALUE="(1 - $leftyaw)"/>
          <let VAR="rudderleft" VALUE="-(@YAW * $leftyaw) * ELEVON_YAW_FACTOR"/>
          <let VAR="rudderright" VALUE="(@YAW * $rightyaw) * ELEVON_YAW_FACTOR"/>
          <let VAR="throttleleft" VALUE="@THROTTLE + $leftyaw * @YAW + $rightyaw * @YAW"/>
          <let VAR="throttleright" VALUE="@THROTTLE - $rightyaw * @YAW - $leftyaw * @YAW"/>
          <call FUN="fs_landing_set_actuator_values()"/>
          <let VAR="fs_throttle_left" VALUE="fs_landing.commands[SERVO_S_THROTTLE_LEFT]"/>
          <let VAR="fs_throttle_right" VALUE="fs_landing.commands[SERVO_S_THROTTLE_RIGHT]"/>
          <let VAR="fs_elevon_left" VALUE="fs_landing.commands[SERVO_S_ELEVON_LEFT]"/>
          <let VAR="fs_elevon_right" VALUE="fs_landing.commands[SERVO_S_ELEVON_RIGHT]"/>
          <let VAR="is_spinning" VALUE="(@FS_LANDING > 4500 ? 1 : 0)"/>
          <set VALUE="($is_spinning ? $fs_throttle_left : $throttleleft)" SERVO="S_THROTTLE_LEFT"/>
          <set VALUE="($is_spinning ? $fs_throttle_right : $throttleright)" SERVO="S_THROTTLE_RIGHT"/>
          <set VALUE="($is_spinning ? $fs_elevon_left : $elevator + $aileron)" SERVO="S_ELEVON_LEFT"/>
          <set VALUE="($is_spinning ? $fs_elevon_right : $elevator - $aileron)" SERVO="S_ELEVON_RIGHT"/>
        </command_laws>
        <section PREFIX="AUTO1_" NAME="AUTO1">
          <define VALUE="45" UNIT="deg" NAME="MAX_ROLL"/>
          <define VALUE="40" UNIT="deg" NAME="MAX_PITCH"/>
        </section>
        <section PREFIX="COMMAND_" NAME="TRIM">
          <define VALUE="0.0" NAME="ROLL_TRIM"/>
          <define VALUE="0.0" NAME="PITCH_TRIM"/>
        </section>
        <section PREFIX="FAILSAFE_" NAME="FAILSAFE">
          <define VALUE="0.0" UNIT="%" NAME="DEFAULT_THROTTLE"/>
          <define VALUE="15.0" UNIT="deg" NAME="DEFAULT_ROLL"/>
          <define VALUE="-10.0" UNIT="deg" NAME="DEFAULT_PITCH"/>
          <define VALUE="5" UNIT="s" NAME="DELAY_WITHOUT_GPS"/>
        </section>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE=" 1.01" NAME="GYRO_P_SENS" INTEGER="16"/>
          <define VALUE=" 1.01" NAME="GYRO_Q_SENS" INTEGER="16"/>
          <define VALUE=" 1.01" NAME="GYRO_R_SENS" INTEGER="16"/>
          <define VALUE="-72" NAME="ACCEL_X_NEUTRAL"/>
          <define VALUE="-3" NAME="ACCEL_Y_NEUTRAL"/>
          <define VALUE="16" NAME="ACCEL_Z_NEUTRAL"/>
          <define VALUE="4.88551667342" NAME="ACCEL_X_SENS" INTEGER="16"/>
          <define VALUE="4.87127085018" NAME="ACCEL_Y_SENS" INTEGER="16"/>
          <define VALUE="4.81849471549" NAME="ACCEL_Z_SENS" INTEGER="16"/>
          <define VALUE="-76" NAME="MAG_X_NEUTRAL"/>
          <define VALUE="-148" NAME="MAG_Y_NEUTRAL"/>
          <define VALUE="-544" NAME="MAG_Z_NEUTRAL"/>
          <define VALUE="9.32170888384" NAME="MAG_X_SENS" INTEGER="16"/>
          <define VALUE="9.08947221668" NAME="MAG_Y_SENS" INTEGER="16"/>
          <define VALUE="9.38604192016" NAME="MAG_Z_SENS" INTEGER="16"/>
          <define VALUE="0.000321738038902" NAME="MAG_X_CURRENT_COEF"/>
          <define VALUE="-0.000820010304048" NAME="MAG_Y_CURRENT_COEF"/>
          <define VALUE="0.00139218924958" NAME="MAG_Z_CURRENT_COEF"/>
          <define VALUE="0.0" UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0.0" UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="0.0" UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.403761" NAME="H_X"/>
          <define VALUE="0.014826" NAME="H_Y"/>
          <define VALUE="0.914744" NAME="H_Z"/>
        </section>
        <section NAME="INS">
          <define VALUE="0.0" UNIT="m" NAME="INS_BODY_TO_GPS_X"/>
          <define VALUE="0.0" UNIT="m" NAME="INS_BODY_TO_GPS_Y"/>
          <define VALUE="0.03" UNIT="m" NAME="INS_BODY_TO_GPS_Z"/>
          <define VALUE="0." UNIT="deg" NAME="ROLL_NEUTRAL_DEFAULT"/>
          <define VALUE="0." UNIT="deg" NAME="PITCH_NEUTRAL_DEFAULT"/>
          <define VALUE="1" NAME="USE_GPS_ALT"/>
          <define VALUE="0.02" NAME="VFF_R_GPS"/>
        </section>
        <section PREFIX="MAG_CALIB_UKF_" NAME="MAG_CALIB_UKF">
          <define VALUE="FALSE" NAME="HOTSTART"/>
          <define VALUE="" NAME="HOTSTART_SAVE_FILE"/>
          <define VALUE="1.0f" NAME="NORM"/>
          <define VALUE="5e-2f" NAME="NOISE_RMS"/>
          <define VALUE="0" NAME="GEO_MAG_TIMEOUT"/>
          <define VALUE="0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0" TYPE="float[]" NAME="INITIAL_STATE"/>
          <define VALUE="FALSE" NAME="VERBOSE"/>
        </section>
        <section PREFIX="H_CTL_" NAME="HORIZONTAL CONTROL">
          <define VALUE="1.25" NAME="COURSE_PGAIN"/>
          <define VALUE="0.2" NAME="COURSE_DGAIN"/>
          <define VALUE="0.5" NAME="COURSE_TAU"/>
          <define VALUE="0.97" NAME="COURSE_PRE_BANK_CORRECTION"/>
          <define VALUE="40" UNIT="deg" NAME="ROLL_MAX_SETPOINT"/>
          <define VALUE="40" UNIT="deg" NAME="PITCH_MAX_SETPOINT"/>
          <define VALUE="-40" UNIT="deg" NAME="PITCH_MIN_SETPOINT"/>
          <define VALUE="6500" NAME="PITCH_PGAIN"/>
          <define VALUE="100" NAME="PITCH_DGAIN"/>
          <define VALUE="30" NAME="PITCH_IGAIN"/>
          <define VALUE="10." NAME="PITCH_KFFA"/>
          <define VALUE="0." NAME="PITCH_KFFD"/>
          <define VALUE="1500" UNIT="PPRZ_MAX" NAME="ELEVATOR_OF_ROLL"/>
          <define VALUE="0.5" NAME="ROLL_SLEW"/>
          <define VALUE="11000." NAME="ROLL_ATTITUDE_GAIN"/>
          <define VALUE="1400" NAME="ROLL_RATE_GAIN"/>
          <define VALUE="100." NAME="ROLL_IGAIN"/>
          <define VALUE="100" NAME="ROLL_KFFA"/>
          <define VALUE="0" NAME="ROLL_KFFD"/>
          <define VALUE="0.0" NAME="AILERON_OF_THROTTLE"/>
        </section>
        <section PREFIX="V_CTL_" NAME="VERTICAL CONTROL">
          <define VALUE="11.5" UNIT="volt" NAME="POWER_CTL_BAT_NOMINAL"/>
          <define VALUE="0.15" NAME="ALTITUDE_PGAIN"/>
          <define VALUE="2*V_CTL_ALTITUDE_MAX_CLIMB" NAME="AUTO_CLIMB_LIMIT"/>
          <define VALUE="0.30" UNIT="%" NAME="AUTO_THROTTLE_MIN_CRUISE_THROTTLE"/>
          <define VALUE="0.50" UNIT="%" NAME="AUTO_THROTTLE_NOMINAL_CRUISE_THROTTLE"/>
          <define VALUE="0.90" UNIT="%" NAME="AUTO_THROTTLE_MAX_CRUISE_THROTTLE"/>
          <define VALUE="1000" UNIT="pprz_t" NAME="AUTO_THROTTLE_LOITER_TRIM"/>
          <define VALUE="-2000" UNIT="pprz_t" NAME="AUTO_THROTTLE_DASH_TRIM"/>
          <define VALUE="0.39" UNIT="%/(m/s)" NAME="AUTO_THROTTLE_CLIMB_THROTTLE_INCREMENT"/>
          <define VALUE="0.005" UNIT="%/(m/s)" NAME="AUTO_THROTTLE_PGAIN"/>
          <define VALUE="0.002" NAME="AUTO_THROTTLE_IGAIN"/>
          <define VALUE="0.0" NAME="AUTO_THROTTLE_DGAIN"/>
          <define VALUE="0.11" UNIT="rad/(m/s)" NAME="AUTO_THROTTLE_PITCH_OF_VZ_PGAIN"/>
          <define VALUE="0." UNIT="rad" NAME="AUTO_THROTTLE_NOMINAL_CRUISE_PITCH"/>
          <define VALUE="0.6" UNIT="m/s/s" NAME="THROTTLE_SLEW_LIMITER"/>
          <define VALUE="15.0" UNIT="m/s" NAME="AUTO_AIRSPEED_SETPOINT"/>
          <define VALUE="0.12" UNIT="%/(m/s)" NAME="AUTO_AIRSPEED_THROTTLE_PGAIN"/>
          <define VALUE="0.09" NAME="AUTO_AIRSPEED_THROTTLE_DGAIN"/>
          <define VALUE="0.02" NAME="AUTO_AIRSPEED_THROTTLE_IGAIN"/>
          <define VALUE="0.12" UNIT="degree/(m/s)" NAME="AUTO_AIRSPEED_PITCH_PGAIN"/>
          <define VALUE="0.0" NAME="AUTO_AIRSPEED_PITCH_DGAIN"/>
          <define VALUE="0.06" NAME="AUTO_AIRSPEED_PITCH_IGAIN"/>
          <define VALUE="23.0" UNIT="m/s" NAME="AIRSPEED_MAX"/>
          <define VALUE="9.0" UNIT="m/s" NAME="AIRSPEED_MIN"/>
          <define VALUE="0." UNIT="deg" NAME="PITCH_LOITER_TRIM"/>
          <define VALUE="0." UNIT="deg" NAME="PITCH_DASH_TRIM"/>
          <define VALUE="5.0" UNIT="m/s" NAME="AUTO_GROUNDSPEED_SETPOINT"/>
          <define VALUE="0.8" NAME="AUTO_GROUNDSPEED_PGAIN"/>
          <define VALUE="0.2" NAME="AUTO_GROUNDSPEED_IGAIN"/>
          <define VALUE="0.19" NAME="AIRSPEED_PGAIN"/>
          <define VALUE="3.0" UNIT="m/s" NAME="ALTITUDE_MAX_CLIMB"/>
          <define VALUE="0.9" UNIT="G" NAME="MAX_ACCELERATION"/>
          <define VALUE="0.030" NAME="AUTO_PITCH_PGAIN"/>
          <define VALUE="0.01" NAME="AUTO_PITCH_DGAIN"/>
          <define VALUE="0.00" NAME="AUTO_PITCH_IGAIN"/>
          <define VALUE="55" UNIT="deg" NAME="AUTO_PITCH_MAX_PITCH"/>
          <define VALUE="-55" UNIT="deg" NAME="AUTO_PITCH_MIN_PITCH"/>
          <define VALUE="0.35" NAME="ENERGY_TOT_PGAIN"/>
          <define VALUE="0.20" NAME="ENERGY_TOT_IGAIN"/>
          <define VALUE="0.40" NAME="ENERGY_DIFF_PGAIN"/>
          <define VALUE="0.10" NAME="ENERGY_DIFF_IGAIN"/>
          <define VALUE="7." NAME="GLIDE_RATIO"/>
          <define VALUE="0.06" NAME="AUTO_THROTTLE_OF_AIRSPEED_PGAIN"/>
          <define VALUE="0.01" NAME="AUTO_THROTTLE_OF_AIRSPEED_IGAIN"/>
          <define VALUE="0.01" NAME="AUTO_PITCH_OF_AIRSPEED_PGAIN"/>
          <define VALUE="0.003" NAME="AUTO_PITCH_OF_AIRSPEED_IGAIN"/>
          <define VALUE="0.03" NAME="AUTO_PITCH_OF_AIRSPEED_DGAIN"/>
        </section>
        <section PREFIX="AGR_" NAME="AGGRESSIVE">
          <define VALUE="40" UNIT="m" NAME="BLEND_START"/>
          <define VALUE="10" UNIT="m" NAME="BLEND_END"/>
          <define VALUE="0.99" UNIT="%" NAME="CLIMB_THROTTLE"/>
          <define VALUE="45" UNIT="deg" NAME="CLIMB_PITCH"/>
          <define VALUE="0.7" UNIT="%" NAME="DESCENT_THROTTLE"/>
          <define VALUE="-45" UNIT="deg" NAME="DESCENT_PITCH"/>
          <define VALUE="0.8" UNIT="%" NAME="CLIMB_NAV_RATIO"/>
          <define VALUE="1.0" UNIT="%" NAME="DESCENT_NAV_RATIO"/>
        </section>
        <section NAME="BAT">
          <define VALUE="600" UNIT="mA" NAME="MILLIAMP_AT_IDLE_THROTTLE"/>
          <define VALUE="11000" UNIT="mA" NAME="MILLIAMP_AT_FULL_THROTTLE"/>
          <define VALUE="12.6" UNIT="V" NAME="MAX_BAT_LEVEL"/>
          <define VALUE="10.6" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="10.0" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="9.3" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="9.0" UNIT="V" NAME="MIN_BAT_LEVEL"/>
        </section>
        <section NAME="MISC">
          <define VALUE="10." UNIT="m/s" NAME="MINIMUM_AIRSPEED"/>
          <define VALUE="15." UNIT="m/s" NAME="NOMINAL_AIRSPEED"/>
          <define VALUE="23." UNIT="m/s" NAME="MAXIMUM_AIRSPEED"/>
          <define VALUE="12." UNIT="m/s" NAME="CLIMB_AIRSPEED"/>
          <define VALUE="18." UNIT="m/s" NAME="TRACKING_AIRSPEED"/>
          <define VALUE="10." UNIT="m/s" NAME="GLIDE_AIRSPEED"/>
          <define VALUE="7." UNIT="m/s" NAME="STALL_AIRSPEED"/>
          <define VALUE="22." UNIT="m/s" NAME="RACE_AIRSPEED"/>
          <define VALUE="11." UNIT="m/s" NAME="MIN_SPEED_FOR_TAKEOFF"/>
          <define VALUE="1.5" UNIT="m/s/s" NAME="AIRSPEED_SETPOINT_SLEW"/>
          <define VALUE="35" UNIT="deg" NAME="TAKEOFF_PITCH_ANGLE"/>
          <define VALUE="40" UNIT="deg" NAME="FLARE_PITCH_ANGLE"/>
          <define VALUE="1.0" UNIT="deg" NAME="NAV_GLIDE_PITCH_TRIM"/>
          <define VALUE="MAX_DIST_FROM_HOME*1.3+HOME_RADIUS" UNIT="m" NAME="KILL_MODE_DISTANCE"/>
          <define VALUE="80." UNIT="m" NAME="DEFAULT_CIRCLE_RADIUS"/>
          <define VALUE="DEFAULT_CIRCLE_RADIUS" UNIT="m" NAME="HOME_RADIUS"/>
          <define VALUE="60." UNIT="m" NAME="LANDING_CIRCLE_RADIUS"/>
          <define VALUE="25." UNIT="m" NAME="MIN_CIRCLE_RADIUS"/>
          <define VALUE="4." UNIT="s" NAME="CARROT"/>
          <define VALUE="TRUE" NAME="UNLOCKED_HOME_MODE"/>
          <define VALUE="AP_MODE_AUTO2" NAME="RC_LOST_MODE"/>
        </section>
        <section PREFIX="APP_" NAME="GLS_APPROACH">
          <define VALUE="20" UNIT="m" NAME="DISTANCE_AF_SD"/>
          <define VALUE="4" UNIT="deg" NAME="ANGLE"/>
          <define VALUE="80" UNIT="m" NAME="INTERCEPT_AF_SD"/>
          <define VALUE="12.0" UNIT="m/s" NAME="TARGET_SPEED"/>
        </section>
        <section NAME="GCS">
          <define VALUE="flyingwing" NAME="AC_ICON"/>
          <define VALUE="40" NAME="ALT_SHIFT_PLUS_PLUS"/>
          <define VALUE="20" NAME="ALT_SHIFT_PLUS"/>
          <define VALUE="-20" NAME="ALT_SHIFT_MINUS"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Ap">
          <mode NAME="default">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1" NAME="AIRSPEED"/>
            <message PERIOD="5.1" NAME="ALIVE"/>
            <message PERIOD="0.25" NAME="GPS"/>
            <message PERIOD="1." NAME="NAVIGATION"/>
            <message PERIOD="0.1" NAME="ATTITUDE"/>
            <message PERIOD="0.5" NAME="ESTIMATOR"/>
            <message PERIOD="1.1" NAME="ENERGY"/>
            <message PERIOD="0.5" NAME="WP_MOVED"/>
            <message PERIOD="1.05" NAME="CIRCLE"/>
            <message PERIOD="0.2" NAME="DESIRED"/>
            <message PERIOD="1.2" NAME="SEGMENT"/>
            <message PERIOD="2.1" NAME="CALIBRATION"/>
            <message PERIOD="9." NAME="NAVIGATION_REF"/>
            <message PERIOD="4.9" NAME="PPRZ_MODE"/>
            <message PERIOD="5." NAME="SETTINGS"/>
            <message PERIOD="2.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="1.5" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="IR_SENSORS"/>
            <message PERIOD="2.1" NAME="SURVEY"/>
            <message PERIOD="2.0" NAME="GPS_SOL"/>
            <message PERIOD=".8" NAME="IMU_ACCEL"/>
            <message PERIOD=".6" NAME="IMU_GYRO"/>
            <message PERIOD="1.3" NAME="IMU_MAG"/>
            <message PERIOD="0.5" NAME="CAM"/>
            <message PERIOD="1.0" NAME="CAM_POINT"/>
            <message PERIOD="5" NAME="COMMANDS"/>
            <message PERIOD="2" NAME="FBW_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="0.9" NAME="ESC"/>
            <message PERIOD="5.1" NAME="LOGGER_STATUS"/>
            <message PERIOD="0.1" NAME="WIND_INFO_RET"/>
          </mode>
          <mode NAME="minimal">
            <message PERIOD="5" NAME="ALIVE"/>
            <message PERIOD="4" NAME="ATTITUDE"/>
            <message PERIOD="1.05" NAME="GPS"/>
            <message PERIOD="1.3" NAME="ESTIMATOR"/>
            <message PERIOD="1.4" NAME="WP_MOVED"/>
            <message PERIOD="3.05" NAME="CIRCLE"/>
            <message PERIOD="4.05" NAME="DESIRED"/>
            <message PERIOD="1.1" NAME="ENERGY"/>
            <message PERIOD="3.2" NAME="SEGMENT"/>
            <message PERIOD="5.1" NAME="CALIBRATION"/>
            <message PERIOD="9." NAME="NAVIGATION_REF"/>
            <message PERIOD="3." NAME="NAVIGATION"/>
            <message PERIOD="5." NAME="PPRZ_MODE"/>
            <message PERIOD="5." NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="1.5" NAME="DL_VALUE"/>
            <message PERIOD="5.2" NAME="IR_SENSORS"/>
            <message PERIOD="2.1" NAME="SURVEY"/>
            <message PERIOD="5.0" NAME="GPS_SOL"/>
          </mode>
          <mode NAME="extremal">
            <message PERIOD="5" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="GPS"/>
            <message PERIOD="5.3" NAME="ESTIMATOR"/>
            <message PERIOD="10.1" NAME="ENERGY"/>
            <message PERIOD="10.2" NAME="DESIRED"/>
            <message PERIOD="5.4" NAME="NAVIGATION"/>
            <message PERIOD="7.5" NAME="PPRZ_MODE"/>
            <message PERIOD="8." NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="5.7" NAME="DATALINK_REPORT"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD="0.5" NAME="BARO_RAW"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO"/>
            <message PERIOD=".075" NAME="IMU_ACCEL"/>
            <message PERIOD=".1" NAME="IMU_MAG"/>
          </mode>
          <mode NAME="debug_imu">
            <message PERIOD="0.1" NAME="ATTITUDE"/>
            <message PERIOD="5" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="GPS"/>
            <message PERIOD="5.3" NAME="ESTIMATOR"/>
            <message PERIOD="10.1" NAME="ENERGY"/>
            <message PERIOD="10.2" NAME="DESIRED"/>
            <message PERIOD="5.4" NAME="NAVIGATION"/>
            <message PERIOD="5.5" NAME="PPRZ_MODE"/>
            <message PERIOD="5." NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="5.7" NAME="DATALINK_REPORT"/>
            <message PERIOD=".5" NAME="IMU_ACCEL"/>
            <message PERIOD=".5" NAME="IMU_GYRO"/>
            <message PERIOD=".5" NAME="IMU_MAG"/>
            <message PERIOD=".5" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".5" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".5" NAME="IMU_MAG_RAW"/>
          </mode>
        </process>
        <process NAME="Fbw">
          <mode NAME="default">
            <message PERIOD="5" NAME="COMMANDS"/>
            <message PERIOD="2" NAME="FBW_STATUS"/>
            <message PERIOD="5" NAME="ACTUATORS"/>
          </mode>
          <mode NAME="debug">
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="COMMANDS"/>
            <message PERIOD="1" NAME="FBW_STATUS"/>
            <message PERIOD="5" NAME="ACTUATORS"/>
          </mode>
        </process>
        <process NAME="FlightRecorder">
          <mode NAME="default">
            <message PERIOD="0.5" NAME="ENERGY"/>
            <message PERIOD="0.2" NAME="GPS"/>
            <message PERIOD="0.05" NAME="ATTITUDE"/>
            <message PERIOD="0.05" NAME="DESIRED"/>
            <message PERIOD=".02" NAME="IMU_ACCEL"/>
            <message PERIOD=".02" NAME="IMU_GYRO"/>
            <message PERIOD=".02" NAME="IMU_MAG"/>
            <message PERIOD="0.05" NAME="AIR_DATA"/>
            <message PERIOD="0.05" NAME="AOA"/>
            <message PERIOD="0.05" NAME="RC"/>
            <message PERIOD="0.05" NAME="COMMANDS"/>
            <message PERIOD="0.05" NAME="ACTUATORS"/>
            <message PERIOD="1.0" NAME="PPRZ_MODE"/>
            <message PERIOD="1.0" NAME="FBW_STATUS"/>
            <message PERIOD="1.0" NAME="NAVIGATION"/>
            <message PERIOD="1.0" NAME="DATALINK_REPORT"/>
            <message PERIOD="0.1" NAME="ESC"/>
            <message PERIOD="0.05" NAME="ADC_GENERIC"/>
            <message PERIOD="0.1" NAME="WIND_INFO_RET"/>
          </mode>
        </process>
      </telemetry>
      <settings>
        <dl_settings>
          <dl_settings NAME="flight params">
            <dl_setting VAR="flight_altitude" STEP="10" SHORTNAME="altitude" MIN="0" MAX="1000"/>
            <dl_setting VAR="nav_course" STEP="1" MIN="0" MAX="360"/>
            <dl_setting VAR="nav_shift" STEP="5" SHORTNAME="inc. shift" MODULE="firmwares/fixedwing/nav" MIN="-10" MAX="10" HANDLER="IncreaseShift"/>
            <dl_setting VAR="autopilot.flight_time" STEP="1" SHORTNAME="flight time" MODULE="autopilot" MIN="0" MAX="0" HANDLER="ResetFlightTimeAndLaunch"/>
            <dl_setting VAR="nav_radius" STEP="10" MODULE="firmwares/fixedwing/nav" MIN="-200" MAX="200" HANDLER="SetNavRadius">
              <strip_button VALUE="1" NAME="Circle right" ICON="circle-right.png" GROUP="circle"/>
              <strip_button VALUE="-1" NAME="Circle left" ICON="circle-left.png" GROUP="circle"/>
              <key_press VALUE="1" KEY="greater"/>
              <key_press VALUE="-1" KEY="less"/>
            </dl_setting>
          </dl_settings>
          <dl_settings NAME="mode">
            <dl_setting VAR="autopilot.mode" VALUES="MANUAL|AUTO1|AUTO2|HOME|NOGPS|FAILSAFE" STEP="1" MODULE="autopilot" MIN="0" MAX="2"/>
            <dl_setting VAR="autopilot.launch" STEP="1" MIN="0" MAX="1"/>
            <dl_setting VAR="autopilot.kill_throttle" STEP="1" MIN="0" MAX="1"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="Flappy" ac_id="231" airframe="airframes/tudelft/quadthopter.xml" radio="radios/deltang_rx31.xml" telemetry="telemetry/default_rotorcraft_slow.xml" flight_plan="flight_plans/rotorcraft_basic.xml" settings="settings/rotorcraft_basic.xml" settings_modules="modules/air_data.xml modules/ahrs_int_cmpl_quat.xml modules/stabilization_int_quat.xml modules/nav_basic_rotorcraft.xml modules/guidance_rotorcraft.xml modules/gps.xml modules/imu_common.xml" gui_color="white" release="65aa9a711dc4a66ed2d7cf73c0f5872bbeeb821d">
      <radio SYNC_MIN="4000" SYNC_MAX="25000" PULSE_TYPE="NEGATIVE" NAME="GraupnerMC22" DATA_MIN="750" DATA_MAX="2750">
        <channel NEUTRAL="1100" MIN="1100" MAX="1900" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="ROLL" CTL="B" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="PITCH" CTL="C" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="YAW" CTL="D" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="MODE" CTL="E" AVERAGE="10"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="KILL" CTL="F" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="EXTRA" CTL="G" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="2" name="Rotorcraft Basic (Enac)" max_dist_from_home="150" lon0="1 28 52.61" lat0="43 33 50.83" ground_alt="147" alt="152">
          <header>#include &quot;autopilot.h&quot;</header>
          <waypoints>
            <waypoint y="0.0" x="0.0" name="HOME"/>
            <waypoint y="5.0" x="0.0" name="CLIMB"/>
            <waypoint y="-5.0" x="-2.0" name="STDBY"/>
            <waypoint y="-13.9" x="3.6" name="p1"/>
            <waypoint y="-48.2" x="27.5" name="p2"/>
            <waypoint y="-19.6" x="16.7" name="p3"/>
            <waypoint y="-40.7" x="13.7" name="p4"/>
            <waypoint y="-50" x="-20" name="CAM" height="2."/>
            <waypoint y="-10.9" x="5.6" name="TD"/>
          </waypoints>
          <blocks>
            <block name="Wait GPS" no="0">
              <call_once fun="NavKillThrottle()" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Geo init" no="1">
              <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
              <call_once fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Holding point" no="2">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="Start Engine" no="3">
              <call_once fun="NavResurrect()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff" name="Takeoff" no="4">
              <exception deroute="Standby" cond="stateGetPositionEnu_f() @DEREF z @GT 2.0"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="5">
              <stay wp="STDBY" no="0"/>
            </block>
            <block name="stay_p1" no="6">
              <stay wp="p1" no="0"/>
            </block>
            <block name="go_p2" no="7">
              <call_once fun="nav_set_heading_deg(90)" no="0"/>
              <go wp="p2" no="1"/>
              <deroute block="stay_p1" no="2"/>
            </block>
            <block name="line_p1_p2" no="8">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <stay wp="p2" until="stage_time>10" no="1"/>
              <go wp="p1" hmode="route" from="p2" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="route" no="9">
              <go wp="p3" hmode="route" from="p1" no="0"/>
              <go wp="p4" hmode="route" from="p3" no="1"/>
              <go wp="p1" hmode="route" from="p4" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="Oval" no="10">
              <oval radius="-1" p2="p2" p1="p1" no="1"/>
            </block>
            <block name="test yaw" no="11">
              <go wp="p1" no="0"/>
              <for var="i" to="16" from="1" no="2">
                <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
              </for>
              <deroute block="Standby" no="5"/>
            </block>
            <block pre_call="nav_set_heading_towards_waypoint(WP_CAM)" name="circle CAM" no="12">
              <circle wp="CAM" radius="nav_radius" no="0"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land Here" name="land here" no="13">
              <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
            </block>
            <block name="land" no="14">
              <go wp="TD" no="0"/>
            </block>
            <block name="flare" no="15">
              <exception deroute="Holding point" cond="NavDetectGround()"/>
              <exception deroute="landed" cond="!nav_is_in_flight()"/>
              <call_once fun="NavStartDetectGround()" no="0"/>
              <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
            </block>
            <block name="landed" no="16">
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
            </block>
            <block name="HOME" no="17">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="17" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="16" block_name="landed" stage="0">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
          </stage>
          <stage block="15" block_name="flare" stage="1">
            <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
          </stage>
          <stage block="15" block_name="flare" stage="0">
            <call_once fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="14" block_name="land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="13" block_name="land here" stage="0">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="12" block_name="circle CAM" stage="0">
            <circle wp="CAM" radius="nav_radius" no="0"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="5">
            <deroute block="Standby" no="5"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="3">
            <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="2">
            <for var="i" to="16" from="1" no="2">
              <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
            </for>
          </stage>
          <stage block="11" block_name="test yaw" stage="0">
            <go wp="p1" no="0"/>
          </stage>
          <stage block="10" block_name="Oval" stage="1">
            <oval radius="-1" p2="p2" p1="p1" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="9" block_name="route" stage="2">
            <go wp="p1" hmode="route" from="p4" no="2"/>
          </stage>
          <stage block="9" block_name="route" stage="1">
            <go wp="p4" hmode="route" from="p3" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="0">
            <go wp="p3" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="2">
            <go wp="p1" hmode="route" from="p2" no="2"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="1">
            <stay wp="p2" until="stage_time>10" no="1"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="2">
            <deroute block="stay_p1" no="2"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="1">
            <go wp="p2" no="1"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="0">
            <call_once fun="nav_set_heading_deg(90)" no="0"/>
          </stage>
          <stage block="6" block_name="stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="5" block_name="Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="1">
            <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="0">
            <call_once fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="2">
            <call_once fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="0">
            <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="air_data">
              <dl_setting VAR="air_data.qnh" STEP="1" SHORTNAME="QNH" MODULE="air_data/air_data" MIN="800" MAX="1200"/>
              <dl_setting VAR="air_data.tas_factor" TYPE="float" STEP="0.01" SHORTNAME="TASfactor" PERSISTENT="true" PARAM="AIR_DATA_TAS_FACTOR" MODULE="air_data/air_data" MIN="0.8" MAX="1.3"/>
              <dl_setting VAR="air_data.calc_qnh_once" STEP="1" SHORTNAME="calcQNH" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_airspeed" TYPE="uint8" STEP="1" SHORTNAME="calcAirspeed" PERSISTENT="true" PARAM="AIR_DATA_CALC_AIRSPEED" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_tas_factor" TYPE="uint8" STEP="1" SHORTNAME="calcTASfactor" PERSISTENT="true" PARAM="AIR_DATA_CALC_TAS_FACTOR" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_amsl_baro" TYPE="uint8" STEP="1" SHORTNAME="calcAMSL" PERSISTENT="true" PARAM="AIR_DATA_CALC_AMSL_BARO" MODULE="air_data/air_data" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
              <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
              <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
              <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
              <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Att Loop">
              <dl_setting VAR="stabilization_gains.p.x" TYPE="int32" STEP="1" SHORTNAME="pgain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_PGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="8000"/>
              <dl_setting VAR="stabilization_gains.d.x" TYPE="int32" STEP="1" SHORTNAME="dgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.x" TYPE="int32" STEP="1" SHORTNAME="igain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_IGAIN" MIN="0" MAX="800"/>
              <dl_setting VAR="stabilization_gains.dd.x" TYPE="int32" STEP="1" SHORTNAME="ddgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="stabilization_gains.p.y" TYPE="int32" STEP="1" SHORTNAME="pgain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_PGAIN" MIN="1" MAX="8000"/>
              <dl_setting VAR="stabilization_gains.d.y" TYPE="int32" STEP="1" SHORTNAME="dgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.y" TYPE="int32" STEP="1" SHORTNAME="igain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_IGAIN" MIN="0" MAX="800"/>
              <dl_setting VAR="stabilization_gains.dd.y" TYPE="int32" STEP="1" SHORTNAME="ddgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="stabilization_gains.p.z" TYPE="int32" STEP="1" SHORTNAME="pgain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_PGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.d.z" TYPE="int32" STEP="1" SHORTNAME="dgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.z" TYPE="int32" STEP="1" SHORTNAME="igain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_IGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="stabilization_gains.dd.z" TYPE="int32" STEP="1" SHORTNAME="ddgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.p" UNIT="rad/s" STEP="1" SHORTNAME="omega p" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_P" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaP" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.p" STEP="0.05" SHORTNAME="zeta p" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_P" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaP"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.q" UNIT="rad/s" STEP="1" SHORTNAME="omega q" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_Q" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaQ" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.q" STEP="0.05" SHORTNAME="zeta q" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_Q" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaQ"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.r" UNIT="rad/s" STEP="1" SHORTNAME="omega r" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_R" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaR" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.r" STEP="0.05" SHORTNAME="zeta r" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_R" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaR"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="NAV">
              <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
              <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
              <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MIN="-50" MAX="50"/>
              <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MIN="0" MAX="10.0"/>
              <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MIN="-10.0" MAX="0.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Vert Loop">
              <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
              <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MIN="0.2" MAX="0.8"/>
              <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MIN="0" MAX="1"/>
              <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
            <dl_settings NAME="Horiz Loop">
              <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="true" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
              <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
              <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MIN="0" MAX="1"/>
              <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
              <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
              <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
              <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
              <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
              <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe name="flappy">
        <description>Ornitopter frame equiped with Lisa/MXS 1.0 and MX-3.5A pwm motor controllers</description>
        <servos driver="Pwm">
          <servo name="NE" no="0" min="1100" neutral="1120" max="1900"/>
          <servo name="SE" no="1" min="1100" neutral="1120" max="1900"/>
          <servo name="SW" no="2" min="1100" neutral="1120" max="1900"/>
          <servo name="NW" no="3" min="1100" neutral="1120" max="1900"/>
        </servos>
        <commands>
          <axis name="PITCH" failsafe_value="0"/>
          <axis name="ROLL" failsafe_value="0"/>
          <axis name="YAW" failsafe_value="0"/>
          <axis name="THRUST" failsafe_value="0"/>
        </commands>
        <command_laws>
          <call fun="motor_mixing_run(autopilot_get_motors_on(),FALSE,values)"/>
          <set servo="NE" value="motor_mixing.commands[2]"/>
          <set servo="SE" value="motor_mixing.commands[3]"/>
          <set servo="SW" value="motor_mixing.commands[0]"/>
          <set servo="NW" value="motor_mixing.commands[1]"/>
        </command_laws>
        <section name="MIXING" prefix="MOTOR_MIXING_">
          <define name="TRIM_ROLL" value="0"/>
          <define name="TRIM_PITCH" value="0"/>
          <define name="TRIM_YAW" value="0"/>
          <define name="NB_MOTOR" value="4"/>
          <define name="SCALE" value="256"/>
          <define name="ROLL_COEF" value="{  -256, -256,  256,  256 }"/>
          <define name="PITCH_COEF" value="{  256, -256, -256,  256 }"/>
          <define name="YAW_COEF" value="{   -256,  256, -256,  256 }"/>
          <define name="THRUST_COEF" value="{ 256,  256,  256,  256 }"/>
        </section>
        <section name="IMU" prefix="IMU_">
          <define name="BODY_TO_IMU_PHI" value="90." unit="deg"/>
          <define name="BODY_TO_IMU_THETA" value="0." unit="deg"/>
          <define name="BODY_TO_IMU_PSI" value="90." unit="deg"/>
          <define name="ACCEL_X_NEUTRAL" value="0"/>
          <define name="ACCEL_Y_NEUTRAL" value="0"/>
          <define name="ACCEL_Z_NEUTRAL" value="0"/>
          <define name="MAG_X_NEUTRAL" value="286"/>
          <define name="MAG_Y_NEUTRAL" value="-72"/>
          <define name="MAG_Z_NEUTRAL" value="97"/>
          <define name="MAG_X_SENS" value="3.94431833863" integer="16"/>
          <define name="MAG_Y_SENS" value="4.14629702271" integer="16"/>
          <define name="MAG_Z_SENS" value="4.54518768636" integer="16"/>
        </section>
        <section name="AUTOPILOT">
          <define name="MODE_STARTUP" value="AP_MODE_NAV"/>
          <define name="MODE_MANUAL" value="AP_MODE_ATTITUDE_DIRECT"/>
          <define name="MODE_AUTO1" value="AP_MODE_ATTITUDE_Z_HOLD"/>
          <define name="MODE_AUTO2" value="AP_MODE_NAV"/>
        </section>
        <section name="BAT">
          <define name="MILLIAMP_AT_FULL_THROTTLE" value="14000"/>
          <define name="CATASTROPHIC_BAT_LEVEL" value="3.0" unit="V"/>
          <define name="CRITIC_BAT_LEVEL" value="3.3" unit="V"/>
          <define name="LOW_BAT_LEVEL" value="3.5" unit="V"/>
          <define name="MAX_BAT_LEVEL" value="4.1" unit="V"/>
        </section>
        <section name="STABILIZATION_RATE" prefix="STABILIZATION_RATE_">
          <define name="SP_MAX_P" value="15000"/>
          <define name="SP_MAX_Q" value="15000"/>
          <define name="SP_MAX_R" value="15000"/>
          <define name="GAIN_P" value="400"/>
          <define name="GAIN_Q" value="400"/>
          <define name="GAIN_R" value="418"/>
          <define name="IGAIN_P" value="301"/>
          <define name="IGAIN_Q" value="302"/>
          <define name="IGAIN_R" value="303"/>
        </section>
        <section name="STABILIZATION_ATTITUDE" prefix="STABILIZATION_ATTITUDE_">
          <define name="SP_MAX_PHI" value="90." unit="deg"/>
          <define name="SP_MAX_THETA" value="90." unit="deg"/>
          <define name="SP_MAX_PSI" value="70." unit="deg"/>
          <define name="SP_MAX_R" value="90." unit="deg/s"/>
          <define name="SP_MAX_P" value="90." unit="deg/s"/>
          <define name="DEADBAND_R" value="250"/>
          <define name="DEADBAND_A" value="250"/>
          <define name="REF_OMEGA_P" value="750" unit="deg/s"/>
          <define name="REF_ZETA_P" value="0.85"/>
          <define name="REF_MAX_P" value="300." unit="deg/s"/>
          <define name="REF_MAX_PDOT" value="RadOfDeg(8000.)"/>
          <define name="REF_OMEGA_Q" value="750" unit="deg/s"/>
          <define name="REF_ZETA_Q" value="0.85"/>
          <define name="REF_MAX_Q" value="300." unit="deg/s"/>
          <define name="REF_MAX_QDOT" value="RadOfDeg(8000.)"/>
          <define name="REF_OMEGA_R" value="250" unit="deg/s"/>
          <define name="REF_ZETA_R" value="0.85"/>
          <define name="REF_MAX_R" value="180." unit="deg/s"/>
          <define name="REF_MAX_RDOT" value="RadOfDeg(1000.)"/>
          <define name="PHI_PGAIN" value="320"/>
          <define name="PHI_DGAIN" value="220"/>
          <define name="PHI_IGAIN" value="0"/>
          <define name="THETA_PGAIN" value="320"/>
          <define name="THETA_DGAIN" value="220"/>
          <define name="THETA_IGAIN" value="0"/>
          <define name="PSI_PGAIN" value="600"/>
          <define name="PSI_DGAIN" value="0"/>
          <define name="PSI_IGAIN" value="0"/>
          <define name="PHI_DDGAIN" value="0"/>
          <define name="THETA_DDGAIN" value="0"/>
          <define name="PSI_DDGAIN" value=" 300"/>
          <define name="PHI_AGAIN" value="0"/>
          <define name="THETA_AGAIN" value="0"/>
          <define name="PSI_AGAIN" value="0"/>
        </section>
        <section name="INS" prefix="INS_"/>
        <section name="GUIDANCE_V" prefix="GUIDANCE_V_">
          <define name="HOVER_KP" value="276"/>
          <define name="HOVER_KD" value="455"/>
          <define name="HOVER_KI" value="100"/>
          <define name="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" value="0.5"/>
        </section>
        <section name="AHRS" prefix="AHRS_">
          <define name="H_X" value=" 0.47577"/>
          <define name="H_Y" value=" 0.11811"/>
          <define name="H_Z" value=" 0.87161"/>
        </section>
        <section name="GUIDANCE_H" prefix="GUIDANCE_H_">
          <define name="PGAIN" value="39"/>
          <define name="DGAIN" value="50"/>
          <define name="IGAIN" value="19"/>
        </section>
        <section name="MISC">
          <define name="VoltageOfAdc(adc)" value="(adc)*0.00162f"/>
        </section>
        <section name="SIMULATOR" prefix="NPS_">
          <define name="ACTUATOR_NAMES" value="{&quot;ne_motor&quot;, &quot;se_motor&quot;, &quot;sw_motor&quot;, &quot;nw_motor&quot;}"/>
          <define name="JSBSIM_MODEL" value="&quot;simple_x_quad_ccw&quot;"/>
          <define name="SENSORS_PARAMS" value="&quot;nps_sensors_params_default.h&quot;"/>
        </section>
        <firmware name="rotorcraft">
          <target name="ap" board="lisa_mx_2.1">
            <define name="REMAP_UART3" value="TRUE"/>
            <module name="radio_control" type="ppm"/>
            <define name="RADIO_KILL_SWITCH" value="RADIO_KILL"/>
            <define name="USE_KILL_SWITCH_FOR_MOTOR_ARMING" value="1"/>
            <configure name="AHRS_PROPAGATE_FREQUENCY" value="500"/>
          </target>
          <target name="nps" board="pc">
            <module name="fdm" type="jsbsim"/>
            <module name="radio_control" type="ppm"/>
          </target>
          <module name="motor_mixing"/>
          <module name="actuators" type="pwm">
            <define name="SERVO_HZ" value="400"/>
          </module>
          <module name="telemetry" type="transparent">
            <configure name="MODEM_PORT" value="UART1"/>
            <configure name="MODEM_BAUD" value="B115200"/>
          </module>
          <module name="imu" type="lisa_mx_v2.1"/>
          <module name="gps" type="ublox">
            <configure name="GPS_PORT" value="UART2"/>
            <configure name="GPS_BAUD" value="B38400"/>
          </module>
          <module name="stabilization" type="int_quat"/>
          <module name="ahrs" type="int_cmpl_quat">
            <configure name="USE_MAGNETOMETER" value="FALSE"/>
          </module>
          <module name="ins"/>
          <module name="air_data">
            <define name="AIR_DATA_CALC_AMSL_BARO" value="TRUE"/>
          </module>
        </firmware>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="3.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="3.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="2.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="2.3" NAME="WP_MOVED"/>
            <message PERIOD="2." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".75" NAME="GPS_INT"/>
            <message PERIOD=".75" NAME="INS"/>
            <message PERIOD="6.1" NAME="I2C_ERRORS"/>
            <message PERIOD="4.1" NAME="UART_ERRORS"/>
            <message PERIOD="4" NAME="SUPERBITRF"/>
            <message PERIOD="4" NAME="BLUEGIGA"/>
            <message PERIOD="3.5" NAME="ENERGY"/>
            <message PERIOD="6.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="4.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="2.3" NAME="AIR_DATA"/>
            <message PERIOD="4.5" NAME="SURVEY"/>
            <message PERIOD="0.5" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
            <message PERIOD="2" NAME="FBW_STATUS"/>
            <message PERIOD="0.1" NAME="ADC_GENERIC"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="BEBOP_ACTUATORS"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_INT"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="19"/>
            <dl_setting VAR="autopilot.kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot.power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot.mode" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="19" HANDLER="SetModeHandler"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="Heli450" ac_id="8" airframe="airframes/tudelft/heli450.xml" radio="radios/dummy.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/rotorcraft_basic.xml" settings="" settings_modules="modules/heli_throttle_curve.xml modules/gps_ubx_ucenter.xml modules/air_data.xml modules/geo_mag.xml modules/ahrs_int_cmpl_quat.xml modules/stabilization_rate.xml modules/stabilization_int_quat.xml modules/nav_basic_rotorcraft.xml modules/guidance_rotorcraft.xml modules/gps.xml modules/imu_common.xml" gui_color="blue">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitMM" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1120" MIN="1120" MAX="2000" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="2" name="Rotorcraft Basic (Enac)" max_dist_from_home="150" lon0="1 28 52.61" lat0="43 33 50.83" ground_alt="147" alt="152">
          <header>#include &quot;autopilot.h&quot;</header>
          <waypoints>
            <waypoint y="0.0" x="0.0" name="HOME"/>
            <waypoint y="5.0" x="0.0" name="CLIMB"/>
            <waypoint y="-5.0" x="-2.0" name="STDBY"/>
            <waypoint y="-13.9" x="3.6" name="p1"/>
            <waypoint y="-48.2" x="27.5" name="p2"/>
            <waypoint y="-19.6" x="16.7" name="p3"/>
            <waypoint y="-40.7" x="13.7" name="p4"/>
            <waypoint y="-50" x="-20" name="CAM" height="2."/>
            <waypoint y="-10.9" x="5.6" name="TD"/>
          </waypoints>
          <blocks>
            <block name="Wait GPS" no="0">
              <call_once fun="NavKillThrottle()" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Geo init" no="1">
              <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
              <call_once fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Holding point" no="2">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="Start Engine" no="3">
              <call_once fun="NavResurrect()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff" name="Takeoff" no="4">
              <exception deroute="Standby" cond="stateGetPositionEnu_f() @DEREF z @GT 2.0"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="5">
              <stay wp="STDBY" no="0"/>
            </block>
            <block name="stay_p1" no="6">
              <stay wp="p1" no="0"/>
            </block>
            <block name="go_p2" no="7">
              <call_once fun="nav_set_heading_deg(90)" no="0"/>
              <go wp="p2" no="1"/>
              <deroute block="stay_p1" no="2"/>
            </block>
            <block name="line_p1_p2" no="8">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <stay wp="p2" until="stage_time>10" no="1"/>
              <go wp="p1" hmode="route" from="p2" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="route" no="9">
              <go wp="p3" hmode="route" from="p1" no="0"/>
              <go wp="p4" hmode="route" from="p3" no="1"/>
              <go wp="p1" hmode="route" from="p4" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="Oval" no="10">
              <oval radius="-1" p2="p2" p1="p1" no="1"/>
            </block>
            <block name="test yaw" no="11">
              <go wp="p1" no="0"/>
              <for var="i" to="16" from="1" no="2">
                <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
              </for>
              <deroute block="Standby" no="5"/>
            </block>
            <block pre_call="nav_set_heading_towards_waypoint(WP_CAM)" name="circle CAM" no="12">
              <circle wp="CAM" radius="nav_radius" no="0"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land Here" name="land here" no="13">
              <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
            </block>
            <block name="land" no="14">
              <go wp="TD" no="0"/>
            </block>
            <block name="flare" no="15">
              <exception deroute="Holding point" cond="NavDetectGround()"/>
              <exception deroute="landed" cond="!nav_is_in_flight()"/>
              <call_once fun="NavStartDetectGround()" no="0"/>
              <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
            </block>
            <block name="landed" no="16">
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
            </block>
            <block name="HOME" no="17">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="17" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="16" block_name="landed" stage="0">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
          </stage>
          <stage block="15" block_name="flare" stage="1">
            <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
          </stage>
          <stage block="15" block_name="flare" stage="0">
            <call_once fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="14" block_name="land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="13" block_name="land here" stage="0">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="12" block_name="circle CAM" stage="0">
            <circle wp="CAM" radius="nav_radius" no="0"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="5">
            <deroute block="Standby" no="5"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="3">
            <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="2">
            <for var="i" to="16" from="1" no="2">
              <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
            </for>
          </stage>
          <stage block="11" block_name="test yaw" stage="0">
            <go wp="p1" no="0"/>
          </stage>
          <stage block="10" block_name="Oval" stage="1">
            <oval radius="-1" p2="p2" p1="p1" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="9" block_name="route" stage="2">
            <go wp="p1" hmode="route" from="p4" no="2"/>
          </stage>
          <stage block="9" block_name="route" stage="1">
            <go wp="p4" hmode="route" from="p3" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="0">
            <go wp="p3" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="2">
            <go wp="p1" hmode="route" from="p2" no="2"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="1">
            <stay wp="p2" until="stage_time>10" no="1"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="2">
            <deroute block="stay_p1" no="2"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="1">
            <go wp="p2" no="1"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="0">
            <call_once fun="nav_set_heading_deg(90)" no="0"/>
          </stage>
          <stage block="6" block_name="stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="5" block_name="Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="1">
            <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="0">
            <call_once fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="2">
            <call_once fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="0">
            <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="ThrottleCurve">
              <dl_setting VAR="throttle_curve.rpm_fb_p" STEP="0.005" SHORTNAME="rpm_fb_p" PARAM="THROTTLE_CURVE_RPM_FB_P" MIN="0.00" MAX="100"/>
              <dl_setting VAR="throttle_curve.rpm_fb_i" STEP="0.005" SHORTNAME="rpm_fb_i" PARAM="THROTTLE_CURVE_RPM_FB_I" MIN="0.00" MAX="100"/>
              <dl_setting VAR="throttle_curve.throttle_trim" STEP="0" SHORTNAME="throttle_trim" MIN="-9600" MAX="9600"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="ublox">
            <dl_settings NAME="ucenter">
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_h" STEP="1" SHORTNAME="sw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_l" STEP="1" SHORTNAME="sw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_h" STEP="1" SHORTNAME="hw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_l" STEP="1" SHORTNAME="hw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_init" STEP="100" SHORTNAME="inibaud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_run" STEP="100" SHORTNAME="baud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="air_data">
              <dl_setting VAR="air_data.qnh" STEP="1" SHORTNAME="QNH" MODULE="air_data/air_data" MIN="800" MAX="1200"/>
              <dl_setting VAR="air_data.tas_factor" TYPE="float" STEP="0.01" SHORTNAME="TASfactor" PERSISTENT="true" PARAM="AIR_DATA_TAS_FACTOR" MODULE="air_data/air_data" MIN="0.8" MAX="1.3"/>
              <dl_setting VAR="air_data.calc_qnh_once" STEP="1" SHORTNAME="calcQNH" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_airspeed" TYPE="uint8" STEP="1" SHORTNAME="calcAirspeed" PERSISTENT="true" PARAM="AIR_DATA_CALC_AIRSPEED" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_tas_factor" TYPE="uint8" STEP="1" SHORTNAME="calcTASfactor" PERSISTENT="true" PARAM="AIR_DATA_CALC_TAS_FACTOR" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_amsl_baro" TYPE="uint8" STEP="1" SHORTNAME="calcAMSL" PERSISTENT="true" PARAM="AIR_DATA_CALC_AMSL_BARO" MODULE="air_data/air_data" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="geo_mag">
              <dl_setting VAR="geo_mag.calc_once" VALUES="OFF|CALC" STEP="1" SHORTNAME="calcNow" MODULE="geo_mag/geo_mag" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
              <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
              <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
              <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
              <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Rate Loop">
              <dl_setting VAR="stabilization_rate_gain.p" TYPE="int32" STEP="1" SHORTNAME="pgain p" PERSISTENT="true" PARAM="STABILIZATION_RATE_GAIN_P" MODULE="stabilization/stabilization_rate" MIN="1" MAX="1000"/>
              <dl_setting VAR="stabilization_rate_gain.q" TYPE="int32" STEP="1" SHORTNAME="pgain q" PERSISTENT="true" PARAM="STABILIZATION_RATE_GAIN_Q" MIN="1" MAX="1000"/>
              <dl_setting VAR="stabilization_rate_gain.r" TYPE="int32" STEP="1" SHORTNAME="pgain r" PERSISTENT="true" PARAM="STABILIZATION_RATE_GAIN_R" MIN="1" MAX="1000"/>
              <dl_setting VAR="stabilization_rate_igain.p" TYPE="int32" STEP="1" SHORTNAME="igain p" PERSISTENT="true" PARAM="STABILIZATION_RATE_IGAIN_P" MIN="0" MAX="500"/>
              <dl_setting VAR="stabilization_rate_igain.q" TYPE="int32" STEP="1" SHORTNAME="igain q" PERSISTENT="true" PARAM="STABILIZATION_RATE_IGAIN_Q" MIN="0" MAX="500"/>
              <dl_setting VAR="stabilization_rate_igain.r" TYPE="int32" STEP="1" SHORTNAME="igain r" PERSISTENT="true" PARAM="STABILIZATION_RATE_IGAIN_R" MIN="0" MAX="500"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Att Loop">
              <dl_setting VAR="stabilization_gains.p.x" TYPE="int32" STEP="1" SHORTNAME="pgain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_PGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="8000"/>
              <dl_setting VAR="stabilization_gains.d.x" TYPE="int32" STEP="1" SHORTNAME="dgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.x" TYPE="int32" STEP="1" SHORTNAME="igain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_IGAIN" MIN="0" MAX="800"/>
              <dl_setting VAR="stabilization_gains.dd.x" TYPE="int32" STEP="1" SHORTNAME="ddgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="stabilization_gains.p.y" TYPE="int32" STEP="1" SHORTNAME="pgain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_PGAIN" MIN="1" MAX="8000"/>
              <dl_setting VAR="stabilization_gains.d.y" TYPE="int32" STEP="1" SHORTNAME="dgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.y" TYPE="int32" STEP="1" SHORTNAME="igain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_IGAIN" MIN="0" MAX="800"/>
              <dl_setting VAR="stabilization_gains.dd.y" TYPE="int32" STEP="1" SHORTNAME="ddgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="stabilization_gains.p.z" TYPE="int32" STEP="1" SHORTNAME="pgain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_PGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.d.z" TYPE="int32" STEP="1" SHORTNAME="dgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.z" TYPE="int32" STEP="1" SHORTNAME="igain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_IGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="stabilization_gains.dd.z" TYPE="int32" STEP="1" SHORTNAME="ddgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.p" UNIT="rad/s" STEP="1" SHORTNAME="omega p" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_P" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaP" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.p" STEP="0.05" SHORTNAME="zeta p" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_P" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaP"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.q" UNIT="rad/s" STEP="1" SHORTNAME="omega q" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_Q" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaQ" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.q" STEP="0.05" SHORTNAME="zeta q" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_Q" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaQ"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.r" UNIT="rad/s" STEP="1" SHORTNAME="omega r" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_R" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaR" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.r" STEP="0.05" SHORTNAME="zeta r" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_R" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaR"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="NAV">
              <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
              <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
              <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MIN="-50" MAX="50"/>
              <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MIN="0" MAX="10.0"/>
              <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MIN="-10.0" MAX="0.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Vert Loop">
              <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
              <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MIN="0.2" MAX="0.8"/>
              <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MIN="0" MAX="1"/>
              <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
            <dl_settings NAME="Horiz Loop">
              <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="true" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
              <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
              <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MIN="0" MAX="1"/>
              <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
              <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
              <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
              <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
              <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
              <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="heli450">
        <description>450 sized helicopter without hiller bar.</description>
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="lisa_m_2.0"/>
          <module TYPE="spektrum" NAME="radio_control">
            <define VALUE="RADIO_AUX1" NAME="RADIO_KILL_SWITCH"/>
            <define VALUE="RADIO_GEAR" NAME="RADIO_MODE"/>
            <define VALUE="RADIO_AUX2" NAME="RADIO_FMODE"/>
          </module>
          <module TYPE="pwm" NAME="actuators"/>
          <module TYPE="xbee_api" NAME="telemetry"/>
          <module TYPE="aspirin_v2.2" NAME="imu"/>
          <module TYPE="ublox" NAME="gps"/>
          <module TYPE="int_quat" NAME="stabilization"/>
          <module TYPE="rate" NAME="stabilization"/>
          <module TYPE="int_cmpl_quat" NAME="ahrs"/>
          <module TYPE="hff" NAME="ins"/>
          <module NAME="geo_mag"/>
          <module NAME="air_data"/>
          <module TYPE="ubx_ucenter" NAME="gps"/>
          <module NAME="heli_swashplate_mixing"/>
          <module NAME="heli_throttle_curve"/>
        </firmware>
        <servos DRIVER="Pwm">
          <servo NO="0" NEUTRAL="1000" NAME="THROTTLE" MIN="1000" MAX="2000"/>
          <servo NO="1" NEUTRAL="1500" NAME="BACK" MIN="1050" MAX="1950"/>
          <servo NO="2" NEUTRAL="1500" NAME="LEFTFRONT" MIN="1050" MAX="1950"/>
          <servo NO="3" NEUTRAL="1500" NAME="RIGHTFRONT" MIN="1950" MAX="1050"/>
          <servo NO="4" NEUTRAL="1600" NAME="TAIL" MIN="1850" MAX="1350"/>
        </servos>
        <commands>
          <axis NAME="THRUST" FAILSAFE_VALUE="0"/>
          <axis NAME="COLLECTIVE" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="FMODE" FAILSAFE_VALUE="0"/>
        </commands>
        <rc_commands>
          <set VALUE="@THROTTLE" COMMAND="THRUST"/>
          <set VALUE="@ROLL" COMMAND="ROLL"/>
          <set VALUE="@PITCH" COMMAND="PITCH"/>
          <set VALUE="@YAW" COMMAND="YAW"/>
          <set VALUE="@AUX2" COMMAND="FMODE"/>
        </rc_commands>
        <section PREFIX="SW_MIXING_" NAME="MIXING">
          <define VALUE="HR120" NAME="TYPE"/>
          <define VALUE="0" NAME="TRIM_ROLL"/>
          <define VALUE="0" NAME="TRIM_PITCH"/>
          <define VALUE="0" NAME="TRIM_COLL"/>
        </section>
        <command_laws>
          <call FUN="swashplate_mixing_run(values)"/>
          <set VALUE="throttle_curve.throttle" SERVO="THROTTLE"/>
          <set VALUE="swashplate_mixing.commands[SW_BACK]" SERVO="BACK"/>
          <set VALUE="swashplate_mixing.commands[SW_LEFTFRONT]" SERVO="LEFTFRONT"/>
          <set VALUE="swashplate_mixing.commands[SW_RIGHTFRONT]" SERVO="RIGHTFRONT"/>
          <set VALUE="@YAW + throttle_curve.throttle*2800/7000" SERVO="TAIL"/>
        </command_laws>
        <heli_curves>
          <curve THROTTLE="0,4800,7200,8400,9600" COLLECTIVE="-1000,750,2500,4250,6000"/>
          <curve THROTTLE="9600,7200,9600" COLLECTIVE="-7500,0,7500"/>
        </heli_curves>
        <section NAME="MISC">
          <define VALUE="2.5" NAME="NAV_CLIMB_VSPEED"/>
          <define VALUE="-1.0" NAME="NAV_DESCEND_VSPEED"/>
          <define VALUE="TRUE" NAME="NO_RC_THRUST_LIMIT"/>
        </section>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="11" NAME="ACCEL_X_NEUTRAL"/>
          <define VALUE="11" NAME="ACCEL_Y_NEUTRAL"/>
          <define VALUE="-25" NAME="ACCEL_Z_NEUTRAL"/>
          <define VALUE="14" NAME="MAG_X_NEUTRAL"/>
          <define VALUE="116" NAME="MAG_Y_NEUTRAL"/>
          <define VALUE="119" NAME="MAG_Z_NEUTRAL"/>
          <define VALUE="5.09245681612" NAME="MAG_X_SENS" INTEGER="16"/>
          <define VALUE="5.29702744632" NAME="MAG_Y_SENS" INTEGER="16"/>
          <define VALUE="5.65287938992" NAME="MAG_Z_SENS" INTEGER="16"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="-90." UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0" NAME="GRAVITY_HEURISTIC_FACTOR"/>
          <define VALUE="0.3770441" NAME="H_X"/>
          <define VALUE="0.0193986" NAME="H_Y"/>
          <define VALUE="0.9259921" NAME="H_Z"/>
        </section>
        <section PREFIX="STABILIZATION_RATE_" NAME="STABILIZATION_RATE">
          <define VALUE="280" UNIT="deg/s" NAME="SP_MAX_P"/>
          <define VALUE="280" UNIT="deg/s" NAME="SP_MAX_Q"/>
          <define VALUE="140" UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="20" NAME="DEADBAND_P"/>
          <define VALUE="20" NAME="DEADBAND_Q"/>
          <define VALUE="200" NAME="DEADBAND_R"/>
          <define VALUE="800" NAME="GAIN_P"/>
          <define VALUE="800" NAME="GAIN_Q"/>
          <define VALUE="700" NAME="GAIN_R"/>
          <define VALUE="240" NAME="IGAIN_P"/>
          <define VALUE="240" NAME="IGAIN_Q"/>
          <define VALUE="160" NAME="IGAIN_R"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="STABILIZATION_ATTITUDE">
          <define VALUE="65." UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="65." UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="250." UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="200" NAME="DEADBAND_R"/>
          <define VALUE="800" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.85" NAME="REF_ZETA_P"/>
          <define VALUE="300." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(7000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="800" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.85" NAME="REF_ZETA_Q"/>
          <define VALUE="300." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(7000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="500" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.85" NAME="REF_ZETA_R"/>
          <define VALUE="180." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(1800.)" NAME="REF_MAX_RDOT"/>
          <define VALUE="900" NAME="PHI_PGAIN"/>
          <define VALUE="200" NAME="PHI_DGAIN"/>
          <define VALUE="200" NAME="PHI_IGAIN"/>
          <define VALUE="900" NAME="THETA_PGAIN"/>
          <define VALUE="200" NAME="THETA_DGAIN"/>
          <define VALUE="200" NAME="THETA_IGAIN"/>
          <define VALUE="900" NAME="PSI_PGAIN"/>
          <define VALUE="200" NAME="PSI_DGAIN"/>
          <define VALUE="10" NAME="PSI_IGAIN"/>
          <define VALUE=" 200" NAME="PHI_DDGAIN"/>
          <define VALUE=" 200" NAME="THETA_DDGAIN"/>
          <define VALUE=" 200" NAME="PSI_DDGAIN"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="150" NAME="HOVER_KP"/>
          <define VALUE="80" NAME="HOVER_KD"/>
          <define VALUE="20" NAME="HOVER_KI"/>
          <define VALUE="0.5" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="TRUE" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="35" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="TRUE" NAME="USE_SPEED_REF"/>
          <define VALUE="50" NAME="PGAIN"/>
          <define VALUE="100" NAME="DGAIN"/>
          <define VALUE="70" NAME="AGAIN"/>
          <define VALUE="20" NAME="IGAIN"/>
        </section>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_RC_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_HOVER_Z_HOLD" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_NAV" NAME="MODE_AUTO2"/>
        </section>
        <section NAME="BAT">
          <define VALUE="9.3" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="9.6" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="10.1" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="12.4" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.05" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
            <message PERIOD="0.05" NAME="OPTICAL_FLOW_HOVER"/>
            <message PERIOD="0.10" NAME="VISUALTARGET"/>
            <message PERIOD="0.1" NAME="VISION_POSITION_ESTIMATE"/>
            <message PERIOD="0.05" NAME="DIVERGENCE"/>
            <message PERIOD="0.02" NAME="DRAGSPEED"/>
            <message PERIOD="5.1" NAME="LOGGER_STATUS"/>
            <message PERIOD="1.2" NAME="LIDAR"/>
            <message PERIOD=".25" NAME="INS_EKF2"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="BEBOP_ACTUATORS"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_FLOAT"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
            <message PERIOD="2.0" NAME="INDI_G"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="vel_guidance" KEY_PRESS="q">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HYBRID_GUIDANCE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1.0" NAME="GPS_INT"/>
            <message PERIOD="1.0" NAME="INS"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="RTCM3">
            <message PERIOD="1" NAME="GPS_RXMRTCM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD="1" NAME="GPS_RTK"/>
          </mode>
        </process>
        <process NAME="FlightRecorder">
          <mode NAME="default">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD=".1" NAME="GPS_INT"/>
            <message PERIOD=".1" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".2" NAME="IMU_MAG_SCALED"/>
            <message PERIOD="0.05" NAME="LIDAR"/>
          </mode>
        </process>
      </telemetry>
    </aircraft>
    <aircraft name="Iris" ac_id="66" airframe="airframes/tudelft/iris_indi.xml" radio="radios/FrSky3dr.xml" telemetry="telemetry/default_rotorcraft_slow.xml" flight_plan="flight_plans/tudelft/delft_basic.xml" settings="settings/rotorcraft_basic.xml" settings_modules="[modules/air_data.xml] modules/geo_mag.xml modules/ins_extended.xml modules/ahrs_int_cmpl_quat.xml modules/stabilization_indi_simple.xml modules/nav_basic_rotorcraft.xml modules/guidance_rotorcraft.xml modules/gps_ubx_ucenter.xml modules/gps.xml modules/imu_common.xml" gui_color="#ffffcccaccca" release="433c2150022275f26fb4619e536903676d7e2c9e">
      <radio SYNC_MIN="8000" SYNC_MAX="19000" PULSE_TYPE="POSITIVE" NAME="FrSky X9D + X8R receiver SBus connection" DATA_MIN="350" DATA_MAX="2500">
        <channel NEUTRAL="1490" MIN="990" MAX="2015" FUNCTION="ROLL" CTL="D" AVERAGE="0"/>
        <channel NEUTRAL="1490" MIN="990" MAX="2015" FUNCTION="PITCH" CTL="C" AVERAGE="0"/>
        <channel NEUTRAL="990" MIN="990" MAX="2015" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
        <channel NEUTRAL="1490" MIN="990" MAX="2015" FUNCTION="YAW" CTL="B" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1145" MAX="1862" FUNCTION="MODE" CTL="RSwtiches_Mix" AVERAGE="1"/>
        <channel NEUTRAL="990" MIN="990" MAX="2015" FUNCTION="AUX2" CTL="TILT" AVERAGE="0"/>
        <channel NEUTRAL="1490" MIN="2015" MAX="990" FUNCTION="KILL" CTL="CH7" AVERAGE="1"/>
        <channel NEUTRAL="1900" MIN="990" MAX="2015" FUNCTION="UNUSED2" CTL="E" AVERAGE="1"/>
      </radio>
      <dump>
        <flight_plan security_height="2" name="Delft Basic" max_dist_from_home="1000" lon0="4 22 42.0" lat0="51 59 27.6" ground_alt="0" alt="4">
          <header>    #include &quot;autopilot.h&quot;
    #include &quot;subsystems/datalink/datalink.h&quot;
    #include &quot;subsystems/electrical.h&quot;
    #include &quot;subsystems/radio_control.h&quot;</header>
          <waypoints>
            <waypoint y="0.0" x="0.0" name="HOME"/>
            <waypoint y="5.0" x="0.0" name="CLIMB"/>
            <waypoint y="-5.0" x="-2.0" name="STDBY"/>
            <waypoint y="14.3" x="-19.9" name="p1"/>
            <waypoint y="21.6" x="-0.6" name="p2"/>
            <waypoint y="-26.5" x="22.2" name="p3"/>
            <waypoint y="-34.4" x="4.9" name="p4"/>
            <waypoint y="-29.4" x="14.2" name="CAM"/>
            <waypoint y="-10.9" x="5.6" name="TD"/>
          </waypoints>
          <exceptions>
            <exception deroute="ComeBackAndLand" cond="((radio_control.status == RC_REALLY_LOST) &&
      !(IndexOfBlock('Takeoff') > nav_block) &&
      !(nav_block >= IndexOfBlock('land here')) &&
      (autopilot_in_flight() == true) )"/>
            <exception deroute="DatalinkLoss" cond="(datalink_time > 60 &&
      !(datalink_time > 120) &&
      !(IndexOfBlock('Takeoff') > nav_block) &&
      !(nav_block >= IndexOfBlock('land here')) &&
      (autopilot_in_flight() == true) )"/>
            <exception deroute="ComeBackAndLand" cond="(electrical.bat_low &&
      !(IndexOfBlock('Holding point') > nav_block) &&
      !(nav_block >= IndexOfBlock('land here')) &&
      (autopilot_in_flight() == true) )"/>
            <exception deroute="land here" cond="(electrical.bat_critical &&
      !(IndexOfBlock('Holding point') > nav_block) &&
      !(nav_block >= IndexOfBlock('land here')) &&
      (autopilot_in_flight() == true) )"/>
          </exceptions>
          <blocks>
            <block name="Wait GPS" no="0">
              <call_once fun="NavKillThrottle()" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Geo init" no="1">
              <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
              <call_once fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Holding point" no="2">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="Start Engine" no="3">
              <call_once fun="NavResurrect()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff" name="Takeoff" no="4">
              <exception deroute="Standby" cond="stateGetPositionEnu_f()->z > 2.0"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="5">
              <stay wp="STDBY" no="0"/>
            </block>
            <block name="stay_p1" no="6">
              <stay wp="p1" no="0"/>
            </block>
            <block name="go_p2" no="7">
              <go wp="p2" no="0"/>
              <deroute block="stay_p1" no="1"/>
            </block>
            <block name="line_p1_p2" no="8">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <stay wp="p2" until="stage_time>10" no="1"/>
              <go wp="p1" hmode="route" from="p2" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="route" no="9">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <go wp="p3" hmode="route" from="p2" no="1"/>
              <go wp="p4" hmode="route" from="p3" no="2"/>
              <go wp="p1" hmode="route" from="p4" no="3"/>
              <deroute block="stay_p1" no="4"/>
            </block>
            <block name="test yaw" no="10">
              <go wp="p1" no="0"/>
              <for var="i" to="16" from="1" no="2">
                <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
              </for>
              <deroute block="Standby" no="5"/>
            </block>
            <block pre_call="nav_set_heading_towards_waypoint(WP_CAM)" name="circle CAM" no="11">
              <circle wp="CAM" radius="nav_radius" no="0"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land Here" name="land here" no="12">
              <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
            </block>
            <block name="land" no="13">
              <go wp="TD" no="0"/>
            </block>
            <block name="flare" no="14">
              <exception deroute="Holding point" cond="NavDetectGround()"/>
              <exception deroute="landed" cond="!nav_is_in_flight()"/>
              <call_once fun="NavStartDetectGround()" no="0"/>
              <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
            </block>
            <block name="landed" no="15">
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
            </block>
            <block name="ComeBackAndLand" no="16">
              <go wp="HOME" no="0"/>
              <deroute block="land here" no="1"/>
            </block>
            <block name="DatalinkLoss" no="17">
              <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
              <stay wp="TD" until="stage_time>60" no="1"/>
              <deroute block="ComeBackAndLand" no="2"/>
            </block>
            <block name="HOME" no="18">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="18" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="17" block_name="DatalinkLoss" stage="2">
            <deroute block="ComeBackAndLand" no="2"/>
          </stage>
          <stage block="17" block_name="DatalinkLoss" stage="1">
            <stay wp="TD" until="stage_time>60" no="1"/>
          </stage>
          <stage block="17" block_name="DatalinkLoss" stage="0">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="16" block_name="ComeBackAndLand" stage="1">
            <deroute block="land here" no="1"/>
          </stage>
          <stage block="16" block_name="ComeBackAndLand" stage="0">
            <go wp="HOME" no="0"/>
          </stage>
          <stage block="15" block_name="landed" stage="0">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
          </stage>
          <stage block="14" block_name="flare" stage="1">
            <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
          </stage>
          <stage block="14" block_name="flare" stage="0">
            <call_once fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="13" block_name="land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="12" block_name="land here" stage="0">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="11" block_name="circle CAM" stage="0">
            <circle wp="CAM" radius="nav_radius" no="0"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="5">
            <deroute block="Standby" no="5"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="3">
            <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="2">
            <for var="i" to="16" from="1" no="2">
              <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
            </for>
          </stage>
          <stage block="10" block_name="test yaw" stage="0">
            <go wp="p1" no="0"/>
          </stage>
          <stage block="9" block_name="route" stage="4">
            <deroute block="stay_p1" no="4"/>
          </stage>
          <stage block="9" block_name="route" stage="3">
            <go wp="p1" hmode="route" from="p4" no="3"/>
          </stage>
          <stage block="9" block_name="route" stage="2">
            <go wp="p4" hmode="route" from="p3" no="2"/>
          </stage>
          <stage block="9" block_name="route" stage="1">
            <go wp="p3" hmode="route" from="p2" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="2">
            <go wp="p1" hmode="route" from="p2" no="2"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="1">
            <stay wp="p2" until="stage_time>10" no="1"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="1">
            <deroute block="stay_p1" no="1"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="0">
            <go wp="p2" no="0"/>
          </stage>
          <stage block="6" block_name="stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="5" block_name="Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="1">
            <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="0">
            <call_once fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="2">
            <call_once fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="0">
            <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="geo_mag">
              <dl_setting VAR="geo_mag.calc_once" VALUES="OFF|CALC" STEP="1" SHORTNAME="calcNow" MODULE="geo_mag/geo_mag" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="Ins Extended">
            <dl_settings NAME="INS">
              <dl_setting VAR="vff.accel_noise" STEP="0.1" SHORTNAME="accel_noise" MODULE="subsystems/ins/vf_extended_float" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_baro" STEP="0.1" SHORTNAME="r_baro" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_alt" STEP="0.1" SHORTNAME="r_alt" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_obs_height" STEP="0.1" SHORTNAME="r_obs_height" MIN="0" MAX="10"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
              <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
              <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
              <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
              <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="indi">
              <dl_setting VAR="indi.reference_acceleration.err_p" STEP="1" SHORTNAME="kp_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_P" MODULE="stabilization/stabilization_indi_simple" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_p" STEP="0.1" SHORTNAME="kd_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.p" STEP="0.001" SHORTNAME="ctl_eff_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_P" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.reference_acceleration.err_q" STEP="1" SHORTNAME="kp_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_Q" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_q" STEP="0.1" SHORTNAME="kd_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.q" STEP="0.001" SHORTNAME="ctl_eff_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_Q" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.reference_acceleration.err_r" STEP="1" SHORTNAME="kp_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_R" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_r" STEP="0.1" SHORTNAME="kd_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.r" STEP="0.001" SHORTNAME="ctl_eff_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_R" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.g2" STEP="0.01" SHORTNAME="g2" PERSISTENT="true" PARAM="STABILIZATION_INDI_G2_R" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.adaptive" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="use_adaptive" PERSISTENT="true" PARAM="STABILIZATION_INDI_USE_ADAPTIVE" MIN="0" MAX="1"/>
              <dl_setting VAR="indi.max_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_rate" PARAM="STABILIZATION_INDI_MAX_RATE" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
              <dl_setting VAR="indi.attitude_max_yaw_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_yaw_rate_attitude" PARAM="STABILIZATION_INDI_MAX_R" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="NAV">
              <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
              <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
              <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MIN="-50" MAX="50"/>
              <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MIN="0" MAX="10.0"/>
              <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MIN="-10.0" MAX="0.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Vert Loop">
              <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
              <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MIN="0.2" MAX="0.8"/>
              <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MIN="0" MAX="1"/>
              <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
            <dl_settings NAME="Horiz Loop">
              <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="true" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
              <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
              <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MIN="0" MAX="1"/>
              <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
              <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
              <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
              <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
              <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
              <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="ublox">
            <dl_settings NAME="ucenter">
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_h" STEP="1" SHORTNAME="sw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_l" STEP="1" SHORTNAME="sw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_h" STEP="1" SHORTNAME="hw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_l" STEP="1" SHORTNAME="hw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_init" STEP="100" SHORTNAME="inibaud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_run" STEP="100" SHORTNAME="baud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="iris_indi">
        <description>3DR IRIS</description>
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="px4fmu_2.4"/>
          <define VALUE="80" NAME="BAT_CHECKER_DELAY"/>
          <define VALUE="true" NAME="RADIO_MODE_2x3"/>
          <define VALUE="80" NAME="CATASTROPHIC_BATTERY_KILL_DELAY"/>
          <module TYPE="transparent" NAME="telemetry"/>
          <module TYPE="px4fmu_v2.4" NAME="imu"/>
          <module TYPE="ublox" NAME="gps">
            <configure VALUE="B57600" NAME="GPS_BAUD"/>
          </module>
          <module TYPE="ubx_ucenter" NAME="gps"/>
          <module TYPE="indi_simple" NAME="stabilization"/>
          <module TYPE="int_cmpl_quat" NAME="ahrs">
            <define VALUE="IMU_PX4_ID" NAME="AHRS_ICQ_IMU_ID"/>
            <define VALUE="MAG_HMC58XX_SENDER_ID" NAME="AHRS_ICQ_MAG_ID"/>
            <configure VALUE="TRUE" NAME="USE_MAGNETOMETER"/>
            <define VALUE="FALSE" NAME="AHRS_USE_GPS_HEADING"/>
          </module>
          <module TYPE="extended" NAME="ins"/>
          <module NAME="current_sensor">
            <configure VALUE="ADC_3" NAME="ADC_CURRENT_SENSOR"/>
          </module>
          <module TYPE="uart" NAME="intermcu">
            <configure VALUE="UART6" NAME="INTERMCU_PORT"/>
            <configure VALUE="B1500000" NAME="INTERMCU_BAUD"/>
          </module>
          <module TYPE="pwm" NAME="actuators">
            <define VALUE="400" NAME="SERVO_HZ"/>
          </module>
        </firmware>
        <firmware NAME="rotorcraft">
          <target NAME="fbw" BOARD="px4io_2.4"/>
          <module NAME="motor_mixing"/>
          <module TYPE="ppm" NAME="radio_control">
            <define VALUE="1" NAME="USE_KILL_SWITCH_FOR_MOTOR_ARMING"/>
            <define VALUE="RADIO_KILL" NAME="RADIO_KILL_SWITCH"/>
          </module>
          <define VALUE="true" NAME="FBW_MODE_AUTO_ONLY"/>
          <module TYPE="pwm" NAME="actuators">
            <define VALUE="400" NAME="SERVO_HZ"/>
          </module>
          <define VALUE="FBW_MODE_FAILSAFE" NAME="RC_LOST_FBW_MODE"/>
          <define VALUE="FBW_MODE_AUTO" NAME="RC_LOST_IN_AUTO_FBW_MODE"/>
          <define VALUE="FBW_MODE_FAILSAFE" NAME="AP_LOST_FBW_MODE"/>
          <define VALUE="100" NAME="INTERMCU_LOST_CNT"/>
          <module TYPE="uart" NAME="intermcu">
            <configure VALUE="UART2" NAME="INTERMCU_PORT"/>
            <configure VALUE="B1500000" NAME="INTERMCU_BAUD"/>
          </module>
        </firmware>
        <modules MAIN_FREQ="512">
          <module NAME="px4_flash">
            <configure VALUE="uart6" NAME="PX4IO_UART"/>
          </module>
          <module NAME="px4_gimbal"/>
          <module NAME="geo_mag"/>
          <module NAME="air_data"/>
          <module NAME="send_imu_mag_current"/>
          <module TYPE="hmc58xx" NAME="mag">
            <configure VALUE="i2c1" NAME="MAG_HMC58XX_I2C_DEV"/>
            <define VALUE="TRUE" NAME="MODULE_HMC58XX_UPDATE_AHRS"/>
            <define VALUE="1" NAME="HMC58XX_CHAN_X"/>
            <define VALUE="0" NAME="HMC58XX_CHAN_Y"/>
            <define VALUE="2" NAME="HMC58XX_CHAN_Z"/>
            <define VALUE="-" NAME="HMC58XX_CHAN_X_SIGN"/>
            <define VALUE="+" NAME="HMC58XX_CHAN_Y_SIGN"/>
            <define VALUE="+" NAME="HMC58XX_CHAN_Z_SIGN"/>
          </module>
        </modules>
        <section NAME="MISC">
          <define VALUE="((float)adc) * (3.3f / 4096.0f) * (90.0f / 5.0f)" NAME="MilliAmpereOfAdc(adc)"/>
        </section>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="49" NAME="ACCEL_X_NEUTRAL"/>
          <define VALUE="6" NAME="ACCEL_Y_NEUTRAL"/>
          <define VALUE="104" NAME="ACCEL_Z_NEUTRAL"/>
          <define VALUE="7.53390969897" NAME="ACCEL_X_SENS" INTEGER="16"/>
          <define VALUE="7.35267287758" NAME="ACCEL_Y_SENS" INTEGER="16"/>
          <define VALUE="7.45488455799" NAME="ACCEL_Z_SENS" INTEGER="16"/>
          <define VALUE="105" NAME="MAG_X_NEUTRAL"/>
          <define VALUE="10" NAME="MAG_Y_NEUTRAL"/>
          <define VALUE="-23" NAME="MAG_Z_NEUTRAL"/>
          <define VALUE="4.01453293111" NAME="MAG_X_SENS" INTEGER="16"/>
          <define VALUE="3.96379405627" NAME="MAG_Y_SENS" INTEGER="16"/>
          <define VALUE="3.92499630895" NAME="MAG_Z_SENS" INTEGER="16"/>
        </section>
        <commands>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="0"/>
        </commands>
        <rc_commands>
          <set VALUE="@THROTTLE" COMMAND="THRUST"/>
          <set VALUE="@ROLL" COMMAND="ROLL"/>
          <set VALUE="@PITCH" COMMAND="PITCH"/>
          <set VALUE="@YAW" COMMAND="YAW"/>
        </rc_commands>
        <servos DRIVER="Default">
          <servo NO="2" NEUTRAL="1100" NAME="TOP_LEFT" MIN="1000" MAX="2000"/>
          <servo NO="0" NEUTRAL="1100" NAME="TOP_RIGHT" MIN="1000" MAX="2000"/>
          <servo NO="3" NEUTRAL="1100" NAME="BOTTOM_RIGHT" MIN="1000" MAX="2000"/>
          <servo NO="1" NEUTRAL="1100" NAME="BOTTOM_LEFT" MIN="1000" MAX="2000"/>
        </servos>
        <section PREFIX="MOTOR_MIXING_" NAME="MIXING">
          <define VALUE="0" NAME="TRIM_ROLL"/>
          <define VALUE="0" NAME="TRIM_PITCH"/>
          <define VALUE="0" NAME="TRIM_YAW"/>
          <define VALUE="FALSE" NAME="REVERSE"/>
          <define VALUE="QUAD_X" NAME="TYPE"/>
        </section>
        <command_laws>
          <call FUN="motor_mixing_run(fbw_motors_on,FALSE,values)"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_LEFT]" SERVO="TOP_LEFT"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_RIGHT]" SERVO="TOP_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_RIGHT]" SERVO="BOTTOM_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_LEFT]" SERVO="BOTTOM_LEFT"/>
        </command_laws>
        <section PREFIX="AIR_DATA_" NAME="AIR_DATA">
          <define VALUE="FALSE" NAME="CALC_AIRSPEED"/>
          <define VALUE="FALSE" NAME="CALC_TAS_FACTOR"/>
          <define VALUE="TRUE" NAME="CALC_AMSL_BARO"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.3892503" NAME="H_X"/>
          <define VALUE="0.0017972" NAME="H_Y"/>
          <define VALUE="0.9211303" NAME="H_Z"/>
          <define VALUE="0" NAME="GRAVITY_HEURISTIC_FACTOR"/>
        </section>
        <section PREFIX="INS_" NAME="INS">
          <define VALUE="2.2" NAME="SONAR_MAX_RANGE"/>
          <define VALUE="TRUE" NAME="SONAR_UPDATE_ON_AGL"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="RC_SETPOINT">
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="300" UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="0" NAME="DEADBAND_A"/>
          <define VALUE="0" NAME="DEADBAND_E"/>
          <define VALUE="50" NAME="DEADBAND_R"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="ATTITUDE_REFERENCE">
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.9" NAME="REF_ZETA_P"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.9" NAME="REF_ZETA_Q"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.9" NAME="REF_ZETA_R"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_RDOT"/>
        </section>
        <section PREFIX="STABILIZATION_INDI_" NAME="STABILIZATION_ATTITUDE_INDI">
          <define VALUE="0.017837" NAME="G1_P"/>
          <define VALUE="0.018315" NAME="G1_Q"/>
          <define VALUE="0.001049" NAME="G1_R"/>
          <define VALUE="0.076486" NAME="G2_R"/>
          <define VALUE="FALSE" NAME="FILTER_ROLL_RATE"/>
          <define VALUE="FALSE" NAME="FILTER_PITCH_RATE"/>
          <define VALUE="FALSE" NAME="FILTER_YAW_RATE"/>
          <define VALUE="100.0" NAME="REF_ERR_P"/>
          <define VALUE="100.0" NAME="REF_ERR_Q"/>
          <define VALUE="100.0" NAME="REF_ERR_R"/>
          <define VALUE="14.0" NAME="REF_RATE_P"/>
          <define VALUE="14.0" NAME="REF_RATE_Q"/>
          <define VALUE="14.0" NAME="REF_RATE_R"/>
          <define VALUE="3.2" NAME="FILT_CUTOFF"/>
          <define VALUE="3.2" NAME="FILT_CUTOFF_R"/>
          <define VALUE="0.04" NAME="ACT_DYN_P"/>
          <define VALUE="0.04" NAME="ACT_DYN_Q"/>
          <define VALUE="0.04" NAME="ACT_DYN_R"/>
          <define VALUE="FALSE" NAME="USE_ADAPTIVE"/>
          <define VALUE="0.0001" NAME="ADAPTIVE_MU"/>
          <define VALUE="343.77" UNIT="deg/s" NAME="STABILIZATION_INDI_MAX_RATE"/>
          <define VALUE="120" UNIT="deg/s" NAME="STABILIZATION_INDI_MAX_R"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="350" NAME="HOVER_KP"/>
          <define VALUE="85" NAME="HOVER_KD"/>
          <define VALUE="20" NAME="HOVER_KI"/>
          <define VALUE="0.6" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="TRUE" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="20" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="2" UNIT="m/s" NAME="REF_MAX_SPEED"/>
          <define VALUE="50" NAME="PGAIN"/>
          <define VALUE="100" NAME="DGAIN"/>
          <define VALUE="30" NAME="IGAIN"/>
        </section>
        <section PREFIX="NAV_" NAME="NAVIGATION">
          <define VALUE="4.5" NAME="CLIMB_VSPEED"/>
          <define VALUE="-1.0" NAME="DESCEND_VSPEED"/>
        </section>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_STARTUP"/>
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_HOVER_Z_HOLD" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_NAV" NAME="MODE_AUTO2"/>
          <define VALUE="TRUE" NAME="NO_RC_THRUST_LIMIT"/>
        </section>
        <section NAME="BAT">
          <define VALUE="8700" NAME="MILLIAMP_AT_FULL_THROTTLE"/>
          <define VALUE="9.2" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="9.9" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="10.2" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="12.4" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="3.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="3.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="2.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="2.3" NAME="WP_MOVED"/>
            <message PERIOD="2." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".75" NAME="GPS_INT"/>
            <message PERIOD=".75" NAME="INS"/>
            <message PERIOD="6.1" NAME="I2C_ERRORS"/>
            <message PERIOD="4.1" NAME="UART_ERRORS"/>
            <message PERIOD="4" NAME="SUPERBITRF"/>
            <message PERIOD="4" NAME="BLUEGIGA"/>
            <message PERIOD="3.5" NAME="ENERGY"/>
            <message PERIOD="6.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="4.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="2.3" NAME="AIR_DATA"/>
            <message PERIOD="4.5" NAME="SURVEY"/>
            <message PERIOD="0.5" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
            <message PERIOD="2" NAME="FBW_STATUS"/>
            <message PERIOD="0.1" NAME="ADC_GENERIC"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="BEBOP_ACTUATORS"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_INT"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="19"/>
            <dl_setting VAR="autopilot.kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot.power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot.mode" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="19" HANDLER="SetModeHandler"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="LadybirdMXS" ac_id="15" airframe="airframes/tudelft/ladybird_lisa_mxs.xml" radio="radios/dummy.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/rotorcraft_basic.xml" settings="settings/rotorcraft_basic.xml" settings_modules="modules/air_data.xml modules/ahrs_int_cmpl_quat.xml modules/stabilization_int_quat.xml modules/nav_basic_rotorcraft.xml modules/guidance_rotorcraft.xml modules/gps_ubx_ucenter.xml modules/gps.xml modules/imu_common.xml" gui_color="blue">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitMM" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1120" MIN="1120" MAX="2000" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="2" name="Rotorcraft Basic (Enac)" max_dist_from_home="150" lon0="1 28 52.61" lat0="43 33 50.83" ground_alt="147" alt="152">
          <header>#include &quot;autopilot.h&quot;</header>
          <waypoints>
            <waypoint y="0.0" x="0.0" name="HOME"/>
            <waypoint y="5.0" x="0.0" name="CLIMB"/>
            <waypoint y="-5.0" x="-2.0" name="STDBY"/>
            <waypoint y="-13.9" x="3.6" name="p1"/>
            <waypoint y="-48.2" x="27.5" name="p2"/>
            <waypoint y="-19.6" x="16.7" name="p3"/>
            <waypoint y="-40.7" x="13.7" name="p4"/>
            <waypoint y="-50" x="-20" name="CAM" height="2."/>
            <waypoint y="-10.9" x="5.6" name="TD"/>
          </waypoints>
          <blocks>
            <block name="Wait GPS" no="0">
              <call_once fun="NavKillThrottle()" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Geo init" no="1">
              <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
              <call_once fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Holding point" no="2">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="Start Engine" no="3">
              <call_once fun="NavResurrect()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff" name="Takeoff" no="4">
              <exception deroute="Standby" cond="stateGetPositionEnu_f() @DEREF z @GT 2.0"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="5">
              <stay wp="STDBY" no="0"/>
            </block>
            <block name="stay_p1" no="6">
              <stay wp="p1" no="0"/>
            </block>
            <block name="go_p2" no="7">
              <call_once fun="nav_set_heading_deg(90)" no="0"/>
              <go wp="p2" no="1"/>
              <deroute block="stay_p1" no="2"/>
            </block>
            <block name="line_p1_p2" no="8">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <stay wp="p2" until="stage_time>10" no="1"/>
              <go wp="p1" hmode="route" from="p2" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="route" no="9">
              <go wp="p3" hmode="route" from="p1" no="0"/>
              <go wp="p4" hmode="route" from="p3" no="1"/>
              <go wp="p1" hmode="route" from="p4" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="Oval" no="10">
              <oval radius="-1" p2="p2" p1="p1" no="1"/>
            </block>
            <block name="test yaw" no="11">
              <go wp="p1" no="0"/>
              <for var="i" to="16" from="1" no="2">
                <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
              </for>
              <deroute block="Standby" no="5"/>
            </block>
            <block pre_call="nav_set_heading_towards_waypoint(WP_CAM)" name="circle CAM" no="12">
              <circle wp="CAM" radius="nav_radius" no="0"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land Here" name="land here" no="13">
              <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
            </block>
            <block name="land" no="14">
              <go wp="TD" no="0"/>
            </block>
            <block name="flare" no="15">
              <exception deroute="Holding point" cond="NavDetectGround()"/>
              <exception deroute="landed" cond="!nav_is_in_flight()"/>
              <call_once fun="NavStartDetectGround()" no="0"/>
              <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
            </block>
            <block name="landed" no="16">
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
            </block>
            <block name="HOME" no="17">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="17" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="16" block_name="landed" stage="0">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
          </stage>
          <stage block="15" block_name="flare" stage="1">
            <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
          </stage>
          <stage block="15" block_name="flare" stage="0">
            <call_once fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="14" block_name="land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="13" block_name="land here" stage="0">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="12" block_name="circle CAM" stage="0">
            <circle wp="CAM" radius="nav_radius" no="0"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="5">
            <deroute block="Standby" no="5"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="3">
            <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="2">
            <for var="i" to="16" from="1" no="2">
              <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
            </for>
          </stage>
          <stage block="11" block_name="test yaw" stage="0">
            <go wp="p1" no="0"/>
          </stage>
          <stage block="10" block_name="Oval" stage="1">
            <oval radius="-1" p2="p2" p1="p1" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="9" block_name="route" stage="2">
            <go wp="p1" hmode="route" from="p4" no="2"/>
          </stage>
          <stage block="9" block_name="route" stage="1">
            <go wp="p4" hmode="route" from="p3" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="0">
            <go wp="p3" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="2">
            <go wp="p1" hmode="route" from="p2" no="2"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="1">
            <stay wp="p2" until="stage_time>10" no="1"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="2">
            <deroute block="stay_p1" no="2"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="1">
            <go wp="p2" no="1"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="0">
            <call_once fun="nav_set_heading_deg(90)" no="0"/>
          </stage>
          <stage block="6" block_name="stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="5" block_name="Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="1">
            <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="0">
            <call_once fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="2">
            <call_once fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="0">
            <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="air_data">
              <dl_setting VAR="air_data.qnh" STEP="1" SHORTNAME="QNH" MODULE="air_data/air_data" MIN="800" MAX="1200"/>
              <dl_setting VAR="air_data.tas_factor" TYPE="float" STEP="0.01" SHORTNAME="TASfactor" PERSISTENT="true" PARAM="AIR_DATA_TAS_FACTOR" MODULE="air_data/air_data" MIN="0.8" MAX="1.3"/>
              <dl_setting VAR="air_data.calc_qnh_once" STEP="1" SHORTNAME="calcQNH" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_airspeed" TYPE="uint8" STEP="1" SHORTNAME="calcAirspeed" PERSISTENT="true" PARAM="AIR_DATA_CALC_AIRSPEED" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_tas_factor" TYPE="uint8" STEP="1" SHORTNAME="calcTASfactor" PERSISTENT="true" PARAM="AIR_DATA_CALC_TAS_FACTOR" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_amsl_baro" TYPE="uint8" STEP="1" SHORTNAME="calcAMSL" PERSISTENT="true" PARAM="AIR_DATA_CALC_AMSL_BARO" MODULE="air_data/air_data" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
              <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
              <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
              <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
              <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Att Loop">
              <dl_setting VAR="stabilization_gains.p.x" TYPE="int32" STEP="1" SHORTNAME="pgain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_PGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="8000"/>
              <dl_setting VAR="stabilization_gains.d.x" TYPE="int32" STEP="1" SHORTNAME="dgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.x" TYPE="int32" STEP="1" SHORTNAME="igain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_IGAIN" MIN="0" MAX="800"/>
              <dl_setting VAR="stabilization_gains.dd.x" TYPE="int32" STEP="1" SHORTNAME="ddgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="stabilization_gains.p.y" TYPE="int32" STEP="1" SHORTNAME="pgain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_PGAIN" MIN="1" MAX="8000"/>
              <dl_setting VAR="stabilization_gains.d.y" TYPE="int32" STEP="1" SHORTNAME="dgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.y" TYPE="int32" STEP="1" SHORTNAME="igain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_IGAIN" MIN="0" MAX="800"/>
              <dl_setting VAR="stabilization_gains.dd.y" TYPE="int32" STEP="1" SHORTNAME="ddgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="stabilization_gains.p.z" TYPE="int32" STEP="1" SHORTNAME="pgain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_PGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.d.z" TYPE="int32" STEP="1" SHORTNAME="dgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.z" TYPE="int32" STEP="1" SHORTNAME="igain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_IGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="stabilization_gains.dd.z" TYPE="int32" STEP="1" SHORTNAME="ddgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.p" UNIT="rad/s" STEP="1" SHORTNAME="omega p" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_P" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaP" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.p" STEP="0.05" SHORTNAME="zeta p" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_P" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaP"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.q" UNIT="rad/s" STEP="1" SHORTNAME="omega q" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_Q" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaQ" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.q" STEP="0.05" SHORTNAME="zeta q" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_Q" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaQ"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.r" UNIT="rad/s" STEP="1" SHORTNAME="omega r" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_R" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaR" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.r" STEP="0.05" SHORTNAME="zeta r" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_R" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaR"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="NAV">
              <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
              <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
              <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MIN="-50" MAX="50"/>
              <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MIN="0" MAX="10.0"/>
              <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MIN="-10.0" MAX="0.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Vert Loop">
              <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
              <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MIN="0.2" MAX="0.8"/>
              <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MIN="0" MAX="1"/>
              <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
            <dl_settings NAME="Horiz Loop">
              <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="true" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
              <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
              <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MIN="0" MAX="1"/>
              <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
              <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
              <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
              <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
              <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
              <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="ublox">
            <dl_settings NAME="ucenter">
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_h" STEP="1" SHORTNAME="sw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_l" STEP="1" SHORTNAME="sw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_h" STEP="1" SHORTNAME="hw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_l" STEP="1" SHORTNAME="hw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_init" STEP="100" SHORTNAME="inibaud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_run" STEP="100" SHORTNAME="baud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="quadrotor_lisa_mxs">
        <description>LadyBird quadrotor frame equiped with Lisa/MXS 1.0 with four brushed motors in an X configuration.</description>
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="lisa_mxs_1.0">
            <define VALUE="TRUE" NAME="REMAP_UART3"/>
            <define VALUE="TRUE" NAME="USE_PERSISTENT_SETTINGS"/>
          </target>
          <target NAME="nps" BOARD="pc">
            <module TYPE="gazebo" NAME="fdm"/>
          </target>
          <module NAME="motor_mixing"/>
          <module TYPE="pwm" NAME="actuators">
            <define VALUE="36000000" NAME="PWM_BASE_FREQ"/>
            <define VALUE="36000" NAME="SERVO_HZ"/>
          </module>
          <module TYPE="transparent" NAME="telemetry">
            <configure VALUE="UART3" NAME="MODEM_PORT"/>
            <configure VALUE="B115200" NAME="MODEM_BAUD"/>
          </module>
          <module TYPE="datalink" NAME="radio_control"/>
          <module TYPE="lisa_mx_v2.1" NAME="imu"/>
          <module TYPE="ublox" NAME="gps">
            <configure VALUE="UART2" NAME="GPS_PORT"/>
            <configure VALUE="B38400" NAME="GPS_BAUD"/>
          </module>
          <module TYPE="ubx_ucenter" NAME="gps"/>
          <module TYPE="int_quat" NAME="stabilization"/>
          <module TYPE="int_cmpl_quat" NAME="ahrs"/>
          <module NAME="ins"/>
          <module NAME="air_data">
            <define VALUE="TRUE" NAME="AIR_DATA_CALC_AMSL_BARO"/>
          </module>
          <module NAME="send_imu_mag_current"/>
        </firmware>
        <servos DRIVER="Pwm">
          <servo NO="0" NEUTRAL="50" NAME="NE" MIN="0" MAX="1000"/>
          <servo NO="5" NEUTRAL="50" NAME="SE" MIN="0" MAX="1000"/>
          <servo NO="4" NEUTRAL="50" NAME="SW" MIN="0" MAX="1000"/>
          <servo NO="1" NEUTRAL="50" NAME="NW" MIN="0" MAX="1000"/>
        </servos>
        <commands>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="0"/>
        </commands>
        <section PREFIX="MOTOR_MIXING_" NAME="MIXING">
          <define VALUE="0" NAME="TRIM_ROLL"/>
          <define VALUE="0" NAME="TRIM_PITCH"/>
          <define VALUE="0" NAME="TRIM_YAW"/>
          <define VALUE="QUAD_X" NAME="TYPE"/>
        </section>
        <command_laws>
          <call FUN="motor_mixing_run(autopilot_get_motors_on(),FALSE,values)"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_RIGHT]" SERVO="NE"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_RIGHT]" SERVO="SE"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_LEFT]" SERVO="SW"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_LEFT]" SERVO="NW"/>
        </command_laws>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="135." UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
          <define VALUE="0" NAME="ACCEL_X_NEUTRAL"/>
          <define VALUE="0" NAME="ACCEL_Y_NEUTRAL"/>
          <define VALUE="0" NAME="ACCEL_Z_NEUTRAL"/>
          <define VALUE="286" NAME="MAG_X_NEUTRAL"/>
          <define VALUE="-72" NAME="MAG_Y_NEUTRAL"/>
          <define VALUE="97" NAME="MAG_Z_NEUTRAL"/>
          <define VALUE="3.94431833863" NAME="MAG_X_SENS" INTEGER="16"/>
          <define VALUE="4.14629702271" NAME="MAG_Y_SENS" INTEGER="16"/>
          <define VALUE="4.54518768636" NAME="MAG_Z_SENS" INTEGER="16"/>
          <define VALUE="0.0103422023767" NAME="MAG_X_CURRENT_COEF"/>
          <define VALUE="0.0084568317783" NAME="MAG_Y_CURRENT_COEF"/>
          <define VALUE="-0.01935617335" NAME="MAG_Z_CURRENT_COEF"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="STABILIZATION_ATTITUDE">
          <define VALUE="45." UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="45." UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="45." UNIT="deg" NAME="SP_MAX_PSI"/>
          <define VALUE="90." UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="90." UNIT="deg/s" NAME="SP_MAX_P"/>
          <define VALUE="250" NAME="DEADBAND_R"/>
          <define VALUE="250" NAME="DEADBAND_A"/>
          <define VALUE="800" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.85" NAME="REF_ZETA_P"/>
          <define VALUE="400." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="800" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.85" NAME="REF_ZETA_Q"/>
          <define VALUE="400." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="500" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.85" NAME="REF_ZETA_R"/>
          <define VALUE="90." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(900.)" NAME="REF_MAX_RDOT"/>
          <define VALUE="400" NAME="PHI_PGAIN"/>
          <define VALUE="200" NAME="PHI_DGAIN"/>
          <define VALUE="100" NAME="PHI_IGAIN"/>
          <define VALUE="400" NAME="THETA_PGAIN"/>
          <define VALUE="200" NAME="THETA_DGAIN"/>
          <define VALUE="100" NAME="THETA_IGAIN"/>
          <define VALUE="500" NAME="PSI_PGAIN"/>
          <define VALUE="300" NAME="PSI_DGAIN"/>
          <define VALUE="10" NAME="PSI_IGAIN"/>
          <define VALUE="0" NAME="PHI_DDGAIN"/>
          <define VALUE="0" NAME="THETA_DDGAIN"/>
          <define VALUE=" 300" NAME="PSI_DDGAIN"/>
          <define VALUE="0" NAME="PHI_AGAIN"/>
          <define VALUE="0" NAME="THETA_AGAIN"/>
          <define VALUE="0" NAME="PSI_AGAIN"/>
        </section>
        <section PREFIX="INS_" NAME="INS"/>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="276" NAME="HOVER_KP"/>
          <define VALUE="455" NAME="HOVER_KD"/>
          <define VALUE="100" NAME="HOVER_KI"/>
          <define VALUE="0.5" NAME="GUIDANCE_V_NOMINAL_HOVER_THROTTLE"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE=" 0.47577" NAME="H_X"/>
          <define VALUE=" 0.11811" NAME="H_Y"/>
          <define VALUE=" 0.87161" NAME="H_Z"/>
          <define VALUE="500" NAME="PROPAGATE_FREQUENCY"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="39" NAME="PGAIN"/>
          <define VALUE="50" NAME="DGAIN"/>
          <define VALUE="19" NAME="IGAIN"/>
        </section>
        <section NAME="MISC">
          <define VALUE="(adc)*0.00162f" NAME="VoltageOfAdc(adc)"/>
        </section>
        <section PREFIX="NPS_" NAME="SIMULATOR">
          <define VALUE="nw_motor, ne_motor, se_motor, sw_motor" TYPE="string[]" NAME="ACTUATOR_NAMES"/>
          <define VALUE="simple_x_quad_ccw" TYPE="string" NAME="JSBSIM_MODEL"/>
          <define VALUE="nps_sensors_params_default.h" TYPE="string" NAME="SENSORS_PARAMS"/>
          <define VALUE="simple_x_quad" TYPE="string" NAME="GAZEBO_AC_NAME"/>
          <define VALUE="1.55, 1.55, 1.55, 1.55" TYPE="float[]" NAME="ACTUATOR_THRUSTS"/>
          <define VALUE="0.155, 0.155, 0.155, 0.155" TYPE="float[]" NAME="ACTUATOR_TORQUES"/>
        </section>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_NAV" NAME="MODE_STARTUP"/>
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_HOVER_Z_HOLD" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_NAV" NAME="MODE_AUTO2"/>
        </section>
        <section NAME="BAT">
          <define VALUE="14000" NAME="MILLIAMP_AT_FULL_THROTTLE"/>
          <define VALUE="3.0" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="3.3" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="3.5" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="4.1" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.05" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
            <message PERIOD="0.05" NAME="OPTICAL_FLOW_HOVER"/>
            <message PERIOD="0.10" NAME="VISUALTARGET"/>
            <message PERIOD="0.1" NAME="VISION_POSITION_ESTIMATE"/>
            <message PERIOD="0.05" NAME="DIVERGENCE"/>
            <message PERIOD="0.02" NAME="DRAGSPEED"/>
            <message PERIOD="5.1" NAME="LOGGER_STATUS"/>
            <message PERIOD="1.2" NAME="LIDAR"/>
            <message PERIOD=".25" NAME="INS_EKF2"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="BEBOP_ACTUATORS"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_FLOAT"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
            <message PERIOD="2.0" NAME="INDI_G"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="vel_guidance" KEY_PRESS="q">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HYBRID_GUIDANCE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1.0" NAME="GPS_INT"/>
            <message PERIOD="1.0" NAME="INS"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="RTCM3">
            <message PERIOD="1" NAME="GPS_RXMRTCM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD="1" NAME="GPS_RTK"/>
          </mode>
        </process>
        <process NAME="FlightRecorder">
          <mode NAME="default">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD=".1" NAME="GPS_INT"/>
            <message PERIOD=".1" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".2" NAME="IMU_MAG_SCALED"/>
            <message PERIOD="0.05" NAME="LIDAR"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="19"/>
            <dl_setting VAR="autopilot.kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot.power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot.mode" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="19" HANDLER="SetModeHandler"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="Logo600" ac_id="111" airframe="airframes/tudelft/logo600.xml" radio="radios/dummy.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/dummy.xml" settings="settings/rotorcraft_basic.xml" settings_modules="modules/air_data.xml modules/geo_mag.xml modules/heli_throttle_curve.xml modules/guidance_indi.xml modules/ahrs_int_cmpl_quat.xml modules/stabilization_int_quat.xml modules/nav_basic_rotorcraft.xml modules/guidance_rotorcraft.xml modules/gps_ubx_ucenter.xml modules/gps.xml modules/imu_common.xml" gui_color="#ffffdffac31f" release="0fba1ce80a46d8dce23c570e6547595c89988fad">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitMM" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1120" MIN="1120" MAX="2000" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan name="Dummy" lon0="1.27289" max_dist_from_home="1000" ground_alt="185" security_height="25" qfu="270" alt="250" lat0="43.46223">
          <waypoints>
            <waypoint name="HOME" x="0.0" y="120.0" alt="250."/>
          </waypoints>
          <blocks>
            <block name="HOME" no="0">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="0" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="air_data">
              <dl_setting VAR="air_data.qnh" STEP="1" SHORTNAME="QNH" MODULE="air_data/air_data" MIN="800" MAX="1200"/>
              <dl_setting VAR="air_data.tas_factor" TYPE="float" STEP="0.01" SHORTNAME="TASfactor" PERSISTENT="true" PARAM="AIR_DATA_TAS_FACTOR" MODULE="air_data/air_data" MIN="0.8" MAX="1.3"/>
              <dl_setting VAR="air_data.calc_qnh_once" STEP="1" SHORTNAME="calcQNH" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_airspeed" TYPE="uint8" STEP="1" SHORTNAME="calcAirspeed" PERSISTENT="true" PARAM="AIR_DATA_CALC_AIRSPEED" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_tas_factor" TYPE="uint8" STEP="1" SHORTNAME="calcTASfactor" PERSISTENT="true" PARAM="AIR_DATA_CALC_TAS_FACTOR" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_amsl_baro" TYPE="uint8" STEP="1" SHORTNAME="calcAMSL" PERSISTENT="true" PARAM="AIR_DATA_CALC_AMSL_BARO" MODULE="air_data/air_data" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="geo_mag">
              <dl_setting VAR="geo_mag.calc_once" VALUES="OFF|CALC" STEP="1" SHORTNAME="calcNow" MODULE="geo_mag/geo_mag" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="ThrottleCurve">
              <dl_setting VAR="throttle_curve.rpm_fb_p" STEP="0.005" SHORTNAME="rpm_fb_p" PARAM="THROTTLE_CURVE_RPM_FB_P" MIN="0.00" MAX="100"/>
              <dl_setting VAR="throttle_curve.rpm_fb_i" STEP="0.005" SHORTNAME="rpm_fb_i" PARAM="THROTTLE_CURVE_RPM_FB_I" MIN="0.00" MAX="100"/>
              <dl_setting VAR="throttle_curve.throttle_trim" STEP="0" SHORTNAME="throttle_trim" MIN="-9600" MAX="9600"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="guidance_indi">
              <dl_setting VAR="guidance_indi_pos_gain" STEP="0.1" SHORTNAME="kp_p" PERSISTENT="true" PARAM="GUIDANCE_INDI_POS_GAIN" MIN="0" MAX="10.0"/>
              <dl_setting VAR="guidance_indi_speed_gain" STEP="0.1" SHORTNAME="kp_p" PERSISTENT="true" PARAM="GUIDANCE_INDI_SPEED_GAIN" MIN="0" MAX="10.0"/>
              <dl_setting VAR="guidance_indi_max_bank" STEP="0.1" SHORTNAME="max_bank" PARAM="GUIDANCE_H_MAX_BANK" MIN="0" MAX="80.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
              <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
              <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
              <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
              <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Att Loop">
              <dl_setting VAR="stabilization_gains.p.x" TYPE="int32" STEP="1" SHORTNAME="pgain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_PGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="8000"/>
              <dl_setting VAR="stabilization_gains.d.x" TYPE="int32" STEP="1" SHORTNAME="dgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.x" TYPE="int32" STEP="1" SHORTNAME="igain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_IGAIN" MIN="0" MAX="800"/>
              <dl_setting VAR="stabilization_gains.dd.x" TYPE="int32" STEP="1" SHORTNAME="ddgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="stabilization_gains.p.y" TYPE="int32" STEP="1" SHORTNAME="pgain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_PGAIN" MIN="1" MAX="8000"/>
              <dl_setting VAR="stabilization_gains.d.y" TYPE="int32" STEP="1" SHORTNAME="dgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.y" TYPE="int32" STEP="1" SHORTNAME="igain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_IGAIN" MIN="0" MAX="800"/>
              <dl_setting VAR="stabilization_gains.dd.y" TYPE="int32" STEP="1" SHORTNAME="ddgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="stabilization_gains.p.z" TYPE="int32" STEP="1" SHORTNAME="pgain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_PGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.d.z" TYPE="int32" STEP="1" SHORTNAME="dgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.z" TYPE="int32" STEP="1" SHORTNAME="igain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_IGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="stabilization_gains.dd.z" TYPE="int32" STEP="1" SHORTNAME="ddgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.p" UNIT="rad/s" STEP="1" SHORTNAME="omega p" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_P" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaP" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.p" STEP="0.05" SHORTNAME="zeta p" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_P" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaP"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.q" UNIT="rad/s" STEP="1" SHORTNAME="omega q" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_Q" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaQ" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.q" STEP="0.05" SHORTNAME="zeta q" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_Q" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaQ"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.r" UNIT="rad/s" STEP="1" SHORTNAME="omega r" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_R" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaR" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.r" STEP="0.05" SHORTNAME="zeta r" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_R" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaR"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="NAV">
              <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
              <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
              <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MIN="-50" MAX="50"/>
              <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MIN="0" MAX="10.0"/>
              <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MIN="-10.0" MAX="0.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Vert Loop">
              <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
              <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MIN="0.2" MAX="0.8"/>
              <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MIN="0" MAX="1"/>
              <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
            <dl_settings NAME="Horiz Loop">
              <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="true" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
              <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
              <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MIN="0" MAX="1"/>
              <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
              <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
              <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
              <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
              <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
              <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="ublox">
            <dl_settings NAME="ucenter">
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_h" STEP="1" SHORTNAME="sw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_l" STEP="1" SHORTNAME="sw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_h" STEP="1" SHORTNAME="hw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_l" STEP="1" SHORTNAME="hw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_init" STEP="100" SHORTNAME="inibaud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_run" STEP="100" SHORTNAME="baud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="Logo600">
        <description>Logo600 using a VBAR + 2x Lisa-MX: one as FBW and one as AP
  1) VBAR makes it possible to have manual mode as backup.
  2) Some competitions require a separately powered board must drive the actuators (FBW).
  3) FBW saves time and adds safety not having to check every safety critical aspect after every AP update (safety critical code is in FBW).
  4) VBAR (gyro&apos;s) can be mounted on the frame (=fast response) while the attitude filter (AP) can be on very soft dampers.
This logo600 basically flies with a VBAR. All rotor head parameters and tuning (except throttle curves) are in the VBAR using the VBAR setup program. Then, instead of connecting 2 satellite receivers, 2 uarts from a lisa-mx are connected to the VBAR instead. The lisa-mx then has both satellite receivers. This lisa-mx runs rotorcraft FBW code with spektrum as &quot;actuator&quot; which is actually sent to the VBAR RC inputs over uart.
 - Note about FBW code: you must choose if you want the UAV to behave as a model aircraft which goes to failsafe on RC loss or make it a UAV with AUTO2 flight on RC-loss. The latter has the risk of fly-away, and adds safety critical aspects to the AP as well: so make sure your geofence and geofence rules are well tested.
 - Note that FBW uses 5 uarts: 2x output to vbar 2x spektrum, 1x AP. The I2C port of the lisa-mx is reconfigured as uart to achieve this.
The second lisa-mx serves as AP. It has the logger, the GPS, the telemetry, the baro and everything else. It is connected to the FBW lisa via another serial port with a 100 ohm resistor in each tx/rx wire since FBW and AP are separately powered and can switch on / off at different times (otherwise too large leakage currents can go over IO pins).
The nice/safe thing about this VBAR-FBW-AP setup during developments is that the heli can fly in PAPARAZZI-MANUAL mode, since the VBAR does the lowest-level stabilization. Furthermore the FBW increases safety by not having to go through very extensive testing after every AP update: you DO NOT want an electric 600-size heli to do unpredictable things with its ESC/motors. In this airframe file the RC KILL switch is applied by the FBW and overrules everything, and when the RC is off or lost there is no way the motors will turn. Only after every FBW update, blades-off, the safety critical code is tested again. Afterwards one can safely live/hot JTAG-update the AP while in MANUAL FBW-KILL, and test AP knowing that you can always flip a switch to go back to manual mode even in-flight in case of an AP problem. Note that for flashing the FBW, bad pulses could end up going to the ESC with potential danger. Only flash FBW with the motor disconnected.
The xml in master currently configures the LOGO600 as a pure model aircraft: meaning just as with non-autopilot-equipped model helicopters, when you loose RC it will failsafe and with the TX mode switch to manual, it flies an unmodified commercial tested flight controller. (which can make things easier to get it accepted at your local model airfield). Note that any change (especially to KILL of FBW_MODE) will also change the behaviour described above.</description>
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="lisa_mx_2.1">
            <module TYPE="xbee_api" NAME="telemetry"/>
            <module TYPE="lisa_mx_v2.1" NAME="imu"/>
            <module TYPE="ublox" NAME="gps">
              <configure VALUE="UART4" NAME="GPS_PORT"/>
              <configure VALUE="B115200" NAME="GPS_BAUD"/>
            </module>
            <module TYPE="ubx_ucenter" NAME="gps"/>
            <module TYPE="int_quat" NAME="stabilization"/>
            <module TYPE="int_cmpl_quat" NAME="ahrs"/>
            <module TYPE="hff" NAME="ins"/>
            <module TYPE="indi" NAME="guidance"/>
            <module NAME="current_sensor">
              <configure VALUE="ADC_3" NAME="ADC_CURRENT_SENSOR"/>
            </module>
            <module TYPE="uart" NAME="intermcu">
              <define VALUE="TRUE" NAME="REMAP_UART3"/>
            </module>
            <module TYPE="throttle_curve" NAME="heli"/>
            <module NAME="geo_mag"/>
            <module NAME="air_data"/>
            <module NAME="logger_spi_link"/>
          </target>
          <target NAME="fbw" BOARD="lisa_mx_2.1">
            <module TYPE="spektrum" NAME="radio_control">
              <configure VALUE="1" NAME="USE_SECONDARY_SPEKTRUM_RECEIVER"/>
              <define VALUE="1" NAME="RADIO_CONTROL_SPEKTRUM_NO_SIGN"/>
            </module>
            <module TYPE="spektrum" NAME="actuators">
              <configure VALUE="UART6" NAME="ACTUATORS_SPEKTRUM_DEV2"/>
            </module>
            <define VALUE="FBW_MODE_FAILSAFE" NAME="RC_LOST_FBW_MODE"/>
            <define VALUE="FBW_MODE_FAILSAFE" NAME="RC_LOST_IN_AUTO_FBW_MODE"/>
            <define VALUE="FBW_MODE_MANUAL" NAME="AP_LOST_FBW_MODE"/>
            <module TYPE="uart" NAME="intermcu">
              <define VALUE="TRUE" NAME="REMAP_UART3"/>
            </module>
          </target>
        </firmware>
        <servos DRIVER="Spektrum">
          <servo NO="0" NEUTRAL="340" NAME="THROTTLE" MIN="340" MAX="1708"/>
          <servo NO="1" NEUTRAL="1024" NAME="ROLL" MIN="340" MAX="1708"/>
          <servo NO="2" NEUTRAL="1024" NAME="PITCH" MIN="1708" MAX="340"/>
          <servo NO="3" NEUTRAL="1024" NAME="YAW" MIN="340" MAX="1708"/>
          <servo NO="4" NEUTRAL="1024" NAME="TAIL_GAIN" MIN="340" MAX="1708"/>
          <servo NO="5" NEUTRAL="1024" NAME="COLLECTIVE" MIN="340" MAX="1708"/>
          <servo NO="6" NEUTRAL="1024" NAME="AUX2" MIN="340" MAX="1708"/>
        </servos>
        <section NAME="RADIO">
          <define VALUE="RADIO_AUX1" NAME="RADIO_TH_HOLD"/>
          <define VALUE="RADIO_AUX2" NAME="RADIO_FMODE"/>
        </section>
        <commands>
          <axis NAME="THRUST" FAILSAFE_VALUE="0"/>
          <axis NAME="COLLECTIVE" FAILSAFE_VALUE="-9600"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="FMODE" FAILSAFE_VALUE="-9600"/>
          <axis NAME="TH_HOLD" FAILSAFE_VALUE="-9600"/>
          <axis NAME="MODE" FAILSAFE_VALUE="-9600"/>
        </commands>
        <rc_commands>
          <set VALUE="@THROTTLE" COMMAND="THRUST"/>
          <set VALUE="@ROLL" COMMAND="ROLL"/>
          <set VALUE="@PITCH" COMMAND="PITCH"/>
          <set VALUE="@YAW" COMMAND="YAW"/>
          <set VALUE="@FMODE" COMMAND="FMODE"/>
        </rc_commands>
        <heli_curves>
          <curve THROTTLE="0,3940,5860,7300,8640" COLLECTIVE="-3840,-960,1920,5088,8256"/>
          <curve THROTTLE="8920,7960,8920" COLLECTIVE="-9600,0,9600"/>
          <curve THROTTLE="9600,8640,9600" COLLECTIVE="-9600,0,9600"/>
        </heli_curves>
        <command_laws>
          <let VAR="th_hold" VALUE="LessThan(RadioControlValues(RADIO_TH_HOLD), -4800)"/>
          <set VALUE="($th_hold? -9600 : @THRUST)" SERVO="THROTTLE"/>
          <set VALUE="@ROLL" SERVO="ROLL"/>
          <set VALUE="@PITCH" SERVO="PITCH"/>
          <set VALUE="@YAW" SERVO="YAW"/>
          <set VALUE="@COLLECTIVE" SERVO="COLLECTIVE"/>
          <set VALUE="0" SERVO="TAIL_GAIN"/>
          <set VALUE="0" SERVO="AUX2"/>
        </command_laws>
        <section NAME="MISC">
          <define VALUE="TRUE" NAME="ROTORCRAFT_COMMANDS_YAW_ALWAYS_ENABLED"/>
          <define VALUE="2.5" NAME="NAV_CLIMB_VSPEED"/>
          <define VALUE="-1.5" NAME="NAV_DESCEND_VSPEED"/>
          <define VALUE="TRUE" NAME="NO_RC_THRUST_LIMIT"/>
          <define VALUE="TRUE" NAME="USE_KILL_SWITCH_FOR_MOTOR_ARMING"/>
          <define VALUE="(0.014355*adc)" NAME="VoltageOfAdc(adc)"/>
          <define VALUE="(((float)adc)-1990.0f)*40.29f*2.0f" NAME="MilliAmpereOfAdc(adc)"/>
        </section>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="0" NAME="ACCEL_X_NEUTRAL"/>
          <define VALUE="0" NAME="ACCEL_Y_NEUTRAL"/>
          <define VALUE="0" NAME="ACCEL_Z_NEUTRAL"/>
          <define VALUE="316" NAME="MAG_X_NEUTRAL"/>
          <define VALUE="202" NAME="MAG_Y_NEUTRAL"/>
          <define VALUE="238" NAME="MAG_Z_NEUTRAL"/>
          <define VALUE="3.78223395875" NAME="MAG_X_SENS" INTEGER="16"/>
          <define VALUE="3.6668323335" NAME="MAG_Y_SENS" INTEGER="16"/>
          <define VALUE="4.23011157623" NAME="MAG_Z_SENS" INTEGER="16"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="90." UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.3770441" NAME="H_X"/>
          <define VALUE="0.0193986" NAME="H_Y"/>
          <define VALUE="0.9259921" NAME="H_Z"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="STABILIZATION_ATTITUDE">
          <define VALUE="45." UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="45." UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="90." UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="200" NAME="DEADBAND_R"/>
          <define VALUE="800" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.85" NAME="REF_ZETA_P"/>
          <define VALUE="150." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(7000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="800" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.85" NAME="REF_ZETA_Q"/>
          <define VALUE="150." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(7000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="500" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.85" NAME="REF_ZETA_R"/>
          <define VALUE="90." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(1000.)" NAME="REF_MAX_RDOT"/>
          <define VALUE="1200" NAME="PHI_PGAIN"/>
          <define VALUE="50" NAME="PHI_DGAIN"/>
          <define VALUE="0" NAME="PHI_IGAIN"/>
          <define VALUE="1200" NAME="THETA_PGAIN"/>
          <define VALUE="50" NAME="THETA_DGAIN"/>
          <define VALUE="0" NAME="THETA_IGAIN"/>
          <define VALUE="300" NAME="PSI_PGAIN"/>
          <define VALUE="0" NAME="PSI_DGAIN"/>
          <define VALUE="0" NAME="PSI_IGAIN"/>
          <define VALUE="0" NAME="PHI_DDGAIN"/>
          <define VALUE="0" NAME="THETA_DDGAIN"/>
          <define VALUE="0" NAME="PSI_DDGAIN"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="100" NAME="HOVER_KP"/>
          <define VALUE="60" NAME="HOVER_KD"/>
          <define VALUE="15" NAME="HOVER_KI"/>
          <define VALUE="0.62" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="TRUE" NAME="ADAPT_THROTTLE_ENABLED"/>
          <define VALUE="RadOfDeg(20.0)" NAME="REF_OMEGA"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="25" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="5" UNIT="m/s" NAME="REF_MAX_SPEED"/>
          <define VALUE="TRUE" NAME="USE_SPEED_REF"/>
          <define VALUE="20" NAME="PGAIN"/>
          <define VALUE="50" NAME="DGAIN"/>
          <define VALUE="25" NAME="AGAIN"/>
          <define VALUE="8" NAME="IGAIN"/>
        </section>
        <section PREFIX="NPS_" NAME="SIMULATOR">
          <define VALUE="nw_motor, ne_motor, se_motor, sw_motor" TYPE="string[]" NAME="ACTUATOR_NAMES"/>
          <define VALUE="simple_x_quad" TYPE="string" NAME="JSBSIM_MODEL"/>
          <define VALUE="nps_sensors_params_default.h" TYPE="string" NAME="SENSORS_PARAMS"/>
          <define VALUE="4" NAME="JS_AXIS_MODE"/>
        </section>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_RC_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_NAV" NAME="MODE_AUTO2"/>
        </section>
        <section NAME="BAT">
          <define VALUE="40.0" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="43.2" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="44.4" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="50.4" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.05" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
            <message PERIOD="0.05" NAME="OPTICAL_FLOW_HOVER"/>
            <message PERIOD="0.10" NAME="VISUALTARGET"/>
            <message PERIOD="0.1" NAME="VISION_POSITION_ESTIMATE"/>
            <message PERIOD="0.05" NAME="DIVERGENCE"/>
            <message PERIOD="0.02" NAME="DRAGSPEED"/>
            <message PERIOD="5.1" NAME="LOGGER_STATUS"/>
            <message PERIOD="1.2" NAME="LIDAR"/>
            <message PERIOD=".25" NAME="INS_EKF2"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="BEBOP_ACTUATORS"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_FLOAT"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
            <message PERIOD="2.0" NAME="INDI_G"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="vel_guidance" KEY_PRESS="q">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HYBRID_GUIDANCE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1.0" NAME="GPS_INT"/>
            <message PERIOD="1.0" NAME="INS"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="RTCM3">
            <message PERIOD="1" NAME="GPS_RXMRTCM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD="1" NAME="GPS_RTK"/>
          </mode>
        </process>
        <process NAME="FlightRecorder">
          <mode NAME="default">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD=".1" NAME="GPS_INT"/>
            <message PERIOD=".1" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".2" NAME="IMU_MAG_SCALED"/>
            <message PERIOD="0.05" NAME="LIDAR"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="19"/>
            <dl_setting VAR="autopilot.kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot.power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot.mode" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="19" HANDLER="SetModeHandler"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="MAVTec1_Kirk" ac_id="32" airframe="airframes/tudelft/mavtec1.xml" radio="radios/dummy.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/tudelft/delft_basic.xml" settings="settings/rotorcraft_basic.xml" settings_modules="modules/air_data.xml modules/geo_mag.xml modules/guidance_indi.xml modules/ahrs_int_cmpl_quat.xml modules/stabilization_indi_simple.xml modules/nav_basic_rotorcraft.xml modules/guidance_rotorcraft.xml modules/gps.xml modules/imu_common.xml" gui_color="#ffff00000000" release="e688107d8a1f9c933cb0931eebb0e7b009ccc445">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitMM" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1120" MIN="1120" MAX="2000" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="2" name="Delft Basic" max_dist_from_home="1000" lon0="4 22 42.0" lat0="51 59 27.6" ground_alt="0" alt="4">
          <header>    #include &quot;autopilot.h&quot;
    #include &quot;subsystems/datalink/datalink.h&quot;
    #include &quot;subsystems/electrical.h&quot;
    #include &quot;subsystems/radio_control.h&quot;</header>
          <waypoints>
            <waypoint y="0.0" x="0.0" name="HOME"/>
            <waypoint y="5.0" x="0.0" name="CLIMB"/>
            <waypoint y="-5.0" x="-2.0" name="STDBY"/>
            <waypoint y="14.3" x="-19.9" name="p1"/>
            <waypoint y="21.6" x="-0.6" name="p2"/>
            <waypoint y="-26.5" x="22.2" name="p3"/>
            <waypoint y="-34.4" x="4.9" name="p4"/>
            <waypoint y="-29.4" x="14.2" name="CAM"/>
            <waypoint y="-10.9" x="5.6" name="TD"/>
          </waypoints>
          <exceptions>
            <exception deroute="ComeBackAndLand" cond="((radio_control.status == RC_REALLY_LOST) &&
      !(IndexOfBlock('Takeoff') > nav_block) &&
      !(nav_block >= IndexOfBlock('land here')) &&
      (autopilot_in_flight() == true) )"/>
            <exception deroute="DatalinkLoss" cond="(datalink_time > 60 &&
      !(datalink_time > 120) &&
      !(IndexOfBlock('Takeoff') > nav_block) &&
      !(nav_block >= IndexOfBlock('land here')) &&
      (autopilot_in_flight() == true) )"/>
            <exception deroute="ComeBackAndLand" cond="(electrical.bat_low &&
      !(IndexOfBlock('Holding point') > nav_block) &&
      !(nav_block >= IndexOfBlock('land here')) &&
      (autopilot_in_flight() == true) )"/>
            <exception deroute="land here" cond="(electrical.bat_critical &&
      !(IndexOfBlock('Holding point') > nav_block) &&
      !(nav_block >= IndexOfBlock('land here')) &&
      (autopilot_in_flight() == true) )"/>
          </exceptions>
          <blocks>
            <block name="Wait GPS" no="0">
              <call_once fun="NavKillThrottle()" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Geo init" no="1">
              <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
              <call_once fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Holding point" no="2">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="Start Engine" no="3">
              <call_once fun="NavResurrect()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff" name="Takeoff" no="4">
              <exception deroute="Standby" cond="stateGetPositionEnu_f()->z > 2.0"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="5">
              <stay wp="STDBY" no="0"/>
            </block>
            <block name="stay_p1" no="6">
              <stay wp="p1" no="0"/>
            </block>
            <block name="go_p2" no="7">
              <go wp="p2" no="0"/>
              <deroute block="stay_p1" no="1"/>
            </block>
            <block name="line_p1_p2" no="8">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <stay wp="p2" until="stage_time>10" no="1"/>
              <go wp="p1" hmode="route" from="p2" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="route" no="9">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <go wp="p3" hmode="route" from="p2" no="1"/>
              <go wp="p4" hmode="route" from="p3" no="2"/>
              <go wp="p1" hmode="route" from="p4" no="3"/>
              <deroute block="stay_p1" no="4"/>
            </block>
            <block name="test yaw" no="10">
              <go wp="p1" no="0"/>
              <for var="i" to="16" from="1" no="2">
                <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
              </for>
              <deroute block="Standby" no="5"/>
            </block>
            <block pre_call="nav_set_heading_towards_waypoint(WP_CAM)" name="circle CAM" no="11">
              <circle wp="CAM" radius="nav_radius" no="0"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land Here" name="land here" no="12">
              <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
            </block>
            <block name="land" no="13">
              <go wp="TD" no="0"/>
            </block>
            <block name="flare" no="14">
              <exception deroute="Holding point" cond="NavDetectGround()"/>
              <exception deroute="landed" cond="!nav_is_in_flight()"/>
              <call_once fun="NavStartDetectGround()" no="0"/>
              <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
            </block>
            <block name="landed" no="15">
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
            </block>
            <block name="ComeBackAndLand" no="16">
              <go wp="HOME" no="0"/>
              <deroute block="land here" no="1"/>
            </block>
            <block name="DatalinkLoss" no="17">
              <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
              <stay wp="TD" until="stage_time>60" no="1"/>
              <deroute block="ComeBackAndLand" no="2"/>
            </block>
            <block name="HOME" no="18">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="18" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="17" block_name="DatalinkLoss" stage="2">
            <deroute block="ComeBackAndLand" no="2"/>
          </stage>
          <stage block="17" block_name="DatalinkLoss" stage="1">
            <stay wp="TD" until="stage_time>60" no="1"/>
          </stage>
          <stage block="17" block_name="DatalinkLoss" stage="0">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="16" block_name="ComeBackAndLand" stage="1">
            <deroute block="land here" no="1"/>
          </stage>
          <stage block="16" block_name="ComeBackAndLand" stage="0">
            <go wp="HOME" no="0"/>
          </stage>
          <stage block="15" block_name="landed" stage="0">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
          </stage>
          <stage block="14" block_name="flare" stage="1">
            <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
          </stage>
          <stage block="14" block_name="flare" stage="0">
            <call_once fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="13" block_name="land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="12" block_name="land here" stage="0">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="11" block_name="circle CAM" stage="0">
            <circle wp="CAM" radius="nav_radius" no="0"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="5">
            <deroute block="Standby" no="5"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="3">
            <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="2">
            <for var="i" to="16" from="1" no="2">
              <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
            </for>
          </stage>
          <stage block="10" block_name="test yaw" stage="0">
            <go wp="p1" no="0"/>
          </stage>
          <stage block="9" block_name="route" stage="4">
            <deroute block="stay_p1" no="4"/>
          </stage>
          <stage block="9" block_name="route" stage="3">
            <go wp="p1" hmode="route" from="p4" no="3"/>
          </stage>
          <stage block="9" block_name="route" stage="2">
            <go wp="p4" hmode="route" from="p3" no="2"/>
          </stage>
          <stage block="9" block_name="route" stage="1">
            <go wp="p3" hmode="route" from="p2" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="2">
            <go wp="p1" hmode="route" from="p2" no="2"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="1">
            <stay wp="p2" until="stage_time>10" no="1"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="1">
            <deroute block="stay_p1" no="1"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="0">
            <go wp="p2" no="0"/>
          </stage>
          <stage block="6" block_name="stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="5" block_name="Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="1">
            <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="0">
            <call_once fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="2">
            <call_once fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="0">
            <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="air_data">
              <dl_setting VAR="air_data.qnh" STEP="1" SHORTNAME="QNH" MODULE="air_data/air_data" MIN="800" MAX="1200"/>
              <dl_setting VAR="air_data.tas_factor" TYPE="float" STEP="0.01" SHORTNAME="TASfactor" PERSISTENT="true" PARAM="AIR_DATA_TAS_FACTOR" MODULE="air_data/air_data" MIN="0.8" MAX="1.3"/>
              <dl_setting VAR="air_data.calc_qnh_once" STEP="1" SHORTNAME="calcQNH" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_airspeed" TYPE="uint8" STEP="1" SHORTNAME="calcAirspeed" PERSISTENT="true" PARAM="AIR_DATA_CALC_AIRSPEED" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_tas_factor" TYPE="uint8" STEP="1" SHORTNAME="calcTASfactor" PERSISTENT="true" PARAM="AIR_DATA_CALC_TAS_FACTOR" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_amsl_baro" TYPE="uint8" STEP="1" SHORTNAME="calcAMSL" PERSISTENT="true" PARAM="AIR_DATA_CALC_AMSL_BARO" MODULE="air_data/air_data" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="geo_mag">
              <dl_setting VAR="geo_mag.calc_once" VALUES="OFF|CALC" STEP="1" SHORTNAME="calcNow" MODULE="geo_mag/geo_mag" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="guidance_indi">
              <dl_setting VAR="guidance_indi_pos_gain" STEP="0.1" SHORTNAME="kp_p" PERSISTENT="true" PARAM="GUIDANCE_INDI_POS_GAIN" MIN="0" MAX="10.0"/>
              <dl_setting VAR="guidance_indi_speed_gain" STEP="0.1" SHORTNAME="kp_p" PERSISTENT="true" PARAM="GUIDANCE_INDI_SPEED_GAIN" MIN="0" MAX="10.0"/>
              <dl_setting VAR="guidance_indi_max_bank" STEP="0.1" SHORTNAME="max_bank" PARAM="GUIDANCE_H_MAX_BANK" MIN="0" MAX="80.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
              <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
              <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
              <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
              <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="indi">
              <dl_setting VAR="indi.reference_acceleration.err_p" STEP="1" SHORTNAME="kp_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_P" MODULE="stabilization/stabilization_indi_simple" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_p" STEP="0.1" SHORTNAME="kd_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.p" STEP="0.001" SHORTNAME="ctl_eff_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_P" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.reference_acceleration.err_q" STEP="1" SHORTNAME="kp_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_Q" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_q" STEP="0.1" SHORTNAME="kd_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.q" STEP="0.001" SHORTNAME="ctl_eff_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_Q" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.reference_acceleration.err_r" STEP="1" SHORTNAME="kp_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_R" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_r" STEP="0.1" SHORTNAME="kd_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.r" STEP="0.001" SHORTNAME="ctl_eff_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_R" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.g2" STEP="0.01" SHORTNAME="g2" PERSISTENT="true" PARAM="STABILIZATION_INDI_G2_R" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.adaptive" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="use_adaptive" PERSISTENT="true" PARAM="STABILIZATION_INDI_USE_ADAPTIVE" MIN="0" MAX="1"/>
              <dl_setting VAR="indi.max_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_rate" PARAM="STABILIZATION_INDI_MAX_RATE" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
              <dl_setting VAR="indi.attitude_max_yaw_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_yaw_rate_attitude" PARAM="STABILIZATION_INDI_MAX_R" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="NAV">
              <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
              <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
              <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MIN="-50" MAX="50"/>
              <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MIN="0" MAX="10.0"/>
              <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MIN="-10.0" MAX="0.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Vert Loop">
              <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
              <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MIN="0.2" MAX="0.8"/>
              <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MIN="0" MAX="1"/>
              <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
            <dl_settings NAME="Horiz Loop">
              <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="true" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
              <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
              <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MIN="0" MAX="1"/>
              <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
              <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
              <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
              <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
              <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
              <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="MAVTec1">
        <description>MavTec with UBlox</description>
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="lisa_m_2.0">
            <module TYPE="spektrum" NAME="radio_control">
              <define VALUE="RADIO_GEAR" NAME="RADIO_KILL_SWITCH"/>
              <define VALUE="RADIO_AUX2" NAME="RADIO_MODE"/>
            </module>
            <configure VALUE="1" NAME="NO_LUFTBOOT"/>
          </target>
          <module NAME="motor_mixing"/>
          <module TYPE="pwm" NAME="actuators">
            <define VALUE="400" NAME="SERVO_HZ"/>
          </module>
          <module TYPE="xbee_api" NAME="telemetry"/>
          <module TYPE="aspirin_v2.2" NAME="imu"/>
          <module TYPE="ublox" NAME="gps"/>
          <module TYPE="indi_simple" NAME="stabilization"/>
          <module TYPE="int_cmpl_quat" NAME="ahrs">
            <define VALUE="30" NAME="AHRS_GRAVITY_HEURISTIC_FACTOR"/>
          </module>
          <module TYPE="hff" NAME="ins"/>
          <module TYPE="indi" NAME="guidance"/>
          <module NAME="geo_mag"/>
          <module NAME="air_data"/>
        </firmware>
        <servos DRIVER="Pwm">
          <servo NO="0" NEUTRAL="1200" NAME="MOTOR_0" MIN="1148" MAX="1832"/>
          <servo NO="1" NEUTRAL="1200" NAME="MOTOR_1" MIN="1148" MAX="1832"/>
          <servo NO="2" NEUTRAL="1200" NAME="MOTOR_2" MIN="1148" MAX="1832"/>
          <servo NO="3" NEUTRAL="1200" NAME="MOTOR_3" MIN="1148" MAX="1832"/>
        </servos>
        <commands>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="0"/>
        </commands>
        <section PREFIX="MOTOR_MIXING_" NAME="MIXING">
          <define VALUE="QUAD_X" NAME="TYPE"/>
        </section>
        <command_laws>
          <call FUN="motor_mixing_run(autopilot_get_motors_on(),FALSE,values)"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_LEFT]" SERVO="MOTOR_0"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_RIGHT]" SERVO="MOTOR_1"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_RIGHT]" SERVO="MOTOR_2"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_LEFT]" SERVO="MOTOR_3"/>
        </command_laws>
        <section NAME="MISC">
          <define VALUE="2.5" NAME="NAV_CLIMB_VSPEED"/>
          <define VALUE="-1.0" NAME="NAV_DESCEND_VSPEED"/>
          <define VALUE="TRUE" NAME="NO_RC_THRUST_LIMIT"/>
        </section>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="29" NAME="ACCEL_X_NEUTRAL"/>
          <define VALUE="-5" NAME="ACCEL_Y_NEUTRAL"/>
          <define VALUE="-344" NAME="ACCEL_Z_NEUTRAL"/>
          <define VALUE="4.88671674253" NAME="ACCEL_X_SENS" INTEGER="16"/>
          <define VALUE="4.85140885386" NAME="ACCEL_Y_SENS" INTEGER="16"/>
          <define VALUE="4.89977338537" NAME="ACCEL_Z_SENS" INTEGER="16"/>
          <define VALUE="-88" NAME="MAG_X_NEUTRAL"/>
          <define VALUE="42" NAME="MAG_Y_NEUTRAL"/>
          <define VALUE="44" NAME="MAG_Z_NEUTRAL"/>
          <define VALUE="3.55840131062" NAME="MAG_X_SENS" INTEGER="16"/>
          <define VALUE="3.59312782171" NAME="MAG_Y_SENS" INTEGER="16"/>
          <define VALUE="4.16199901926" NAME="MAG_Z_SENS" INTEGER="16"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="180." UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.3770441" NAME="H_X"/>
          <define VALUE="0.0193986" NAME="H_Y"/>
          <define VALUE="0.9259921" NAME="H_Z"/>
          <define VALUE="0" NAME="USE_GPS_HEADING"/>
        </section>
        <section PREFIX="STABILIZATION_RATE_" NAME="STABILIZATION_RATE">
          <define VALUE="140" UNIT="deg/s" NAME="SP_MAX_P"/>
          <define VALUE="140" UNIT="deg/s" NAME="SP_MAX_Q"/>
          <define VALUE="140" UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="20" NAME="DEADBAND_P"/>
          <define VALUE="20" NAME="DEADBAND_Q"/>
          <define VALUE="200" NAME="DEADBAND_R"/>
          <define VALUE="400" NAME="GAIN_P"/>
          <define VALUE="400" NAME="GAIN_Q"/>
          <define VALUE="350" NAME="GAIN_R"/>
          <define VALUE="75" NAME="IGAIN_P"/>
          <define VALUE="75" NAME="IGAIN_Q"/>
          <define VALUE="50" NAME="IGAIN_R"/>
        </section>
        <section PREFIX="INS_" NAME="INS"/>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="STABILIZATION_ATTITUDE">
          <define VALUE="65." UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="65." UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="250." UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="200" NAME="DEADBAND_R"/>
          <define VALUE="800" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.85" NAME="REF_ZETA_P"/>
          <define VALUE="300." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(7000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="800" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.85" NAME="REF_ZETA_Q"/>
          <define VALUE="300." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(7000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="500" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.85" NAME="REF_ZETA_R"/>
          <define VALUE="180." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(1800.)" NAME="REF_MAX_RDOT"/>
          <define VALUE="900" NAME="PHI_PGAIN"/>
          <define VALUE="200" NAME="PHI_DGAIN"/>
          <define VALUE="200" NAME="PHI_IGAIN"/>
          <define VALUE="900" NAME="THETA_PGAIN"/>
          <define VALUE="200" NAME="THETA_DGAIN"/>
          <define VALUE="200" NAME="THETA_IGAIN"/>
          <define VALUE="900" NAME="PSI_PGAIN"/>
          <define VALUE="200" NAME="PSI_DGAIN"/>
          <define VALUE="10" NAME="PSI_IGAIN"/>
          <define VALUE=" 200" NAME="PHI_DDGAIN"/>
          <define VALUE=" 200" NAME="THETA_DDGAIN"/>
          <define VALUE=" 200" NAME="PSI_DDGAIN"/>
        </section>
        <section PREFIX="STABILIZATION_INDI_" NAME="STABILIZATION_ATTITUDE_INDI">
          <define VALUE="0.035" NAME="G1_P"/>
          <define VALUE="0.035" NAME="G1_Q"/>
          <define VALUE="0.004" NAME="G1_R"/>
          <define VALUE="0.06" NAME="G2_R"/>
          <define VALUE="900.0" NAME="REF_ERR_P"/>
          <define VALUE="900.0" NAME="REF_ERR_Q"/>
          <define VALUE="600.0" NAME="REF_ERR_R"/>
          <define VALUE="33.0" NAME="REF_RATE_P"/>
          <define VALUE="33.0" NAME="REF_RATE_Q"/>
          <define VALUE="28.0" NAME="REF_RATE_R"/>
          <define VALUE="8.0" NAME="FILT_CUTOFF"/>
          <define VALUE="3.2" NAME="FILT_CUTOFF_R"/>
          <define VALUE="0.03" NAME="ACT_DYN_P"/>
          <define VALUE="0.03" NAME="ACT_DYN_Q"/>
          <define VALUE="0.03" NAME="ACT_DYN_R"/>
          <define VALUE="FALSE" NAME="USE_ADAPTIVE"/>
          <define VALUE="0.0001" NAME="ADAPTIVE_MU"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="150" NAME="HOVER_KP"/>
          <define VALUE="80" NAME="HOVER_KD"/>
          <define VALUE="20" NAME="HOVER_KI"/>
          <define VALUE="0.5" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="FALSE" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="35" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="TRUE" NAME="USE_SPEED_REF"/>
          <define VALUE="50" NAME="PGAIN"/>
          <define VALUE="100" NAME="DGAIN"/>
          <define VALUE="70" NAME="AGAIN"/>
          <define VALUE="20" NAME="IGAIN"/>
        </section>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_HOVER_Z_HOLD" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_NAV" NAME="MODE_AUTO2"/>
        </section>
        <section NAME="BAT">
          <define VALUE="9.3" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="9.6" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="10.1" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="12.4" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.05" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
            <message PERIOD="0.05" NAME="OPTICAL_FLOW_HOVER"/>
            <message PERIOD="0.10" NAME="VISUALTARGET"/>
            <message PERIOD="0.1" NAME="VISION_POSITION_ESTIMATE"/>
            <message PERIOD="0.05" NAME="DIVERGENCE"/>
            <message PERIOD="0.02" NAME="DRAGSPEED"/>
            <message PERIOD="5.1" NAME="LOGGER_STATUS"/>
            <message PERIOD="1.2" NAME="LIDAR"/>
            <message PERIOD=".25" NAME="INS_EKF2"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="BEBOP_ACTUATORS"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_FLOAT"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
            <message PERIOD="2.0" NAME="INDI_G"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="vel_guidance" KEY_PRESS="q">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HYBRID_GUIDANCE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1.0" NAME="GPS_INT"/>
            <message PERIOD="1.0" NAME="INS"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="RTCM3">
            <message PERIOD="1" NAME="GPS_RXMRTCM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD="1" NAME="GPS_RTK"/>
          </mode>
        </process>
        <process NAME="FlightRecorder">
          <mode NAME="default">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD=".1" NAME="GPS_INT"/>
            <message PERIOD=".1" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".2" NAME="IMU_MAG_SCALED"/>
            <message PERIOD="0.05" NAME="LIDAR"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="19"/>
            <dl_setting VAR="autopilot.kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot.power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot.mode" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="19" HANDLER="SetModeHandler"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="MAVTec3_Chris" ac_id="33" airframe="airframes/CDW/cdw_mavtec.xml" radio="radios/R6107SP_7ch.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/rotorcraft_basic.xml" settings="settings/rotorcraft_basic.xml settings/modules/config_asctec_v2.xml" settings_modules="modules/geo_mag.xml modules/nav_survey_poly_rotorcraft.xml modules/nav_survey_rectangle_rotorcraft.xml modules/gps_ubx_ucenter.xml modules/switch_servo.xml modules/ahrs_float_mlkf.xml modules/stabilization_int_quat.xml modules/nav_basic_rotorcraft.xml modules/guidance_rotorcraft.xml modules/gps.xml modules/imu_common.xml" gui_color="blue" release="33e02c9f1e831cb30ba9dc442e055b6e28c72a52">
      <radio SYNC_MIN="4000" SYNC_MAX="15000" PULSE_TYPE="NEGATIVE" NAME="FASST TX Module" DATA_MIN="700" DATA_MAX="2300">
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="ROLL" CTL="A" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="PITCH" CTL="B" AVERAGE="0"/>
        <channel NEUTRAL="1100" MIN="1100" MAX="1900" FUNCTION="THROTTLE" CTL="C" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="YAW" CTL="D" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="MODE" CTL="E" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="EXTRA1" CTL="F" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="FLAPS" CTL="G" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="2" name="Rotorcraft Basic (Enac)" max_dist_from_home="150" lon0="1 28 52.61" lat0="43 33 50.83" ground_alt="147" alt="152">
          <header>#include &quot;autopilot.h&quot;</header>
          <waypoints>
            <waypoint y="0.0" x="0.0" name="HOME"/>
            <waypoint y="5.0" x="0.0" name="CLIMB"/>
            <waypoint y="-5.0" x="-2.0" name="STDBY"/>
            <waypoint y="-13.9" x="3.6" name="p1"/>
            <waypoint y="-48.2" x="27.5" name="p2"/>
            <waypoint y="-19.6" x="16.7" name="p3"/>
            <waypoint y="-40.7" x="13.7" name="p4"/>
            <waypoint y="-50" x="-20" name="CAM" height="2."/>
            <waypoint y="-10.9" x="5.6" name="TD"/>
          </waypoints>
          <blocks>
            <block name="Wait GPS" no="0">
              <call_once fun="NavKillThrottle()" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Geo init" no="1">
              <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
              <call_once fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Holding point" no="2">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="Start Engine" no="3">
              <call_once fun="NavResurrect()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff" name="Takeoff" no="4">
              <exception deroute="Standby" cond="stateGetPositionEnu_f() @DEREF z @GT 2.0"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="5">
              <stay wp="STDBY" no="0"/>
            </block>
            <block name="stay_p1" no="6">
              <stay wp="p1" no="0"/>
            </block>
            <block name="go_p2" no="7">
              <call_once fun="nav_set_heading_deg(90)" no="0"/>
              <go wp="p2" no="1"/>
              <deroute block="stay_p1" no="2"/>
            </block>
            <block name="line_p1_p2" no="8">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <stay wp="p2" until="stage_time>10" no="1"/>
              <go wp="p1" hmode="route" from="p2" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="route" no="9">
              <go wp="p3" hmode="route" from="p1" no="0"/>
              <go wp="p4" hmode="route" from="p3" no="1"/>
              <go wp="p1" hmode="route" from="p4" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="Oval" no="10">
              <oval radius="-1" p2="p2" p1="p1" no="1"/>
            </block>
            <block name="test yaw" no="11">
              <go wp="p1" no="0"/>
              <for var="i" to="16" from="1" no="2">
                <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
              </for>
              <deroute block="Standby" no="5"/>
            </block>
            <block pre_call="nav_set_heading_towards_waypoint(WP_CAM)" name="circle CAM" no="12">
              <circle wp="CAM" radius="nav_radius" no="0"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land Here" name="land here" no="13">
              <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
            </block>
            <block name="land" no="14">
              <go wp="TD" no="0"/>
            </block>
            <block name="flare" no="15">
              <exception deroute="Holding point" cond="NavDetectGround()"/>
              <exception deroute="landed" cond="!nav_is_in_flight()"/>
              <call_once fun="NavStartDetectGround()" no="0"/>
              <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
            </block>
            <block name="landed" no="16">
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
            </block>
            <block name="HOME" no="17">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="17" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="16" block_name="landed" stage="0">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
          </stage>
          <stage block="15" block_name="flare" stage="1">
            <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
          </stage>
          <stage block="15" block_name="flare" stage="0">
            <call_once fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="14" block_name="land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="13" block_name="land here" stage="0">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="12" block_name="circle CAM" stage="0">
            <circle wp="CAM" radius="nav_radius" no="0"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="5">
            <deroute block="Standby" no="5"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="3">
            <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="2">
            <for var="i" to="16" from="1" no="2">
              <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
            </for>
          </stage>
          <stage block="11" block_name="test yaw" stage="0">
            <go wp="p1" no="0"/>
          </stage>
          <stage block="10" block_name="Oval" stage="1">
            <oval radius="-1" p2="p2" p1="p1" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="9" block_name="route" stage="2">
            <go wp="p1" hmode="route" from="p4" no="2"/>
          </stage>
          <stage block="9" block_name="route" stage="1">
            <go wp="p4" hmode="route" from="p3" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="0">
            <go wp="p3" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="2">
            <go wp="p1" hmode="route" from="p2" no="2"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="1">
            <stay wp="p2" until="stage_time>10" no="1"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="2">
            <deroute block="stay_p1" no="2"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="1">
            <go wp="p2" no="1"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="0">
            <call_once fun="nav_set_heading_deg(90)" no="0"/>
          </stage>
          <stage block="6" block_name="stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="5" block_name="Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="1">
            <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="0">
            <call_once fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="2">
            <call_once fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="0">
            <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="geo_mag">
              <dl_setting VAR="geo_mag.calc_once" VALUES="OFF|CALC" STEP="1" SHORTNAME="calcNow" MODULE="geo_mag/geo_mag" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="P_Survey">
              <dl_setting VAR="Poly_Size" TYPE="uint8_t" STEP="1" SHORTNAME="Size" MODULE="modules/nav/nav_survey_poly_rotorcraft" MIN="0" MAX="20"/>
              <dl_setting VAR="Poly_Distance" TYPE="float" STEP="1" SHORTNAME="Sweep" MODULE="modules/nav/nav_survey_poly_rotorcraft" MIN="0" MAX="500"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="Ret_Survey">
              <dl_setting VAR="sweep" TYPE="float" STEP="1" SHORTNAME="Distance" MODULE="modules/nav/nav_survey_rectangle_rotorcraft" MIN="10" MAX="500"/>
              <dl_setting VAR="interleave" VALUES="FALSE|TRUE" TYPE="bool" STEP="1" SHORTNAME="use_interleave" MODULE="modules/nav/nav_survey_rectangle_rotorcraft" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="ublox">
            <dl_settings NAME="ucenter">
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_h" STEP="1" SHORTNAME="sw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_l" STEP="1" SHORTNAME="sw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_h" STEP="1" SHORTNAME="hw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_l" STEP="1" SHORTNAME="hw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_init" STEP="100" SHORTNAME="inibaud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_run" STEP="100" SHORTNAME="baud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="Switch Servo">
            <dl_settings NAME="SWITCH">
              <dl_setting VAR="switch_servo_on" VALUES="Off|On" STEP="1" MODULE="switching/switch_servo" MIN="0" MAX="1">
                <strip_button VALUE="1" NAME="ON" GROUP="switching"/>
                <strip_button VALUE="0" NAME="OFF" GROUP="switching"/>
              </dl_setting>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_mlkf.mag_noise.x" TYPE="float" STEP="0.02" SHORTNAME="mag_noise_x" PERSISTENT="true" PARAM="AHRS_MAG_NOISE_X" MODULE="subsystems/ahrs/ahrs_float_mlkf" MIN="0.0" MAX="1.0"/>
              <dl_setting VAR="ahrs_mlkf.mag_noise.y" TYPE="float" STEP="0.02" SHORTNAME="mag_noise_y" PERSISTENT="true" PARAM="AHRS_MAG_NOISE_Y" MODULE="subsystems/ahrs/ahrs_float_mlkf" MIN="0.0" MAX="1.0"/>
              <dl_setting VAR="ahrs_mlkf.mag_noise.z" TYPE="float" STEP="0.02" SHORTNAME="mag_noise_z" PERSISTENT="true" PARAM="AHRS_MAG_NOISE_Z" MODULE="subsystems/ahrs/ahrs_float_mlkf" MIN="0.0" MAX="1.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Att Loop">
              <dl_setting VAR="stabilization_gains.p.x" TYPE="int32" STEP="1" SHORTNAME="pgain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_PGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="8000"/>
              <dl_setting VAR="stabilization_gains.d.x" TYPE="int32" STEP="1" SHORTNAME="dgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.x" TYPE="int32" STEP="1" SHORTNAME="igain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_IGAIN" MIN="0" MAX="800"/>
              <dl_setting VAR="stabilization_gains.dd.x" TYPE="int32" STEP="1" SHORTNAME="ddgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="stabilization_gains.p.y" TYPE="int32" STEP="1" SHORTNAME="pgain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_PGAIN" MIN="1" MAX="8000"/>
              <dl_setting VAR="stabilization_gains.d.y" TYPE="int32" STEP="1" SHORTNAME="dgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.y" TYPE="int32" STEP="1" SHORTNAME="igain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_IGAIN" MIN="0" MAX="800"/>
              <dl_setting VAR="stabilization_gains.dd.y" TYPE="int32" STEP="1" SHORTNAME="ddgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="stabilization_gains.p.z" TYPE="int32" STEP="1" SHORTNAME="pgain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_PGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.d.z" TYPE="int32" STEP="1" SHORTNAME="dgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.z" TYPE="int32" STEP="1" SHORTNAME="igain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_IGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="stabilization_gains.dd.z" TYPE="int32" STEP="1" SHORTNAME="ddgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.p" UNIT="rad/s" STEP="1" SHORTNAME="omega p" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_P" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaP" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.p" STEP="0.05" SHORTNAME="zeta p" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_P" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaP"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.q" UNIT="rad/s" STEP="1" SHORTNAME="omega q" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_Q" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaQ" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.q" STEP="0.05" SHORTNAME="zeta q" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_Q" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaQ"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.r" UNIT="rad/s" STEP="1" SHORTNAME="omega r" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_R" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaR" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.r" STEP="0.05" SHORTNAME="zeta r" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_R" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaR"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="NAV">
              <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
              <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
              <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MIN="-50" MAX="50"/>
              <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MIN="0" MAX="10.0"/>
              <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MIN="-10.0" MAX="0.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Vert Loop">
              <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
              <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MIN="0.2" MAX="0.8"/>
              <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MIN="0" MAX="1"/>
              <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
            <dl_settings NAME="Horiz Loop">
              <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="true" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
              <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
              <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MIN="0" MAX="1"/>
              <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
              <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
              <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
              <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
              <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
              <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="cdw_mavtec">
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="lisa_mx_2.1">
            <configure VALUE="SWD" NAME="FLASH_MODE"/>
            <module TYPE="ppm" NAME="radio_control"/>
            <define VALUE="RADIO_FLAPS" NAME="RADIO_KILL_SWITCH"/>
            <define VALUE="1" NAME="USE_KILL_SWITCH_FOR_MOTOR_ARMING"/>
            <define NAME="USE_I2C_ACTUATORS_REBOOT_HACK"/>
          </target>
          <target NAME="nps" BOARD="pc">
            <module TYPE="jsbsim" NAME="fdm"/>
            <module TYPE="ppm" NAME="radio_control"/>
          </target>
          <module NAME="motor_mixing"/>
          <module TYPE="asctec_v2" NAME="actuators"/>
          <module TYPE="pwm" NAME="actuators"/>
          <module TYPE="xbee_api" NAME="telemetry"/>
          <module TYPE="lisa_mx_v2.1" NAME="imu"/>
          <module TYPE="ublox" NAME="gps"/>
          <module TYPE="int_quat" NAME="stabilization"/>
          <module TYPE="float_mlkf" NAME="ahrs"/>
          <module TYPE="hff" NAME="ins"/>
        </firmware>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_NAV" NAME="MODE_STARTUP"/>
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_ATTITUDE_Z_HOLD" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_NAV" NAME="MODE_AUTO2"/>
        </section>
        <modules MAIN_FREQ="512">
          <module TYPE="servo" NAME="switch"/>
          <module NAME="send_imu_mag_current"/>
          <module TYPE="ubx_ucenter" NAME="gps"/>
          <module TYPE="survey_rectangle_rotorcraft" NAME="nav"/>
          <module TYPE="survey_poly_rotorcraft" NAME="nav"/>
          <module NAME="geo_mag"/>
        </modules>
        <servos DRIVER="Asctec_v2">
          <servo NO="0" NEUTRAL="3" NAME="FRONT" MIN="0" MAX="200"/>
          <servo NO="1" NEUTRAL="3" NAME="BACK" MIN="0" MAX="200"/>
          <servo NO="2" NEUTRAL="3" NAME="LEFT" MIN="0" MAX="200"/>
          <servo NO="3" NEUTRAL="3" NAME="RIGHT" MIN="0" MAX="200"/>
        </servos>
        <servos DRIVER="Pwm">
          <servo NO="4" NEUTRAL="1500" NAME="DROP" MIN="1100" MAX="2100"/>
        </servos>
        <section NAME="SWITCH_SERVO">
          <define VALUE="DROP" NAME="SWITCH_SERVO_SERVO"/>
          <define VALUE="SERVO_DROP_MIN" NAME="SWITCH_SERVO_ON_VALUE"/>
          <define VALUE="SERVO_DROP_MAX" NAME="SWITCH_SERVO_OFF_VALUE"/>
          <define VALUE="SwitchServoOn()" NAME="DropOpen()"/>
          <define VALUE="SwitchServoOff()" NAME="DropClose()"/>
        </section>
        <commands>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="0"/>
        </commands>
        <section PREFIX="MOTOR_MIXING_" NAME="MIXING">
          <define VALUE="0" NAME="TRIM_ROLL"/>
          <define VALUE="0" NAME="TRIM_PITCH"/>
          <define VALUE="0" NAME="TRIM_YAW"/>
          <define VALUE="4" NAME="NB_MOTOR"/>
          <define VALUE="256" NAME="SCALE"/>
          <define VALUE="{  256, -256, -256,  256 }" NAME="ROLL_COEF"/>
          <define VALUE="{  256,  256, -256, -256 }" NAME="PITCH_COEF"/>
          <define VALUE="{  256, -256,  256, -256 }" NAME="YAW_COEF"/>
          <define VALUE="{  256,  256,  256,  256 }" NAME="THRUST_COEF"/>
        </section>
        <command_laws>
          <call FUN="motor_mixing_run(autopilot_get_motors_on(),FALSE,values)"/>
          <set VALUE="motor_mixing.commands[0]" SERVO="FRONT"/>
          <set VALUE="motor_mixing.commands[1]" SERVO="BACK"/>
          <set VALUE="motor_mixing.commands[2]" SERVO="LEFT"/>
          <set VALUE="motor_mixing.commands[3]" SERVO="RIGHT"/>
        </command_laws>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="0" NAME="ACCEL_X_NEUTRAL"/>
          <define VALUE="0" NAME="ACCEL_Y_NEUTRAL"/>
          <define VALUE="0" NAME="ACCEL_Z_NEUTRAL"/>
          <define VALUE="140" NAME="MAG_X_NEUTRAL"/>
          <define VALUE="146" NAME="MAG_Y_NEUTRAL"/>
          <define VALUE="80" NAME="MAG_Z_NEUTRAL"/>
          <define VALUE="3.68116427889" NAME="MAG_X_SENS" INTEGER="16"/>
          <define VALUE="3.74966778358" NAME="MAG_Y_SENS" INTEGER="16"/>
          <define VALUE="4.05311539389" NAME="MAG_Z_SENS" INTEGER="16"/>
          <define VALUE="0.00322676138551" NAME="MAG_X_CURRENT_COEF"/>
          <define VALUE="0.00266367218758" NAME="MAG_Y_CURRENT_COEF"/>
          <define VALUE="-0.0004557295634" NAME="MAG_Z_CURRENT_COEF"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="270." UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="INS_" NAME="INS"/>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="STABILIZATION_ATTITUDE">
          <define VALUE="65." UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="65." UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="250." UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="200" NAME="DEADBAND_R"/>
          <define VALUE="600" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.87" NAME="REF_ZETA_P"/>
          <define VALUE="300." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(7000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="600" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.87" NAME="REF_ZETA_Q"/>
          <define VALUE="300." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(7000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="500" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.85" NAME="REF_ZETA_R"/>
          <define VALUE="180." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(1800.)" NAME="REF_MAX_RDOT"/>
          <define VALUE="400" NAME="PHI_PGAIN"/>
          <define VALUE="100" NAME="PHI_DGAIN"/>
          <define VALUE="10" NAME="PHI_IGAIN"/>
          <define VALUE="400" NAME="THETA_PGAIN"/>
          <define VALUE="100" NAME="THETA_DGAIN"/>
          <define VALUE="10" NAME="THETA_IGAIN"/>
          <define VALUE="500" NAME="PSI_PGAIN"/>
          <define VALUE="90" NAME="PSI_DGAIN"/>
          <define VALUE="10" NAME="PSI_IGAIN"/>
          <define VALUE="100" NAME="PHI_DDGAIN"/>
          <define VALUE="100" NAME="THETA_DDGAIN"/>
          <define VALUE="200" NAME="PSI_DDGAIN"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="500" NAME="HOVER_KP"/>
          <define VALUE="200" NAME="HOVER_KD"/>
          <define VALUE="100" NAME="HOVER_KI"/>
          <define VALUE="0.4" NAME="NOMINAL_HOVER_THROTTLE"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="100" NAME="PGAIN"/>
          <define VALUE="100" NAME="DGAIN"/>
          <define VALUE="0" NAME="IGAIN"/>
        </section>
        <section PREFIX="AHRS_H_" NAME="MAGNETICS">
          <define VALUE="0.4" NAME="X"/>
          <define VALUE="0" NAME="Y"/>
          <define VALUE="0.9" NAME="Z"/>
        </section>
        <section NAME="BAT">
          <define VALUE="20000" NAME="MILLIAMP_AT_FULL_THROTTLE"/>
          <define VALUE="9.3" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
        </section>
        <section PREFIX="NPS_" NAME="SIMULATOR">
          <define VALUE="ne_motor, se_motor, sw_motor, nw_motor" TYPE="string[]" NAME="ACTUATOR_NAMES"/>
          <define VALUE="simple_x_quad" TYPE="string" NAME="JSBSIM_MODEL"/>
          <define VALUE="nps_sensors_params_default.h" TYPE="string" NAME="SENSORS_PARAMS"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.05" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
            <message PERIOD="0.05" NAME="OPTICAL_FLOW_HOVER"/>
            <message PERIOD="0.10" NAME="VISUALTARGET"/>
            <message PERIOD="0.1" NAME="VISION_POSITION_ESTIMATE"/>
            <message PERIOD="0.05" NAME="DIVERGENCE"/>
            <message PERIOD="0.02" NAME="DRAGSPEED"/>
            <message PERIOD="5.1" NAME="LOGGER_STATUS"/>
            <message PERIOD="1.2" NAME="LIDAR"/>
            <message PERIOD=".25" NAME="INS_EKF2"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="BEBOP_ACTUATORS"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_FLOAT"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
            <message PERIOD="2.0" NAME="INDI_G"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="vel_guidance" KEY_PRESS="q">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HYBRID_GUIDANCE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1.0" NAME="GPS_INT"/>
            <message PERIOD="1.0" NAME="INS"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="RTCM3">
            <message PERIOD="1" NAME="GPS_RXMRTCM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD="1" NAME="GPS_RTK"/>
          </mode>
        </process>
        <process NAME="FlightRecorder">
          <mode NAME="default">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD=".1" NAME="GPS_INT"/>
            <message PERIOD=".1" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".2" NAME="IMU_MAG_SCALED"/>
            <message PERIOD="0.05" NAME="LIDAR"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="19"/>
            <dl_setting VAR="autopilot.kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot.power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot.mode" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="19" HANDLER="SetModeHandler"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings>
        <dl_settings>
          <dl_settings NAME="asctec_v2">
            <dl_setting var="actuators_asctec_v2.cmd" min="0" step="1" max="3" module="subsystems/actuators/actuators_asctec_v2" shortname="cmd" values="NONE|TEST|REVERSE|SET_ADDR" handler="SetCommand"/>
            <dl_setting var="actuators_asctec_v2.cur_addr" min="0" step="1" max="3" module="subsystems/actuators/actuators_asctec_v2" shortname="cur_addr" values="FRONT|BACK|LEFT|RIGHT" handler="SetCurAddr"/>
            <dl_setting var="actuators_asctec_v2.new_addr" min="0" step="1" max="3" module="subsystems/actuators/actuators_asctec_v2" shortname="new_addr" values="FRONT|BACK|LEFT|RIGHT" handler="SetNewAddr"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="MAVTec4_Bart" ac_id="34" airframe="airframes/tudelft/mavtec4.xml" radio="radios/dummy.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/tudelft/delft_basic.xml" settings="settings/rotorcraft_basic.xml settings/modules/config_asctec_v2.xml" settings_modules="modules/switch_servo.xml [modules/air_data.xml] [modules/geo_mag.xml] modules/guidance_indi.xml modules/ahrs_int_cmpl_quat.xml modules/stabilization_int_quat.xml modules/nav_basic_rotorcraft.xml modules/guidance_rotorcraft.xml modules/gps.xml modules/imu_common.xml" gui_color="#e66affffaa08">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitMM" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1120" MIN="1120" MAX="2000" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="2" name="Delft Basic" max_dist_from_home="1000" lon0="4 22 42.0" lat0="51 59 27.6" ground_alt="0" alt="4">
          <header>    #include &quot;autopilot.h&quot;
    #include &quot;subsystems/datalink/datalink.h&quot;
    #include &quot;subsystems/electrical.h&quot;
    #include &quot;subsystems/radio_control.h&quot;</header>
          <waypoints>
            <waypoint y="0.0" x="0.0" name="HOME"/>
            <waypoint y="5.0" x="0.0" name="CLIMB"/>
            <waypoint y="-5.0" x="-2.0" name="STDBY"/>
            <waypoint y="14.3" x="-19.9" name="p1"/>
            <waypoint y="21.6" x="-0.6" name="p2"/>
            <waypoint y="-26.5" x="22.2" name="p3"/>
            <waypoint y="-34.4" x="4.9" name="p4"/>
            <waypoint y="-29.4" x="14.2" name="CAM"/>
            <waypoint y="-10.9" x="5.6" name="TD"/>
          </waypoints>
          <exceptions>
            <exception deroute="ComeBackAndLand" cond="((radio_control.status == RC_REALLY_LOST) &&
      !(IndexOfBlock('Takeoff') > nav_block) &&
      !(nav_block >= IndexOfBlock('land here')) &&
      (autopilot_in_flight() == true) )"/>
            <exception deroute="DatalinkLoss" cond="(datalink_time > 60 &&
      !(datalink_time > 120) &&
      !(IndexOfBlock('Takeoff') > nav_block) &&
      !(nav_block >= IndexOfBlock('land here')) &&
      (autopilot_in_flight() == true) )"/>
            <exception deroute="ComeBackAndLand" cond="(electrical.bat_low &&
      !(IndexOfBlock('Holding point') > nav_block) &&
      !(nav_block >= IndexOfBlock('land here')) &&
      (autopilot_in_flight() == true) )"/>
            <exception deroute="land here" cond="(electrical.bat_critical &&
      !(IndexOfBlock('Holding point') > nav_block) &&
      !(nav_block >= IndexOfBlock('land here')) &&
      (autopilot_in_flight() == true) )"/>
          </exceptions>
          <blocks>
            <block name="Wait GPS" no="0">
              <call_once fun="NavKillThrottle()" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Geo init" no="1">
              <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
              <call_once fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Holding point" no="2">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="Start Engine" no="3">
              <call_once fun="NavResurrect()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff" name="Takeoff" no="4">
              <exception deroute="Standby" cond="stateGetPositionEnu_f()->z > 2.0"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="5">
              <stay wp="STDBY" no="0"/>
            </block>
            <block name="stay_p1" no="6">
              <stay wp="p1" no="0"/>
            </block>
            <block name="go_p2" no="7">
              <go wp="p2" no="0"/>
              <deroute block="stay_p1" no="1"/>
            </block>
            <block name="line_p1_p2" no="8">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <stay wp="p2" until="stage_time>10" no="1"/>
              <go wp="p1" hmode="route" from="p2" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="route" no="9">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <go wp="p3" hmode="route" from="p2" no="1"/>
              <go wp="p4" hmode="route" from="p3" no="2"/>
              <go wp="p1" hmode="route" from="p4" no="3"/>
              <deroute block="stay_p1" no="4"/>
            </block>
            <block name="test yaw" no="10">
              <go wp="p1" no="0"/>
              <for var="i" to="16" from="1" no="2">
                <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
              </for>
              <deroute block="Standby" no="5"/>
            </block>
            <block pre_call="nav_set_heading_towards_waypoint(WP_CAM)" name="circle CAM" no="11">
              <circle wp="CAM" radius="nav_radius" no="0"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land Here" name="land here" no="12">
              <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
            </block>
            <block name="land" no="13">
              <go wp="TD" no="0"/>
            </block>
            <block name="flare" no="14">
              <exception deroute="Holding point" cond="NavDetectGround()"/>
              <exception deroute="landed" cond="!nav_is_in_flight()"/>
              <call_once fun="NavStartDetectGround()" no="0"/>
              <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
            </block>
            <block name="landed" no="15">
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
            </block>
            <block name="ComeBackAndLand" no="16">
              <go wp="HOME" no="0"/>
              <deroute block="land here" no="1"/>
            </block>
            <block name="DatalinkLoss" no="17">
              <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
              <stay wp="TD" until="stage_time>60" no="1"/>
              <deroute block="ComeBackAndLand" no="2"/>
            </block>
            <block name="HOME" no="18">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="18" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="17" block_name="DatalinkLoss" stage="2">
            <deroute block="ComeBackAndLand" no="2"/>
          </stage>
          <stage block="17" block_name="DatalinkLoss" stage="1">
            <stay wp="TD" until="stage_time>60" no="1"/>
          </stage>
          <stage block="17" block_name="DatalinkLoss" stage="0">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="16" block_name="ComeBackAndLand" stage="1">
            <deroute block="land here" no="1"/>
          </stage>
          <stage block="16" block_name="ComeBackAndLand" stage="0">
            <go wp="HOME" no="0"/>
          </stage>
          <stage block="15" block_name="landed" stage="0">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
          </stage>
          <stage block="14" block_name="flare" stage="1">
            <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
          </stage>
          <stage block="14" block_name="flare" stage="0">
            <call_once fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="13" block_name="land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="12" block_name="land here" stage="0">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="11" block_name="circle CAM" stage="0">
            <circle wp="CAM" radius="nav_radius" no="0"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="5">
            <deroute block="Standby" no="5"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="3">
            <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="2">
            <for var="i" to="16" from="1" no="2">
              <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
            </for>
          </stage>
          <stage block="10" block_name="test yaw" stage="0">
            <go wp="p1" no="0"/>
          </stage>
          <stage block="9" block_name="route" stage="4">
            <deroute block="stay_p1" no="4"/>
          </stage>
          <stage block="9" block_name="route" stage="3">
            <go wp="p1" hmode="route" from="p4" no="3"/>
          </stage>
          <stage block="9" block_name="route" stage="2">
            <go wp="p4" hmode="route" from="p3" no="2"/>
          </stage>
          <stage block="9" block_name="route" stage="1">
            <go wp="p3" hmode="route" from="p2" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="2">
            <go wp="p1" hmode="route" from="p2" no="2"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="1">
            <stay wp="p2" until="stage_time>10" no="1"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="1">
            <deroute block="stay_p1" no="1"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="0">
            <go wp="p2" no="0"/>
          </stage>
          <stage block="6" block_name="stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="5" block_name="Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="1">
            <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="0">
            <call_once fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="2">
            <call_once fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="0">
            <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings NAME="Switch Servo">
            <dl_settings NAME="SWITCH">
              <dl_setting VAR="switch_servo_on" VALUES="Off|On" STEP="1" MODULE="switching/switch_servo" MIN="0" MAX="1">
                <strip_button VALUE="1" NAME="ON" GROUP="switching"/>
                <strip_button VALUE="0" NAME="OFF" GROUP="switching"/>
              </dl_setting>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="guidance_indi">
              <dl_setting VAR="guidance_indi_pos_gain" STEP="0.1" SHORTNAME="kp_p" PERSISTENT="true" PARAM="GUIDANCE_INDI_POS_GAIN" MIN="0" MAX="10.0"/>
              <dl_setting VAR="guidance_indi_speed_gain" STEP="0.1" SHORTNAME="kp_p" PERSISTENT="true" PARAM="GUIDANCE_INDI_SPEED_GAIN" MIN="0" MAX="10.0"/>
              <dl_setting VAR="guidance_indi_max_bank" STEP="0.1" SHORTNAME="max_bank" PARAM="GUIDANCE_H_MAX_BANK" MIN="0" MAX="80.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
              <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
              <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
              <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
              <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Att Loop">
              <dl_setting VAR="stabilization_gains.p.x" TYPE="int32" STEP="1" SHORTNAME="pgain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_PGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="8000"/>
              <dl_setting VAR="stabilization_gains.d.x" TYPE="int32" STEP="1" SHORTNAME="dgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.x" TYPE="int32" STEP="1" SHORTNAME="igain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_IGAIN" MIN="0" MAX="800"/>
              <dl_setting VAR="stabilization_gains.dd.x" TYPE="int32" STEP="1" SHORTNAME="ddgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="stabilization_gains.p.y" TYPE="int32" STEP="1" SHORTNAME="pgain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_PGAIN" MIN="1" MAX="8000"/>
              <dl_setting VAR="stabilization_gains.d.y" TYPE="int32" STEP="1" SHORTNAME="dgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.y" TYPE="int32" STEP="1" SHORTNAME="igain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_IGAIN" MIN="0" MAX="800"/>
              <dl_setting VAR="stabilization_gains.dd.y" TYPE="int32" STEP="1" SHORTNAME="ddgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="stabilization_gains.p.z" TYPE="int32" STEP="1" SHORTNAME="pgain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_PGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.d.z" TYPE="int32" STEP="1" SHORTNAME="dgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.z" TYPE="int32" STEP="1" SHORTNAME="igain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_IGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="stabilization_gains.dd.z" TYPE="int32" STEP="1" SHORTNAME="ddgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.p" UNIT="rad/s" STEP="1" SHORTNAME="omega p" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_P" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaP" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.p" STEP="0.05" SHORTNAME="zeta p" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_P" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaP"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.q" UNIT="rad/s" STEP="1" SHORTNAME="omega q" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_Q" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaQ" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.q" STEP="0.05" SHORTNAME="zeta q" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_Q" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaQ"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.r" UNIT="rad/s" STEP="1" SHORTNAME="omega r" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_R" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaR" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.r" STEP="0.05" SHORTNAME="zeta r" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_R" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaR"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="NAV">
              <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
              <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
              <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MIN="-50" MAX="50"/>
              <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MIN="0" MAX="10.0"/>
              <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MIN="-10.0" MAX="0.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Vert Loop">
              <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
              <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MIN="0.2" MAX="0.8"/>
              <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MIN="0" MAX="1"/>
              <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
            <dl_settings NAME="Horiz Loop">
              <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="true" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
              <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
              <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MIN="0" MAX="1"/>
              <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
              <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
              <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
              <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
              <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
              <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="MAVTec4">
        <description>MavTec with UBlox</description>
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="lisa_mx_2.1"/>
          <target NAME="nps" BOARD="pc">
            <module TYPE="jsbsim" NAME="fdm"/>
          </target>
          <module TYPE="spektrum" NAME="radio_control">
            <define VALUE="RADIO_AUX2" NAME="RADIO_KILL_SWITCH"/>
            <define VALUE="RADIO_GEAR" NAME="RADIO_MODE"/>
          </module>
          <module NAME="motor_mixing"/>
          <module TYPE="asctec_v2" NAME="actuators"/>
          <module TYPE="pwm" NAME="actuators"/>
          <module TYPE="xbee_api" NAME="telemetry"/>
          <module TYPE="lisa_mx_v2.1" NAME="imu"/>
          <module TYPE="piksi" NAME="gps">
            <define VALUE="TRUE" NAME="USE_PIKSI_EXT_ANTENNA"/>
          </module>
          <module TYPE="int_quat" NAME="stabilization"/>
          <module TYPE="int_cmpl_quat" NAME="ahrs"/>
          <module TYPE="hff" NAME="ins"/>
          <module TYPE="indi" NAME="guidance"/>
          <module NAME="geo_mag"/>
          <module NAME="air_data"/>
          <module TYPE="servo" NAME="switch"/>
        </firmware>
        <servos DRIVER="Asctec_v2">
          <servo NO="0" NEUTRAL="3" NAME="FRONT" MIN="0" MAX="200"/>
          <servo NO="1" NEUTRAL="3" NAME="RIGHT" MIN="0" MAX="200"/>
          <servo NO="2" NEUTRAL="3" NAME="BACK" MIN="0" MAX="200"/>
          <servo NO="3" NEUTRAL="3" NAME="LEFT" MIN="0" MAX="200"/>
        </servos>
        <servos DRIVER="Pwm">
          <servo NO="4" NEUTRAL="1500" NAME="DROP" MIN="900" MAX="2000"/>
        </servos>
        <commands>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="0"/>
        </commands>
        <section PREFIX="MOTOR_MIXING_" NAME="MIXING">
          <define VALUE="QUAD_X" NAME="TYPE"/>
          <define VALUE="TRUE" NAME="REVERSE"/>
        </section>
        <section NAME="SWITCH_SERVO">
          <define VALUE="DROP" NAME="SWITCH_SERVO_SERVO"/>
          <define VALUE="SERVO_DROP_MIN" NAME="SWITCH_SERVO_ON_VALUE"/>
          <define VALUE="SERVO_DROP_MAX" NAME="SWITCH_SERVO_OFF_VALUE"/>
          <define VALUE="SwitchServoOn()" NAME="DropOpen()"/>
          <define VALUE="SwitchServoOff()" NAME="DropClose()"/>
        </section>
        <command_laws>
          <call FUN="motor_mixing_run(autopilot_get_motors_on(),FALSE,values)"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_LEFT]" SERVO="FRONT"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_RIGHT]" SERVO="RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_RIGHT]" SERVO="BACK"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_LEFT]" SERVO="LEFT"/>
        </command_laws>
        <section NAME="MISC">
          <define VALUE="2.5" NAME="NAV_CLIMB_VSPEED"/>
          <define VALUE="-1.0" NAME="NAV_DESCEND_VSPEED"/>
          <define VALUE="TRUE" NAME="NO_RC_THRUST_LIMIT"/>
        </section>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="11" NAME="ACCEL_X_NEUTRAL"/>
          <define VALUE="11" NAME="ACCEL_Y_NEUTRAL"/>
          <define VALUE="-25" NAME="ACCEL_Z_NEUTRAL"/>
          <define VALUE="-2" NAME="MAG_X_NEUTRAL"/>
          <define VALUE="484" NAME="MAG_Y_NEUTRAL"/>
          <define VALUE="53" NAME="MAG_Z_NEUTRAL"/>
          <define VALUE="4.02836351262" NAME="MAG_X_SENS" INTEGER="16"/>
          <define VALUE="3.97184580645" NAME="MAG_Y_SENS" INTEGER="16"/>
          <define VALUE="4.08689235615" NAME="MAG_Z_SENS" INTEGER="16"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="-90." UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.3770441" NAME="H_X"/>
          <define VALUE="0.0193986" NAME="H_Y"/>
          <define VALUE="0.9259921" NAME="H_Z"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="STABILIZATION_ATTITUDE">
          <define VALUE="65." UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="65." UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="250." UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="200" NAME="DEADBAND_R"/>
          <define VALUE="800" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.85" NAME="REF_ZETA_P"/>
          <define VALUE="300." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(7000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="800" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.85" NAME="REF_ZETA_Q"/>
          <define VALUE="300." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(7000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="500" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.85" NAME="REF_ZETA_R"/>
          <define VALUE="180." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(1800.)" NAME="REF_MAX_RDOT"/>
          <define VALUE="900" NAME="PHI_PGAIN"/>
          <define VALUE="200" NAME="PHI_DGAIN"/>
          <define VALUE="200" NAME="PHI_IGAIN"/>
          <define VALUE="900" NAME="THETA_PGAIN"/>
          <define VALUE="200" NAME="THETA_DGAIN"/>
          <define VALUE="200" NAME="THETA_IGAIN"/>
          <define VALUE="900" NAME="PSI_PGAIN"/>
          <define VALUE="200" NAME="PSI_DGAIN"/>
          <define VALUE="10" NAME="PSI_IGAIN"/>
          <define VALUE=" 200" NAME="PHI_DDGAIN"/>
          <define VALUE=" 200" NAME="THETA_DDGAIN"/>
          <define VALUE=" 200" NAME="PSI_DDGAIN"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="150" NAME="HOVER_KP"/>
          <define VALUE="80" NAME="HOVER_KD"/>
          <define VALUE="20" NAME="HOVER_KI"/>
          <define VALUE="0.5" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="TRUE" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="35" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="TRUE" NAME="USE_SPEED_REF"/>
          <define VALUE="50" NAME="PGAIN"/>
          <define VALUE="100" NAME="DGAIN"/>
          <define VALUE="70" NAME="AGAIN"/>
          <define VALUE="20" NAME="IGAIN"/>
        </section>
        <section PREFIX="NPS_" NAME="SIMULATOR">
          <define VALUE="nw_motor, ne_motor, se_motor, sw_motor" TYPE="string[]" NAME="ACTUATOR_NAMES"/>
          <define VALUE="simple_x_quad" TYPE="string" NAME="JSBSIM_MODEL"/>
          <define VALUE="nps_sensors_params_default.h" TYPE="string" NAME="SENSORS_PARAMS"/>
          <define VALUE="4" NAME="JS_AXIS_MODE"/>
        </section>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_HOVER_Z_HOLD" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_NAV" NAME="MODE_AUTO2"/>
        </section>
        <section NAME="BAT">
          <define VALUE="9.3" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="9.6" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="10.1" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="12.4" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.05" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
            <message PERIOD="0.05" NAME="OPTICAL_FLOW_HOVER"/>
            <message PERIOD="0.10" NAME="VISUALTARGET"/>
            <message PERIOD="0.1" NAME="VISION_POSITION_ESTIMATE"/>
            <message PERIOD="0.05" NAME="DIVERGENCE"/>
            <message PERIOD="0.02" NAME="DRAGSPEED"/>
            <message PERIOD="5.1" NAME="LOGGER_STATUS"/>
            <message PERIOD="1.2" NAME="LIDAR"/>
            <message PERIOD=".25" NAME="INS_EKF2"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="BEBOP_ACTUATORS"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_FLOAT"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
            <message PERIOD="2.0" NAME="INDI_G"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="vel_guidance" KEY_PRESS="q">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HYBRID_GUIDANCE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1.0" NAME="GPS_INT"/>
            <message PERIOD="1.0" NAME="INS"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="RTCM3">
            <message PERIOD="1" NAME="GPS_RXMRTCM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD="1" NAME="GPS_RTK"/>
          </mode>
        </process>
        <process NAME="FlightRecorder">
          <mode NAME="default">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD=".1" NAME="GPS_INT"/>
            <message PERIOD=".1" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".2" NAME="IMU_MAG_SCALED"/>
            <message PERIOD="0.05" NAME="LIDAR"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="19"/>
            <dl_setting VAR="autopilot.kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot.power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot.mode" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="19" HANDLER="SetModeHandler"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings>
        <dl_settings>
          <dl_settings NAME="asctec_v2">
            <dl_setting var="actuators_asctec_v2.cmd" min="0" step="1" max="3" module="subsystems/actuators/actuators_asctec_v2" shortname="cmd" values="NONE|TEST|REVERSE|SET_ADDR" handler="SetCommand"/>
            <dl_setting var="actuators_asctec_v2.cur_addr" min="0" step="1" max="3" module="subsystems/actuators/actuators_asctec_v2" shortname="cur_addr" values="FRONT|BACK|LEFT|RIGHT" handler="SetCurAddr"/>
            <dl_setting var="actuators_asctec_v2.new_addr" min="0" step="1" max="3" module="subsystems/actuators/actuators_asctec_v2" shortname="new_addr" values="FRONT|BACK|LEFT|RIGHT" handler="SetNewAddr"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="MAVTec5_Freek" ac_id="35" airframe="airframes/tudelft/mavtec5.xml" radio="radios/dummy.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/tudelft/delft_basic.xml" settings="settings/rotorcraft_basic.xml settings/modules/config_asctec_v2.xml" settings_modules="modules/gps_ubx_ucenter.xml modules/switch_servo.xml [modules/air_data.xml] [modules/geo_mag.xml] modules/ahrs_int_cmpl_quat.xml modules/stabilization_indi_simple.xml modules/nav_basic_rotorcraft.xml modules/guidance_rotorcraft.xml modules/gps.xml modules/imu_common.xml" gui_color="#8c63ffff8e00" release="33e02c9f1e831cb30ba9dc442e055b6e28c72a52">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitMM" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1120" MIN="1120" MAX="2000" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="2" name="Delft Basic" max_dist_from_home="1000" lon0="4 22 42.0" lat0="51 59 27.6" ground_alt="0" alt="4">
          <header>    #include &quot;autopilot.h&quot;
    #include &quot;subsystems/datalink/datalink.h&quot;
    #include &quot;subsystems/electrical.h&quot;
    #include &quot;subsystems/radio_control.h&quot;</header>
          <waypoints>
            <waypoint y="0.0" x="0.0" name="HOME"/>
            <waypoint y="5.0" x="0.0" name="CLIMB"/>
            <waypoint y="-5.0" x="-2.0" name="STDBY"/>
            <waypoint y="14.3" x="-19.9" name="p1"/>
            <waypoint y="21.6" x="-0.6" name="p2"/>
            <waypoint y="-26.5" x="22.2" name="p3"/>
            <waypoint y="-34.4" x="4.9" name="p4"/>
            <waypoint y="-29.4" x="14.2" name="CAM"/>
            <waypoint y="-10.9" x="5.6" name="TD"/>
          </waypoints>
          <exceptions>
            <exception deroute="ComeBackAndLand" cond="((radio_control.status == RC_REALLY_LOST) &&
      !(IndexOfBlock('Takeoff') > nav_block) &&
      !(nav_block >= IndexOfBlock('land here')) &&
      (autopilot_in_flight() == true) )"/>
            <exception deroute="DatalinkLoss" cond="(datalink_time > 60 &&
      !(datalink_time > 120) &&
      !(IndexOfBlock('Takeoff') > nav_block) &&
      !(nav_block >= IndexOfBlock('land here')) &&
      (autopilot_in_flight() == true) )"/>
            <exception deroute="ComeBackAndLand" cond="(electrical.bat_low &&
      !(IndexOfBlock('Holding point') > nav_block) &&
      !(nav_block >= IndexOfBlock('land here')) &&
      (autopilot_in_flight() == true) )"/>
            <exception deroute="land here" cond="(electrical.bat_critical &&
      !(IndexOfBlock('Holding point') > nav_block) &&
      !(nav_block >= IndexOfBlock('land here')) &&
      (autopilot_in_flight() == true) )"/>
          </exceptions>
          <blocks>
            <block name="Wait GPS" no="0">
              <call_once fun="NavKillThrottle()" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Geo init" no="1">
              <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
              <call_once fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Holding point" no="2">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="Start Engine" no="3">
              <call_once fun="NavResurrect()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff" name="Takeoff" no="4">
              <exception deroute="Standby" cond="stateGetPositionEnu_f()->z > 2.0"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="5">
              <stay wp="STDBY" no="0"/>
            </block>
            <block name="stay_p1" no="6">
              <stay wp="p1" no="0"/>
            </block>
            <block name="go_p2" no="7">
              <go wp="p2" no="0"/>
              <deroute block="stay_p1" no="1"/>
            </block>
            <block name="line_p1_p2" no="8">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <stay wp="p2" until="stage_time>10" no="1"/>
              <go wp="p1" hmode="route" from="p2" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="route" no="9">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <go wp="p3" hmode="route" from="p2" no="1"/>
              <go wp="p4" hmode="route" from="p3" no="2"/>
              <go wp="p1" hmode="route" from="p4" no="3"/>
              <deroute block="stay_p1" no="4"/>
            </block>
            <block name="test yaw" no="10">
              <go wp="p1" no="0"/>
              <for var="i" to="16" from="1" no="2">
                <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
              </for>
              <deroute block="Standby" no="5"/>
            </block>
            <block pre_call="nav_set_heading_towards_waypoint(WP_CAM)" name="circle CAM" no="11">
              <circle wp="CAM" radius="nav_radius" no="0"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land Here" name="land here" no="12">
              <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
            </block>
            <block name="land" no="13">
              <go wp="TD" no="0"/>
            </block>
            <block name="flare" no="14">
              <exception deroute="Holding point" cond="NavDetectGround()"/>
              <exception deroute="landed" cond="!nav_is_in_flight()"/>
              <call_once fun="NavStartDetectGround()" no="0"/>
              <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
            </block>
            <block name="landed" no="15">
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
            </block>
            <block name="ComeBackAndLand" no="16">
              <go wp="HOME" no="0"/>
              <deroute block="land here" no="1"/>
            </block>
            <block name="DatalinkLoss" no="17">
              <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
              <stay wp="TD" until="stage_time>60" no="1"/>
              <deroute block="ComeBackAndLand" no="2"/>
            </block>
            <block name="HOME" no="18">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="18" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="17" block_name="DatalinkLoss" stage="2">
            <deroute block="ComeBackAndLand" no="2"/>
          </stage>
          <stage block="17" block_name="DatalinkLoss" stage="1">
            <stay wp="TD" until="stage_time>60" no="1"/>
          </stage>
          <stage block="17" block_name="DatalinkLoss" stage="0">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="16" block_name="ComeBackAndLand" stage="1">
            <deroute block="land here" no="1"/>
          </stage>
          <stage block="16" block_name="ComeBackAndLand" stage="0">
            <go wp="HOME" no="0"/>
          </stage>
          <stage block="15" block_name="landed" stage="0">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
          </stage>
          <stage block="14" block_name="flare" stage="1">
            <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
          </stage>
          <stage block="14" block_name="flare" stage="0">
            <call_once fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="13" block_name="land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="12" block_name="land here" stage="0">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="11" block_name="circle CAM" stage="0">
            <circle wp="CAM" radius="nav_radius" no="0"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="5">
            <deroute block="Standby" no="5"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="3">
            <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="2">
            <for var="i" to="16" from="1" no="2">
              <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
            </for>
          </stage>
          <stage block="10" block_name="test yaw" stage="0">
            <go wp="p1" no="0"/>
          </stage>
          <stage block="9" block_name="route" stage="4">
            <deroute block="stay_p1" no="4"/>
          </stage>
          <stage block="9" block_name="route" stage="3">
            <go wp="p1" hmode="route" from="p4" no="3"/>
          </stage>
          <stage block="9" block_name="route" stage="2">
            <go wp="p4" hmode="route" from="p3" no="2"/>
          </stage>
          <stage block="9" block_name="route" stage="1">
            <go wp="p3" hmode="route" from="p2" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="2">
            <go wp="p1" hmode="route" from="p2" no="2"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="1">
            <stay wp="p2" until="stage_time>10" no="1"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="1">
            <deroute block="stay_p1" no="1"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="0">
            <go wp="p2" no="0"/>
          </stage>
          <stage block="6" block_name="stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="5" block_name="Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="1">
            <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="0">
            <call_once fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="2">
            <call_once fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="0">
            <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings NAME="ublox">
            <dl_settings NAME="ucenter">
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_h" STEP="1" SHORTNAME="sw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_l" STEP="1" SHORTNAME="sw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_h" STEP="1" SHORTNAME="hw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_l" STEP="1" SHORTNAME="hw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_init" STEP="100" SHORTNAME="inibaud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_run" STEP="100" SHORTNAME="baud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="Switch Servo">
            <dl_settings NAME="SWITCH">
              <dl_setting VAR="switch_servo_on" VALUES="Off|On" STEP="1" MODULE="switching/switch_servo" MIN="0" MAX="1">
                <strip_button VALUE="1" NAME="ON" GROUP="switching"/>
                <strip_button VALUE="0" NAME="OFF" GROUP="switching"/>
              </dl_setting>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
              <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
              <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
              <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
              <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="indi">
              <dl_setting VAR="indi.reference_acceleration.err_p" STEP="1" SHORTNAME="kp_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_P" MODULE="stabilization/stabilization_indi_simple" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_p" STEP="0.1" SHORTNAME="kd_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.p" STEP="0.001" SHORTNAME="ctl_eff_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_P" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.reference_acceleration.err_q" STEP="1" SHORTNAME="kp_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_Q" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_q" STEP="0.1" SHORTNAME="kd_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.q" STEP="0.001" SHORTNAME="ctl_eff_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_Q" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.reference_acceleration.err_r" STEP="1" SHORTNAME="kp_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_R" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_r" STEP="0.1" SHORTNAME="kd_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.r" STEP="0.001" SHORTNAME="ctl_eff_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_R" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.g2" STEP="0.01" SHORTNAME="g2" PERSISTENT="true" PARAM="STABILIZATION_INDI_G2_R" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.adaptive" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="use_adaptive" PERSISTENT="true" PARAM="STABILIZATION_INDI_USE_ADAPTIVE" MIN="0" MAX="1"/>
              <dl_setting VAR="indi.max_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_rate" PARAM="STABILIZATION_INDI_MAX_RATE" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
              <dl_setting VAR="indi.attitude_max_yaw_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_yaw_rate_attitude" PARAM="STABILIZATION_INDI_MAX_R" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="NAV">
              <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
              <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
              <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MIN="-50" MAX="50"/>
              <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MIN="0" MAX="10.0"/>
              <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MIN="-10.0" MAX="0.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Vert Loop">
              <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
              <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MIN="0.2" MAX="0.8"/>
              <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MIN="0" MAX="1"/>
              <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
            <dl_settings NAME="Horiz Loop">
              <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="true" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
              <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
              <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MIN="0" MAX="1"/>
              <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
              <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
              <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
              <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
              <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
              <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="MAVTec5">
        <description>MavTec with INDI, DSM2 (DSM-X fails to bind), INDI gains high</description>
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="lisa_mx_2.1">
            <configure VALUE="SWD" NAME="FLASH_MODE"/>
          </target>
          <target NAME="nps" BOARD="pc">
            <module TYPE="jsbsim" NAME="fdm"/>
          </target>
          <module TYPE="spektrum" NAME="radio_control">
            <define VALUE="RADIO_AUX1" NAME="RADIO_KILL_SWITCH"/>
            <define VALUE="RADIO_GEAR" NAME="RADIO_MODE"/>
          </module>
          <module NAME="motor_mixing"/>
          <module TYPE="asctec_v2" NAME="actuators"/>
          <module TYPE="pwm" NAME="actuators"/>
          <module TYPE="xbee_api" NAME="telemetry"/>
          <module TYPE="lisa_mx_v2.1" NAME="imu"/>
          <module TYPE="ublox" NAME="gps">
            <define VALUE="TRUE" NAME="USE_PIKSI_EXT_ANTENNA"/>
          </module>
          <module TYPE="indi_simple" NAME="stabilization"/>
          <module TYPE="int_cmpl_quat" NAME="ahrs"/>
          <module TYPE="hff" NAME="ins"/>
          <module NAME="geo_mag"/>
          <module NAME="air_data"/>
          <module TYPE="servo" NAME="switch"/>
          <module TYPE="ubx_ucenter" NAME="gps"/>
          <module NAME="logger_spi_link">
            <configure VALUE="SPI1" NAME="HS_LOG_SPI_DEV"/>
            <configure VALUE="SPI_SLAVE1" NAME="HS_LOG_SPI_SLAVE_IDX"/>
          </module>
        </firmware>
        <servos DRIVER="Asctec_v2">
          <servo NO="0" NEUTRAL="3" NAME="FRONT" MIN="0" MAX="200"/>
          <servo NO="1" NEUTRAL="3" NAME="RIGHT" MIN="0" MAX="200"/>
          <servo NO="2" NEUTRAL="3" NAME="BACK" MIN="0" MAX="200"/>
          <servo NO="3" NEUTRAL="3" NAME="LEFT" MIN="0" MAX="200"/>
        </servos>
        <servos DRIVER="Pwm">
          <servo NO="4" NEUTRAL="1500" NAME="DROP" MIN="1100" MAX="2100"/>
        </servos>
        <commands>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="0"/>
        </commands>
        <section PREFIX="MOTOR_MIXING_" NAME="MIXING">
          <define VALUE="QUAD_X" NAME="TYPE"/>
          <define VALUE="TRUE" NAME="REVERSE"/>
        </section>
        <section NAME="SWITCH_SERVO">
          <define VALUE="DROP" NAME="SWITCH_SERVO_SERVO"/>
          <define VALUE="SERVO_DROP_MIN" NAME="SWITCH_SERVO_ON_VALUE"/>
          <define VALUE="SERVO_DROP_MAX" NAME="SWITCH_SERVO_OFF_VALUE"/>
          <define VALUE="SwitchServoOn()" NAME="DropOpen()"/>
          <define VALUE="SwitchServoOff()" NAME="DropClose()"/>
        </section>
        <command_laws>
          <call FUN="motor_mixing_run(autopilot_get_motors_on(),FALSE,values)"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_LEFT]" SERVO="FRONT"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_RIGHT]" SERVO="RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_RIGHT]" SERVO="BACK"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_LEFT]" SERVO="LEFT"/>
        </command_laws>
        <section NAME="MISC">
          <define VALUE="2.5" NAME="NAV_CLIMB_VSPEED"/>
          <define VALUE="-1.0" NAME="NAV_DESCEND_VSPEED"/>
          <define VALUE="TRUE" NAME="NO_RC_THRUST_LIMIT"/>
        </section>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="11" NAME="ACCEL_X_NEUTRAL"/>
          <define VALUE="11" NAME="ACCEL_Y_NEUTRAL"/>
          <define VALUE="-25" NAME="ACCEL_Z_NEUTRAL"/>
          <define VALUE="14" NAME="MAG_X_NEUTRAL"/>
          <define VALUE="116" NAME="MAG_Y_NEUTRAL"/>
          <define VALUE="119" NAME="MAG_Z_NEUTRAL"/>
          <define VALUE="5.09245681612" NAME="MAG_X_SENS" INTEGER="16"/>
          <define VALUE="5.29702744632" NAME="MAG_Y_SENS" INTEGER="16"/>
          <define VALUE="5.65287938992" NAME="MAG_Z_SENS" INTEGER="16"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="-90." UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.3770441" NAME="H_X"/>
          <define VALUE="0.0193986" NAME="H_Y"/>
          <define VALUE="0.9259921" NAME="H_Z"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="STABILIZATION_ATTITUDE">
          <define VALUE="65." UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="65." UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="250." UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="200" NAME="DEADBAND_R"/>
          <define VALUE="800" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.85" NAME="REF_ZETA_P"/>
          <define VALUE="300." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(7000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="800" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.85" NAME="REF_ZETA_Q"/>
          <define VALUE="300." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(7000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="500" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.85" NAME="REF_ZETA_R"/>
          <define VALUE="180." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(1800.)" NAME="REF_MAX_RDOT"/>
          <define VALUE="900" NAME="PHI_PGAIN"/>
          <define VALUE="200" NAME="PHI_DGAIN"/>
          <define VALUE="200" NAME="PHI_IGAIN"/>
          <define VALUE="900" NAME="THETA_PGAIN"/>
          <define VALUE="200" NAME="THETA_DGAIN"/>
          <define VALUE="200" NAME="THETA_IGAIN"/>
          <define VALUE="900" NAME="PSI_PGAIN"/>
          <define VALUE="200" NAME="PSI_DGAIN"/>
          <define VALUE="10" NAME="PSI_IGAIN"/>
          <define VALUE=" 200" NAME="PHI_DDGAIN"/>
          <define VALUE=" 200" NAME="THETA_DDGAIN"/>
          <define VALUE=" 200" NAME="PSI_DDGAIN"/>
        </section>
        <section PREFIX="STABILIZATION_INDI_" NAME="STABILIZATION_ATTITUDE_INDI">
          <define VALUE="0.073" NAME="G1_P"/>
          <define VALUE="0.073" NAME="G1_Q"/>
          <define VALUE="0.0045" NAME="G1_R"/>
          <define VALUE="0.2" NAME="G2_R"/>
          <define VALUE="900.0" NAME="REF_ERR_P"/>
          <define VALUE="900.0" NAME="REF_ERR_Q"/>
          <define VALUE="600.0" NAME="REF_ERR_R"/>
          <define VALUE="33.0" NAME="REF_RATE_P"/>
          <define VALUE="33.0" NAME="REF_RATE_Q"/>
          <define VALUE="28.0" NAME="REF_RATE_R"/>
          <define VALUE="8.0" NAME="FILT_CUTOFF"/>
          <define VALUE="3.2" NAME="FILT_CUTOFF_R"/>
          <define VALUE="0.15" NAME="ACT_DYN_P"/>
          <define VALUE="0.15" NAME="ACT_DYN_Q"/>
          <define VALUE="0.15" NAME="ACT_DYN_R"/>
          <define VALUE="FALSE" NAME="USE_ADAPTIVE"/>
          <define VALUE="0.0001" NAME="ADAPTIVE_MU"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="150" NAME="HOVER_KP"/>
          <define VALUE="80" NAME="HOVER_KD"/>
          <define VALUE="20" NAME="HOVER_KI"/>
          <define VALUE="0.5" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="TRUE" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="35" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="TRUE" NAME="USE_SPEED_REF"/>
          <define VALUE="50" NAME="PGAIN"/>
          <define VALUE="100" NAME="DGAIN"/>
          <define VALUE="70" NAME="AGAIN"/>
          <define VALUE="20" NAME="IGAIN"/>
        </section>
        <section PREFIX="NPS_" NAME="SIMULATOR">
          <define VALUE="nw_motor, ne_motor, se_motor, sw_motor" TYPE="string[]" NAME="ACTUATOR_NAMES"/>
          <define VALUE="simple_x_quad" TYPE="string" NAME="JSBSIM_MODEL"/>
          <define VALUE="nps_sensors_params_default.h" TYPE="string" NAME="SENSORS_PARAMS"/>
          <define VALUE="4" NAME="JS_AXIS_MODE"/>
        </section>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_HOVER_Z_HOLD" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_NAV" NAME="MODE_AUTO2"/>
        </section>
        <section NAME="BAT">
          <define VALUE="9.3" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="9.6" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="10.1" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="12.4" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.05" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
            <message PERIOD="0.05" NAME="OPTICAL_FLOW_HOVER"/>
            <message PERIOD="0.10" NAME="VISUALTARGET"/>
            <message PERIOD="0.1" NAME="VISION_POSITION_ESTIMATE"/>
            <message PERIOD="0.05" NAME="DIVERGENCE"/>
            <message PERIOD="0.02" NAME="DRAGSPEED"/>
            <message PERIOD="5.1" NAME="LOGGER_STATUS"/>
            <message PERIOD="1.2" NAME="LIDAR"/>
            <message PERIOD=".25" NAME="INS_EKF2"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="BEBOP_ACTUATORS"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_FLOAT"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
            <message PERIOD="2.0" NAME="INDI_G"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="vel_guidance" KEY_PRESS="q">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HYBRID_GUIDANCE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1.0" NAME="GPS_INT"/>
            <message PERIOD="1.0" NAME="INS"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="RTCM3">
            <message PERIOD="1" NAME="GPS_RXMRTCM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD="1" NAME="GPS_RTK"/>
          </mode>
        </process>
        <process NAME="FlightRecorder">
          <mode NAME="default">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD=".1" NAME="GPS_INT"/>
            <message PERIOD=".1" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".2" NAME="IMU_MAG_SCALED"/>
            <message PERIOD="0.05" NAME="LIDAR"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="19"/>
            <dl_setting VAR="autopilot.kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot.power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot.mode" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="19" HANDLER="SetModeHandler"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings>
        <dl_settings>
          <dl_settings NAME="asctec_v2">
            <dl_setting var="actuators_asctec_v2.cmd" min="0" step="1" max="3" module="subsystems/actuators/actuators_asctec_v2" shortname="cmd" values="NONE|TEST|REVERSE|SET_ADDR" handler="SetCommand"/>
            <dl_setting var="actuators_asctec_v2.cur_addr" min="0" step="1" max="3" module="subsystems/actuators/actuators_asctec_v2" shortname="cur_addr" values="FRONT|BACK|LEFT|RIGHT" handler="SetCurAddr"/>
            <dl_setting var="actuators_asctec_v2.new_addr" min="0" step="1" max="3" module="subsystems/actuators/actuators_asctec_v2" shortname="new_addr" values="FRONT|BACK|LEFT|RIGHT" handler="SetNewAddr"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="Mentor" ac_id="4" airframe="airframes/tudelft/mentor.xml" radio="radios/crossfire_sbus.xml" telemetry="telemetry/default_fixedwing_imu.xml" flight_plan="flight_plans/versatile_airspeed.xml" settings="settings/fixedwing_basic.xml settings/estimation/ac_char.xml" settings_modules="modules/nav_basic_fw.xml modules/guidance_energy.xml modules/stabilization_attitude_fw.xml modules/air_data.xml modules/ahrs_int_cmpl_quat.xml modules/gps_ubx_ucenter.xml modules/gps.xml modules/imu_common.xml" gui_color="white" release="997fa535902c4d8f73bc34c02c862652cd47cae5">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="Crossfire SBUS" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1100" MIN="1100" MAX="1900" FUNCTION="THROTTLE" CTL="left_stick_vert" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="ROLL" CTL="right_stick_horiz" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="PITCH" CTL="right_stick_vert" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="YAW" CTL="left_stick_horiz" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="MODE" CTL="aux0" AVERAGE="1"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="AUX1" CTL="aux1" AVERAGE="1"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="AUX2" CTL="aux2" AVERAGE="1"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="AUX3" CTL="aux3" AVERAGE="1"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="AUX4" CTL="aux4" AVERAGE="1"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="AUX5" CTL="aux5" AVERAGE="1"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="AUX6" CTL="aux6" AVERAGE="1"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="AUX7" CTL="aux7" AVERAGE="1"/>
      </radio>
      <dump>
        <flight_plan security_height="25" qfu="270" name="Versatile" max_dist_from_home="1500" lon0="1.2729" lat0="43.4622" ground_alt="185" alt="260">
          <header>#include &quot;firmwares/fixedwing/guidance/energy_ctrl.h&quot;
#include &quot;subsystems/datalink/datalink.h&quot;</header>
          <waypoints>
            <waypoint y="0" x="0" name="HOME"/>
            <waypoint y="80" x="20" name="STDBY"/>
            <waypoint y="102.2" x="44.8" name="1"/>
            <waypoint y="122.9" x="-63.5" name="2"/>
            <waypoint y="-21.2" x="-11.5" name="MOB"/>
            <waypoint y="80.4" x="-151.6" name="S1"/>
            <waypoint y="214.9" x="180.1" name="S2"/>
            <waypoint y="-10" x="200" name="AF" alt="30"/>
            <waypoint y="20.0" x="80.0" name="TD" alt="0"/>
            <waypoint y="-23.0" x="26.9" name="BASELEG"/>
            <waypoint y="0" x="-100" name="_1"/>
            <waypoint y="200" x="-100" name="_2"/>
            <waypoint y="200" x="100" name="_3"/>
            <waypoint y="0" x="100" name="_4"/>
            <waypoint y="35.4" x="-122.5" name="CLIMB"/>
          </waypoints>
          <sectors>
            <sector name="Square">
              <corner name="_1"/>
              <corner name="_2"/>
              <corner name="_3"/>
              <corner name="_4"/>
            </sector>
          </sectors>
          <exceptions/>
          <blocks>
            <block name="Wait GPS" no="0">
              <set var="autopilot.kill_throttle" value="1" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Geo init" no="1">
              <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
              <call_once fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Holding point" no="2">
              <set var="autopilot.kill_throttle" value="1" no="0"/>
              <attitude vmode="throttle" throttle="0" roll="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff (wp CLIMB)" name="Takeoff" no="3">
              <exception deroute="Standby" cond="GetPosAlt() > GetAltRef()+25"/>
              <set var="autopilot.kill_throttle" value="0" no="0"/>
              <set var="v_ctl_auto_airspeed_setpoint" value="CLIMB_AIRSPEED" no="1"/>
              <go wp="CLIMB" no="2"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="4">
              <set var="v_ctl_auto_airspeed_setpoint" value="NOMINAL_AIRSPEED" no="0"/>
              <circle wp="STDBY" radius="nav_radius" no="1"/>
            </block>
            <block strip_icon="eight.png" strip_button="Figure 8 (wp 1-2)" name="Figure 8 around wp 1" no="5">
              <eight turn_around="2" radius="nav_radius" center="1" no="1"/>
            </block>
            <block strip_icon="oval.png" strip_button="Oval (wp 1-2)" name="Oval 1-2" no="6">
              <set var="v_ctl_auto_airspeed_setpoint" value="RACE_AIRSPEED" no="0"/>
              <oval radius="nav_radius" p2="2" p1="1" no="2"/>
            </block>
            <block strip_icon="mob.png" strip_button="Circle around here" name="MOB" no="7">
              <call_once fun="NavSetWaypointHere(WP_MOB)" no="0"/>
              <circle wp="MOB" radius="100" no="1"/>
            </block>
            <block name="Auto pitch (circle wp 1)" no="8">
              <circle wp="1" throttle="0.7" radius="75" pitch="auto" no="0"/>
            </block>
            <block name="Climb 75% throttle" no="9">
              <circle wp="1" vmode="throttle" until="(10 > PowerVoltage()) || (GetPosAlt() > GetAltRef()+ 1350)" throttle="0.75" radius="50+(GetPosAlt()-GetAltRef())/2" pitch="10" no="0"/>
            </block>
            <block name="Climb 0m/s" no="10">
              <circle wp="1" vmode="climb" until="10 > PowerVoltage()" radius="nav_radius" climb="0" no="0"/>
            </block>
            <block name="Climb 1m/s" no="11">
              <circle wp="1" vmode="climb" until="10 > PowerVoltage()" radius="50+(GetPosAlt()-GetAltRef())/2" pitch="5" climb="1" no="0"/>
            </block>
            <block name="Climb nav_climb m/s" no="12">
              <circle wp="1" vmode="climb" until="(10 > PowerVoltage()) || (GetPosAlt() > GetAltRef()+ 1350)" radius="nav_radius" climb="nav_climb" no="0"/>
            </block>
            <block name="Circle 0% throttle" no="13">
              <circle wp="1" vmode="throttle" until="GetAltRef()+50 > GetPosAlt()" throttle="0.0" radius="nav_radius" pitch="fp_pitch" no="0"/>
              <deroute block="Standby" no="1"/>
            </block>
            <block name="Oval 0% throttle" no="14">
              <oval vmode="throttle" until="GetAltRef()+50 > GetPosAlt()" throttle="0.0" radius="nav_radius" pitch="fp_pitch" p2="2" p1="1" no="1"/>
              <deroute block="Standby" no="2"/>
            </block>
            <block name="Route 1-2" no="15">
              <go wp="2" hmode="route" from="1" approaching_time="0" no="0"/>
            </block>
            <block name="Stack wp 2" no="16">
              <circle wp="2" radius="75" no="0"/>
            </block>
            <block name="Route 2-1" no="17">
              <go wp="1" hmode="route" from="2" approaching_time="0" no="0"/>
            </block>
            <block name="Stack wp 1" no="18">
              <circle wp="1" radius="75" no="0"/>
            </block>
            <block name="Glide 1-2" no="19">
              <go wp="2" vmode="glide" hmode="route" from="1" no="0"/>
              <deroute block="Standby" no="1"/>
            </block>
            <block strip_icon="survey.png" strip_button="Survey (wp S1-S2)" name="Survey S1-S2" no="20">
              <survey_rectangle wp2="S2" wp1="S1" grid="150" no="1"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land right (wp AF-TD)" name="Land Right AF-TD" no="21">
              <set var="nav_radius" value="DEFAULT_CIRCLE_RADIUS" no="0"/>
              <deroute block="land" no="1"/>
            </block>
            <block strip_icon="land-left.png" strip_button="Land left (wp AF-TD)" name="Land Left AF-TD" no="22">
              <set var="nav_radius" value="-DEFAULT_CIRCLE_RADIUS" no="0"/>
              <deroute block="land" no="1"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land right (wp AF-TD)" name="Constant Slope Land Right AF-TD" no="23">
              <call_once fun="nav_compute_final_from_glide(WP_AF, WP_TD, 10.)" no="0"/>
              <set var="nav_radius" value="DEFAULT_CIRCLE_RADIUS" no="1"/>
              <deroute block="land" no="2"/>
            </block>
            <block strip_icon="land-left.png" strip_button="Land left (wp AF-TD)" name="Constant Slope Land Left AF-TD" no="24">
              <call_once fun="nav_compute_final_from_glide(WP_AF, WP_TD, 10.)" no="0"/>
              <set var="nav_radius" value="-DEFAULT_CIRCLE_RADIUS" no="1"/>
              <deroute block="land" no="2"/>
            </block>
            <block name="land" no="25">
              <set var="v_ctl_auto_airspeed_setpoint" value="NOMINAL_AIRSPEED" no="0"/>
              <call_once fun="nav_compute_baseleg(WP_AF, WP_TD, WP_BASELEG, nav_radius)" no="1"/>
              <circle wp="BASELEG" until="NavCircleCount() > 0.5" radius="nav_radius" no="2"/>
              <set var="v_ctl_auto_airspeed_setpoint" value="GLIDE_AIRSPEED" no="3"/>
              <circle wp="BASELEG" until="NavQdrCloseTo(DegOfRad(baseleg_out_qdr)-(nav_radius/fabs(nav_radius))*10) && 10 > fabs(GetPosAlt() - WaypointAlt(WP_BASELEG))" radius="nav_radius" no="4"/>
            </block>
            <block name="final" no="26">
              <go wp="TD" vmode="glide" hmode="route" from="AF" approaching_time="5" no="0"/>
              <set var="v_ctl_auto_airspeed_setpoint" value="(GLIDE_AIRSPEED*10.0/12.0)" no="1"/>
            </block>
            <block name="flare" no="27">
              <go wp="TD" vmode="glide" throttle="0.0" hmode="route" from="AF" approaching_time="0" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0.0" roll="0.0" no="1"/>
            </block>
            <block name="Steps roll -10, +10" no="28">
              <while cond="TRUE" no="0">
                <attitude vmode="alt" until=" stage_time > 6" roll="10.0" alt="250" no="1"/>
                <attitude vmode="alt" until="stage_time > 6" roll="-10.0" alt="250" no="2"/>
              </while>
            </block>
            <block name="Steps roll -20, +20" no="29">
              <while cond="TRUE" no="0">
                <attitude vmode="alt" until=" stage_time > 3" roll="20.0" alt="250" no="1"/>
                <attitude vmode="alt" until="stage_time > 3" roll="-20.0" alt="250" no="2"/>
              </while>
            </block>
            <block name="Steps pitch -10, +10" no="30">
              <while cond="TRUE" no="0">
                <attitude vmode="alt" until=" stage_time > 2" roll="0.0" pitch="10" alt="250" no="1"/>
                <attitude vmode="alt" until=" stage_time > 2" roll="0.0" pitch="-10" alt="250" no="2"/>
              </while>
            </block>
            <block name="Heading 30" no="31">
              <heading until="FALSE" course="30" alt="GetAltRef()+50" no="0"/>
            </block>
            <block name="For loop (circles wp 1)" no="32">
              <for var="i" to="3" from="0" no="1">
                <circle wp="1" until="NavCircleCount() > 1" radius="DEFAULT_CIRCLE_RADIUS+ $i*10" no="2"/>
              </for>
              <deroute block="Standby" no="4"/>
            </block>
            <block name="Test datalink (go to wp 2)" no="33">
              <exception deroute="Standby" cond="datalink_time > 22"/>
              <go wp="2" hmode="route" from="STDBY" no="0"/>
              <go wp="STDBY" hmode="route" from="2" no="1"/>
            </block>
            <block name="Fly in Square" no="34">
              <exception deroute="Come back wp 1" cond="! InsideSquare(GetPosX(), GetPosY())"/>
              <attitude vmode="alt" roll="0" alt="GetAltRef()+75" no="0"/>
            </block>
            <block name="Come back wp 1" no="35">
              <exception deroute="Fly in Square" cond="InsideSquare(GetPosX(), GetPosY())"/>
              <go wp="1" no="0"/>
              <deroute block="Fly in Square" no="1"/>
            </block>
            <block name="HOME" no="36">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="36" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="35" block_name="Come back wp 1" stage="1">
            <deroute block="Fly in Square" no="1"/>
          </stage>
          <stage block="35" block_name="Come back wp 1" stage="0">
            <go wp="1" no="0"/>
          </stage>
          <stage block="34" block_name="Fly in Square" stage="0">
            <attitude vmode="alt" roll="0" alt="GetAltRef()+75" no="0"/>
          </stage>
          <stage block="33" block_name="Test datalink (go to wp 2)" stage="1">
            <go wp="STDBY" hmode="route" from="2" no="1"/>
          </stage>
          <stage block="33" block_name="Test datalink (go to wp 2)" stage="0">
            <go wp="2" hmode="route" from="STDBY" no="0"/>
          </stage>
          <stage block="32" block_name="For loop (circles wp 1)" stage="4">
            <deroute block="Standby" no="4"/>
          </stage>
          <stage block="32" block_name="For loop (circles wp 1)" stage="2">
            <circle wp="1" until="NavCircleCount() > 1" radius="DEFAULT_CIRCLE_RADIUS+ $i*10" no="2"/>
          </stage>
          <stage block="32" block_name="For loop (circles wp 1)" stage="1">
            <for var="i" to="3" from="0" no="1">
              <circle wp="1" until="NavCircleCount() > 1" radius="DEFAULT_CIRCLE_RADIUS+ $i*10" no="2"/>
            </for>
          </stage>
          <stage block="31" block_name="Heading 30" stage="0">
            <heading until="FALSE" course="30" alt="GetAltRef()+50" no="0"/>
          </stage>
          <stage block="30" block_name="Steps pitch -10, +10" stage="2">
            <attitude vmode="alt" until=" stage_time > 2" roll="0.0" pitch="-10" alt="250" no="2"/>
          </stage>
          <stage block="30" block_name="Steps pitch -10, +10" stage="1">
            <attitude vmode="alt" until=" stage_time > 2" roll="0.0" pitch="10" alt="250" no="1"/>
          </stage>
          <stage block="30" block_name="Steps pitch -10, +10" stage="0">
            <while cond="TRUE" no="0">
              <attitude vmode="alt" until=" stage_time > 2" roll="0.0" pitch="10" alt="250" no="1"/>
              <attitude vmode="alt" until=" stage_time > 2" roll="0.0" pitch="-10" alt="250" no="2"/>
            </while>
          </stage>
          <stage block="29" block_name="Steps roll -20, +20" stage="2">
            <attitude vmode="alt" until="stage_time > 3" roll="-20.0" alt="250" no="2"/>
          </stage>
          <stage block="29" block_name="Steps roll -20, +20" stage="1">
            <attitude vmode="alt" until=" stage_time > 3" roll="20.0" alt="250" no="1"/>
          </stage>
          <stage block="29" block_name="Steps roll -20, +20" stage="0">
            <while cond="TRUE" no="0">
              <attitude vmode="alt" until=" stage_time > 3" roll="20.0" alt="250" no="1"/>
              <attitude vmode="alt" until="stage_time > 3" roll="-20.0" alt="250" no="2"/>
            </while>
          </stage>
          <stage block="28" block_name="Steps roll -10, +10" stage="2">
            <attitude vmode="alt" until="stage_time > 6" roll="-10.0" alt="250" no="2"/>
          </stage>
          <stage block="28" block_name="Steps roll -10, +10" stage="1">
            <attitude vmode="alt" until=" stage_time > 6" roll="10.0" alt="250" no="1"/>
          </stage>
          <stage block="28" block_name="Steps roll -10, +10" stage="0">
            <while cond="TRUE" no="0">
              <attitude vmode="alt" until=" stage_time > 6" roll="10.0" alt="250" no="1"/>
              <attitude vmode="alt" until="stage_time > 6" roll="-10.0" alt="250" no="2"/>
            </while>
          </stage>
          <stage block="27" block_name="flare" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0.0" roll="0.0" no="1"/>
          </stage>
          <stage block="27" block_name="flare" stage="0">
            <go wp="TD" vmode="glide" throttle="0.0" hmode="route" from="AF" approaching_time="0" no="0"/>
          </stage>
          <stage block="26" block_name="final" stage="1">
            <set var="v_ctl_auto_airspeed_setpoint" value="(GLIDE_AIRSPEED*10.0/12.0)" no="1"/>
          </stage>
          <stage block="26" block_name="final" stage="0">
            <go wp="TD" vmode="glide" hmode="route" from="AF" approaching_time="5" no="0"/>
          </stage>
          <stage block="25" block_name="land" stage="4">
            <circle wp="BASELEG" until="NavQdrCloseTo(DegOfRad(baseleg_out_qdr)-(nav_radius/fabs(nav_radius))*10) && 10 > fabs(GetPosAlt() - WaypointAlt(WP_BASELEG))" radius="nav_radius" no="4"/>
          </stage>
          <stage block="25" block_name="land" stage="3">
            <set var="v_ctl_auto_airspeed_setpoint" value="GLIDE_AIRSPEED" no="3"/>
          </stage>
          <stage block="25" block_name="land" stage="2">
            <circle wp="BASELEG" until="NavCircleCount() > 0.5" radius="nav_radius" no="2"/>
          </stage>
          <stage block="25" block_name="land" stage="1">
            <call_once fun="nav_compute_baseleg(WP_AF, WP_TD, WP_BASELEG, nav_radius)" no="1"/>
          </stage>
          <stage block="25" block_name="land" stage="0">
            <set var="v_ctl_auto_airspeed_setpoint" value="NOMINAL_AIRSPEED" no="0"/>
          </stage>
          <stage block="24" block_name="Constant Slope Land Left AF-TD" stage="2">
            <deroute block="land" no="2"/>
          </stage>
          <stage block="24" block_name="Constant Slope Land Left AF-TD" stage="1">
            <set var="nav_radius" value="-DEFAULT_CIRCLE_RADIUS" no="1"/>
          </stage>
          <stage block="24" block_name="Constant Slope Land Left AF-TD" stage="0">
            <call_once fun="nav_compute_final_from_glide(WP_AF, WP_TD, 10.)" no="0"/>
          </stage>
          <stage block="23" block_name="Constant Slope Land Right AF-TD" stage="2">
            <deroute block="land" no="2"/>
          </stage>
          <stage block="23" block_name="Constant Slope Land Right AF-TD" stage="1">
            <set var="nav_radius" value="DEFAULT_CIRCLE_RADIUS" no="1"/>
          </stage>
          <stage block="23" block_name="Constant Slope Land Right AF-TD" stage="0">
            <call_once fun="nav_compute_final_from_glide(WP_AF, WP_TD, 10.)" no="0"/>
          </stage>
          <stage block="22" block_name="Land Left AF-TD" stage="1">
            <deroute block="land" no="1"/>
          </stage>
          <stage block="22" block_name="Land Left AF-TD" stage="0">
            <set var="nav_radius" value="-DEFAULT_CIRCLE_RADIUS" no="0"/>
          </stage>
          <stage block="21" block_name="Land Right AF-TD" stage="1">
            <deroute block="land" no="1"/>
          </stage>
          <stage block="21" block_name="Land Right AF-TD" stage="0">
            <set var="nav_radius" value="DEFAULT_CIRCLE_RADIUS" no="0"/>
          </stage>
          <stage block="20" block_name="Survey S1-S2" stage="1">
            <survey_rectangle wp2="S2" wp1="S1" grid="150" no="1"/>
          </stage>
          <stage block="19" block_name="Glide 1-2" stage="1">
            <deroute block="Standby" no="1"/>
          </stage>
          <stage block="19" block_name="Glide 1-2" stage="0">
            <go wp="2" vmode="glide" hmode="route" from="1" no="0"/>
          </stage>
          <stage block="18" block_name="Stack wp 1" stage="0">
            <circle wp="1" radius="75" no="0"/>
          </stage>
          <stage block="17" block_name="Route 2-1" stage="0">
            <go wp="1" hmode="route" from="2" approaching_time="0" no="0"/>
          </stage>
          <stage block="16" block_name="Stack wp 2" stage="0">
            <circle wp="2" radius="75" no="0"/>
          </stage>
          <stage block="15" block_name="Route 1-2" stage="0">
            <go wp="2" hmode="route" from="1" approaching_time="0" no="0"/>
          </stage>
          <stage block="14" block_name="Oval 0% throttle" stage="2">
            <deroute block="Standby" no="2"/>
          </stage>
          <stage block="14" block_name="Oval 0% throttle" stage="1">
            <oval vmode="throttle" until="GetAltRef()+50 > GetPosAlt()" throttle="0.0" radius="nav_radius" pitch="fp_pitch" p2="2" p1="1" no="1"/>
          </stage>
          <stage block="13" block_name="Circle 0% throttle" stage="1">
            <deroute block="Standby" no="1"/>
          </stage>
          <stage block="13" block_name="Circle 0% throttle" stage="0">
            <circle wp="1" vmode="throttle" until="GetAltRef()+50 > GetPosAlt()" throttle="0.0" radius="nav_radius" pitch="fp_pitch" no="0"/>
          </stage>
          <stage block="12" block_name="Climb nav_climb m/s" stage="0">
            <circle wp="1" vmode="climb" until="(10 > PowerVoltage()) || (GetPosAlt() > GetAltRef()+ 1350)" radius="nav_radius" climb="nav_climb" no="0"/>
          </stage>
          <stage block="11" block_name="Climb 1m/s" stage="0">
            <circle wp="1" vmode="climb" until="10 > PowerVoltage()" radius="50+(GetPosAlt()-GetAltRef())/2" pitch="5" climb="1" no="0"/>
          </stage>
          <stage block="10" block_name="Climb 0m/s" stage="0">
            <circle wp="1" vmode="climb" until="10 > PowerVoltage()" radius="nav_radius" climb="0" no="0"/>
          </stage>
          <stage block="9" block_name="Climb 75% throttle" stage="0">
            <circle wp="1" vmode="throttle" until="(10 > PowerVoltage()) || (GetPosAlt() > GetAltRef()+ 1350)" throttle="0.75" radius="50+(GetPosAlt()-GetAltRef())/2" pitch="10" no="0"/>
          </stage>
          <stage block="8" block_name="Auto pitch (circle wp 1)" stage="0">
            <circle wp="1" throttle="0.7" radius="75" pitch="auto" no="0"/>
          </stage>
          <stage block="7" block_name="MOB" stage="1">
            <circle wp="MOB" radius="100" no="1"/>
          </stage>
          <stage block="7" block_name="MOB" stage="0">
            <call_once fun="NavSetWaypointHere(WP_MOB)" no="0"/>
          </stage>
          <stage block="6" block_name="Oval 1-2" stage="2">
            <oval radius="nav_radius" p2="2" p1="1" no="2"/>
          </stage>
          <stage block="6" block_name="Oval 1-2" stage="0">
            <set var="v_ctl_auto_airspeed_setpoint" value="RACE_AIRSPEED" no="0"/>
          </stage>
          <stage block="5" block_name="Figure 8 around wp 1" stage="1">
            <eight turn_around="2" radius="nav_radius" center="1" no="1"/>
          </stage>
          <stage block="4" block_name="Standby" stage="1">
            <circle wp="STDBY" radius="nav_radius" no="1"/>
          </stage>
          <stage block="4" block_name="Standby" stage="0">
            <set var="v_ctl_auto_airspeed_setpoint" value="NOMINAL_AIRSPEED" no="0"/>
          </stage>
          <stage block="3" block_name="Takeoff" stage="2">
            <go wp="CLIMB" no="2"/>
          </stage>
          <stage block="3" block_name="Takeoff" stage="1">
            <set var="v_ctl_auto_airspeed_setpoint" value="CLIMB_AIRSPEED" no="1"/>
          </stage>
          <stage block="3" block_name="Takeoff" stage="0">
            <set var="autopilot.kill_throttle" value="0" no="0"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="1">
            <attitude vmode="throttle" throttle="0" roll="0" no="1"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="0">
            <set var="autopilot.kill_throttle" value="1" no="0"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="2">
            <call_once fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="0">
            <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <set var="autopilot.kill_throttle" value="1" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="nav">
              <dl_setting VAR="nav_radius" STEP="5" MIN="-500" MAX="500"/>
              <dl_setting VAR="nav_course" STEP="5" MIN="0" MAX="359"/>
              <dl_setting VAR="nav_mode" STEP="1" MIN="1" MAX="2"/>
              <dl_setting VAR="nav_climb" STEP="0.5" MIN="-5" MAX="5"/>
              <dl_setting VAR="fp_pitch" STEP="1" MIN="-15" MAX="15"/>
              <dl_setting VAR="fp_throttle" STEP="0.01" MIN="0.0" MAX="1.0"/>
              <dl_setting VAR="fp_climb" STEP="0.1" MIN="-5.0" MAX="5.0"/>
              <dl_setting VAR="nav_shift" STEP="5" SHORTNAME="inc. shift" MODULE="firmwares/fixedwing/nav" MIN="-50" MAX="50" HANDLER="IncreaseShift"/>
              <dl_setting VAR="nav_ground_speed_setpoint" STEP="0.5" SHORTNAME="ground speed" MIN="5" MAX="50"/>
              <dl_setting VAR="nav_ground_speed_pgain" STEP="0.01" SHORTNAME="ground speed pgain" MIN="0" MAX="0.2"/>
              <dl_setting VAR="nav_survey_shift" STEP="5" MIN="50" MAX="500"/>
              <dl_setting VAR="nav_survey_sweep" TYPE="float" STEP="1" SHORTNAME="Distance" MODULE="subsystems/navigation/nav_survey_rectangle" MIN="10" MAX="500"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="control vert">
              <dl_settings NAME="energy loop">
                <dl_setting VAR="v_ctl_auto_airspeed_setpoint" STEP="0.5" SHORTNAME="airspeed sp" MIN="8.0" MAX="45"/>
                <dl_setting VAR="v_ctl_auto_throttle_nominal_cruise_throttle" STEP="0.05" SHORTNAME="cruise throttle" MIN="0.0" MAX="1"/>
                <dl_setting VAR="v_ctl_auto_throttle_nominal_cruise_pitch" STEP="0.05" SHORTNAME="cruise pitch" MIN="0.0" MAX="1"/>
                <dl_setting VAR="v_ctl_desired_acceleration" STEP="0.01" SHORTNAME="acc_cmd" MIN="0" MAX="1.0"/>
                <dl_setting VAR="v_ctl_auto_throttle_climb_throttle_increment" STEP="0.01" SHORTNAME="throttle_incr" PARAM="V_CTL_AUTO_THROTTLE_CLIMB_THROTTLE_INCREMENT" MIN="0" MAX="1"/>
                <dl_setting VAR="v_ctl_auto_throttle_pitch_of_vz_pgain" STEP="0.01" SHORTNAME="pitch_of_vz" PARAM="V_CTL_AUTO_THROTTLE_PITCH_OF_VZ_PGAIN" MIN="0" MAX="1"/>
                <dl_setting VAR="v_ctl_auto_throttle_of_airspeed_pgain" STEP="0.01" SHORTNAME="P_th_air" MIN="0" MAX="1."/>
                <dl_setting VAR="v_ctl_auto_throttle_of_airspeed_igain" STEP="0.001" SHORTNAME="I_th_air" MIN="0" MAX="0.1"/>
                <dl_setting VAR="v_ctl_auto_pitch_of_airspeed_pgain" STEP="0.001" SHORTNAME="P_pitch_air" MIN="0" MAX="1."/>
                <dl_setting VAR="v_ctl_auto_pitch_of_airspeed_igain" STEP="0.001" SHORTNAME="I_pitch_air" MIN="0" MAX="0.1"/>
                <dl_setting VAR="v_ctl_auto_pitch_of_airspeed_dgain" STEP="0.01" SHORTNAME="D_pitch_air" MIN="0" MAX="5."/>
                <dl_setting VAR="v_ctl_energy_total_pgain" STEP="0.01" SHORTNAME="P_en_tot" PARAM="V_CTL_ENERGY_TOT_PGAIN" MIN="0" MAX="1."/>
                <dl_setting VAR="v_ctl_energy_total_igain" STEP="0.01" SHORTNAME="I_en_tot" PARAM="V_CTL_ENERGY_TOT_IGAIN" MIN="0" MAX="1."/>
                <dl_setting VAR="v_ctl_energy_diff_pgain" STEP="0.01" SHORTNAME="P_en_dis" PARAM="V_CTL_ENERGY_DIFF_PGAIN" MIN="0" MAX="1."/>
                <dl_setting VAR="v_ctl_energy_diff_igain" STEP="0.01" SHORTNAME="I_en_dis" PARAM="V_CTL_ENERGY_DIFF_IGAIN" MIN="0" MAX="1."/>
              </dl_settings>
              <dl_settings NAME="groundspeed">
                <dl_setting VAR="v_ctl_auto_groundspeed_setpoint" STEP="0.1" SHORTNAME="gs_sp" PARAM="V_CTL_AUTO_GROUNDSPEED_SETPOINT" MODULE="guidance/energy_ctrl" MIN="5" MAX="40"/>
                <dl_setting VAR="v_ctl_auto_groundspeed_pgain" STEP="0.01" SHORTNAME="gs_pgain" PARAM="V_CTL_AUTO_GROUNDSPEED_PGAIN" MIN="0" MAX="2"/>
                <dl_setting VAR="v_ctl_auto_groundspeed_igain" STEP="0.01" SHORTNAME="gs_igain" PARAM="V_CTL_AUTO_GROUNDSPEED_IGAIN" MIN="0" MAX="2"/>
              </dl_settings>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="control horiz">
              <dl_settings NAME="trim">
                <dl_setting VAR="ap_state->command_roll_trim" STEP="1" SHORTNAME="roll_trim" PARAM="COMMAND_ROLL_TRIM" MODULE="inter_mcu" MIN="-960" MAX="960"/>
                <dl_setting VAR="ap_state->command_pitch_trim" STEP="1" SHORTNAME="pitch_trim" PARAM="COMMAND_PITCH_TRIM" MIN="-960" MAX="960"/>
                <dl_setting VAR="ap_state->command_yaw_trim" STEP="1" SHORTNAME="yaw_trim" PARAM="COMMAND_YAW_TRIM" MIN="-9000" MAX="9000"/>
              </dl_settings>
              <dl_settings NAME="attitude">
                <dl_setting VAR="h_ctl_roll_pgain" STEP="250" SHORTNAME="roll_pgain" MODULE="stabilization/stabilization_attitude" MIN="000" MAX="25000"/>
                <dl_setting VAR="h_ctl_roll_max_setpoint" UNIT="rad" STEP="1." SHORTNAME="max_roll" PARAM="H_CTL_ROLL_MAX_SETPOINT" MIN="0" MAX="60" ALT_UNIT="deg"/>
                <dl_setting VAR="h_ctl_pitch_pgain" STEP="250" SHORTNAME="pitch_pgain" PARAM="H_CTL_PITCH_PGAIN" MIN="0" MAX="25000"/>
                <dl_setting VAR="h_ctl_pitch_dgain" STEP="10" SHORTNAME="pitch_dgain" PARAM="H_CTL_PITCH_DGAIN" MIN="0" MAX="50000"/>
                <dl_setting VAR="h_ctl_elevator_of_roll" STEP="100" SHORTNAME="elevator_of_roll" PARAM="H_CTL_ELEVATOR_OF_ROLL" MIN="0" MAX="5000"/>
                <dl_setting VAR="h_ctl_aileron_of_throttle" STEP="100" SHORTNAME="aileron_of_throttle" MIN="0" MAX="5000"/>
                <dl_setting VAR="h_ctl_roll_attitude_gain" STEP="250" SHORTNAME="roll attitude pgain" PARAM="H_CTL_ROLL_ATTITUDE_GAIN" MIN="0" MAX="15000"/>
                <dl_setting VAR="h_ctl_roll_rate_gain" STEP="250" SHORTNAME="roll rate gain" PARAM="H_CTL_ROLL_RATE_GAIN" MIN="0" MAX="15000"/>
              </dl_settings>
              <dl_settings NAME="course">
                <dl_setting VAR="h_ctl_course_pgain" STEP="0.05" SHORTNAME="course pgain" PARAM="H_CTL_COURSE_PGAIN" MIN="0.1" MAX="3"/>
                <dl_setting VAR="h_ctl_course_dgain" STEP="0.1" SHORTNAME="course dgain" PARAM="H_CTL_COURSE_DGAIN" MIN="0" MAX="2"/>
                <dl_setting VAR="h_ctl_course_pre_bank_correction" STEP="0.05" SHORTNAME="pre bank cor" PARAM="H_CTL_COURSE_PRE_BANK_CORRECTION" MIN="0.1" MAX="2"/>
                <dl_setting VAR="h_ctl_roll_slew" STEP="0.01" SHORTNAME="roll slew" MIN="0.02" MAX="1"/>
              </dl_settings>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="air_data">
              <dl_setting VAR="air_data.qnh" STEP="1" SHORTNAME="QNH" MODULE="air_data/air_data" MIN="800" MAX="1200"/>
              <dl_setting VAR="air_data.tas_factor" TYPE="float" STEP="0.01" SHORTNAME="TASfactor" PERSISTENT="true" PARAM="AIR_DATA_TAS_FACTOR" MODULE="air_data/air_data" MIN="0.8" MAX="1.3"/>
              <dl_setting VAR="air_data.calc_qnh_once" STEP="1" SHORTNAME="calcQNH" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_airspeed" TYPE="uint8" STEP="1" SHORTNAME="calcAirspeed" PERSISTENT="true" PARAM="AIR_DATA_CALC_AIRSPEED" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_tas_factor" TYPE="uint8" STEP="1" SHORTNAME="calcTASfactor" PERSISTENT="true" PARAM="AIR_DATA_CALC_TAS_FACTOR" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_amsl_baro" TYPE="uint8" STEP="1" SHORTNAME="calcAMSL" PERSISTENT="true" PARAM="AIR_DATA_CALC_AMSL_BARO" MODULE="air_data/air_data" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
              <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
              <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
              <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
              <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="ublox">
            <dl_settings NAME="ucenter">
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_h" STEP="1" SHORTNAME="sw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_l" STEP="1" SHORTNAME="sw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_h" STEP="1" SHORTNAME="hw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_l" STEP="1" SHORTNAME="hw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_init" STEP="100" SHORTNAME="inibaud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_run" STEP="100" SHORTNAME="baud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="Mentor">
        <description>Mentor</description>
        <firmware NAME="fixedwing">
          <target NAME="ap" BOARD="px4fmu_5.0_chibios">
            <configure VALUE="500" NAME="PERIODIC_FREQUENCY"/>
            <module TYPE="transparent" NAME="telemetry">
              <configure VALUE="B115200" NAME="MODEM_BAUD"/>
            </module>
            <module TYPE="mpu6000" NAME="imu"/>
            <module TYPE="ublox" NAME="gps"/>
            <module TYPE="ubx_ucenter" NAME="gps"/>
            <module TYPE="int_cmpl_quat" NAME="ahrs">
              <configure VALUE="FALSE" NAME="USE_MAGNETOMETER"/>
              <define NAME="AHRS_GRAVITY_UPDATE_COORDINATED_TURN"/>
            </module>
            <module TYPE="alt_float" NAME="ins"/>
            <module NAME="mag_ist8310">
              <define VALUE="TRUE" NAME="MODULE_IST8310_UPDATE_AHRS"/>
              <configure VALUE="I2C3" NAME="MAG_IST8310_I2C_DEV"/>
            </module>
            <module NAME="air_data"/>
            <module TYPE="energy" NAME="control"/>
            <module NAME="navigation"/>
            <module TYPE="pwm" NAME="actuators"/>
            <module TYPE="sbus" NAME="radio_control">
              <configure VALUE="UART3" NAME="SBUS_PORT"/>
            </module>
          </target>
          <target NAME="nps" BOARD="pc">
            <module TYPE="spektrum" NAME="radio_control"/>
            <module TYPE="jsbsim" NAME="fdm"/>
          </target>
        </firmware>
        <servos>
          <servo NO="0" NEUTRAL="1000" NAME="THROTTLE" MIN="1000" MAX="2000"/>
          <servo NO="1" NEUTRAL="1500" NAME="AILERON_LEFT" MIN="1800" MAX="1200"/>
          <servo NO="2" NEUTRAL="1500" NAME="AILERON_RIGHT" MIN="1200" MAX="1800"/>
          <servo NO="3" NEUTRAL="1500" NAME="ELEVATOR" MIN="900" MAX="2100"/>
          <servo NO="4" NEUTRAL="1500" NAME="RUDDER" MIN="1900" MAX="1100"/>
        </servos>
        <commands>
          <axis NAME="THROTTLE" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
        </commands>
        <rc_commands>
          <set VALUE="@THROTTLE" COMMAND="THROTTLE"/>
          <set VALUE="@ROLL" COMMAND="ROLL"/>
          <set VALUE="@PITCH" COMMAND="PITCH"/>
          <set VALUE="@YAW" COMMAND="YAW"/>
        </rc_commands>
        <section PREFIX="AUTO1_" NAME="AUTO1">
          <define VALUE="1.2" NAME="MAX_ROLL"/>
          <define VALUE="0.8" NAME="MAX_PITCH"/>
        </section>
        <command_laws>
          <set VALUE="@ROLL" SERVO="AILERON_LEFT"/>
          <set VALUE="-@ROLL" SERVO="AILERON_RIGHT"/>
          <set VALUE="@THROTTLE" SERVO="THROTTLE"/>
          <set VALUE="@PITCH" SERVO="ELEVATOR"/>
          <set VALUE="@YAW" SERVO="RUDDER"/>
        </command_laws>
        <section PREFIX="COMMAND_" NAME="TRIM">
          <define VALUE="0" NAME="ROLL_TRIM"/>
          <define VALUE="788." NAME="PITCH_TRIM"/>
        </section>
        <section PREFIX="FAILSAFE_" NAME="FAILSAFE">
          <define VALUE="0.35" UNIT="%" NAME="DEFAULT_THROTTLE"/>
          <define VALUE="10.0" UNIT="deg" NAME="DEFAULT_ROLL"/>
          <define VALUE="5.0" UNIT="deg" NAME="DEFAULT_PITCH"/>
          <define VALUE="DEFAULT_CIRCLE_RADIUS" UNIT="m" NAME="HOME_RADIUS"/>
          <define VALUE="(MAX_DIST_FROM_HOME*1.5)" NAME="KILL_MODE_DISTANCE"/>
          <define VALUE="10" UNIT="s" NAME="DELAY_WITHOUT_GPS"/>
        </section>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="-179" NAME="MAG_X_NEUTRAL"/>
          <define VALUE="-21" NAME="MAG_Y_NEUTRAL"/>
          <define VALUE="79" NAME="MAG_Z_NEUTRAL"/>
          <define VALUE="4.17334785618" NAME="MAG_X_SENS" INTEGER="16"/>
          <define VALUE="3.98885954135" NAME="MAG_Y_SENS" INTEGER="16"/>
          <define VALUE="4.40442339014" NAME="MAG_Z_SENS" INTEGER="16"/>
          <define VALUE="0" UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="14" UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="0" UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.51562740288882" NAME="H_X"/>
          <define VALUE="-0.05707735220832" NAME="H_Y"/>
          <define VALUE="0.85490967783446" NAME="H_Z"/>
        </section>
        <section PREFIX="INS_" NAME="INS">
          <define VALUE="0.0" UNIT="deg" NAME="ROLL_NEUTRAL_DEFAULT"/>
          <define VALUE="0" UNIT="deg" NAME="PITCH_NEUTRAL_DEFAULT"/>
        </section>
        <section PREFIX="H_CTL_" NAME="HORIZONTAL CONTROL">
          <define VALUE="0.89" NAME="COURSE_PGAIN"/>
          <define VALUE="0.27" NAME="COURSE_DGAIN"/>
          <define VALUE="1.0" NAME="COURSE_PRE_BANK_CORRECTION"/>
          <define VALUE="45" UNIT="deg" NAME="ROLL_MAX_SETPOINT"/>
          <define VALUE="50" UNIT="deg" NAME="PITCH_MAX_SETPOINT"/>
          <define VALUE="-50" UNIT="deg" NAME="PITCH_MIN_SETPOINT"/>
          <define VALUE="13000" NAME="PITCH_PGAIN"/>
          <define VALUE="1.5" NAME="PITCH_DGAIN"/>
          <define VALUE="1300" NAME="ELEVATOR_OF_ROLL"/>
          <define VALUE="1." NAME="ROLL_SLEW"/>
          <define VALUE="10000" NAME="ROLL_ATTITUDE_GAIN"/>
          <define VALUE="500." NAME="ROLL_RATE_GAIN"/>
        </section>
        <section PREFIX="V_CTL_" NAME="VERTICAL CONTROL">
          <define VALUE="14.8" UNIT="volt" NAME="POWER_CTL_BAT_NOMINAL"/>
          <define VALUE="0.1" NAME="ALTITUDE_PGAIN"/>
          <define VALUE="0.0" NAME="AIRSPEED_PGAIN"/>
          <define VALUE="3." NAME="ALTITUDE_MAX_CLIMB"/>
          <define VALUE="2." NAME="MAX_ACCELERATION"/>
          <define VALUE="0.0" NAME="ENERGY_TOT_PGAIN"/>
          <define VALUE="0.0" NAME="ENERGY_TOT_IGAIN"/>
          <define VALUE="0.0" NAME="ENERGY_DIFF_PGAIN"/>
          <define VALUE="0.0" NAME="ENERGY_DIFF_IGAIN"/>
          <define VALUE="7." NAME="GLIDE_RATIO"/>
          <define VALUE="0.55" NAME="AUTO_THROTTLE_NOMINAL_CRUISE_THROTTLE"/>
          <define VALUE="0.1" UNIT="%/(m/s)" NAME="AUTO_THROTTLE_CLIMB_THROTTLE_INCREMENT"/>
          <define VALUE="0.15" NAME="AUTO_THROTTLE_PITCH_OF_VZ_PGAIN"/>
          <define VALUE="0.0" NAME="AUTO_THROTTLE_OF_AIRSPEED_PGAIN"/>
          <define VALUE="0.0" NAME="AUTO_THROTTLE_OF_AIRSPEED_IGAIN"/>
          <define VALUE="0.0" NAME="AUTO_PITCH_OF_AIRSPEED_PGAIN"/>
          <define VALUE="0.0" NAME="AUTO_PITCH_OF_AIRSPEED_IGAIN"/>
          <define VALUE="0.0" NAME="AUTO_PITCH_OF_AIRSPEED_DGAIN"/>
          <define VALUE="1" UNIT="m/s/s" NAME="THROTTLE_SLEW_LIMITER"/>
        </section>
        <section NAME="BAT">
          <define VALUE="((3.3f/4096.0f) * 12.0877510901 * adc)" NAME="VoltageOfAdc(adc)"/>
          <define VALUE="10.5" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="10" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="9.1" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
        </section>
        <section NAME="MISC">
          <define VALUE="14." UNIT="m/s" NAME="CLIMB_AIRSPEED"/>
          <define VALUE="16." UNIT="m/s" NAME="NOMINAL_AIRSPEED"/>
          <define VALUE="12." UNIT="m/s" NAME="GLIDE_AIRSPEED"/>
          <define VALUE="25." UNIT="m/s" NAME="RACE_AIRSPEED"/>
          <define VALUE="10." UNIT="m/s" NAME="STALL_AIRSPEED"/>
          <define VALUE="5." UNIT="s" NAME="CARROT"/>
          <define VALUE="80." NAME="DEFAULT_CIRCLE_RADIUS"/>
          <define VALUE="0." NAME="NAV_GLIDE_PITCH_TRIM"/>
        </section>
        <section PREFIX="NAV_CATAPULT_" NAME="CATAPULT">
          <define VALUE="0.75" UNIT="seconds" NAME="MOTOR_DELAY"/>
          <define VALUE="3.0" UNIT="seconds" NAME="HEADING_DELAY"/>
          <define VALUE="1.75" NAME="ACCELERATION_THRESHOLD"/>
          <define VALUE="15.0" UNIT="deg" NAME="INITIAL_PITCH"/>
          <define VALUE="1.0" NAME="INITIAL_THROTTLE"/>
        </section>
        <section PREFIX="APP_" NAME="GLS_APPROACH">
          <define VALUE="5" UNIT="deg" NAME="ANGLE"/>
          <define VALUE="10" UNIT="m" NAME="INTERCEPT_AF_SD"/>
          <define VALUE="13" UNIT="m/s" NAME="TARGET_SPEED"/>
        </section>
        <section PREFIX="DC_" NAME="DIGITAL_CAMERA">
          <define VALUE="1.5" UNIT="sec" NAME="AUTOSHOOT_PERIOD"/>
          <define VALUE="50" UNIT="meter" NAME="AUTOSHOOT_DISTANCE_INTERVAL"/>
        </section>
        <section PREFIX="NPS_" NAME="SIMULATOR">
          <define VALUE="Malolo1" TYPE="string" NAME="JSBSIM_MODEL"/>
          <define VALUE="4" NAME="COMMANDS_NB"/>
          <define VALUE="throttle-cmd-norm, aileron-cmd-norm, elevator-cmd-norm, rudder-cmd-norm" TYPE="string[]" NAME="ACTUATOR_NAMES"/>
          <define VALUE="nps_sensors_params_default.h" TYPE="string" NAME="SENSORS_PARAMS"/>
          <define VALUE="4" NAME="JS_AXIS_MODE"/>
          <define VALUE="TRUE" NAME="BYPASS_AHRS"/>
          <define VALUE="TRUE" NAME="BYPASS_INS"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Ap">
          <mode NAME="default">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1" NAME="AIRSPEED"/>
            <message PERIOD="5.1" NAME="ALIVE"/>
            <message PERIOD="0.25" NAME="GPS"/>
            <message PERIOD="1." NAME="NAVIGATION"/>
            <message PERIOD="0.1" NAME="ATTITUDE"/>
            <message PERIOD="0.5" NAME="ESTIMATOR"/>
            <message PERIOD="1.1" NAME="ENERGY"/>
            <message PERIOD="0.5" NAME="WP_MOVED"/>
            <message PERIOD="1.05" NAME="CIRCLE"/>
            <message PERIOD="0.2" NAME="DESIRED"/>
            <message PERIOD="1.2" NAME="SEGMENT"/>
            <message PERIOD="2.1" NAME="CALIBRATION"/>
            <message PERIOD="9." NAME="NAVIGATION_REF"/>
            <message PERIOD="4.9" NAME="PPRZ_MODE"/>
            <message PERIOD="5." NAME="SETTINGS"/>
            <message PERIOD="2.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="1.5" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="IR_SENSORS"/>
            <message PERIOD="2.1" NAME="SURVEY"/>
            <message PERIOD="2.0" NAME="GPS_SOL"/>
            <message PERIOD=".8" NAME="IMU_ACCEL"/>
            <message PERIOD=".6" NAME="IMU_GYRO"/>
            <message PERIOD="1.3" NAME="IMU_MAG"/>
            <message PERIOD="0.5" NAME="CAM"/>
            <message PERIOD="1.0" NAME="CAM_POINT"/>
            <message PERIOD="5" NAME="COMMANDS"/>
            <message PERIOD="2" NAME="FBW_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
          </mode>
          <mode NAME="minimal">
            <message PERIOD="5" NAME="ALIVE"/>
            <message PERIOD="4" NAME="ATTITUDE"/>
            <message PERIOD="1.05" NAME="GPS"/>
            <message PERIOD="1.3" NAME="ESTIMATOR"/>
            <message PERIOD="1.4" NAME="WP_MOVED"/>
            <message PERIOD="3.05" NAME="CIRCLE"/>
            <message PERIOD="4.05" NAME="DESIRED"/>
            <message PERIOD="1.1" NAME="ENERGY"/>
            <message PERIOD="3.2" NAME="SEGMENT"/>
            <message PERIOD="5.1" NAME="CALIBRATION"/>
            <message PERIOD="9." NAME="NAVIGATION_REF"/>
            <message PERIOD="3." NAME="NAVIGATION"/>
            <message PERIOD="5." NAME="PPRZ_MODE"/>
            <message PERIOD="5." NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="1.5" NAME="DL_VALUE"/>
            <message PERIOD="5.2" NAME="IR_SENSORS"/>
            <message PERIOD="2.1" NAME="SURVEY"/>
            <message PERIOD="5.0" NAME="GPS_SOL"/>
          </mode>
          <mode NAME="extremal">
            <message PERIOD="5" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="GPS"/>
            <message PERIOD="5.3" NAME="ESTIMATOR"/>
            <message PERIOD="10.1" NAME="ENERGY"/>
            <message PERIOD="10.2" NAME="DESIRED"/>
            <message PERIOD="5.4" NAME="NAVIGATION"/>
            <message PERIOD="7.5" NAME="PPRZ_MODE"/>
            <message PERIOD="8." NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="5.7" NAME="DATALINK_REPORT"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD="0.5" NAME="BARO_RAW"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO"/>
            <message PERIOD=".075" NAME="IMU_ACCEL"/>
            <message PERIOD=".1" NAME="IMU_MAG"/>
          </mode>
          <mode NAME="debug_imu">
            <message PERIOD="0.1" NAME="ATTITUDE"/>
            <message PERIOD="5" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="GPS"/>
            <message PERIOD="5.3" NAME="ESTIMATOR"/>
            <message PERIOD="10.1" NAME="ENERGY"/>
            <message PERIOD="10.2" NAME="DESIRED"/>
            <message PERIOD="5.4" NAME="NAVIGATION"/>
            <message PERIOD="5.5" NAME="PPRZ_MODE"/>
            <message PERIOD="5." NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="5.7" NAME="DATALINK_REPORT"/>
            <message PERIOD=".5" NAME="IMU_ACCEL"/>
            <message PERIOD=".5" NAME="IMU_GYRO"/>
            <message PERIOD=".5" NAME="IMU_MAG"/>
            <message PERIOD=".5" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".5" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".5" NAME="IMU_MAG_RAW"/>
          </mode>
        </process>
        <process NAME="Fbw">
          <mode NAME="default">
            <message PERIOD="5" NAME="COMMANDS"/>
            <message PERIOD="2" NAME="FBW_STATUS"/>
            <message PERIOD="5" NAME="ACTUATORS"/>
          </mode>
          <mode NAME="debug">
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="COMMANDS"/>
            <message PERIOD="1" NAME="FBW_STATUS"/>
            <message PERIOD="5" NAME="ACTUATORS"/>
          </mode>
        </process>
      </telemetry>
      <settings>
        <dl_settings>
          <dl_settings NAME="flight params">
            <dl_setting VAR="flight_altitude" STEP="10" SHORTNAME="altitude" MIN="0" MAX="1000"/>
            <dl_setting VAR="nav_course" STEP="1" MIN="0" MAX="360"/>
            <dl_setting VAR="nav_shift" STEP="5" SHORTNAME="inc. shift" MODULE="firmwares/fixedwing/nav" MIN="-10" MAX="10" HANDLER="IncreaseShift"/>
            <dl_setting VAR="autopilot.flight_time" STEP="1" SHORTNAME="flight time" MODULE="autopilot" MIN="0" MAX="0" HANDLER="ResetFlightTimeAndLaunch"/>
            <dl_setting VAR="nav_radius" STEP="10" MODULE="firmwares/fixedwing/nav" MIN="-200" MAX="200" HANDLER="SetNavRadius">
              <strip_button VALUE="1" NAME="Circle right" ICON="circle-right.png" GROUP="circle"/>
              <strip_button VALUE="-1" NAME="Circle left" ICON="circle-left.png" GROUP="circle"/>
              <key_press VALUE="1" KEY="greater"/>
              <key_press VALUE="-1" KEY="less"/>
            </dl_setting>
          </dl_settings>
          <dl_settings NAME="mode">
            <dl_setting VAR="autopilot.mode" VALUES="MANUAL|AUTO1|AUTO2|HOME|NOGPS|FAILSAFE" STEP="1" MODULE="autopilot" MIN="0" MAX="2"/>
            <dl_setting VAR="autopilot.launch" STEP="1" MIN="0" MAX="1"/>
            <dl_setting VAR="autopilot.kill_throttle" STEP="1" MIN="0" MAX="1"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings>
        <dl_settings>
          <dl_settings NAME="performance">
            <dl_settings NAME="estimates">
              <dl_setting VAR="ac_char_climb_pitch" STEP="1" SHORTNAME="climb_pitch" MODULE="guidance/energy_ctrl" MIN="-1" MAX="1"/>
              <dl_setting VAR="ac_char_climb_max" STEP="1" SHORTNAME="climb_max" MIN="-1" MAX="1"/>
              <dl_setting VAR="ac_char_descend_pitch" STEP="1" SHORTNAME="descend_pitch" MIN="-1" MAX="1"/>
              <dl_setting VAR="ac_char_descend_max" STEP="1" SHORTNAME="descend_max" MIN="-1" MAX="1"/>
              <dl_setting VAR="ac_char_cruise_throttle" STEP="1" SHORTNAME="cruise_thr" MIN="-1" MAX="1"/>
              <dl_setting VAR="ac_char_cruise_pitch" STEP="1" SHORTNAME="cruise_pitch" MIN="-1" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="MentorEnergy" ac_id="1" airframe="airframes/examples/MentorEnergy.xml" radio="radios/R6107SP_7ch.xml" telemetry="telemetry/default_fixedwing_imu.xml" flight_plan="flight_plans/versatile_airspeed.xml" settings="settings/fixedwing_basic.xml settings/estimation/ac_char.xml" settings_modules="modules/digital_cam.xml modules/light.xml modules/gps_ubx_ucenter.xml modules/geo_mag.xml modules/air_data.xml modules/gps.xml modules/nav_basic_fw.xml modules/guidance_energy.xml modules/stabilization_attitude_fw.xml modules/ahrs_int_cmpl_quat.xml modules/imu_common.xml" gui_color="white" release="997fa535902c4d8f73bc34c02c862652cd47cae5">
      <radio SYNC_MIN="4000" SYNC_MAX="15000" PULSE_TYPE="NEGATIVE" NAME="FASST TX Module" DATA_MIN="700" DATA_MAX="2300">
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="ROLL" CTL="A" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="PITCH" CTL="B" AVERAGE="0"/>
        <channel NEUTRAL="1100" MIN="1100" MAX="1900" FUNCTION="THROTTLE" CTL="C" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="YAW" CTL="D" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="MODE" CTL="E" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="EXTRA1" CTL="F" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="FLAPS" CTL="G" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="25" qfu="270" name="Versatile" max_dist_from_home="1500" lon0="1.2729" lat0="43.4622" ground_alt="185" alt="260">
          <header>#include &quot;firmwares/fixedwing/guidance/energy_ctrl.h&quot;
#include &quot;subsystems/datalink/datalink.h&quot;</header>
          <waypoints>
            <waypoint y="0" x="0" name="HOME"/>
            <waypoint y="80" x="20" name="STDBY"/>
            <waypoint y="102.2" x="44.8" name="1"/>
            <waypoint y="122.9" x="-63.5" name="2"/>
            <waypoint y="-21.2" x="-11.5" name="MOB"/>
            <waypoint y="80.4" x="-151.6" name="S1"/>
            <waypoint y="214.9" x="180.1" name="S2"/>
            <waypoint y="-10" x="200" name="AF" alt="30"/>
            <waypoint y="20.0" x="80.0" name="TD" alt="0"/>
            <waypoint y="-23.0" x="26.9" name="BASELEG"/>
            <waypoint y="0" x="-100" name="_1"/>
            <waypoint y="200" x="-100" name="_2"/>
            <waypoint y="200" x="100" name="_3"/>
            <waypoint y="0" x="100" name="_4"/>
            <waypoint y="35.4" x="-122.5" name="CLIMB"/>
          </waypoints>
          <sectors>
            <sector name="Square">
              <corner name="_1"/>
              <corner name="_2"/>
              <corner name="_3"/>
              <corner name="_4"/>
            </sector>
          </sectors>
          <exceptions/>
          <blocks>
            <block name="Wait GPS" no="0">
              <set var="autopilot.kill_throttle" value="1" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Geo init" no="1">
              <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
              <call_once fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Holding point" no="2">
              <set var="autopilot.kill_throttle" value="1" no="0"/>
              <attitude vmode="throttle" throttle="0" roll="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff (wp CLIMB)" name="Takeoff" no="3">
              <exception deroute="Standby" cond="GetPosAlt() > GetAltRef()+25"/>
              <set var="autopilot.kill_throttle" value="0" no="0"/>
              <set var="v_ctl_auto_airspeed_setpoint" value="CLIMB_AIRSPEED" no="1"/>
              <go wp="CLIMB" no="2"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="4">
              <set var="v_ctl_auto_airspeed_setpoint" value="NOMINAL_AIRSPEED" no="0"/>
              <circle wp="STDBY" radius="nav_radius" no="1"/>
            </block>
            <block strip_icon="eight.png" strip_button="Figure 8 (wp 1-2)" name="Figure 8 around wp 1" no="5">
              <eight turn_around="2" radius="nav_radius" center="1" no="1"/>
            </block>
            <block strip_icon="oval.png" strip_button="Oval (wp 1-2)" name="Oval 1-2" no="6">
              <set var="v_ctl_auto_airspeed_setpoint" value="RACE_AIRSPEED" no="0"/>
              <oval radius="nav_radius" p2="2" p1="1" no="2"/>
            </block>
            <block strip_icon="mob.png" strip_button="Circle around here" name="MOB" no="7">
              <call_once fun="NavSetWaypointHere(WP_MOB)" no="0"/>
              <circle wp="MOB" radius="100" no="1"/>
            </block>
            <block name="Auto pitch (circle wp 1)" no="8">
              <circle wp="1" throttle="0.7" radius="75" pitch="auto" no="0"/>
            </block>
            <block name="Climb 75% throttle" no="9">
              <circle wp="1" vmode="throttle" until="(10 > PowerVoltage()) || (GetPosAlt() > GetAltRef()+ 1350)" throttle="0.75" radius="50+(GetPosAlt()-GetAltRef())/2" pitch="10" no="0"/>
            </block>
            <block name="Climb 0m/s" no="10">
              <circle wp="1" vmode="climb" until="10 > PowerVoltage()" radius="nav_radius" climb="0" no="0"/>
            </block>
            <block name="Climb 1m/s" no="11">
              <circle wp="1" vmode="climb" until="10 > PowerVoltage()" radius="50+(GetPosAlt()-GetAltRef())/2" pitch="5" climb="1" no="0"/>
            </block>
            <block name="Climb nav_climb m/s" no="12">
              <circle wp="1" vmode="climb" until="(10 > PowerVoltage()) || (GetPosAlt() > GetAltRef()+ 1350)" radius="nav_radius" climb="nav_climb" no="0"/>
            </block>
            <block name="Circle 0% throttle" no="13">
              <circle wp="1" vmode="throttle" until="GetAltRef()+50 > GetPosAlt()" throttle="0.0" radius="nav_radius" pitch="fp_pitch" no="0"/>
              <deroute block="Standby" no="1"/>
            </block>
            <block name="Oval 0% throttle" no="14">
              <oval vmode="throttle" until="GetAltRef()+50 > GetPosAlt()" throttle="0.0" radius="nav_radius" pitch="fp_pitch" p2="2" p1="1" no="1"/>
              <deroute block="Standby" no="2"/>
            </block>
            <block name="Route 1-2" no="15">
              <go wp="2" hmode="route" from="1" approaching_time="0" no="0"/>
            </block>
            <block name="Stack wp 2" no="16">
              <circle wp="2" radius="75" no="0"/>
            </block>
            <block name="Route 2-1" no="17">
              <go wp="1" hmode="route" from="2" approaching_time="0" no="0"/>
            </block>
            <block name="Stack wp 1" no="18">
              <circle wp="1" radius="75" no="0"/>
            </block>
            <block name="Glide 1-2" no="19">
              <go wp="2" vmode="glide" hmode="route" from="1" no="0"/>
              <deroute block="Standby" no="1"/>
            </block>
            <block strip_icon="survey.png" strip_button="Survey (wp S1-S2)" name="Survey S1-S2" no="20">
              <survey_rectangle wp2="S2" wp1="S1" grid="150" no="1"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land right (wp AF-TD)" name="Land Right AF-TD" no="21">
              <set var="nav_radius" value="DEFAULT_CIRCLE_RADIUS" no="0"/>
              <deroute block="land" no="1"/>
            </block>
            <block strip_icon="land-left.png" strip_button="Land left (wp AF-TD)" name="Land Left AF-TD" no="22">
              <set var="nav_radius" value="-DEFAULT_CIRCLE_RADIUS" no="0"/>
              <deroute block="land" no="1"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land right (wp AF-TD)" name="Constant Slope Land Right AF-TD" no="23">
              <call_once fun="nav_compute_final_from_glide(WP_AF, WP_TD, 10.)" no="0"/>
              <set var="nav_radius" value="DEFAULT_CIRCLE_RADIUS" no="1"/>
              <deroute block="land" no="2"/>
            </block>
            <block strip_icon="land-left.png" strip_button="Land left (wp AF-TD)" name="Constant Slope Land Left AF-TD" no="24">
              <call_once fun="nav_compute_final_from_glide(WP_AF, WP_TD, 10.)" no="0"/>
              <set var="nav_radius" value="-DEFAULT_CIRCLE_RADIUS" no="1"/>
              <deroute block="land" no="2"/>
            </block>
            <block name="land" no="25">
              <set var="v_ctl_auto_airspeed_setpoint" value="NOMINAL_AIRSPEED" no="0"/>
              <call_once fun="nav_compute_baseleg(WP_AF, WP_TD, WP_BASELEG, nav_radius)" no="1"/>
              <circle wp="BASELEG" until="NavCircleCount() > 0.5" radius="nav_radius" no="2"/>
              <set var="v_ctl_auto_airspeed_setpoint" value="GLIDE_AIRSPEED" no="3"/>
              <circle wp="BASELEG" until="NavQdrCloseTo(DegOfRad(baseleg_out_qdr)-(nav_radius/fabs(nav_radius))*10) && 10 > fabs(GetPosAlt() - WaypointAlt(WP_BASELEG))" radius="nav_radius" no="4"/>
            </block>
            <block name="final" no="26">
              <go wp="TD" vmode="glide" hmode="route" from="AF" approaching_time="5" no="0"/>
              <set var="v_ctl_auto_airspeed_setpoint" value="(GLIDE_AIRSPEED*10.0/12.0)" no="1"/>
            </block>
            <block name="flare" no="27">
              <go wp="TD" vmode="glide" throttle="0.0" hmode="route" from="AF" approaching_time="0" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0.0" roll="0.0" no="1"/>
            </block>
            <block name="Steps roll -10, +10" no="28">
              <while cond="TRUE" no="0">
                <attitude vmode="alt" until=" stage_time > 6" roll="10.0" alt="250" no="1"/>
                <attitude vmode="alt" until="stage_time > 6" roll="-10.0" alt="250" no="2"/>
              </while>
            </block>
            <block name="Steps roll -20, +20" no="29">
              <while cond="TRUE" no="0">
                <attitude vmode="alt" until=" stage_time > 3" roll="20.0" alt="250" no="1"/>
                <attitude vmode="alt" until="stage_time > 3" roll="-20.0" alt="250" no="2"/>
              </while>
            </block>
            <block name="Steps pitch -10, +10" no="30">
              <while cond="TRUE" no="0">
                <attitude vmode="alt" until=" stage_time > 2" roll="0.0" pitch="10" alt="250" no="1"/>
                <attitude vmode="alt" until=" stage_time > 2" roll="0.0" pitch="-10" alt="250" no="2"/>
              </while>
            </block>
            <block name="Heading 30" no="31">
              <heading until="FALSE" course="30" alt="GetAltRef()+50" no="0"/>
            </block>
            <block name="For loop (circles wp 1)" no="32">
              <for var="i" to="3" from="0" no="1">
                <circle wp="1" until="NavCircleCount() > 1" radius="DEFAULT_CIRCLE_RADIUS+ $i*10" no="2"/>
              </for>
              <deroute block="Standby" no="4"/>
            </block>
            <block name="Test datalink (go to wp 2)" no="33">
              <exception deroute="Standby" cond="datalink_time > 22"/>
              <go wp="2" hmode="route" from="STDBY" no="0"/>
              <go wp="STDBY" hmode="route" from="2" no="1"/>
            </block>
            <block name="Fly in Square" no="34">
              <exception deroute="Come back wp 1" cond="! InsideSquare(GetPosX(), GetPosY())"/>
              <attitude vmode="alt" roll="0" alt="GetAltRef()+75" no="0"/>
            </block>
            <block name="Come back wp 1" no="35">
              <exception deroute="Fly in Square" cond="InsideSquare(GetPosX(), GetPosY())"/>
              <go wp="1" no="0"/>
              <deroute block="Fly in Square" no="1"/>
            </block>
            <block name="HOME" no="36">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="36" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="35" block_name="Come back wp 1" stage="1">
            <deroute block="Fly in Square" no="1"/>
          </stage>
          <stage block="35" block_name="Come back wp 1" stage="0">
            <go wp="1" no="0"/>
          </stage>
          <stage block="34" block_name="Fly in Square" stage="0">
            <attitude vmode="alt" roll="0" alt="GetAltRef()+75" no="0"/>
          </stage>
          <stage block="33" block_name="Test datalink (go to wp 2)" stage="1">
            <go wp="STDBY" hmode="route" from="2" no="1"/>
          </stage>
          <stage block="33" block_name="Test datalink (go to wp 2)" stage="0">
            <go wp="2" hmode="route" from="STDBY" no="0"/>
          </stage>
          <stage block="32" block_name="For loop (circles wp 1)" stage="4">
            <deroute block="Standby" no="4"/>
          </stage>
          <stage block="32" block_name="For loop (circles wp 1)" stage="2">
            <circle wp="1" until="NavCircleCount() > 1" radius="DEFAULT_CIRCLE_RADIUS+ $i*10" no="2"/>
          </stage>
          <stage block="32" block_name="For loop (circles wp 1)" stage="1">
            <for var="i" to="3" from="0" no="1">
              <circle wp="1" until="NavCircleCount() > 1" radius="DEFAULT_CIRCLE_RADIUS+ $i*10" no="2"/>
            </for>
          </stage>
          <stage block="31" block_name="Heading 30" stage="0">
            <heading until="FALSE" course="30" alt="GetAltRef()+50" no="0"/>
          </stage>
          <stage block="30" block_name="Steps pitch -10, +10" stage="2">
            <attitude vmode="alt" until=" stage_time > 2" roll="0.0" pitch="-10" alt="250" no="2"/>
          </stage>
          <stage block="30" block_name="Steps pitch -10, +10" stage="1">
            <attitude vmode="alt" until=" stage_time > 2" roll="0.0" pitch="10" alt="250" no="1"/>
          </stage>
          <stage block="30" block_name="Steps pitch -10, +10" stage="0">
            <while cond="TRUE" no="0">
              <attitude vmode="alt" until=" stage_time > 2" roll="0.0" pitch="10" alt="250" no="1"/>
              <attitude vmode="alt" until=" stage_time > 2" roll="0.0" pitch="-10" alt="250" no="2"/>
            </while>
          </stage>
          <stage block="29" block_name="Steps roll -20, +20" stage="2">
            <attitude vmode="alt" until="stage_time > 3" roll="-20.0" alt="250" no="2"/>
          </stage>
          <stage block="29" block_name="Steps roll -20, +20" stage="1">
            <attitude vmode="alt" until=" stage_time > 3" roll="20.0" alt="250" no="1"/>
          </stage>
          <stage block="29" block_name="Steps roll -20, +20" stage="0">
            <while cond="TRUE" no="0">
              <attitude vmode="alt" until=" stage_time > 3" roll="20.0" alt="250" no="1"/>
              <attitude vmode="alt" until="stage_time > 3" roll="-20.0" alt="250" no="2"/>
            </while>
          </stage>
          <stage block="28" block_name="Steps roll -10, +10" stage="2">
            <attitude vmode="alt" until="stage_time > 6" roll="-10.0" alt="250" no="2"/>
          </stage>
          <stage block="28" block_name="Steps roll -10, +10" stage="1">
            <attitude vmode="alt" until=" stage_time > 6" roll="10.0" alt="250" no="1"/>
          </stage>
          <stage block="28" block_name="Steps roll -10, +10" stage="0">
            <while cond="TRUE" no="0">
              <attitude vmode="alt" until=" stage_time > 6" roll="10.0" alt="250" no="1"/>
              <attitude vmode="alt" until="stage_time > 6" roll="-10.0" alt="250" no="2"/>
            </while>
          </stage>
          <stage block="27" block_name="flare" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0.0" roll="0.0" no="1"/>
          </stage>
          <stage block="27" block_name="flare" stage="0">
            <go wp="TD" vmode="glide" throttle="0.0" hmode="route" from="AF" approaching_time="0" no="0"/>
          </stage>
          <stage block="26" block_name="final" stage="1">
            <set var="v_ctl_auto_airspeed_setpoint" value="(GLIDE_AIRSPEED*10.0/12.0)" no="1"/>
          </stage>
          <stage block="26" block_name="final" stage="0">
            <go wp="TD" vmode="glide" hmode="route" from="AF" approaching_time="5" no="0"/>
          </stage>
          <stage block="25" block_name="land" stage="4">
            <circle wp="BASELEG" until="NavQdrCloseTo(DegOfRad(baseleg_out_qdr)-(nav_radius/fabs(nav_radius))*10) && 10 > fabs(GetPosAlt() - WaypointAlt(WP_BASELEG))" radius="nav_radius" no="4"/>
          </stage>
          <stage block="25" block_name="land" stage="3">
            <set var="v_ctl_auto_airspeed_setpoint" value="GLIDE_AIRSPEED" no="3"/>
          </stage>
          <stage block="25" block_name="land" stage="2">
            <circle wp="BASELEG" until="NavCircleCount() > 0.5" radius="nav_radius" no="2"/>
          </stage>
          <stage block="25" block_name="land" stage="1">
            <call_once fun="nav_compute_baseleg(WP_AF, WP_TD, WP_BASELEG, nav_radius)" no="1"/>
          </stage>
          <stage block="25" block_name="land" stage="0">
            <set var="v_ctl_auto_airspeed_setpoint" value="NOMINAL_AIRSPEED" no="0"/>
          </stage>
          <stage block="24" block_name="Constant Slope Land Left AF-TD" stage="2">
            <deroute block="land" no="2"/>
          </stage>
          <stage block="24" block_name="Constant Slope Land Left AF-TD" stage="1">
            <set var="nav_radius" value="-DEFAULT_CIRCLE_RADIUS" no="1"/>
          </stage>
          <stage block="24" block_name="Constant Slope Land Left AF-TD" stage="0">
            <call_once fun="nav_compute_final_from_glide(WP_AF, WP_TD, 10.)" no="0"/>
          </stage>
          <stage block="23" block_name="Constant Slope Land Right AF-TD" stage="2">
            <deroute block="land" no="2"/>
          </stage>
          <stage block="23" block_name="Constant Slope Land Right AF-TD" stage="1">
            <set var="nav_radius" value="DEFAULT_CIRCLE_RADIUS" no="1"/>
          </stage>
          <stage block="23" block_name="Constant Slope Land Right AF-TD" stage="0">
            <call_once fun="nav_compute_final_from_glide(WP_AF, WP_TD, 10.)" no="0"/>
          </stage>
          <stage block="22" block_name="Land Left AF-TD" stage="1">
            <deroute block="land" no="1"/>
          </stage>
          <stage block="22" block_name="Land Left AF-TD" stage="0">
            <set var="nav_radius" value="-DEFAULT_CIRCLE_RADIUS" no="0"/>
          </stage>
          <stage block="21" block_name="Land Right AF-TD" stage="1">
            <deroute block="land" no="1"/>
          </stage>
          <stage block="21" block_name="Land Right AF-TD" stage="0">
            <set var="nav_radius" value="DEFAULT_CIRCLE_RADIUS" no="0"/>
          </stage>
          <stage block="20" block_name="Survey S1-S2" stage="1">
            <survey_rectangle wp2="S2" wp1="S1" grid="150" no="1"/>
          </stage>
          <stage block="19" block_name="Glide 1-2" stage="1">
            <deroute block="Standby" no="1"/>
          </stage>
          <stage block="19" block_name="Glide 1-2" stage="0">
            <go wp="2" vmode="glide" hmode="route" from="1" no="0"/>
          </stage>
          <stage block="18" block_name="Stack wp 1" stage="0">
            <circle wp="1" radius="75" no="0"/>
          </stage>
          <stage block="17" block_name="Route 2-1" stage="0">
            <go wp="1" hmode="route" from="2" approaching_time="0" no="0"/>
          </stage>
          <stage block="16" block_name="Stack wp 2" stage="0">
            <circle wp="2" radius="75" no="0"/>
          </stage>
          <stage block="15" block_name="Route 1-2" stage="0">
            <go wp="2" hmode="route" from="1" approaching_time="0" no="0"/>
          </stage>
          <stage block="14" block_name="Oval 0% throttle" stage="2">
            <deroute block="Standby" no="2"/>
          </stage>
          <stage block="14" block_name="Oval 0% throttle" stage="1">
            <oval vmode="throttle" until="GetAltRef()+50 > GetPosAlt()" throttle="0.0" radius="nav_radius" pitch="fp_pitch" p2="2" p1="1" no="1"/>
          </stage>
          <stage block="13" block_name="Circle 0% throttle" stage="1">
            <deroute block="Standby" no="1"/>
          </stage>
          <stage block="13" block_name="Circle 0% throttle" stage="0">
            <circle wp="1" vmode="throttle" until="GetAltRef()+50 > GetPosAlt()" throttle="0.0" radius="nav_radius" pitch="fp_pitch" no="0"/>
          </stage>
          <stage block="12" block_name="Climb nav_climb m/s" stage="0">
            <circle wp="1" vmode="climb" until="(10 > PowerVoltage()) || (GetPosAlt() > GetAltRef()+ 1350)" radius="nav_radius" climb="nav_climb" no="0"/>
          </stage>
          <stage block="11" block_name="Climb 1m/s" stage="0">
            <circle wp="1" vmode="climb" until="10 > PowerVoltage()" radius="50+(GetPosAlt()-GetAltRef())/2" pitch="5" climb="1" no="0"/>
          </stage>
          <stage block="10" block_name="Climb 0m/s" stage="0">
            <circle wp="1" vmode="climb" until="10 > PowerVoltage()" radius="nav_radius" climb="0" no="0"/>
          </stage>
          <stage block="9" block_name="Climb 75% throttle" stage="0">
            <circle wp="1" vmode="throttle" until="(10 > PowerVoltage()) || (GetPosAlt() > GetAltRef()+ 1350)" throttle="0.75" radius="50+(GetPosAlt()-GetAltRef())/2" pitch="10" no="0"/>
          </stage>
          <stage block="8" block_name="Auto pitch (circle wp 1)" stage="0">
            <circle wp="1" throttle="0.7" radius="75" pitch="auto" no="0"/>
          </stage>
          <stage block="7" block_name="MOB" stage="1">
            <circle wp="MOB" radius="100" no="1"/>
          </stage>
          <stage block="7" block_name="MOB" stage="0">
            <call_once fun="NavSetWaypointHere(WP_MOB)" no="0"/>
          </stage>
          <stage block="6" block_name="Oval 1-2" stage="2">
            <oval radius="nav_radius" p2="2" p1="1" no="2"/>
          </stage>
          <stage block="6" block_name="Oval 1-2" stage="0">
            <set var="v_ctl_auto_airspeed_setpoint" value="RACE_AIRSPEED" no="0"/>
          </stage>
          <stage block="5" block_name="Figure 8 around wp 1" stage="1">
            <eight turn_around="2" radius="nav_radius" center="1" no="1"/>
          </stage>
          <stage block="4" block_name="Standby" stage="1">
            <circle wp="STDBY" radius="nav_radius" no="1"/>
          </stage>
          <stage block="4" block_name="Standby" stage="0">
            <set var="v_ctl_auto_airspeed_setpoint" value="NOMINAL_AIRSPEED" no="0"/>
          </stage>
          <stage block="3" block_name="Takeoff" stage="2">
            <go wp="CLIMB" no="2"/>
          </stage>
          <stage block="3" block_name="Takeoff" stage="1">
            <set var="v_ctl_auto_airspeed_setpoint" value="CLIMB_AIRSPEED" no="1"/>
          </stage>
          <stage block="3" block_name="Takeoff" stage="0">
            <set var="autopilot.kill_throttle" value="0" no="0"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="1">
            <attitude vmode="throttle" throttle="0" roll="0" no="1"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="0">
            <set var="autopilot.kill_throttle" value="1" no="0"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="2">
            <call_once fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="0">
            <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <set var="autopilot.kill_throttle" value="1" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings NAME="control">
            <dl_settings NAME="dc">
              <dl_setting VAR="0" STEP="1" SHORTNAME="Shutter" MODULE="digital_cam/dc" MIN="0" MAX="255" HANDLER="send_command">
                <strip_button VALUE="32" NAME="Photo" ICON="digital-camera.png" GROUP="maindc"/>
                <strip_button VALUE="111" NAME="Power" ICON="off.png" GROUP="maindc"/>
                <strip_button VALUE="116" NAME="ZoomIn" ICON="zoom.png" GROUP="dczoom"/>
                <strip_button VALUE="119" NAME="ZoomOut" ICON="zoom.png" GROUP="dczoom"/>
              </dl_setting>
              <dl_setting VAR="dc_autoshoot" VALUES="STOP|PERIODIC|DISTANCE|EXT_TRIG" STEP="1" MIN="0" MAX="3">
                <strip_button VALUE="1" NAME="Start Autoshoot" ICON="dcstart.png" GROUP="dcauto"/>
                <strip_button VALUE="0" NAME="Stop Autoshoot" ICON="dcstart.png" GROUP="dcauto"/>
              </dl_setting>
              <dl_setting VAR="dc_autoshoot_period" UNIT="sec" STEP="0.5" SHORTNAME="Periodic" PARAM="DC_AUTOSHOOT_PERIOD" MIN="0.1" MAX="60"/>
              <dl_setting VAR="dc_distance_interval" UNIT="meter" STEP="1" SHORTNAME="dist" PARAM="DC_AUTOSHOOT_DISTANCE_INTERVAL" MIN="0" MAX="255"/>
              <dl_setting VAR="dc_survey_interval" STEP="5" SHORTNAME="Survey-Interval" MODULE="digital_cam/dc" MIN="0" MAX="250" HANDLER="Survey"/>
              <dl_setting VAR="dc_circle_interval" STEP="5" SHORTNAME="Circle-Interval" MODULE="digital_cam/dc" MIN="5" MAX="90" HANDLER="Circle"/>
              <dl_setting VAR="dc_cam_tracing" STEP="1" SHORTNAME="Cam-Tracing" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="lights control">
            <dl_settings NAME="lights">
              <dl_setting VAR="strobe_light_mode" VALUES="OFF|ON|BLINK_1|BLINK_2|BLINK_3|COMPLEX_1|COMPLEX_2" STEP="1" MODULE="light/light" MIN="0" MAX="6">
                <strip_button VALUE="1" NAME="LightOn" ICON="on.png" GROUP="light"/>
                <strip_button VALUE="0" NAME="LightOff" ICON="off.png" GROUP="light"/>
              </dl_setting>
              <dl_setting VAR="nav_light_mode" VALUES="OFF|ON|BLINK_1|BLINK_2|BLINK_3" STEP="1" MIN="0" MAX="4"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="ublox">
            <dl_settings NAME="ucenter">
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_h" STEP="1" SHORTNAME="sw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_l" STEP="1" SHORTNAME="sw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_h" STEP="1" SHORTNAME="hw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_l" STEP="1" SHORTNAME="hw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_init" STEP="100" SHORTNAME="inibaud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_run" STEP="100" SHORTNAME="baud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="geo_mag">
              <dl_setting VAR="geo_mag.calc_once" VALUES="OFF|CALC" STEP="1" SHORTNAME="calcNow" MODULE="geo_mag/geo_mag" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="air_data">
              <dl_setting VAR="air_data.qnh" STEP="1" SHORTNAME="QNH" MODULE="air_data/air_data" MIN="800" MAX="1200"/>
              <dl_setting VAR="air_data.tas_factor" TYPE="float" STEP="0.01" SHORTNAME="TASfactor" PERSISTENT="true" PARAM="AIR_DATA_TAS_FACTOR" MODULE="air_data/air_data" MIN="0.8" MAX="1.3"/>
              <dl_setting VAR="air_data.calc_qnh_once" STEP="1" SHORTNAME="calcQNH" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_airspeed" TYPE="uint8" STEP="1" SHORTNAME="calcAirspeed" PERSISTENT="true" PARAM="AIR_DATA_CALC_AIRSPEED" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_tas_factor" TYPE="uint8" STEP="1" SHORTNAME="calcTASfactor" PERSISTENT="true" PARAM="AIR_DATA_CALC_TAS_FACTOR" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_amsl_baro" TYPE="uint8" STEP="1" SHORTNAME="calcAMSL" PERSISTENT="true" PARAM="AIR_DATA_CALC_AMSL_BARO" MODULE="air_data/air_data" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="nav">
              <dl_setting VAR="nav_radius" STEP="5" MIN="-500" MAX="500"/>
              <dl_setting VAR="nav_course" STEP="5" MIN="0" MAX="359"/>
              <dl_setting VAR="nav_mode" STEP="1" MIN="1" MAX="2"/>
              <dl_setting VAR="nav_climb" STEP="0.5" MIN="-5" MAX="5"/>
              <dl_setting VAR="fp_pitch" STEP="1" MIN="-15" MAX="15"/>
              <dl_setting VAR="fp_throttle" STEP="0.01" MIN="0.0" MAX="1.0"/>
              <dl_setting VAR="fp_climb" STEP="0.1" MIN="-5.0" MAX="5.0"/>
              <dl_setting VAR="nav_shift" STEP="5" SHORTNAME="inc. shift" MODULE="firmwares/fixedwing/nav" MIN="-50" MAX="50" HANDLER="IncreaseShift"/>
              <dl_setting VAR="nav_ground_speed_setpoint" STEP="0.5" SHORTNAME="ground speed" MIN="5" MAX="50"/>
              <dl_setting VAR="nav_ground_speed_pgain" STEP="0.01" SHORTNAME="ground speed pgain" MIN="0" MAX="0.2"/>
              <dl_setting VAR="nav_survey_shift" STEP="5" MIN="50" MAX="500"/>
              <dl_setting VAR="nav_survey_sweep" TYPE="float" STEP="1" SHORTNAME="Distance" MODULE="subsystems/navigation/nav_survey_rectangle" MIN="10" MAX="500"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="control vert">
              <dl_settings NAME="energy loop">
                <dl_setting VAR="v_ctl_auto_airspeed_setpoint" STEP="0.5" SHORTNAME="airspeed sp" MIN="8.0" MAX="45"/>
                <dl_setting VAR="v_ctl_auto_throttle_nominal_cruise_throttle" STEP="0.05" SHORTNAME="cruise throttle" MIN="0.0" MAX="1"/>
                <dl_setting VAR="v_ctl_auto_throttle_nominal_cruise_pitch" STEP="0.05" SHORTNAME="cruise pitch" MIN="0.0" MAX="1"/>
                <dl_setting VAR="v_ctl_desired_acceleration" STEP="0.01" SHORTNAME="acc_cmd" MIN="0" MAX="1.0"/>
                <dl_setting VAR="v_ctl_auto_throttle_climb_throttle_increment" STEP="0.01" SHORTNAME="throttle_incr" PARAM="V_CTL_AUTO_THROTTLE_CLIMB_THROTTLE_INCREMENT" MIN="0" MAX="1"/>
                <dl_setting VAR="v_ctl_auto_throttle_pitch_of_vz_pgain" STEP="0.01" SHORTNAME="pitch_of_vz" PARAM="V_CTL_AUTO_THROTTLE_PITCH_OF_VZ_PGAIN" MIN="0" MAX="1"/>
                <dl_setting VAR="v_ctl_auto_throttle_of_airspeed_pgain" STEP="0.01" SHORTNAME="P_th_air" MIN="0" MAX="1."/>
                <dl_setting VAR="v_ctl_auto_throttle_of_airspeed_igain" STEP="0.001" SHORTNAME="I_th_air" MIN="0" MAX="0.1"/>
                <dl_setting VAR="v_ctl_auto_pitch_of_airspeed_pgain" STEP="0.001" SHORTNAME="P_pitch_air" MIN="0" MAX="1."/>
                <dl_setting VAR="v_ctl_auto_pitch_of_airspeed_igain" STEP="0.001" SHORTNAME="I_pitch_air" MIN="0" MAX="0.1"/>
                <dl_setting VAR="v_ctl_auto_pitch_of_airspeed_dgain" STEP="0.01" SHORTNAME="D_pitch_air" MIN="0" MAX="5."/>
                <dl_setting VAR="v_ctl_energy_total_pgain" STEP="0.01" SHORTNAME="P_en_tot" PARAM="V_CTL_ENERGY_TOT_PGAIN" MIN="0" MAX="1."/>
                <dl_setting VAR="v_ctl_energy_total_igain" STEP="0.01" SHORTNAME="I_en_tot" PARAM="V_CTL_ENERGY_TOT_IGAIN" MIN="0" MAX="1."/>
                <dl_setting VAR="v_ctl_energy_diff_pgain" STEP="0.01" SHORTNAME="P_en_dis" PARAM="V_CTL_ENERGY_DIFF_PGAIN" MIN="0" MAX="1."/>
                <dl_setting VAR="v_ctl_energy_diff_igain" STEP="0.01" SHORTNAME="I_en_dis" PARAM="V_CTL_ENERGY_DIFF_IGAIN" MIN="0" MAX="1."/>
              </dl_settings>
              <dl_settings NAME="groundspeed">
                <dl_setting VAR="v_ctl_auto_groundspeed_setpoint" STEP="0.1" SHORTNAME="gs_sp" PARAM="V_CTL_AUTO_GROUNDSPEED_SETPOINT" MODULE="guidance/energy_ctrl" MIN="5" MAX="40"/>
                <dl_setting VAR="v_ctl_auto_groundspeed_pgain" STEP="0.01" SHORTNAME="gs_pgain" PARAM="V_CTL_AUTO_GROUNDSPEED_PGAIN" MIN="0" MAX="2"/>
                <dl_setting VAR="v_ctl_auto_groundspeed_igain" STEP="0.01" SHORTNAME="gs_igain" PARAM="V_CTL_AUTO_GROUNDSPEED_IGAIN" MIN="0" MAX="2"/>
              </dl_settings>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="control horiz">
              <dl_settings NAME="trim">
                <dl_setting VAR="ap_state->command_roll_trim" STEP="1" SHORTNAME="roll_trim" PARAM="COMMAND_ROLL_TRIM" MODULE="inter_mcu" MIN="-960" MAX="960"/>
                <dl_setting VAR="ap_state->command_pitch_trim" STEP="1" SHORTNAME="pitch_trim" PARAM="COMMAND_PITCH_TRIM" MIN="-960" MAX="960"/>
                <dl_setting VAR="ap_state->command_yaw_trim" STEP="1" SHORTNAME="yaw_trim" PARAM="COMMAND_YAW_TRIM" MIN="-9000" MAX="9000"/>
              </dl_settings>
              <dl_settings NAME="attitude">
                <dl_setting VAR="h_ctl_roll_pgain" STEP="250" SHORTNAME="roll_pgain" MODULE="stabilization/stabilization_attitude" MIN="000" MAX="25000"/>
                <dl_setting VAR="h_ctl_roll_max_setpoint" UNIT="rad" STEP="1." SHORTNAME="max_roll" PARAM="H_CTL_ROLL_MAX_SETPOINT" MIN="0" MAX="60" ALT_UNIT="deg"/>
                <dl_setting VAR="h_ctl_pitch_pgain" STEP="250" SHORTNAME="pitch_pgain" PARAM="H_CTL_PITCH_PGAIN" MIN="0" MAX="25000"/>
                <dl_setting VAR="h_ctl_pitch_dgain" STEP="10" SHORTNAME="pitch_dgain" PARAM="H_CTL_PITCH_DGAIN" MIN="0" MAX="50000"/>
                <dl_setting VAR="h_ctl_elevator_of_roll" STEP="100" SHORTNAME="elevator_of_roll" PARAM="H_CTL_ELEVATOR_OF_ROLL" MIN="0" MAX="5000"/>
                <dl_setting VAR="h_ctl_aileron_of_throttle" STEP="100" SHORTNAME="aileron_of_throttle" MIN="0" MAX="5000"/>
                <dl_setting VAR="h_ctl_roll_attitude_gain" STEP="250" SHORTNAME="roll attitude pgain" PARAM="H_CTL_ROLL_ATTITUDE_GAIN" MIN="0" MAX="15000"/>
                <dl_setting VAR="h_ctl_roll_rate_gain" STEP="250" SHORTNAME="roll rate gain" PARAM="H_CTL_ROLL_RATE_GAIN" MIN="0" MAX="15000"/>
              </dl_settings>
              <dl_settings NAME="course">
                <dl_setting VAR="h_ctl_course_pgain" STEP="0.05" SHORTNAME="course pgain" PARAM="H_CTL_COURSE_PGAIN" MIN="0.1" MAX="3"/>
                <dl_setting VAR="h_ctl_course_dgain" STEP="0.1" SHORTNAME="course dgain" PARAM="H_CTL_COURSE_DGAIN" MIN="0" MAX="2"/>
                <dl_setting VAR="h_ctl_course_pre_bank_correction" STEP="0.05" SHORTNAME="pre bank cor" PARAM="H_CTL_COURSE_PRE_BANK_CORRECTION" MIN="0.1" MAX="2"/>
                <dl_setting VAR="h_ctl_roll_slew" STEP="0.01" SHORTNAME="roll slew" MIN="0.02" MAX="1"/>
              </dl_settings>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
              <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
              <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
              <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
              <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="LisaAspirin2">
        <firmware NAME="fixedwing">
          <target NAME="ap" BOARD="lisa_m_1.0">
            <define NAME="LISA_M_LONGITUDINAL_X"/>
            <configure VALUE="120" NAME="PERIODIC_FREQUENCY"/>
            <configure VALUE="100" NAME="AHRS_PROPAGATE_FREQUENCY"/>
            <configure VALUE="100" NAME="AHRS_CORRECT_FREQUENCY"/>
            <define NAME="AHRS_TRIGGERED_ATTITUDE_LOOP"/>
          </target>
          <target NAME="sim" BOARD="pc"/>
          <target NAME="nps" BOARD="pc">
            <module TYPE="jsbsim" NAME="fdm"/>
          </target>
          <define NAME="USE_AIRSPEED"/>
          <define NAME="AGR_CLIMB"/>
          <define NAME="STRONG_WIND"/>
          <define NAME="WIND_INFO"/>
          <define NAME="WIND_INFO_RET"/>
          <module TYPE="aspirin_v2.1" NAME="imu"/>
          <module TYPE="int_cmpl_quat" NAME="ahrs">
            <configure VALUE="TRUE" NAME="USE_MAGNETOMETER"/>
            <define NAME="AHRS_GRAVITY_UPDATE_COORDINATED_TURN"/>
          </module>
          <module TYPE="alt_float" NAME="ins"/>
          <module TYPE="ppm" NAME="radio_control"/>
          <module TYPE="xbee_api" NAME="telemetry">
            <configure VALUE="B57600" NAME="MODEM_BAUD"/>
            <configure VALUE="UART2" NAME="MODEM_PORT"/>
          </module>
          <module TYPE="energy" NAME="control"/>
          <module NAME="navigation"/>
          <module TYPE="ublox" NAME="gps">
            <configure VALUE="UART1" NAME="GPS_PORT"/>
          </module>
        </firmware>
        <modules>
          <module NAME="air_data"/>
          <module NAME="geo_mag"/>
          <module TYPE="ubx_ucenter" NAME="gps"/>
          <module NAME="airspeed_ets">
            <define NAME="AIRSPEED_ETS_SYNC_SEND"/>
            <configure VALUE="i2c2" NAME="AIRSPEED_ETS_I2C_DEV"/>
          </module>
          <module NAME="adc_generic">
            <configure VALUE="ADC_1" NAME="ADC_CHANNEL_GENERIC1"/>
            <configure VALUE="ADC_2" NAME="ADC_CHANNEL_GENERIC2"/>
          </module>
          <module NAME="light">
            <define VALUE="2" NAME="LIGHT_LED_STROBE"/>
            <define VALUE="3" NAME="LIGHT_LED_NAV"/>
            <define VALUE="6" NAME="STROBE_LIGHT_MODE_DEFAULT"/>
            <define VALUE="4" NAME="NAV_LIGHT_MODE_DEFAULT"/>
          </module>
          <module NAME="digital_cam">
            <define VALUE="GPIOC,GPIO12" NAME="DC_SHUTTER_GPIO"/>
          </module>
          <module TYPE="line" NAME="nav"/>
        </modules>
        <servos>
          <servo NO="0" NEUTRAL="1000" NAME="THROTTLE" MIN="1000" MAX="2000"/>
          <servo NO="1" NEUTRAL="1500" NAME="AILEVON_LEFT" MIN="1200" MAX="1800"/>
          <servo NO="2" NEUTRAL="1500" NAME="ELEVATOR" MIN="2000" MAX="1000"/>
          <servo NO="3" NEUTRAL="1500" NAME="RUDDER" MIN="1100" MAX="1900"/>
          <servo NO="4" NEUTRAL="1500" NAME="AILEVON_RIGHT" MIN="1800" MAX="1200"/>
        </servos>
        <commands>
          <axis NAME="THROTTLE" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
        </commands>
        <rc_commands>
          <set VALUE="@THROTTLE" COMMAND="THROTTLE"/>
          <set VALUE="@ROLL" COMMAND="ROLL"/>
          <set VALUE="@PITCH" COMMAND="PITCH"/>
          <set VALUE="@YAW" COMMAND="YAW"/>
        </rc_commands>
        <section PREFIX="AUTO1_" NAME="AUTO1">
          <define VALUE="0.8" NAME="MAX_ROLL"/>
          <define VALUE="0.8" NAME="MAX_PITCH"/>
        </section>
        <command_laws>
          <set VALUE="@ROLL" SERVO="AILEVON_LEFT"/>
          <set VALUE="-@ROLL" SERVO="AILEVON_RIGHT"/>
          <set VALUE="@THROTTLE" SERVO="THROTTLE"/>
          <set VALUE="@PITCH" SERVO="ELEVATOR"/>
          <set VALUE="@YAW" SERVO="RUDDER"/>
        </command_laws>
        <section PREFIX="COMMAND_" NAME="TRIM">
          <define VALUE="0" NAME="ROLL_TRIM"/>
          <define VALUE="788." NAME="PITCH_TRIM"/>
        </section>
        <section PREFIX="FAILSAFE_" NAME="FAILSAFE">
          <define VALUE="0.35" UNIT="%" NAME="DEFAULT_THROTTLE"/>
          <define VALUE="10.0" UNIT="deg" NAME="DEFAULT_ROLL"/>
          <define VALUE="5.0" UNIT="deg" NAME="DEFAULT_PITCH"/>
          <define VALUE="DEFAULT_CIRCLE_RADIUS" UNIT="m" NAME="HOME_RADIUS"/>
          <define VALUE="(MAX_DIST_FROM_HOME*1.5)" NAME="KILL_MODE_DISTANCE"/>
          <define VALUE="3" UNIT="s" NAME="DELAY_WITHOUT_GPS"/>
        </section>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="-179" NAME="MAG_X_NEUTRAL"/>
          <define VALUE="-21" NAME="MAG_Y_NEUTRAL"/>
          <define VALUE="79" NAME="MAG_Z_NEUTRAL"/>
          <define VALUE="4.17334785618" NAME="MAG_X_SENS" INTEGER="16"/>
          <define VALUE="3.98885954135" NAME="MAG_Y_SENS" INTEGER="16"/>
          <define VALUE="4.40442339014" NAME="MAG_Z_SENS" INTEGER="16"/>
          <define VALUE="0" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="0" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.51562740288882" NAME="H_X"/>
          <define VALUE="-0.05707735220832" NAME="H_Y"/>
          <define VALUE="0.85490967783446" NAME="H_Z"/>
        </section>
        <section PREFIX="INS_" NAME="INS">
          <define VALUE="0.0" UNIT="deg" NAME="ROLL_NEUTRAL_DEFAULT"/>
          <define VALUE="5.9" UNIT="deg" NAME="PITCH_NEUTRAL_DEFAULT"/>
        </section>
        <section PREFIX="H_CTL_" NAME="HORIZONTAL CONTROL">
          <define VALUE="0.89" NAME="COURSE_PGAIN"/>
          <define VALUE="0.27" NAME="COURSE_DGAIN"/>
          <define VALUE="1.0" NAME="COURSE_PRE_BANK_CORRECTION"/>
          <define VALUE="45" UNIT="deg" NAME="ROLL_MAX_SETPOINT"/>
          <define VALUE="50" UNIT="deg" NAME="PITCH_MAX_SETPOINT"/>
          <define VALUE="-50" UNIT="deg" NAME="PITCH_MIN_SETPOINT"/>
          <define VALUE="12000" NAME="PITCH_PGAIN"/>
          <define VALUE="1.5" NAME="PITCH_DGAIN"/>
          <define VALUE="1273.88500977" NAME="ELEVATOR_OF_ROLL"/>
          <define VALUE="1." NAME="ROLL_SLEW"/>
          <define VALUE="7972.02783203" NAME="ROLL_ATTITUDE_GAIN"/>
          <define VALUE="500." NAME="ROLL_RATE_GAIN"/>
        </section>
        <section PREFIX="V_CTL_" NAME="VERTICAL CONTROL">
          <define VALUE="11.1" UNIT="volt" NAME="POWER_CTL_BAT_NOMINAL"/>
          <define VALUE="0.183" NAME="ALTITUDE_PGAIN"/>
          <define VALUE="0.217" NAME="AIRSPEED_PGAIN"/>
          <define VALUE="10." NAME="ALTITUDE_MAX_CLIMB"/>
          <define VALUE="2." NAME="MAX_ACCELERATION"/>
          <define VALUE="0.205" NAME="ENERGY_TOT_PGAIN"/>
          <define VALUE="0.403" NAME="ENERGY_TOT_IGAIN"/>
          <define VALUE="0.403" NAME="ENERGY_DIFF_PGAIN"/>
          <define VALUE="0.259" NAME="ENERGY_DIFF_IGAIN"/>
          <define VALUE="7." NAME="GLIDE_RATIO"/>
          <define VALUE="0.5" NAME="AUTO_THROTTLE_NOMINAL_CRUISE_THROTTLE"/>
          <define VALUE="0." UNIT="%/(m/s)" NAME="AUTO_THROTTLE_CLIMB_THROTTLE_INCREMENT"/>
          <define VALUE="0." NAME="AUTO_THROTTLE_PITCH_OF_VZ_PGAIN"/>
          <define VALUE="0.0" NAME="AUTO_THROTTLE_OF_AIRSPEED_PGAIN"/>
          <define VALUE="0.0" NAME="AUTO_THROTTLE_OF_AIRSPEED_IGAIN"/>
          <define VALUE="0.0" NAME="AUTO_PITCH_OF_AIRSPEED_PGAIN"/>
          <define VALUE="0.0" NAME="AUTO_PITCH_OF_AIRSPEED_IGAIN"/>
          <define VALUE="0.0" NAME="AUTO_PITCH_OF_AIRSPEED_DGAIN"/>
          <define VALUE="1" UNIT="m/s/s" NAME="THROTTLE_SLEW_LIMITER"/>
        </section>
        <section NAME="BAT">
          <define VALUE="((adc) - 505) * 124.0f" NAME="MilliAmpereOfAdc(adc)"/>
          <define VALUE="10.5" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="10" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="9.1" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
        </section>
        <section NAME="MISC">
          <define VALUE="14." UNIT="m/s" NAME="CLIMB_AIRSPEED"/>
          <define VALUE="16." UNIT="m/s" NAME="NOMINAL_AIRSPEED"/>
          <define VALUE="12." UNIT="m/s" NAME="GLIDE_AIRSPEED"/>
          <define VALUE="25." UNIT="m/s" NAME="RACE_AIRSPEED"/>
          <define VALUE="10." UNIT="m/s" NAME="STALL_AIRSPEED"/>
          <define VALUE="5." UNIT="s" NAME="CARROT"/>
          <define VALUE="80." NAME="DEFAULT_CIRCLE_RADIUS"/>
          <define VALUE="0." NAME="NAV_GLIDE_PITCH_TRIM"/>
        </section>
        <section PREFIX="NAV_CATAPULT_" NAME="CATAPULT">
          <define VALUE="0.75" UNIT="seconds" NAME="MOTOR_DELAY"/>
          <define VALUE="3.0" UNIT="seconds" NAME="HEADING_DELAY"/>
          <define VALUE="1.75" NAME="ACCELERATION_THRESHOLD"/>
          <define VALUE="15.0" UNIT="deg" NAME="INITIAL_PITCH"/>
          <define VALUE="1.0" NAME="INITIAL_THROTTLE"/>
        </section>
        <section PREFIX="APP_" NAME="GLS_APPROACH">
          <define VALUE="5" UNIT="deg" NAME="ANGLE"/>
          <define VALUE="10" UNIT="m" NAME="INTERCEPT_AF_SD"/>
          <define VALUE="13" UNIT="m/s" NAME="TARGET_SPEED"/>
        </section>
        <section PREFIX="DC_" NAME="DIGITAL_CAMERA">
          <define VALUE="1.5" UNIT="sec" NAME="AUTOSHOOT_PERIOD"/>
          <define VALUE="50" UNIT="meter" NAME="AUTOSHOOT_DISTANCE_INTERVAL"/>
        </section>
        <section PREFIX="NPS_" NAME="SIMULATOR">
          <define VALUE="Malolo1" TYPE="string" NAME="JSBSIM_MODEL"/>
          <define VALUE="4" NAME="COMMANDS_NB"/>
          <define VALUE="throttle-cmd-norm, aileron-cmd-norm, elevator-cmd-norm, rudder-cmd-norm" TYPE="string[]" NAME="ACTUATOR_NAMES"/>
          <define VALUE="nps_sensors_params_default.h" TYPE="string" NAME="SENSORS_PARAMS"/>
          <define VALUE="4" NAME="JS_AXIS_MODE"/>
          <define VALUE="TRUE" NAME="BYPASS_AHRS"/>
          <define VALUE="TRUE" NAME="BYPASS_INS"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Ap">
          <mode NAME="default">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1" NAME="AIRSPEED"/>
            <message PERIOD="5.1" NAME="ALIVE"/>
            <message PERIOD="0.25" NAME="GPS"/>
            <message PERIOD="1." NAME="NAVIGATION"/>
            <message PERIOD="0.1" NAME="ATTITUDE"/>
            <message PERIOD="0.5" NAME="ESTIMATOR"/>
            <message PERIOD="1.1" NAME="ENERGY"/>
            <message PERIOD="0.5" NAME="WP_MOVED"/>
            <message PERIOD="1.05" NAME="CIRCLE"/>
            <message PERIOD="0.2" NAME="DESIRED"/>
            <message PERIOD="1.2" NAME="SEGMENT"/>
            <message PERIOD="2.1" NAME="CALIBRATION"/>
            <message PERIOD="9." NAME="NAVIGATION_REF"/>
            <message PERIOD="4.9" NAME="PPRZ_MODE"/>
            <message PERIOD="5." NAME="SETTINGS"/>
            <message PERIOD="2.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="1.5" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="IR_SENSORS"/>
            <message PERIOD="2.1" NAME="SURVEY"/>
            <message PERIOD="2.0" NAME="GPS_SOL"/>
            <message PERIOD=".8" NAME="IMU_ACCEL"/>
            <message PERIOD=".6" NAME="IMU_GYRO"/>
            <message PERIOD="1.3" NAME="IMU_MAG"/>
            <message PERIOD="0.5" NAME="CAM"/>
            <message PERIOD="1.0" NAME="CAM_POINT"/>
            <message PERIOD="5" NAME="COMMANDS"/>
            <message PERIOD="2" NAME="FBW_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
          </mode>
          <mode NAME="minimal">
            <message PERIOD="5" NAME="ALIVE"/>
            <message PERIOD="4" NAME="ATTITUDE"/>
            <message PERIOD="1.05" NAME="GPS"/>
            <message PERIOD="1.3" NAME="ESTIMATOR"/>
            <message PERIOD="1.4" NAME="WP_MOVED"/>
            <message PERIOD="3.05" NAME="CIRCLE"/>
            <message PERIOD="4.05" NAME="DESIRED"/>
            <message PERIOD="1.1" NAME="ENERGY"/>
            <message PERIOD="3.2" NAME="SEGMENT"/>
            <message PERIOD="5.1" NAME="CALIBRATION"/>
            <message PERIOD="9." NAME="NAVIGATION_REF"/>
            <message PERIOD="3." NAME="NAVIGATION"/>
            <message PERIOD="5." NAME="PPRZ_MODE"/>
            <message PERIOD="5." NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="1.5" NAME="DL_VALUE"/>
            <message PERIOD="5.2" NAME="IR_SENSORS"/>
            <message PERIOD="2.1" NAME="SURVEY"/>
            <message PERIOD="5.0" NAME="GPS_SOL"/>
          </mode>
          <mode NAME="extremal">
            <message PERIOD="5" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="GPS"/>
            <message PERIOD="5.3" NAME="ESTIMATOR"/>
            <message PERIOD="10.1" NAME="ENERGY"/>
            <message PERIOD="10.2" NAME="DESIRED"/>
            <message PERIOD="5.4" NAME="NAVIGATION"/>
            <message PERIOD="7.5" NAME="PPRZ_MODE"/>
            <message PERIOD="8." NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="5.7" NAME="DATALINK_REPORT"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD="0.5" NAME="BARO_RAW"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO"/>
            <message PERIOD=".075" NAME="IMU_ACCEL"/>
            <message PERIOD=".1" NAME="IMU_MAG"/>
          </mode>
          <mode NAME="debug_imu">
            <message PERIOD="0.1" NAME="ATTITUDE"/>
            <message PERIOD="5" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="GPS"/>
            <message PERIOD="5.3" NAME="ESTIMATOR"/>
            <message PERIOD="10.1" NAME="ENERGY"/>
            <message PERIOD="10.2" NAME="DESIRED"/>
            <message PERIOD="5.4" NAME="NAVIGATION"/>
            <message PERIOD="5.5" NAME="PPRZ_MODE"/>
            <message PERIOD="5." NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="5.7" NAME="DATALINK_REPORT"/>
            <message PERIOD=".5" NAME="IMU_ACCEL"/>
            <message PERIOD=".5" NAME="IMU_GYRO"/>
            <message PERIOD=".5" NAME="IMU_MAG"/>
            <message PERIOD=".5" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".5" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".5" NAME="IMU_MAG_RAW"/>
          </mode>
        </process>
        <process NAME="Fbw">
          <mode NAME="default">
            <message PERIOD="5" NAME="COMMANDS"/>
            <message PERIOD="2" NAME="FBW_STATUS"/>
            <message PERIOD="5" NAME="ACTUATORS"/>
          </mode>
          <mode NAME="debug">
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="COMMANDS"/>
            <message PERIOD="1" NAME="FBW_STATUS"/>
            <message PERIOD="5" NAME="ACTUATORS"/>
          </mode>
        </process>
      </telemetry>
      <settings>
        <dl_settings>
          <dl_settings NAME="flight params">
            <dl_setting VAR="flight_altitude" STEP="10" SHORTNAME="altitude" MIN="0" MAX="1000"/>
            <dl_setting VAR="nav_course" STEP="1" MIN="0" MAX="360"/>
            <dl_setting VAR="nav_shift" STEP="5" SHORTNAME="inc. shift" MODULE="firmwares/fixedwing/nav" MIN="-10" MAX="10" HANDLER="IncreaseShift"/>
            <dl_setting VAR="autopilot.flight_time" STEP="1" SHORTNAME="flight time" MODULE="autopilot" MIN="0" MAX="0" HANDLER="ResetFlightTimeAndLaunch"/>
            <dl_setting VAR="nav_radius" STEP="10" MODULE="firmwares/fixedwing/nav" MIN="-200" MAX="200" HANDLER="SetNavRadius">
              <strip_button VALUE="1" NAME="Circle right" ICON="circle-right.png" GROUP="circle"/>
              <strip_button VALUE="-1" NAME="Circle left" ICON="circle-left.png" GROUP="circle"/>
              <key_press VALUE="1" KEY="greater"/>
              <key_press VALUE="-1" KEY="less"/>
            </dl_setting>
          </dl_settings>
          <dl_settings NAME="mode">
            <dl_setting VAR="autopilot.mode" VALUES="MANUAL|AUTO1|AUTO2|HOME|NOGPS|FAILSAFE" STEP="1" MODULE="autopilot" MIN="0" MAX="2"/>
            <dl_setting VAR="autopilot.launch" STEP="1" MIN="0" MAX="1"/>
            <dl_setting VAR="autopilot.kill_throttle" STEP="1" MIN="0" MAX="1"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings>
        <dl_settings>
          <dl_settings NAME="performance">
            <dl_settings NAME="estimates">
              <dl_setting VAR="ac_char_climb_pitch" STEP="1" SHORTNAME="climb_pitch" MODULE="guidance/energy_ctrl" MIN="-1" MAX="1"/>
              <dl_setting VAR="ac_char_climb_max" STEP="1" SHORTNAME="climb_max" MIN="-1" MAX="1"/>
              <dl_setting VAR="ac_char_descend_pitch" STEP="1" SHORTNAME="descend_pitch" MIN="-1" MAX="1"/>
              <dl_setting VAR="ac_char_descend_max" STEP="1" SHORTNAME="descend_max" MIN="-1" MAX="1"/>
              <dl_setting VAR="ac_char_cruise_throttle" STEP="1" SHORTNAME="cruise_thr" MIN="-1" MAX="1"/>
              <dl_setting VAR="ac_char_cruise_pitch" STEP="1" SHORTNAME="cruise_pitch" MIN="-1" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="Quadplane" ac_id="222" airframe="airframes/tudelft/aa_quadplane.xml" radio="radios/spektrum.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/rotorcraft_basic.xml" settings="settings/control/stabilization_att_int.xml settings/nps.xml settings/rotorcraft_basic.xml settings/control/rotorcraft_guidance.xml" settings_modules="modules/air_data.xml modules/geo_mag.xml modules/gps_ubx_ucenter.xml modules/ahrs_int_cmpl_quat.xml modules/stabilization_int_quat.xml modules/nav_basic_rotorcraft.xml modules/guidance_rotorcraft.xml modules/gps.xml modules/imu_common.xml" gui_color="blue" release="f739a81cfa2c633e33f31ab5f095d8f617276974">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="NEGATIVE" NAME="fake spektrum" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1000" MIN="1000" MAX="2000" FUNCTION="THROTTLE" CTL="left_stick_vert" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="2000" MAX="1000" FUNCTION="ROLL" CTL="right_stick_horiz" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="2000" MAX="1000" FUNCTION="PITCH" CTL="right_stick_vert" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="2000" MAX="1000" FUNCTION="YAW" CTL="left_stick_horiz" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1000" MAX="2000" FUNCTION="GEAR" CTL="aux0" AVERAGE="1"/>
        <channel NEUTRAL="1500" MIN="1000" MAX="2000" FUNCTION="AUX1" CTL="aux1" AVERAGE="1"/>
        <channel NEUTRAL="1500" MIN="1000" MAX="2000" FUNCTION="AUX2" CTL="aux2" AVERAGE="1"/>
        <channel NEUTRAL="1500" MIN="1000" MAX="2000" FUNCTION="AUX3" CTL="aux3" AVERAGE="1"/>
        <channel NEUTRAL="1500" MIN="1000" MAX="2000" FUNCTION="MODE" CTL="aux4" AVERAGE="1"/>
      </radio>
      <dump>
        <flight_plan security_height="2" name="Rotorcraft Basic (Enac)" max_dist_from_home="150" lon0="1 28 52.61" lat0="43 33 50.83" ground_alt="147" alt="152">
          <header>#include &quot;autopilot.h&quot;</header>
          <waypoints>
            <waypoint y="0.0" x="0.0" name="HOME"/>
            <waypoint y="5.0" x="0.0" name="CLIMB"/>
            <waypoint y="-5.0" x="-2.0" name="STDBY"/>
            <waypoint y="-13.9" x="3.6" name="p1"/>
            <waypoint y="-48.2" x="27.5" name="p2"/>
            <waypoint y="-19.6" x="16.7" name="p3"/>
            <waypoint y="-40.7" x="13.7" name="p4"/>
            <waypoint y="-50" x="-20" name="CAM" height="2."/>
            <waypoint y="-10.9" x="5.6" name="TD"/>
          </waypoints>
          <blocks>
            <block name="Wait GPS" no="0">
              <call_once fun="NavKillThrottle()" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Geo init" no="1">
              <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
              <call_once fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Holding point" no="2">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="Start Engine" no="3">
              <call_once fun="NavResurrect()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff" name="Takeoff" no="4">
              <exception deroute="Standby" cond="stateGetPositionEnu_f() @DEREF z @GT 2.0"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="5">
              <stay wp="STDBY" no="0"/>
            </block>
            <block name="stay_p1" no="6">
              <stay wp="p1" no="0"/>
            </block>
            <block name="go_p2" no="7">
              <call_once fun="nav_set_heading_deg(90)" no="0"/>
              <go wp="p2" no="1"/>
              <deroute block="stay_p1" no="2"/>
            </block>
            <block name="line_p1_p2" no="8">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <stay wp="p2" until="stage_time>10" no="1"/>
              <go wp="p1" hmode="route" from="p2" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="route" no="9">
              <go wp="p3" hmode="route" from="p1" no="0"/>
              <go wp="p4" hmode="route" from="p3" no="1"/>
              <go wp="p1" hmode="route" from="p4" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="Oval" no="10">
              <oval radius="-1" p2="p2" p1="p1" no="1"/>
            </block>
            <block name="test yaw" no="11">
              <go wp="p1" no="0"/>
              <for var="i" to="16" from="1" no="2">
                <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
              </for>
              <deroute block="Standby" no="5"/>
            </block>
            <block pre_call="nav_set_heading_towards_waypoint(WP_CAM)" name="circle CAM" no="12">
              <circle wp="CAM" radius="nav_radius" no="0"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land Here" name="land here" no="13">
              <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
            </block>
            <block name="land" no="14">
              <go wp="TD" no="0"/>
            </block>
            <block name="flare" no="15">
              <exception deroute="Holding point" cond="NavDetectGround()"/>
              <exception deroute="landed" cond="!nav_is_in_flight()"/>
              <call_once fun="NavStartDetectGround()" no="0"/>
              <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
            </block>
            <block name="landed" no="16">
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
            </block>
            <block name="HOME" no="17">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="17" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="16" block_name="landed" stage="0">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
          </stage>
          <stage block="15" block_name="flare" stage="1">
            <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
          </stage>
          <stage block="15" block_name="flare" stage="0">
            <call_once fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="14" block_name="land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="13" block_name="land here" stage="0">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="12" block_name="circle CAM" stage="0">
            <circle wp="CAM" radius="nav_radius" no="0"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="5">
            <deroute block="Standby" no="5"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="3">
            <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="2">
            <for var="i" to="16" from="1" no="2">
              <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
            </for>
          </stage>
          <stage block="11" block_name="test yaw" stage="0">
            <go wp="p1" no="0"/>
          </stage>
          <stage block="10" block_name="Oval" stage="1">
            <oval radius="-1" p2="p2" p1="p1" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="9" block_name="route" stage="2">
            <go wp="p1" hmode="route" from="p4" no="2"/>
          </stage>
          <stage block="9" block_name="route" stage="1">
            <go wp="p4" hmode="route" from="p3" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="0">
            <go wp="p3" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="2">
            <go wp="p1" hmode="route" from="p2" no="2"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="1">
            <stay wp="p2" until="stage_time>10" no="1"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="2">
            <deroute block="stay_p1" no="2"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="1">
            <go wp="p2" no="1"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="0">
            <call_once fun="nav_set_heading_deg(90)" no="0"/>
          </stage>
          <stage block="6" block_name="stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="5" block_name="Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="1">
            <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="0">
            <call_once fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="2">
            <call_once fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="0">
            <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="air_data">
              <dl_setting VAR="air_data.qnh" STEP="1" SHORTNAME="QNH" MODULE="air_data/air_data" MIN="800" MAX="1200"/>
              <dl_setting VAR="air_data.tas_factor" TYPE="float" STEP="0.01" SHORTNAME="TASfactor" PERSISTENT="true" PARAM="AIR_DATA_TAS_FACTOR" MODULE="air_data/air_data" MIN="0.8" MAX="1.3"/>
              <dl_setting VAR="air_data.calc_qnh_once" STEP="1" SHORTNAME="calcQNH" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_airspeed" TYPE="uint8" STEP="1" SHORTNAME="calcAirspeed" PERSISTENT="true" PARAM="AIR_DATA_CALC_AIRSPEED" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_tas_factor" TYPE="uint8" STEP="1" SHORTNAME="calcTASfactor" PERSISTENT="true" PARAM="AIR_DATA_CALC_TAS_FACTOR" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_amsl_baro" TYPE="uint8" STEP="1" SHORTNAME="calcAMSL" PERSISTENT="true" PARAM="AIR_DATA_CALC_AMSL_BARO" MODULE="air_data/air_data" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="geo_mag">
              <dl_setting VAR="geo_mag.calc_once" VALUES="OFF|CALC" STEP="1" SHORTNAME="calcNow" MODULE="geo_mag/geo_mag" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="ublox">
            <dl_settings NAME="ucenter">
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_h" STEP="1" SHORTNAME="sw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_l" STEP="1" SHORTNAME="sw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_h" STEP="1" SHORTNAME="hw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_l" STEP="1" SHORTNAME="hw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_init" STEP="100" SHORTNAME="inibaud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_run" STEP="100" SHORTNAME="baud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
              <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
              <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
              <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
              <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Att Loop">
              <dl_setting VAR="stabilization_gains.p.x" TYPE="int32" STEP="1" SHORTNAME="pgain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_PGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="8000"/>
              <dl_setting VAR="stabilization_gains.d.x" TYPE="int32" STEP="1" SHORTNAME="dgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.x" TYPE="int32" STEP="1" SHORTNAME="igain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_IGAIN" MIN="0" MAX="800"/>
              <dl_setting VAR="stabilization_gains.dd.x" TYPE="int32" STEP="1" SHORTNAME="ddgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="stabilization_gains.p.y" TYPE="int32" STEP="1" SHORTNAME="pgain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_PGAIN" MIN="1" MAX="8000"/>
              <dl_setting VAR="stabilization_gains.d.y" TYPE="int32" STEP="1" SHORTNAME="dgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.y" TYPE="int32" STEP="1" SHORTNAME="igain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_IGAIN" MIN="0" MAX="800"/>
              <dl_setting VAR="stabilization_gains.dd.y" TYPE="int32" STEP="1" SHORTNAME="ddgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="stabilization_gains.p.z" TYPE="int32" STEP="1" SHORTNAME="pgain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_PGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.d.z" TYPE="int32" STEP="1" SHORTNAME="dgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.z" TYPE="int32" STEP="1" SHORTNAME="igain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_IGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="stabilization_gains.dd.z" TYPE="int32" STEP="1" SHORTNAME="ddgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.p" UNIT="rad/s" STEP="1" SHORTNAME="omega p" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_P" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaP" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.p" STEP="0.05" SHORTNAME="zeta p" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_P" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaP"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.q" UNIT="rad/s" STEP="1" SHORTNAME="omega q" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_Q" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaQ" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.q" STEP="0.05" SHORTNAME="zeta q" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_Q" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaQ"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.r" UNIT="rad/s" STEP="1" SHORTNAME="omega r" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_R" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaR" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.r" STEP="0.05" SHORTNAME="zeta r" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_R" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaR"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="NAV">
              <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
              <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
              <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MIN="-50" MAX="50"/>
              <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MIN="0" MAX="10.0"/>
              <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MIN="-10.0" MAX="0.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Vert Loop">
              <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
              <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MIN="0.2" MAX="0.8"/>
              <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MIN="0" MAX="1"/>
              <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
            <dl_settings NAME="Horiz Loop">
              <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="true" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
              <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
              <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MIN="0" MAX="1"/>
              <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
              <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
              <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
              <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
              <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
              <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="Quadplane LisaM_2.0 pwm">
        <description>Quadplane:
 - modified mini-talon with cobra 2814/16 Kv1050 running a 10x8 prop
 - quad with KISS esc + cobra 2207/2450kv running 6x3 props</description>
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="lisa_m_2.0"/>
          <target NAME="nps" BOARD="pc">
            <module TYPE="jsbsim" NAME="fdm"/>
          </target>
          <module TYPE="spektrum" NAME="radio_control">
            <define VALUE="RADIO_GEAR" NAME="RADIO_MODE"/>
            <define VALUE="RADIO_AUX2" NAME="RADIO_FORWARD_MODE"/>
            <define VALUE="RADIO_AUX1" NAME="RADIO_KILL_SWITCH"/>
            <define VALUE="1" NAME="USE_KILL_SWITCH_FOR_MOTOR_ARMING"/>
          </module>
          <module NAME="motor_mixing"/>
          <module TYPE="pwm" NAME="actuators">
            <define VALUE="400" NAME="SERVO_HZ"/>
            <define NAME="USE_SERVOS_7AND8"/>
          </module>
          <module TYPE="xbee_api" NAME="telemetry"/>
          <module TYPE="aspirin_v2.2" NAME="imu"/>
          <module TYPE="ublox" NAME="gps"/>
          <module TYPE="int_quat" NAME="stabilization"/>
          <module TYPE="int_cmpl_quat" NAME="ahrs">
            <define VALUE="0" NAME="AHRS_GRAVITY_HEURISTIC_FACTOR"/>
          </module>
          <module NAME="ins"/>
          <module TYPE="ubx_ucenter" NAME="gps"/>
          <module NAME="geo_mag"/>
          <module NAME="air_data"/>
        </firmware>
        <commands>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="0"/>
          <axis NAME="FORWARD_MODE" FAILSAFE_VALUE="0"/>
        </commands>
        <rc_commands>
          <set VALUE="@FORWARD_MODE" COMMAND="FORWARD_MODE"/>
        </rc_commands>
        <servos DRIVER="Pwm">
          <servo NO="0" NEUTRAL="1100" NAME="FRONT_LEFT" MIN="1000" MAX="1900"/>
          <servo NO="1" NEUTRAL="1100" NAME="FRONT_RIGHT" MIN="1000" MAX="1900"/>
          <servo NO="2" NEUTRAL="1100" NAME="BACK_RIGHT" MIN="1000" MAX="1900"/>
          <servo NO="3" NEUTRAL="1100" NAME="BACK_LEFT" MIN="1000" MAX="1900"/>
          <servo NO="4" NEUTRAL="1100" NAME="FLYMOTOR" MIN="1000" MAX="1900"/>
          <servo NO="5" NEUTRAL="1470" NAME="AILERONS" MIN="1000" MAX="1900"/>
          <servo NO="6" NEUTRAL="1500" NAME="RUDDERVATOR_LEFT" MIN="1000" MAX="2000"/>
          <servo NO="7" NEUTRAL="1470" NAME="RUDDERVATOR_RIGHT" MIN="1000" MAX="2000"/>
        </servos>
        <command_laws>
          <let VAR="forward_on" VALUE="@FORWARD_MODE > -4800? 1 : 0"/>
          <let VAR="forward_only" VALUE="@FORWARD_MODE > 4800? 1 : 0"/>
          <call FUN="motor_mixing_run(autopilot_get_motors_on(),FALSE,values)"/>
          <set VALUE="$forward_only > 0? -9600 : motor_mixing.commands[0]" SERVO="FRONT_LEFT"/>
          <set VALUE="$forward_only > 0? -9600 : motor_mixing.commands[1]" SERVO="FRONT_RIGHT"/>
          <set VALUE="$forward_only > 0? -9600 : motor_mixing.commands[2]" SERVO="BACK_RIGHT"/>
          <set VALUE="$forward_only > 0? -9600 : motor_mixing.commands[3]" SERVO="BACK_LEFT"/>
          <set VALUE="@THRUST * $forward_on" SERVO="FLYMOTOR"/>
          <let VAR="rudder" VALUE="$forward_only > 0? @YAW * 1.2 : 0"/>
          <let VAR="elevator" VALUE="@PITCH * 1.5"/>
          <set VALUE="- $elevator - $rudder" SERVO="RUDDERVATOR_RIGHT"/>
          <set VALUE="$elevator - $rudder" SERVO="RUDDERVATOR_LEFT"/>
          <set VALUE="@ROLL * 1.3" SERVO="AILERONS"/>
        </command_laws>
        <section NAME="BAT">
          <define VALUE="12.4" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="14.0" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="14.8" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="16.8" UNIT="V" NAME="MAX_BAT_LEVEL"/>
          <define VALUE="30000" NAME="MILLIAMP_AT_FULL_THROTTLE"/>
        </section>
        <section PREFIX="MOTOR_MIXING_" NAME="MIXING">
          <define VALUE="4" NAME="NB_MOTOR"/>
          <define VALUE="256" NAME="SCALE"/>
          <define VALUE="{  181, -181, -181,  181 }" NAME="ROLL_COEF"/>
          <define VALUE="{  -181,  -181, 181, 181 }" NAME="PITCH_COEF"/>
          <define VALUE="{  -128, 128,  -128,  128 }" NAME="YAW_COEF"/>
          <define VALUE="{  256,  256,  256,  256 }" NAME="THRUST_COEF"/>
        </section>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="-179" NAME="MAG_X_NEUTRAL"/>
          <define VALUE="-21" NAME="MAG_Y_NEUTRAL"/>
          <define VALUE="79" NAME="MAG_Z_NEUTRAL"/>
          <define VALUE="4.17334785618" NAME="MAG_X_SENS" INTEGER="16"/>
          <define VALUE="3.98885954135" NAME="MAG_Y_SENS" INTEGER="16"/>
          <define VALUE="4.40442339014" NAME="MAG_Z_SENS" INTEGER="16"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="90." UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.513081" NAME="H_X"/>
          <define VALUE="-0.00242783" NAME="H_Y"/>
          <define VALUE="0.858336" NAME="H_Z"/>
        </section>
        <section PREFIX="INS_" NAME="INS"/>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="STABILIZATION_ATTITUDE">
          <define VALUE="45." UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="45." UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="90." UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="0" NAME="DEADBAND_A"/>
          <define VALUE="0" NAME="DEADBAND_E"/>
          <define VALUE="250" NAME="DEADBAND_R"/>
          <define VALUE="400" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.85" NAME="REF_ZETA_P"/>
          <define VALUE="400." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="400" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.85" NAME="REF_ZETA_Q"/>
          <define VALUE="400." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="250" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.85" NAME="REF_ZETA_R"/>
          <define VALUE="180." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(1800.)" NAME="REF_MAX_RDOT"/>
          <define VALUE="700" NAME="PHI_PGAIN"/>
          <define VALUE="300" NAME="PHI_DGAIN"/>
          <define VALUE="0" NAME="PHI_IGAIN"/>
          <define VALUE="700" NAME="THETA_PGAIN"/>
          <define VALUE="300" NAME="THETA_DGAIN"/>
          <define VALUE="0" NAME="THETA_IGAIN"/>
          <define VALUE="2200" NAME="PSI_PGAIN"/>
          <define VALUE="1100" NAME="PSI_DGAIN"/>
          <define VALUE="0" NAME="PSI_IGAIN"/>
          <define VALUE="300" NAME="PHI_DDGAIN"/>
          <define VALUE="300" NAME="THETA_DDGAIN"/>
          <define VALUE="300" NAME="PSI_DDGAIN"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="150" NAME="HOVER_KP"/>
          <define VALUE="80" NAME="HOVER_KD"/>
          <define VALUE="20" NAME="HOVER_KI"/>
          <define VALUE="0.5" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="TRUE" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="20" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="TRUE" NAME="USE_SPEED_REF"/>
          <define VALUE="50" NAME="PGAIN"/>
          <define VALUE="100" NAME="DGAIN"/>
          <define VALUE="70" NAME="AGAIN"/>
          <define VALUE="20" NAME="IGAIN"/>
        </section>
        <section NAME="NAV">
          <define VALUE="2" UNIT="m" NAME="ARRIVED_AT_WAYPOINT"/>
        </section>
        <section PREFIX="NPS_" NAME="SIMULATOR">
          <define VALUE="front_motor, right_motor, back_motor, left_motor" TYPE="string[]" NAME="ACTUATOR_NAMES"/>
          <define VALUE="simple_quad" TYPE="string" NAME="JSBSIM_MODEL"/>
          <define VALUE="nps_sensors_params_default.h" TYPE="string" NAME="SENSORS_PARAMS"/>
          <define VALUE="4" NAME="JS_AXIS_MODE"/>
        </section>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_RC_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_AUTO2"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.05" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
            <message PERIOD="0.05" NAME="OPTICAL_FLOW_HOVER"/>
            <message PERIOD="0.10" NAME="VISUALTARGET"/>
            <message PERIOD="0.1" NAME="VISION_POSITION_ESTIMATE"/>
            <message PERIOD="0.05" NAME="DIVERGENCE"/>
            <message PERIOD="0.02" NAME="DRAGSPEED"/>
            <message PERIOD="5.1" NAME="LOGGER_STATUS"/>
            <message PERIOD="1.2" NAME="LIDAR"/>
            <message PERIOD=".25" NAME="INS_EKF2"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="BEBOP_ACTUATORS"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_FLOAT"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
            <message PERIOD="2.0" NAME="INDI_G"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="vel_guidance" KEY_PRESS="q">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HYBRID_GUIDANCE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1.0" NAME="GPS_INT"/>
            <message PERIOD="1.0" NAME="INS"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="RTCM3">
            <message PERIOD="1" NAME="GPS_RXMRTCM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD="1" NAME="GPS_RTK"/>
          </mode>
        </process>
        <process NAME="FlightRecorder">
          <mode NAME="default">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD=".1" NAME="GPS_INT"/>
            <message PERIOD=".1" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".2" NAME="IMU_MAG_SCALED"/>
            <message PERIOD="0.05" NAME="LIDAR"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Att Loop">
            <dl_setting VAR="stabilization_gains.p.x" TYPE="int32" STEP="1" SHORTNAME="pgain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_PGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="8000"/>
            <dl_setting VAR="stabilization_gains.d.x" TYPE="int32" STEP="1" SHORTNAME="dgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="4000"/>
            <dl_setting VAR="stabilization_gains.i.x" TYPE="int32" STEP="1" SHORTNAME="igain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_IGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="800"/>
            <dl_setting VAR="stabilization_gains.dd.x" TYPE="int32" STEP="1" SHORTNAME="ddgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DDGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="1000"/>
            <dl_setting VAR="stabilization_gains.p.y" TYPE="int32" STEP="1" SHORTNAME="pgain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_PGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="8000"/>
            <dl_setting VAR="stabilization_gains.d.y" TYPE="int32" STEP="1" SHORTNAME="dgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="4000"/>
            <dl_setting VAR="stabilization_gains.i.y" TYPE="int32" STEP="1" SHORTNAME="igain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_IGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="800"/>
            <dl_setting VAR="stabilization_gains.dd.y" TYPE="int32" STEP="1" SHORTNAME="ddgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DDGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="1000"/>
            <dl_setting VAR="stabilization_gains.p.z" TYPE="int32" STEP="1" SHORTNAME="pgain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_PGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="4000"/>
            <dl_setting VAR="stabilization_gains.d.z" TYPE="int32" STEP="1" SHORTNAME="dgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="4000"/>
            <dl_setting VAR="stabilization_gains.i.z" TYPE="int32" STEP="1" SHORTNAME="igain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_IGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="400"/>
            <dl_setting VAR="stabilization_gains.dd.z" TYPE="int32" STEP="1" SHORTNAME="ddgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DDGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="1000"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="nps|hitl">
        <dl_settings>
          <dl_settings NAME="Sim">
            <dl_setting VAR="nps_bypass_ahrs" VALUES="No|Yes" STEP="1" SHORTNAME="bypass_ahrs" MODULE="nps/nps_autopilot" MIN="0" MAX="1"/>
            <dl_setting VAR="nps_bypass_ins" VALUES="No|Yes" STEP="1" SHORTNAME="bypass_ins" MODULE="nps/nps_autopilot" MIN="0" MAX="1"/>
            <dl_setting VAR="gps_has_fix" VALUES="No|Yes" STEP="1" SHORTNAME="gps_fix" MODULE="subsystems/gps/gps_sim_nps" MIN="0" MAX="1"/>
            <dl_setting VAR="datalink_enabled" VALUES="OFF|ON" STEP="1" SHORTNAME="datalink" MODULE="subsystems/datalink/datalink" MIN="0" MAX="1"/>
            <dl_setting VAR="nps_electrical.supply_voltage" UNIT="V" STEP="0.1" SHORTNAME="bat_voltage" MODULE="nps/nps_electrical" MIN="0" MAX="24"/>
            <dl_setting VAR="nps_atmosphere.wind_speed" UNIT="m/s" STEP="0.1" SHORTNAME="wind_speed" MODULE="nps/nps_atmosphere" MIN="0" MAX="25" HANDLER="set_wind_speed"/>
            <dl_setting VAR="nps_atmosphere.wind_dir" UNIT="rad" STEP="1" SHORTNAME="wind_dir" MODULE="nps/nps_atmosphere" MIN="0" MAX="360" HANDLER="set_wind_dir" ALT_UNIT="deg"/>
            <dl_setting VAR="nps_atmosphere.turbulence_severity" STEP="1" SHORTNAME="turbulence" MODULE="nps/nps_atmosphere" MIN="0" MAX="7"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="19"/>
            <dl_setting VAR="autopilot.kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot.power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot.mode" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="19" HANDLER="SetModeHandler"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Vert Loop">
            <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
            <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
            <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
            <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MODULE="guidance/guidance_v" MIN="0.2" MAX="0.8"/>
            <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MODULE="guidance/guidance_v" MIN="0" MAX="1"/>
            <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MODULE="guidance/guidance_v" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
          </dl_settings>
          <dl_settings NAME="Horiz Loop">
            <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="true" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
            <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
            <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MODULE="guidance/guidance_h" MIN="0" MAX="1"/>
            <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
            <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
            <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
            <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
            <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MODULE="guidance/guidance_h" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MODULE="guidance/guidance_h" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
          </dl_settings>
          <dl_settings NAME="NAV">
            <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
            <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MODULE="navigation" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
            <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MODULE="navigation" MIN="-50" MAX="50"/>
            <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MODULE="navigation" MIN="0" MAX="10.0"/>
            <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MODULE="navigation" MIN="-10.0" MAX="0.0"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="Robird" ac_id="68" airframe="airframes/tudelft/robird.xml" radio="radios/T14SG_SBUS.xml" telemetry="telemetry/default_rotorcraft_slow.xml" flight_plan="flight_plans/tudelft/delft_basic.xml" settings="settings/rotorcraft_basic.xml ../conf/modules/px4_flash.xml ../conf/modules/glide_wing_lock.xml" settings_modules="[modules/air_data.xml] modules/geo_mag.xml modules/ins_extended.xml modules/ahrs_int_cmpl_quat.xml modules/stabilization_indi_simple.xml modules/nav_basic_rotorcraft.xml modules/guidance_rotorcraft.xml modules/gps_ubx_ucenter.xml modules/gps.xml modules/imu_common.xml" gui_color="#ffffcccaccca" release="677c4c77398cfbabffae3efdcafdacfd04a0b9ab">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSTIVE" NAME="Futaba T14SG with SBUS" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1500" MIN="1000" MAX="2000" FUNCTION="ROLL" CTL="A" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1000" MAX="2000" FUNCTION="PITCH" CTL="B" AVERAGE="0"/>
        <channel NEUTRAL="1000" MIN="1000" MAX="2000" FUNCTION="THROTTLE" CTL="C" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1000" MAX="2000" FUNCTION="YAW" CTL="D" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="2000" MAX="1000" FUNCTION="UNUSED1" CTL="E" AVERAGE="1"/>
        <channel NEUTRAL="1500" MIN="1000" MAX="2000" FUNCTION="KILL" CTL="F" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1000" MAX="2000" FUNCTION="AUX2" CTL="G" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1000" MAX="2000" FUNCTION="MODE" CTL="H" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1000" MAX="2000" FUNCTION="UNUSED3" CTL="I" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1000" MAX="2000" FUNCTION="AUX3" CTL="J" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1000" MAX="2000" FUNCTION="UNUSED5" CTL="K" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1000" MAX="2000" FUNCTION="UNUSED6" CTL="L" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="2" name="Delft Basic" max_dist_from_home="1000" lon0="4 22 42.0" lat0="51 59 27.6" ground_alt="0" alt="4">
          <header>    #include &quot;autopilot.h&quot;
    #include &quot;subsystems/datalink/datalink.h&quot;
    #include &quot;subsystems/electrical.h&quot;
    #include &quot;subsystems/radio_control.h&quot;</header>
          <waypoints>
            <waypoint y="0.0" x="0.0" name="HOME"/>
            <waypoint y="5.0" x="0.0" name="CLIMB"/>
            <waypoint y="-5.0" x="-2.0" name="STDBY"/>
            <waypoint y="14.3" x="-19.9" name="p1"/>
            <waypoint y="21.6" x="-0.6" name="p2"/>
            <waypoint y="-26.5" x="22.2" name="p3"/>
            <waypoint y="-34.4" x="4.9" name="p4"/>
            <waypoint y="-29.4" x="14.2" name="CAM"/>
            <waypoint y="-10.9" x="5.6" name="TD"/>
          </waypoints>
          <exceptions>
            <exception deroute="ComeBackAndLand" cond="((radio_control.status == RC_REALLY_LOST) &&
      !(IndexOfBlock('Takeoff') > nav_block) &&
      !(nav_block >= IndexOfBlock('land here')) &&
      (autopilot_in_flight() == true) )"/>
            <exception deroute="DatalinkLoss" cond="(datalink_time > 60 &&
      !(datalink_time > 120) &&
      !(IndexOfBlock('Takeoff') > nav_block) &&
      !(nav_block >= IndexOfBlock('land here')) &&
      (autopilot_in_flight() == true) )"/>
            <exception deroute="ComeBackAndLand" cond="(electrical.bat_low &&
      !(IndexOfBlock('Holding point') > nav_block) &&
      !(nav_block >= IndexOfBlock('land here')) &&
      (autopilot_in_flight() == true) )"/>
            <exception deroute="land here" cond="(electrical.bat_critical &&
      !(IndexOfBlock('Holding point') > nav_block) &&
      !(nav_block >= IndexOfBlock('land here')) &&
      (autopilot_in_flight() == true) )"/>
          </exceptions>
          <blocks>
            <block name="Wait GPS" no="0">
              <call_once fun="NavKillThrottle()" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Geo init" no="1">
              <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
              <call_once fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Holding point" no="2">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="Start Engine" no="3">
              <call_once fun="NavResurrect()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff" name="Takeoff" no="4">
              <exception deroute="Standby" cond="stateGetPositionEnu_f()->z > 2.0"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="5">
              <stay wp="STDBY" no="0"/>
            </block>
            <block name="stay_p1" no="6">
              <stay wp="p1" no="0"/>
            </block>
            <block name="go_p2" no="7">
              <go wp="p2" no="0"/>
              <deroute block="stay_p1" no="1"/>
            </block>
            <block name="line_p1_p2" no="8">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <stay wp="p2" until="stage_time>10" no="1"/>
              <go wp="p1" hmode="route" from="p2" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="route" no="9">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <go wp="p3" hmode="route" from="p2" no="1"/>
              <go wp="p4" hmode="route" from="p3" no="2"/>
              <go wp="p1" hmode="route" from="p4" no="3"/>
              <deroute block="stay_p1" no="4"/>
            </block>
            <block name="test yaw" no="10">
              <go wp="p1" no="0"/>
              <for var="i" to="16" from="1" no="2">
                <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
              </for>
              <deroute block="Standby" no="5"/>
            </block>
            <block pre_call="nav_set_heading_towards_waypoint(WP_CAM)" name="circle CAM" no="11">
              <circle wp="CAM" radius="nav_radius" no="0"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land Here" name="land here" no="12">
              <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
            </block>
            <block name="land" no="13">
              <go wp="TD" no="0"/>
            </block>
            <block name="flare" no="14">
              <exception deroute="Holding point" cond="NavDetectGround()"/>
              <exception deroute="landed" cond="!nav_is_in_flight()"/>
              <call_once fun="NavStartDetectGround()" no="0"/>
              <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
            </block>
            <block name="landed" no="15">
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
            </block>
            <block name="ComeBackAndLand" no="16">
              <go wp="HOME" no="0"/>
              <deroute block="land here" no="1"/>
            </block>
            <block name="DatalinkLoss" no="17">
              <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
              <stay wp="TD" until="stage_time>60" no="1"/>
              <deroute block="ComeBackAndLand" no="2"/>
            </block>
            <block name="HOME" no="18">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="18" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="17" block_name="DatalinkLoss" stage="2">
            <deroute block="ComeBackAndLand" no="2"/>
          </stage>
          <stage block="17" block_name="DatalinkLoss" stage="1">
            <stay wp="TD" until="stage_time>60" no="1"/>
          </stage>
          <stage block="17" block_name="DatalinkLoss" stage="0">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="16" block_name="ComeBackAndLand" stage="1">
            <deroute block="land here" no="1"/>
          </stage>
          <stage block="16" block_name="ComeBackAndLand" stage="0">
            <go wp="HOME" no="0"/>
          </stage>
          <stage block="15" block_name="landed" stage="0">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
          </stage>
          <stage block="14" block_name="flare" stage="1">
            <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
          </stage>
          <stage block="14" block_name="flare" stage="0">
            <call_once fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="13" block_name="land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="12" block_name="land here" stage="0">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="11" block_name="circle CAM" stage="0">
            <circle wp="CAM" radius="nav_radius" no="0"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="5">
            <deroute block="Standby" no="5"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="3">
            <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="2">
            <for var="i" to="16" from="1" no="2">
              <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
            </for>
          </stage>
          <stage block="10" block_name="test yaw" stage="0">
            <go wp="p1" no="0"/>
          </stage>
          <stage block="9" block_name="route" stage="4">
            <deroute block="stay_p1" no="4"/>
          </stage>
          <stage block="9" block_name="route" stage="3">
            <go wp="p1" hmode="route" from="p4" no="3"/>
          </stage>
          <stage block="9" block_name="route" stage="2">
            <go wp="p4" hmode="route" from="p3" no="2"/>
          </stage>
          <stage block="9" block_name="route" stage="1">
            <go wp="p3" hmode="route" from="p2" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="2">
            <go wp="p1" hmode="route" from="p2" no="2"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="1">
            <stay wp="p2" until="stage_time>10" no="1"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="1">
            <deroute block="stay_p1" no="1"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="0">
            <go wp="p2" no="0"/>
          </stage>
          <stage block="6" block_name="stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="5" block_name="Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="1">
            <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="0">
            <call_once fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="2">
            <call_once fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="0">
            <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="geo_mag">
              <dl_setting VAR="geo_mag.calc_once" VALUES="OFF|CALC" STEP="1" SHORTNAME="calcNow" MODULE="geo_mag/geo_mag" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="Ins Extended">
            <dl_settings NAME="INS">
              <dl_setting VAR="vff.accel_noise" STEP="0.1" SHORTNAME="accel_noise" MODULE="subsystems/ins/vf_extended_float" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_baro" STEP="0.1" SHORTNAME="r_baro" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_alt" STEP="0.1" SHORTNAME="r_alt" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_obs_height" STEP="0.1" SHORTNAME="r_obs_height" MIN="0" MAX="10"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
              <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
              <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
              <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
              <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="indi">
              <dl_setting VAR="indi.reference_acceleration.err_p" STEP="1" SHORTNAME="kp_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_P" MODULE="stabilization/stabilization_indi_simple" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_p" STEP="0.1" SHORTNAME="kd_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.p" STEP="0.001" SHORTNAME="ctl_eff_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_P" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.reference_acceleration.err_q" STEP="1" SHORTNAME="kp_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_Q" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_q" STEP="0.1" SHORTNAME="kd_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.q" STEP="0.001" SHORTNAME="ctl_eff_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_Q" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.reference_acceleration.err_r" STEP="1" SHORTNAME="kp_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_R" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_r" STEP="0.1" SHORTNAME="kd_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.r" STEP="0.001" SHORTNAME="ctl_eff_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_R" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.g2" STEP="0.01" SHORTNAME="g2" PERSISTENT="true" PARAM="STABILIZATION_INDI_G2_R" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.adaptive" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="use_adaptive" PERSISTENT="true" PARAM="STABILIZATION_INDI_USE_ADAPTIVE" MIN="0" MAX="1"/>
              <dl_setting VAR="indi.max_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_rate" PARAM="STABILIZATION_INDI_MAX_RATE" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
              <dl_setting VAR="indi.attitude_max_yaw_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_yaw_rate_attitude" PARAM="STABILIZATION_INDI_MAX_R" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="NAV">
              <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
              <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
              <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MIN="-50" MAX="50"/>
              <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MIN="0" MAX="10.0"/>
              <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MIN="-10.0" MAX="0.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Vert Loop">
              <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
              <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MIN="0.2" MAX="0.8"/>
              <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MIN="0" MAX="1"/>
              <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
            <dl_settings NAME="Horiz Loop">
              <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="true" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
              <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
              <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MIN="0" MAX="1"/>
              <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
              <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
              <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
              <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
              <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
              <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="ublox">
            <dl_settings NAME="ucenter">
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_h" STEP="1" SHORTNAME="sw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_l" STEP="1" SHORTNAME="sw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_h" STEP="1" SHORTNAME="hw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_l" STEP="1" SHORTNAME="hw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_init" STEP="100" SHORTNAME="inibaud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_run" STEP="100" SHORTNAME="baud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="robird">
        <description>Flapping wing frame equiped with
* Autopilot:   3dr Pixhawk 2.4
* Actuators:   PWM motor controllers
* GPS:         3DR gps neo v7
* RC:          Futaba SBUS2</description>
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="px4fmu_2.4"/>
          <define VALUE="80" NAME="BAT_CHECKER_DELAY"/>
          <define VALUE="ADC_1" NAME="ADC_CHANNEL_VSUPPLY"/>
          <define VALUE="80" NAME="CATASTROPHIC_BATTERY_KILL_DELAY"/>
          <module TYPE="xbee_api" NAME="telemetry"/>
          <module TYPE="px4fmu_v2.4" NAME="imu"/>
          <module TYPE="ublox" NAME="gps">
            <configure VALUE="B57600" NAME="GPS_BAUD"/>
          </module>
          <module TYPE="ubx_ucenter" NAME="gps"/>
          <module TYPE="indi_simple" NAME="stabilization"/>
          <module TYPE="int_cmpl_quat" NAME="ahrs">
            <define VALUE="IMU_PX4_ID" NAME="AHRS_ICQ_IMU_ID"/>
            <define VALUE="MAG_HMC58XX_SENDER_ID" NAME="AHRS_ICQ_MAG_ID"/>
            <configure VALUE="TRUE" NAME="USE_MAGNETOMETER"/>
            <define VALUE="FALSE" NAME="AHRS_USE_GPS_HEADING"/>
          </module>
          <module TYPE="extended" NAME="ins"/>
          <module NAME="current_sensor">
            <configure VALUE="ADC_3" NAME="ADC_CURRENT_SENSOR"/>
          </module>
          <module NAME="glide_wing_lock">
            <configure VALUE="ADC_4" NAME="ADC_MOTOR_SENSOR"/>
            <configure VALUE="100" NAME="WING_POS_DOWN_THRESH"/>
            <configure VALUE="2000" NAME="WING_POS_LOCK_MIN_THRESH"/>
            <configure VALUE="2100" NAME="WING_POS_LOCK_MAX_THRESH"/>
            <configure VALUE="RADIO_AUX2" NAME="WING_POS_LOCK_SWITCH"/>
          </module>
          <module TYPE="uart" NAME="intermcu">
            <configure VALUE="UART6" NAME="INTERMCU_PORT"/>
            <configure VALUE="B1500000" NAME="INTERMCU_BAUD"/>
          </module>
        </firmware>
        <firmware NAME="rotorcraft">
          <target NAME="fbw" BOARD="px4io_2.4"/>
          <define VALUE="false" NAME="FBW_MODE_AUTO_ONLY"/>
          <module TYPE="sbus" NAME="radio_control">
            <configure VALUE="UART3" NAME="SBUS_PORT"/>
            <define VALUE="RADIO_MODE" NAME="RADIO_FBW_MODE"/>
            <define VALUE="RADIO_KILL" NAME="RADIO_KILL_SWITCH"/>
            <define VALUE="1" NAME="USE_KILL_SWITCH_FOR_MOTOR_ARMING"/>
          </module>
          <module TYPE="pwm" NAME="actuators">
            <define VALUE="400" NAME="SERVO_HZ"/>
          </module>
          <define VALUE="FBW_MODE_FAILSAFE" NAME="RC_LOST_FBW_MODE"/>
          <define VALUE="FBW_MODE_AUTO" NAME="RC_LOST_IN_AUTO_FBW_MODE"/>
          <define VALUE="FBW_MODE_FAILSAFE" NAME="AP_LOST_FBW_MODE"/>
          <define VALUE="100" NAME="INTERMCU_LOST_CNT"/>
          <module TYPE="uart" NAME="intermcu">
            <configure VALUE="UART2" NAME="INTERMCU_PORT"/>
            <configure VALUE="B1500000" NAME="INTERMCU_BAUD"/>
          </module>
        </firmware>
        <modules MAIN_FREQ="512">
          <module NAME="px4_flash"/>
          <module NAME="geo_mag"/>
          <module NAME="air_data"/>
          <module NAME="send_imu_mag_current"/>
          <module TYPE="hmc58xx" NAME="mag">
            <configure VALUE="i2c1" NAME="MAG_HMC58XX_I2C_DEV"/>
            <define VALUE="TRUE" NAME="MODULE_HMC58XX_UPDATE_AHRS"/>
            <define VALUE="1" NAME="HMC58XX_CHAN_X"/>
            <define VALUE="0" NAME="HMC58XX_CHAN_Y"/>
            <define VALUE="2" NAME="HMC58XX_CHAN_Z"/>
            <define VALUE="-" NAME="HMC58XX_CHAN_X_SIGN"/>
            <define VALUE="+" NAME="HMC58XX_CHAN_Y_SIGN"/>
            <define VALUE="+" NAME="HMC58XX_CHAN_Z_SIGN"/>
          </module>
        </modules>
        <section NAME="MISC">
          <define VALUE="((float)adc) * (3.3f / 4096.0f) * (90.0f / 5.0f)" NAME="MilliAmpereOfAdc(adc)"/>
          <define VALUE="(0.00384*adc)" NAME="VoltageOfAdc(adc)"/>
        </section>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="49" NAME="ACCEL_X_NEUTRAL"/>
          <define VALUE="6" NAME="ACCEL_Y_NEUTRAL"/>
          <define VALUE="104" NAME="ACCEL_Z_NEUTRAL"/>
          <define VALUE="7.53390969897" NAME="ACCEL_X_SENS" INTEGER="16"/>
          <define VALUE="7.35267287758" NAME="ACCEL_Y_SENS" INTEGER="16"/>
          <define VALUE="7.45488455799" NAME="ACCEL_Z_SENS" INTEGER="16"/>
          <define VALUE="105" NAME="MAG_X_NEUTRAL"/>
          <define VALUE="10" NAME="MAG_Y_NEUTRAL"/>
          <define VALUE="-23" NAME="MAG_Z_NEUTRAL"/>
          <define VALUE="4.01453293111" NAME="MAG_X_SENS" INTEGER="16"/>
          <define VALUE="3.96379405627" NAME="MAG_Y_SENS" INTEGER="16"/>
          <define VALUE="3.92499630895" NAME="MAG_Z_SENS" INTEGER="16"/>
        </section>
        <commands>
          <axis NAME="ROLL" FAILSAFE_VALUE="4000"/>
          <axis NAME="PITCH" FAILSAFE_VALUE="-8000"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="0"/>
        </commands>
        <rc_commands>
          <set VALUE="@THROTTLE" COMMAND="THRUST"/>
          <set VALUE="@ROLL" COMMAND="ROLL"/>
          <set VALUE="@PITCH" COMMAND="PITCH"/>
        </rc_commands>
        <servos DRIVER="Default">
          <servo NO="2" NEUTRAL="1180" NAME="THROTTLE" MIN="1100" MAX="1900"/>
          <servo NO="3" NEUTRAL="1500" NAME="AILEVONRIGHT" MIN="1900" MAX="1100"/>
          <servo NO="1" NEUTRAL="1500" NAME="AILEVONLEFT" MIN="1100" MAX="1900"/>
        </servos>
        <command_laws>
          <set VALUE="@THRUST" SERVO="THROTTLE"/>
          <set VALUE="@PITCH - @ROLL" SERVO="AILEVONLEFT"/>
          <set VALUE="@PITCH + @ROLL" SERVO="AILEVONRIGHT"/>
        </command_laws>
        <section PREFIX="AIR_DATA_" NAME="AIR_DATA">
          <define VALUE="FALSE" NAME="CALC_AIRSPEED"/>
          <define VALUE="FALSE" NAME="CALC_TAS_FACTOR"/>
          <define VALUE="TRUE" NAME="CALC_AMSL_BARO"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.3892503" NAME="H_X"/>
          <define VALUE="0.0017972" NAME="H_Y"/>
          <define VALUE="0.9211303" NAME="H_Z"/>
          <define VALUE="0" NAME="GRAVITY_HEURISTIC_FACTOR"/>
        </section>
        <section PREFIX="INS_" NAME="INS">
          <define VALUE="2.2" NAME="SONAR_MAX_RANGE"/>
          <define VALUE="TRUE" NAME="SONAR_UPDATE_ON_AGL"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="RC_SETPOINT">
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="300" UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="0" NAME="DEADBAND_A"/>
          <define VALUE="0" NAME="DEADBAND_E"/>
          <define VALUE="50" NAME="DEADBAND_R"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="ATTITUDE_REFERENCE">
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.9" NAME="REF_ZETA_P"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.9" NAME="REF_ZETA_Q"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.9" NAME="REF_ZETA_R"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_RDOT"/>
        </section>
        <section PREFIX="STABILIZATION_INDI_" NAME="STABILIZATION_ATTITUDE_INDI">
          <define VALUE="0.017837" NAME="G1_P"/>
          <define VALUE="0.018315" NAME="G1_Q"/>
          <define VALUE="0.001049" NAME="G1_R"/>
          <define VALUE="0.076486" NAME="G2_R"/>
          <define VALUE="FALSE" NAME="FILTER_ROLL_RATE"/>
          <define VALUE="FALSE" NAME="FILTER_PITCH_RATE"/>
          <define VALUE="FALSE" NAME="FILTER_YAW_RATE"/>
          <define VALUE="100.0" NAME="REF_ERR_P"/>
          <define VALUE="100.0" NAME="REF_ERR_Q"/>
          <define VALUE="100.0" NAME="REF_ERR_R"/>
          <define VALUE="14.0" NAME="REF_RATE_P"/>
          <define VALUE="14.0" NAME="REF_RATE_Q"/>
          <define VALUE="14.0" NAME="REF_RATE_R"/>
          <define VALUE="3.2" NAME="FILT_CUTOFF"/>
          <define VALUE="3.2" NAME="FILT_CUTOFF_R"/>
          <define VALUE="0.04" NAME="ACT_DYN_P"/>
          <define VALUE="0.04" NAME="ACT_DYN_Q"/>
          <define VALUE="0.04" NAME="ACT_DYN_R"/>
          <define VALUE="FALSE" NAME="USE_ADAPTIVE"/>
          <define VALUE="0.0001" NAME="ADAPTIVE_MU"/>
          <define VALUE="343.77" UNIT="deg/s" NAME="STABILIZATION_INDI_MAX_RATE"/>
          <define VALUE="120" UNIT="deg/s" NAME="STABILIZATION_INDI_MAX_R"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="350" NAME="HOVER_KP"/>
          <define VALUE="85" NAME="HOVER_KD"/>
          <define VALUE="20" NAME="HOVER_KI"/>
          <define VALUE="0.6" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="TRUE" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="20" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="2" UNIT="m/s" NAME="REF_MAX_SPEED"/>
          <define VALUE="50" NAME="PGAIN"/>
          <define VALUE="100" NAME="DGAIN"/>
          <define VALUE="30" NAME="IGAIN"/>
        </section>
        <section PREFIX="NAV_" NAME="NAVIGATION">
          <define VALUE="4.5" NAME="CLIMB_VSPEED"/>
          <define VALUE="-1.0" NAME="DESCEND_VSPEED"/>
        </section>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_STARTUP"/>
          <define VALUE="AP_MODE_RC_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_NAV" NAME="MODE_AUTO2"/>
          <define VALUE="TRUE" NAME="NO_RC_THRUST_LIMIT"/>
        </section>
        <section NAME="BAT">
          <define VALUE="8700" NAME="MILLIAMP_AT_FULL_THROTTLE"/>
          <define VALUE="9.2" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="9.9" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="10.2" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="12.4" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="3.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="3.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="2.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="2.3" NAME="WP_MOVED"/>
            <message PERIOD="2." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".75" NAME="GPS_INT"/>
            <message PERIOD=".75" NAME="INS"/>
            <message PERIOD="6.1" NAME="I2C_ERRORS"/>
            <message PERIOD="4.1" NAME="UART_ERRORS"/>
            <message PERIOD="4" NAME="SUPERBITRF"/>
            <message PERIOD="4" NAME="BLUEGIGA"/>
            <message PERIOD="3.5" NAME="ENERGY"/>
            <message PERIOD="6.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="4.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="2.3" NAME="AIR_DATA"/>
            <message PERIOD="4.5" NAME="SURVEY"/>
            <message PERIOD="0.5" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
            <message PERIOD="2" NAME="FBW_STATUS"/>
            <message PERIOD="0.1" NAME="ADC_GENERIC"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="BEBOP_ACTUATORS"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_INT"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="19"/>
            <dl_setting VAR="autopilot.kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot.power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot.mode" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="19" HANDLER="SetModeHandler"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <module NAME="px4_flash">
        <doc>
          <description>      Flash Pixhawk via PX4 bootloader.
      Flashes the PX4IO (STM32F1) through the PX4 bootloader, or resets the PX4FMU (STM32F4) to be flashed directly by the F4&apos;s PX4 bootloader.</description>
          <configure VALUE="uart6" NAME="PX4IO_UART" DESCRIPTION="Uart on PX4FMU connected to PX4IO"/>
          <configure VALUE="B1500000" NAME="PX4IO_BAUD" DESCRIPTION="Baud rate for PX4IO flashing"/>
          <configure VALUE="usb_serial" NAME="FLASH_PORT" DESCRIPTION="Port used to connect to the PX4FMU for flashing."/>
          <configure VALUE="B115200" NAME="FLASH_BAUD" DESCRIPTION="Baud rate for FLASH_PORT if a UART"/>
        </doc>
        <header>
          <file NAME="px4_flash.h"/>
        </header>
        <init FUN="px4flash_init()"/>
        <event FUN="px4flash_event()"/>
        <makefile TARGET="ap">
          <file NAME="px4_flash.c"/>
          <file NAME="usb_ser_hw.c" DIR="arch/stm32"/>
          <configure NAME="PX4IO_UART" DEFAULT="uart6" CASE="upper|lower"/>
          <configure NAME="PX4IO_BAUD" DEFAULT="B1500000"/>
          <define NAME="USE_$(PX4IO_UART_UPPER)" COND="ifdef INTERMCU_PORT"/>
          <define VALUE="$(PX4IO_UART_LOWER)" NAME="PX4IO_UART" COND="ifdef INTERMCU_PORT"/>
          <define VALUE="$(PX4IO_BAUD)" NAME="$(PX4IO_UART_UPPER)_BAUD" COND="ifdef INTERMCU_PORT"/>
          <configure NAME="FLASH_PORT" DEFAULT="usb_serial" CASE="upper|lower"/>
          <configure NAME="FLASH_BAUD" DEFAULT="B115200"/>
          <define NAME="USE_$(FLASH_PORT_UPPER)"/>
          <define VALUE="$(FLASH_PORT_LOWER)" NAME="FLASH_UART"/>
          <define VALUE="$(FLASH_BAUD)" NAME="$(FLASH_PORT_UPPER)_BAUD"/>
        </makefile>
      </module>
      <module NAME="glide_wing_lock">
        <doc>
          <description>Locks the wing of an ornicopter so it can glide.</description>
          <configure VALUE="ADC_*" NAME="ADC_MOTOR_SENSOR" DESCRIPTION="ADC to use"/>
          <configure VALUE="0-5000" NAME="WING_POS_DOWN_THRESH" DESCRIPTION="Threshold below of wich wing is considered down"/>
          <configure VALUE="0-5000" NAME="WING_POS_LOCK_MIN_THRESH" DESCRIPTION="Prefered lock position of the wing"/>
          <configure VALUE="0-5000" NAME="WING_POS_LOCK_MAX_THRESH" DESCRIPTION="Prefered lock position of the wing"/>
          <configure VALUE="0-5000" NAME="WING_POS_LOCK_SWITCH" DESCRIPTION="RC switch to activate lock of the wing"/>
          <configure VALUE="0-9600" NAME="WING_POS_NOMINAL_THRUST" DESCRIPTION="Nominal thrust to use just before locking"/>
        </doc>
        <header>
          <file NAME="glide_wing_lock.h"/>
        </header>
        <init FUN="glide_wing_lock_init()"/>
        <periodic FUN="glide_wing_lock_periodic()" FREQ="10"/>
        <event FUN="glide_wing_lock_event()"/>
        <makefile TARGET="ap">
          <file NAME="glide_wing_lock.c"/>
          <define VALUE="$(ADC_MOTOR_SENSOR)" NAME="ADC_CHANNEL_MOTORSENSOR"/>
          <define NAME="USE_$(ADC_MOTOR_SENSOR)"/>
        </makefile>
      </module>
    </aircraft>
    <aircraft name="SkyWalker" ac_id="2" airframe="airframes/tudelft/yapa_xsens.xml" radio="radios/R6107SP_7ch.xml" telemetry="telemetry/default_fixedwing_imu_9k6.xml" flight_plan="flight_plans/versatile.xml" settings="settings/fixedwing_basic.xml settings/estimation/ins_neutrals.xml settings/control/tune_agr_climb.xml" gui_color="#b748fe64fe64" release="46b814ea46496cfc3f6a874bb5013db1a350bfcf" settings_modules="modules/digital_cam.xml modules/light.xml modules/gps.xml modules/nav_basic_fw.xml modules/guidance_basic_fw.xml modules/stabilization_attitude_fw.xml">
      <radio SYNC_MIN="4000" SYNC_MAX="15000" PULSE_TYPE="NEGATIVE" NAME="FASST TX Module" DATA_MIN="700" DATA_MAX="2300">
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="ROLL" CTL="A" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="PITCH" CTL="B" AVERAGE="0"/>
        <channel NEUTRAL="1100" MIN="1100" MAX="1900" FUNCTION="THROTTLE" CTL="C" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="YAW" CTL="D" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="MODE" CTL="E" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="EXTRA1" CTL="F" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="FLAPS" CTL="G" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="25" qfu="270" name="Versatile" max_dist_from_home="1500" lon0="1.2729" lat0="43.4622" home_mode_height="50" ground_alt="185" alt="260">
          <header>#include &quot;subsystems/datalink/datalink.h&quot;</header>
          <waypoints>
            <waypoint y="0" x="0" name="HOME"/>
            <waypoint y="80" x="20" name="STDBY"/>
            <waypoint y="102.2" x="44.8" name="1"/>
            <waypoint y="122.9" x="-63.5" name="2"/>
            <waypoint y="-21.2" x="-11.5" name="MOB"/>
            <waypoint y="80.4" x="-151.6" name="S1"/>
            <waypoint y="214.9" x="180.1" name="S2"/>
            <waypoint y="-10" x="200" name="AF" alt="215.0"/>
            <waypoint y="20.0" x="80.0" name="TD" alt="185.0"/>
            <waypoint y="-23.0" x="26.9" name="BASELEG"/>
            <waypoint y="0" x="-100" name="_1"/>
            <waypoint y="200" x="-100" name="_2"/>
            <waypoint y="200" x="100" name="_3"/>
            <waypoint y="0" x="100" name="_4"/>
            <waypoint y="35.4" x="-122.5" name="CLIMB"/>
          </waypoints>
          <sectors>
            <sector name="Square">
              <corner name="_1"/>
              <corner name="_2"/>
              <corner name="_3"/>
              <corner name="_4"/>
            </sector>
          </sectors>
          <variables>
            <variable var="roll_step" step="1.0" min="0." max="50." init="15."/>
          </variables>
          <exceptions/>
          <blocks>
            <block name="Wait GPS" no="0">
              <set var="autopilot.kill_throttle" value="1" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Geo init" no="1">
              <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
              <call_once fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Holding point" no="2">
              <set var="autopilot.kill_throttle" value="1" no="0"/>
              <attitude vmode="throttle" throttle="0" roll="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff (wp CLIMB)" name="Takeoff" no="3">
              <exception deroute="Standby" cond="GetPosAlt() > GetAltRef()+25"/>
              <set var="autopilot.kill_throttle" value="0" no="0"/>
              <go wp="CLIMB" no="1"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="4">
              <circle wp="STDBY" radius="nav_radius" no="0"/>
            </block>
            <block strip_icon="line.png" strip_button="Line (wp 1-2)" name="Line 1-2" group="extra_pattern" no="5">
              <call_once fun="nav_line_setup()" no="0"/>
              <call fun="nav_line_run(WP_1, WP_2, nav_radius)" no="1"/>
            </block>
            <block strip_icon="eight.png" strip_button="Figure 8 (wp 1-2)" name="Figure 8 around wp 1" no="6">
              <eight turn_around="2" radius="nav_radius" center="1" no="1"/>
            </block>
            <block strip_icon="oval.png" strip_button="Oval (wp 1-2)" name="Oval 1-2" no="7">
              <oval radius="nav_radius" p2="2" p1="1" no="1"/>
            </block>
            <block strip_icon="mob.png" strip_button="Circle around here" name="MOB" no="8">
              <call_once fun="NavSetWaypointHere(WP_MOB)" no="0"/>
              <circle wp="MOB" radius="100" no="1"/>
            </block>
            <block name="Auto pitch (circle wp 1)" no="9">
              <circle wp="1" throttle="0.7" radius="75" pitch="auto" no="0"/>
            </block>
            <block name="Climb 75% throttle" no="10">
              <circle wp="1" vmode="throttle" until="(10 > PowerVoltage()) || (GetPosAlt() > GetAltRef()+ 1350)" throttle="0.75" radius="50+(GetPosAlt()-GetAltRef())/2" pitch="10" no="0"/>
            </block>
            <block name="Climb 0m/s" no="11">
              <circle wp="1" vmode="climb" until="10 > PowerVoltage()" radius="nav_radius" climb="0" no="0"/>
            </block>
            <block name="Climb 1m/s" no="12">
              <circle wp="1" vmode="climb" until="10 > PowerVoltage()" radius="50+(GetPosAlt()-GetAltRef())/2" pitch="5" climb="1" no="0"/>
            </block>
            <block name="Climb nav_climb m/s" no="13">
              <circle wp="1" vmode="climb" until="(10 > PowerVoltage()) || (GetPosAlt() > GetAltRef()+ 1350)" radius="nav_radius" climb="nav_climb" no="0"/>
            </block>
            <block name="Circle 0% throttle" no="14">
              <circle wp="1" vmode="throttle" until="GetAltRef()+50 > GetPosAlt()" throttle="0.0" radius="nav_radius" pitch="fp_pitch" no="0"/>
              <deroute block="Standby" no="1"/>
            </block>
            <block name="Oval 0% throttle" no="15">
              <oval vmode="throttle" until="GetAltRef()+50 > GetPosAlt()" throttle="0.0" radius="nav_radius" pitch="fp_pitch" p2="2" p1="1" no="1"/>
              <deroute block="Standby" no="2"/>
            </block>
            <block name="Route 1-2" no="16">
              <go wp="2" hmode="route" from="1" approaching_time="0" no="0"/>
            </block>
            <block name="Stack wp 2" no="17">
              <circle wp="2" radius="75" no="0"/>
            </block>
            <block name="Route 2-1" no="18">
              <go wp="1" hmode="route" from="2" approaching_time="0" no="0"/>
            </block>
            <block name="Stack wp 1" no="19">
              <circle wp="1" radius="75" no="0"/>
            </block>
            <block name="Glide 1-2" no="20">
              <go wp="2" vmode="glide" hmode="route" from="1" no="0"/>
              <deroute block="Standby" no="1"/>
            </block>
            <block strip_icon="survey.png" strip_button="Survey (wp S1-S2)" name="Survey S1-S2" no="21">
              <survey_rectangle wp2="S2" wp1="S1" grid="150" no="1"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land right (wp AF-TD)" name="Land Right AF-TD" no="22">
              <set var="nav_radius" value="DEFAULT_CIRCLE_RADIUS" no="0"/>
              <deroute block="land" no="1"/>
            </block>
            <block strip_icon="land-left.png" strip_button="Land left (wp AF-TD)" name="Land Left AF-TD" no="23">
              <set var="nav_radius" value="-DEFAULT_CIRCLE_RADIUS" no="0"/>
              <deroute block="land" no="1"/>
            </block>
            <block name="land" no="24">
              <call_once fun="nav_compute_baseleg(WP_AF, WP_TD, WP_BASELEG, nav_radius)" no="0"/>
              <circle wp="BASELEG" until="NavCircleCount() > 0.5" radius="nav_radius" no="1"/>
              <set var="v_ctl_auto_throttle_cruise_throttle" value="V_CTL_AUTO_THROTTLE_MIN_CRUISE_THROTTLE" no="2"/>
              <circle wp="BASELEG" until="NavQdrCloseTo(DegOfRad(baseleg_out_qdr)-(nav_radius/fabs(nav_radius))*10) && 10 > fabs(GetPosAlt() - WaypointAlt(WP_BASELEG))" radius="nav_radius" no="3"/>
            </block>
            <block name="final" no="25">
              <exception deroute="flare" cond="GetAltRef() + 10 > GetPosAlt()"/>
              <go wp="TD" vmode="glide" hmode="route" from="AF" no="0"/>
            </block>
            <block name="flare" no="26">
              <go wp="TD" vmode="throttle" throttle="0.0" hmode="route" from="AF" approaching_time="0" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0.0" roll="0.0" no="1"/>
            </block>
            <block name="Steps roll -10, +10" no="27">
              <while cond="TRUE" no="0">
                <attitude vmode="alt" until=" stage_time > 6" roll="10.0" alt="250" no="1"/>
                <attitude vmode="alt" until="stage_time > 6" roll="-10.0" alt="250" no="2"/>
              </while>
            </block>
            <block name="Steps roll -20, +20" no="28">
              <while cond="TRUE" no="0">
                <attitude vmode="alt" until=" stage_time > 3" roll="20.0" alt="250" no="1"/>
                <attitude vmode="alt" until="stage_time > 3" roll="-20.0" alt="250" no="2"/>
              </while>
            </block>
            <block name="Steps roll from var" no="29">
              <while cond="TRUE" no="0">
                <attitude vmode="alt" until=" stage_time > 3" roll="roll_step" alt="250" no="1"/>
                <attitude vmode="alt" until="stage_time > 3" roll="-roll_step" alt="250" no="2"/>
              </while>
            </block>
            <block name="Steps pitch -10, +10" no="30">
              <while cond="TRUE" no="0">
                <attitude vmode="alt" until=" stage_time > 2" roll="0.0" pitch="10" alt="250" no="1"/>
                <attitude vmode="alt" until=" stage_time > 2" roll="0.0" pitch="-10" alt="250" no="2"/>
              </while>
            </block>
            <block name="Heading 30" no="31">
              <heading until="FALSE" course="30" alt="GetAltRef()+50" no="0"/>
            </block>
            <block name="For loop (circles wp 1)" no="32">
              <for var="i" to="3" from="0" no="1">
                <circle wp="1" until="NavCircleCount() > 1" radius="DEFAULT_CIRCLE_RADIUS+ $i*10" no="2"/>
              </for>
              <deroute block="Standby" no="4"/>
            </block>
            <block name="Test datalink (go to wp 2)" no="33">
              <exception deroute="Standby" cond="datalink_time > 22"/>
              <go wp="2" hmode="route" from="STDBY" no="0"/>
              <go wp="STDBY" hmode="route" from="2" no="1"/>
            </block>
            <block name="Fly in Square" no="34">
              <exception deroute="Come back wp 1" cond="! InsideSquare(GetPosX(), GetPosY())"/>
              <attitude vmode="alt" roll="0" alt="GetAltRef()+75" no="0"/>
            </block>
            <block name="Come back wp 1" no="35">
              <exception deroute="Fly in Square" cond="InsideSquare(GetPosX(), GetPosY())"/>
              <go wp="1" no="0"/>
              <deroute block="Fly in Square" no="1"/>
            </block>
            <block name="HOME" no="36">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="36" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="35" block_name="Come back wp 1" stage="1">
            <deroute block="Fly in Square" no="1"/>
          </stage>
          <stage block="35" block_name="Come back wp 1" stage="0">
            <go wp="1" no="0"/>
          </stage>
          <stage block="34" block_name="Fly in Square" stage="0">
            <attitude vmode="alt" roll="0" alt="GetAltRef()+75" no="0"/>
          </stage>
          <stage block="33" block_name="Test datalink (go to wp 2)" stage="1">
            <go wp="STDBY" hmode="route" from="2" no="1"/>
          </stage>
          <stage block="33" block_name="Test datalink (go to wp 2)" stage="0">
            <go wp="2" hmode="route" from="STDBY" no="0"/>
          </stage>
          <stage block="32" block_name="For loop (circles wp 1)" stage="4">
            <deroute block="Standby" no="4"/>
          </stage>
          <stage block="32" block_name="For loop (circles wp 1)" stage="2">
            <circle wp="1" until="NavCircleCount() > 1" radius="DEFAULT_CIRCLE_RADIUS+ $i*10" no="2"/>
          </stage>
          <stage block="32" block_name="For loop (circles wp 1)" stage="1">
            <for var="i" to="3" from="0" no="1">
              <circle wp="1" until="NavCircleCount() > 1" radius="DEFAULT_CIRCLE_RADIUS+ $i*10" no="2"/>
            </for>
          </stage>
          <stage block="31" block_name="Heading 30" stage="0">
            <heading until="FALSE" course="30" alt="GetAltRef()+50" no="0"/>
          </stage>
          <stage block="30" block_name="Steps pitch -10, +10" stage="2">
            <attitude vmode="alt" until=" stage_time > 2" roll="0.0" pitch="-10" alt="250" no="2"/>
          </stage>
          <stage block="30" block_name="Steps pitch -10, +10" stage="1">
            <attitude vmode="alt" until=" stage_time > 2" roll="0.0" pitch="10" alt="250" no="1"/>
          </stage>
          <stage block="30" block_name="Steps pitch -10, +10" stage="0">
            <while cond="TRUE" no="0">
              <attitude vmode="alt" until=" stage_time > 2" roll="0.0" pitch="10" alt="250" no="1"/>
              <attitude vmode="alt" until=" stage_time > 2" roll="0.0" pitch="-10" alt="250" no="2"/>
            </while>
          </stage>
          <stage block="29" block_name="Steps roll from var" stage="2">
            <attitude vmode="alt" until="stage_time > 3" roll="-roll_step" alt="250" no="2"/>
          </stage>
          <stage block="29" block_name="Steps roll from var" stage="1">
            <attitude vmode="alt" until=" stage_time > 3" roll="roll_step" alt="250" no="1"/>
          </stage>
          <stage block="29" block_name="Steps roll from var" stage="0">
            <while cond="TRUE" no="0">
              <attitude vmode="alt" until=" stage_time > 3" roll="roll_step" alt="250" no="1"/>
              <attitude vmode="alt" until="stage_time > 3" roll="-roll_step" alt="250" no="2"/>
            </while>
          </stage>
          <stage block="28" block_name="Steps roll -20, +20" stage="2">
            <attitude vmode="alt" until="stage_time > 3" roll="-20.0" alt="250" no="2"/>
          </stage>
          <stage block="28" block_name="Steps roll -20, +20" stage="1">
            <attitude vmode="alt" until=" stage_time > 3" roll="20.0" alt="250" no="1"/>
          </stage>
          <stage block="28" block_name="Steps roll -20, +20" stage="0">
            <while cond="TRUE" no="0">
              <attitude vmode="alt" until=" stage_time > 3" roll="20.0" alt="250" no="1"/>
              <attitude vmode="alt" until="stage_time > 3" roll="-20.0" alt="250" no="2"/>
            </while>
          </stage>
          <stage block="27" block_name="Steps roll -10, +10" stage="2">
            <attitude vmode="alt" until="stage_time > 6" roll="-10.0" alt="250" no="2"/>
          </stage>
          <stage block="27" block_name="Steps roll -10, +10" stage="1">
            <attitude vmode="alt" until=" stage_time > 6" roll="10.0" alt="250" no="1"/>
          </stage>
          <stage block="27" block_name="Steps roll -10, +10" stage="0">
            <while cond="TRUE" no="0">
              <attitude vmode="alt" until=" stage_time > 6" roll="10.0" alt="250" no="1"/>
              <attitude vmode="alt" until="stage_time > 6" roll="-10.0" alt="250" no="2"/>
            </while>
          </stage>
          <stage block="26" block_name="flare" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0.0" roll="0.0" no="1"/>
          </stage>
          <stage block="26" block_name="flare" stage="0">
            <go wp="TD" vmode="throttle" throttle="0.0" hmode="route" from="AF" approaching_time="0" no="0"/>
          </stage>
          <stage block="25" block_name="final" stage="0">
            <go wp="TD" vmode="glide" hmode="route" from="AF" no="0"/>
          </stage>
          <stage block="24" block_name="land" stage="3">
            <circle wp="BASELEG" until="NavQdrCloseTo(DegOfRad(baseleg_out_qdr)-(nav_radius/fabs(nav_radius))*10) && 10 > fabs(GetPosAlt() - WaypointAlt(WP_BASELEG))" radius="nav_radius" no="3"/>
          </stage>
          <stage block="24" block_name="land" stage="2">
            <set var="v_ctl_auto_throttle_cruise_throttle" value="V_CTL_AUTO_THROTTLE_MIN_CRUISE_THROTTLE" no="2"/>
          </stage>
          <stage block="24" block_name="land" stage="1">
            <circle wp="BASELEG" until="NavCircleCount() > 0.5" radius="nav_radius" no="1"/>
          </stage>
          <stage block="24" block_name="land" stage="0">
            <call_once fun="nav_compute_baseleg(WP_AF, WP_TD, WP_BASELEG, nav_radius)" no="0"/>
          </stage>
          <stage block="23" block_name="Land Left AF-TD" stage="1">
            <deroute block="land" no="1"/>
          </stage>
          <stage block="23" block_name="Land Left AF-TD" stage="0">
            <set var="nav_radius" value="-DEFAULT_CIRCLE_RADIUS" no="0"/>
          </stage>
          <stage block="22" block_name="Land Right AF-TD" stage="1">
            <deroute block="land" no="1"/>
          </stage>
          <stage block="22" block_name="Land Right AF-TD" stage="0">
            <set var="nav_radius" value="DEFAULT_CIRCLE_RADIUS" no="0"/>
          </stage>
          <stage block="21" block_name="Survey S1-S2" stage="1">
            <survey_rectangle wp2="S2" wp1="S1" grid="150" no="1"/>
          </stage>
          <stage block="20" block_name="Glide 1-2" stage="1">
            <deroute block="Standby" no="1"/>
          </stage>
          <stage block="20" block_name="Glide 1-2" stage="0">
            <go wp="2" vmode="glide" hmode="route" from="1" no="0"/>
          </stage>
          <stage block="19" block_name="Stack wp 1" stage="0">
            <circle wp="1" radius="75" no="0"/>
          </stage>
          <stage block="18" block_name="Route 2-1" stage="0">
            <go wp="1" hmode="route" from="2" approaching_time="0" no="0"/>
          </stage>
          <stage block="17" block_name="Stack wp 2" stage="0">
            <circle wp="2" radius="75" no="0"/>
          </stage>
          <stage block="16" block_name="Route 1-2" stage="0">
            <go wp="2" hmode="route" from="1" approaching_time="0" no="0"/>
          </stage>
          <stage block="15" block_name="Oval 0% throttle" stage="2">
            <deroute block="Standby" no="2"/>
          </stage>
          <stage block="15" block_name="Oval 0% throttle" stage="1">
            <oval vmode="throttle" until="GetAltRef()+50 > GetPosAlt()" throttle="0.0" radius="nav_radius" pitch="fp_pitch" p2="2" p1="1" no="1"/>
          </stage>
          <stage block="14" block_name="Circle 0% throttle" stage="1">
            <deroute block="Standby" no="1"/>
          </stage>
          <stage block="14" block_name="Circle 0% throttle" stage="0">
            <circle wp="1" vmode="throttle" until="GetAltRef()+50 > GetPosAlt()" throttle="0.0" radius="nav_radius" pitch="fp_pitch" no="0"/>
          </stage>
          <stage block="13" block_name="Climb nav_climb m/s" stage="0">
            <circle wp="1" vmode="climb" until="(10 > PowerVoltage()) || (GetPosAlt() > GetAltRef()+ 1350)" radius="nav_radius" climb="nav_climb" no="0"/>
          </stage>
          <stage block="12" block_name="Climb 1m/s" stage="0">
            <circle wp="1" vmode="climb" until="10 > PowerVoltage()" radius="50+(GetPosAlt()-GetAltRef())/2" pitch="5" climb="1" no="0"/>
          </stage>
          <stage block="11" block_name="Climb 0m/s" stage="0">
            <circle wp="1" vmode="climb" until="10 > PowerVoltage()" radius="nav_radius" climb="0" no="0"/>
          </stage>
          <stage block="10" block_name="Climb 75% throttle" stage="0">
            <circle wp="1" vmode="throttle" until="(10 > PowerVoltage()) || (GetPosAlt() > GetAltRef()+ 1350)" throttle="0.75" radius="50+(GetPosAlt()-GetAltRef())/2" pitch="10" no="0"/>
          </stage>
          <stage block="9" block_name="Auto pitch (circle wp 1)" stage="0">
            <circle wp="1" throttle="0.7" radius="75" pitch="auto" no="0"/>
          </stage>
          <stage block="8" block_name="MOB" stage="1">
            <circle wp="MOB" radius="100" no="1"/>
          </stage>
          <stage block="8" block_name="MOB" stage="0">
            <call_once fun="NavSetWaypointHere(WP_MOB)" no="0"/>
          </stage>
          <stage block="7" block_name="Oval 1-2" stage="1">
            <oval radius="nav_radius" p2="2" p1="1" no="1"/>
          </stage>
          <stage block="6" block_name="Figure 8 around wp 1" stage="1">
            <eight turn_around="2" radius="nav_radius" center="1" no="1"/>
          </stage>
          <stage block="5" block_name="Line 1-2" stage="1">
            <call fun="nav_line_run(WP_1, WP_2, nav_radius)" no="1"/>
          </stage>
          <stage block="5" block_name="Line 1-2" stage="0">
            <call_once fun="nav_line_setup()" no="0"/>
          </stage>
          <stage block="4" block_name="Standby" stage="0">
            <circle wp="STDBY" radius="nav_radius" no="0"/>
          </stage>
          <stage block="3" block_name="Takeoff" stage="1">
            <go wp="CLIMB" no="1"/>
          </stage>
          <stage block="3" block_name="Takeoff" stage="0">
            <set var="autopilot.kill_throttle" value="0" no="0"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="1">
            <attitude vmode="throttle" throttle="0" roll="0" no="1"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="0">
            <set var="autopilot.kill_throttle" value="1" no="0"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="2">
            <call_once fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="0">
            <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <set var="autopilot.kill_throttle" value="1" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings NAME="control">
            <dl_settings NAME="dc">
              <dl_setting VAR="0" STEP="1" SHORTNAME="Shutter" MODULE="digital_cam/dc" MIN="0" MAX="255" HANDLER="send_command">
                <strip_button VALUE="32" NAME="Photo" ICON="digital-camera.png" GROUP="maindc"/>
                <strip_button VALUE="111" NAME="Power" ICON="off.png" GROUP="maindc"/>
                <strip_button VALUE="116" NAME="ZoomIn" ICON="zoom.png" GROUP="dczoom"/>
                <strip_button VALUE="119" NAME="ZoomOut" ICON="zoom.png" GROUP="dczoom"/>
              </dl_setting>
              <dl_setting VAR="dc_autoshoot" VALUES="STOP|PERIODIC|DISTANCE|EXT_TRIG" STEP="1" MIN="0" MAX="3">
                <strip_button VALUE="1" NAME="Start Autoshoot" ICON="dcstart.png" GROUP="dcauto"/>
                <strip_button VALUE="0" NAME="Stop Autoshoot" ICON="dcstart.png" GROUP="dcauto"/>
              </dl_setting>
              <dl_setting VAR="dc_autoshoot_period" UNIT="sec" STEP="0.5" SHORTNAME="Periodic" PARAM="DC_AUTOSHOOT_PERIOD" MIN="0.1" MAX="60"/>
              <dl_setting VAR="dc_distance_interval" UNIT="meter" STEP="1" SHORTNAME="dist" PARAM="DC_AUTOSHOOT_DISTANCE_INTERVAL" MIN="0" MAX="255"/>
              <dl_setting VAR="dc_survey_interval" STEP="5" SHORTNAME="Survey-Interval" MODULE="digital_cam/dc" MIN="0" MAX="250" HANDLER="Survey"/>
              <dl_setting VAR="dc_circle_interval" STEP="5" SHORTNAME="Circle-Interval" MODULE="digital_cam/dc" MIN="5" MAX="90" HANDLER="Circle"/>
              <dl_setting VAR="dc_cam_tracing" STEP="1" SHORTNAME="Cam-Tracing" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="lights control">
            <dl_settings NAME="lights">
              <dl_setting VAR="strobe_light_mode" VALUES="OFF|ON|BLINK_1|BLINK_2|BLINK_3|COMPLEX_1|COMPLEX_2" STEP="1" MODULE="light/light" MIN="0" MAX="6">
                <strip_button VALUE="1" NAME="LightOn" ICON="on.png" GROUP="light"/>
                <strip_button VALUE="0" NAME="LightOff" ICON="off.png" GROUP="light"/>
              </dl_setting>
              <dl_setting VAR="nav_light_mode" VALUES="OFF|ON|BLINK_1|BLINK_2|BLINK_3" STEP="1" MIN="0" MAX="4"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="nav">
              <dl_setting VAR="nav_radius" STEP="5" MIN="-500" MAX="500"/>
              <dl_setting VAR="nav_course" STEP="5" MIN="0" MAX="359"/>
              <dl_setting VAR="nav_mode" STEP="1" MIN="1" MAX="2"/>
              <dl_setting VAR="nav_climb" STEP="0.5" MIN="-5" MAX="5"/>
              <dl_setting VAR="fp_pitch" STEP="1" MIN="-15" MAX="15"/>
              <dl_setting VAR="fp_throttle" STEP="0.01" MIN="0.0" MAX="1.0"/>
              <dl_setting VAR="fp_climb" STEP="0.1" MIN="-5.0" MAX="5.0"/>
              <dl_setting VAR="nav_shift" STEP="5" SHORTNAME="inc. shift" MODULE="firmwares/fixedwing/nav" MIN="-50" MAX="50" HANDLER="IncreaseShift"/>
              <dl_setting VAR="nav_ground_speed_setpoint" STEP="0.5" SHORTNAME="ground speed" MIN="5" MAX="50"/>
              <dl_setting VAR="nav_ground_speed_pgain" STEP="0.01" SHORTNAME="ground speed pgain" MIN="0" MAX="0.2"/>
              <dl_setting VAR="nav_survey_shift" STEP="5" MIN="50" MAX="500"/>
              <dl_setting VAR="nav_survey_sweep" TYPE="float" STEP="1" SHORTNAME="Distance" MODULE="subsystems/navigation/nav_survey_rectangle" MIN="10" MAX="500"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="control vert">
              <dl_settings NAME="auto_throttle">
                <dl_setting VAR="v_ctl_auto_throttle_cruise_throttle" STEP="0.05" SHORTNAME="cruise throttle" PARAM="V_CTL_AUTO_THROTTLE_NOMINAL_CRUISE_THROTTLE" MODULE="guidance/guidance_v" MIN="0.0" MAX="1" HANDLER="SetCruiseThrottle">
                  <strip_button VALUE="0.1" NAME="Loiter" GROUP="dash_loiter"/>
                  <strip_button VALUE="0" NAME="Cruise" GROUP="dash_loiter"/>
                  <strip_button VALUE="1" NAME="Dash" GROUP="dash_loiter"/>
                </dl_setting>
                <dl_setting VAR="v_ctl_pitch_trim" UNIT="rad" STEP="0.1" SHORTNAME="pitch trim" PARAM="V_CTL_PITCH_TRIM" MIN="-15" MAX="15" ALT_UNIT="deg"/>
                <dl_setting VAR="v_ctl_auto_throttle_pgain" STEP="0.005" SHORTNAME="throttle_pgain" PARAM="V_CTL_AUTO_THROTTLE_PGAIN" MIN="0.00" MAX="0.05"/>
                <dl_setting VAR="v_ctl_auto_throttle_igain" STEP="0.05" SHORTNAME="throttle_igain" PARAM="V_CTL_AUTO_THROTTLE_IGAIN" MIN="0.0" MAX="1"/>
                <dl_setting VAR="v_ctl_auto_throttle_dgain" STEP="0.1" SHORTNAME="throttle_dgain" MIN="0.0" MAX="2"/>
                <dl_setting VAR="v_ctl_auto_throttle_climb_throttle_increment" STEP="0.01" SHORTNAME="throttle_incr" PARAM="V_CTL_AUTO_THROTTLE_CLIMB_THROTTLE_INCREMENT" MIN="0" MAX="1"/>
                <dl_setting VAR="v_ctl_auto_throttle_pitch_of_vz_pgain" STEP="0.01" SHORTNAME="pitch_of_vz" PARAM="V_CTL_AUTO_THROTTLE_PITCH_OF_VZ_PGAIN" MIN="0" MAX="1"/>
                <dl_setting VAR="v_ctl_auto_throttle_pitch_of_vz_dgain" STEP="0.1" SHORTNAME="pitch_of_vz (d)" MIN="-10" MAX="10"/>
              </dl_settings>
              <dl_settings NAME="auto_pitch">
                <dl_setting VAR="v_ctl_auto_pitch_pgain" STEP="0.01" SHORTNAME="pgain" PARAM="V_CTL_AUTO_PITCH_PGAIN" MIN="0.01" MAX="0.1"/>
                <dl_setting VAR="v_ctl_auto_pitch_igain" STEP="0.01" SHORTNAME="igain" PARAM="V_CTL_AUTO_PITCH_IGAIN" MIN="0" MAX="1"/>
              </dl_settings>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="control horiz">
              <dl_settings NAME="trim">
                <dl_setting VAR="ap_state->command_roll_trim" STEP="1" SHORTNAME="roll_trim" PARAM="COMMAND_ROLL_TRIM" MODULE="inter_mcu" MIN="-960" MAX="960"/>
                <dl_setting VAR="ap_state->command_pitch_trim" STEP="1" SHORTNAME="pitch_trim" PARAM="COMMAND_PITCH_TRIM" MIN="-960" MAX="960"/>
                <dl_setting VAR="ap_state->command_yaw_trim" STEP="1" SHORTNAME="yaw_trim" PARAM="COMMAND_YAW_TRIM" MIN="-9000" MAX="9000"/>
              </dl_settings>
              <dl_settings NAME="attitude">
                <dl_setting VAR="h_ctl_roll_pgain" STEP="250" SHORTNAME="roll_pgain" MODULE="stabilization/stabilization_attitude" MIN="000" MAX="25000"/>
                <dl_setting VAR="h_ctl_roll_max_setpoint" UNIT="rad" STEP="1." SHORTNAME="max_roll" PARAM="H_CTL_ROLL_MAX_SETPOINT" MIN="0" MAX="60" ALT_UNIT="deg"/>
                <dl_setting VAR="h_ctl_pitch_pgain" STEP="250" SHORTNAME="pitch_pgain" PARAM="H_CTL_PITCH_PGAIN" MIN="0" MAX="25000"/>
                <dl_setting VAR="h_ctl_pitch_dgain" STEP="10" SHORTNAME="pitch_dgain" PARAM="H_CTL_PITCH_DGAIN" MIN="0" MAX="50000"/>
                <dl_setting VAR="h_ctl_elevator_of_roll" STEP="100" SHORTNAME="elevator_of_roll" PARAM="H_CTL_ELEVATOR_OF_ROLL" MIN="0" MAX="5000"/>
                <dl_setting VAR="h_ctl_aileron_of_throttle" STEP="100" SHORTNAME="aileron_of_throttle" MIN="0" MAX="5000"/>
                <dl_setting VAR="h_ctl_roll_attitude_gain" STEP="250" SHORTNAME="roll attitude pgain" PARAM="H_CTL_ROLL_ATTITUDE_GAIN" MIN="0" MAX="15000"/>
                <dl_setting VAR="h_ctl_roll_rate_gain" STEP="250" SHORTNAME="roll rate gain" PARAM="H_CTL_ROLL_RATE_GAIN" MIN="0" MAX="15000"/>
              </dl_settings>
              <dl_settings NAME="course">
                <dl_setting VAR="h_ctl_course_pgain" STEP="0.05" SHORTNAME="course pgain" PARAM="H_CTL_COURSE_PGAIN" MIN="0.1" MAX="3"/>
                <dl_setting VAR="h_ctl_course_dgain" STEP="0.1" SHORTNAME="course dgain" PARAM="H_CTL_COURSE_DGAIN" MIN="0" MAX="2"/>
                <dl_setting VAR="h_ctl_course_pre_bank_correction" STEP="0.05" SHORTNAME="pre bank cor" PARAM="H_CTL_COURSE_PRE_BANK_CORRECTION" MIN="0.1" MAX="2"/>
                <dl_setting VAR="h_ctl_roll_slew" STEP="0.01" SHORTNAME="roll slew" MIN="0.02" MAX="1"/>
              </dl_settings>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="Yapa v1">
        <description>YAPA + XSens + XBee</description>
        <firmware NAME="fixedwing">
          <target NAME="ap" BOARD="yapa_2.0"/>
          <target NAME="sim" BOARD="pc"/>
          <define NAME="STRONG_WIND"/>
          <define NAME="WIND_INFO"/>
          <define NAME="WIND_INFO_RET"/>
          <define NAME="LOITER_TRIM"/>
          <define NAME="TUNE_AGRESSIVE_CLIMB"/>
          <define NAME="AGR_CLIMB"/>
          <module TYPE="ppm" NAME="radio_control"/>
          <module TYPE="xbee_api" NAME="telemetry">
            <configure VALUE="B57600" NAME="MODEM_BAUD"/>
          </module>
          <module NAME="control"/>
          <module NAME="navigation"/>
          <module TYPE="xsens" NAME="ins">
            <configure VALUE="uart0" NAME="XSENS_PORT"/>
            <configure VALUE="B230400" NAME="XSENS_BAUD"/>
          </module>
          <module NAME="light">
            <define VALUE="2" NAME="LIGHT_LED_STROBE"/>
            <define VALUE="6" NAME="STROBE_LIGHT_MODE_DEFAULT"/>
            <define VALUE="4" NAME="NAV_LIGHT_MODE_DEFAULT"/>
          </module>
          <module NAME="digital_cam">
            <define VALUE="GPIOB,GPIO23" NAME="DC_SHUTTER_GPIO"/>
          </module>
          <module TYPE="line" NAME="nav"/>
        </firmware>
        <servos>
          <servo NO="0" NEUTRAL="1000" NAME="THROTTLE" MIN="1000" MAX="2000"/>
          <servo NO="2" NEUTRAL="1500" NAME="AILERON_LEFT" MIN="900" MAX="2100"/>
          <servo NO="6" NEUTRAL="1500" NAME="AILERON_RIGHT" MIN="900" MAX="2100"/>
          <servo NO="7" NEUTRAL="1500" NAME="ELEVATOR" MIN="1900" MAX="1100"/>
          <servo NO="3" NEUTRAL="1575" NAME="RUDDER" MIN="1175" MAX="1975"/>
        </servos>
        <commands>
          <axis NAME="THROTTLE" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="BRAKE" FAILSAFE_VALUE="9600"/>
        </commands>
        <rc_commands>
          <set VALUE="@THROTTLE" COMMAND="THROTTLE"/>
          <set VALUE="@ROLL" COMMAND="ROLL"/>
          <set VALUE="@YAW" COMMAND="YAW"/>
          <set VALUE="@PITCH" COMMAND="PITCH"/>
          <set VALUE="@FLAPS" COMMAND="BRAKE"/>
        </rc_commands>
        <section PREFIX="AUTO1_" NAME="AUTO1">
          <define VALUE="RadOfDeg(75)" NAME="MAX_ROLL"/>
          <define VALUE="RadOfDeg(45)" NAME="MAX_PITCH"/>
        </section>
        <section NAME="SERVO_MIXER_GAINS">
          <define VALUE="0.3f" NAME="AILERON_NEUTRAL"/>
          <define VALUE="1.0f" NAME="AILERON_RATE_UP"/>
          <define VALUE="0.5f" NAME="AILERON_RATE_DOWN"/>
          <define VALUE="1.0f" NAME="AILERON_RATE_UP_BRAKE"/>
          <define VALUE="1.0f" NAME="AILERON_RATE_DOWN_BRAKE"/>
          <define VALUE="0.9f" NAME="PITCH_GAIN"/>
          <define VALUE="-0.7f" NAME="BRAKE_AILEVON"/>
          <define VALUE="0.1f" NAME="BRAKE_PITCH"/>
          <define VALUE="80" NAME="MAX_BRAKE_RATE"/>
          <define VALUE="0.3" NAME="RUDDER_OF_AILERON"/>
        </section>
        <command_laws>
          <let VAR="brake_value_nofilt" VALUE="Clip(-@BRAKE, 0, MAX_PPRZ)"/>
          <ratelimit VAR="brake_value" VALUE="$brake_value_nofilt" RATE_MIN="-MAX_BRAKE_RATE" RATE_MAX="MAX_BRAKE_RATE"/>
          <let VAR="aileron_up_rate" VALUE="(AILERON_RATE_UP   * (MAX_PPRZ - $brake_value)) + (AILERON_RATE_UP_BRAKE   * $brake_value)"/>
          <let VAR="aileron_down_rate" VALUE="(AILERON_RATE_DOWN * (MAX_PPRZ - $brake_value)) + (AILERON_RATE_DOWN_BRAKE * $brake_value)"/>
          <let VAR="aileron_up" VALUE="((-@ROLL)  *  (((float)$aileron_up_rate) / ((float)MAX_PPRZ)))"/>
          <let VAR="aileron_down" VALUE="((-@ROLL)  * (((float)$aileron_down_rate) / ((float)MAX_PPRZ)))"/>
          <let VAR="leftturn" VALUE="(@ROLL >= 0? 0 : 1)"/>
          <let VAR="rightturn" VALUE="(1 - $leftturn)"/>
          <set VALUE="($aileron_up * $leftturn) + ($aileron_down * $rightturn) - $brake_value*(BRAKE_AILEVON) - (MAX_PPRZ * AILERON_NEUTRAL)" SERVO="AILERON_LEFT"/>
          <set VALUE="($aileron_up * $rightturn) + ($aileron_down * $leftturn) + $brake_value*(BRAKE_AILEVON) + (MAX_PPRZ *AILERON_NEUTRAL)" SERVO="AILERON_RIGHT"/>
          <set VALUE="-(@YAW + @ROLL * RUDDER_OF_AILERON)" SERVO="RUDDER"/>
          <set VALUE="@THROTTLE" SERVO="THROTTLE"/>
          <set VALUE="@PITCH * PITCH_GAIN - BRAKE_PITCH * $brake_value" SERVO="ELEVATOR"/>
        </command_laws>
        <section PREFIX="FAILSAFE_" NAME="FAILSAFE">
          <define VALUE="0.0" UNIT="%" NAME="DEFAULT_THROTTLE"/>
          <define VALUE="0.17" UNIT="rad" NAME="DEFAULT_ROLL"/>
          <define VALUE="0.0" UNIT="rad" NAME="DEFAULT_PITCH"/>
          <define VALUE="DEFAULT_CIRCLE_RADIUS" UNIT="m" NAME="HOME_RADIUS"/>
          <define VALUE="(MAX_DIST_FROM_HOME*1.5)" NAME="KILL_MODE_DISTANCE"/>
          <define VALUE="3" UNIT="s" NAME="DELAY_WITHOUT_GPS"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.51562740288882" NAME="H_X"/>
          <define VALUE="-0.05707735220832" NAME="H_Y"/>
          <define VALUE="0.85490967783446" NAME="H_Z"/>
        </section>
        <section PREFIX="INS_" NAME="INS">
          <define VALUE="0.0" UNIT="rad" NAME="ROLL_NEUTRAL_DEFAULT"/>
          <define VALUE="-0.0885749980807" UNIT="rad" NAME="PITCH_NEUTRAL_DEFAULT"/>
        </section>
        <section NAME="XSENS">
          <define VALUE="-0.285f" NAME="GPS_IMU_LEVER_ARM_X"/>
          <define VALUE="0.0f" NAME="GPS_IMU_LEVER_ARM_Y"/>
          <define VALUE="0.0f" NAME="GPS_IMU_LEVER_ARM_Z"/>
        </section>
        <section PREFIX="H_CTL_" NAME="HORIZONTAL CONTROL">
          <define VALUE="0.90" NAME="COURSE_PGAIN"/>
          <define VALUE="0.35" NAME="COURSE_DGAIN"/>
          <define VALUE="1.0039999485" NAME="COURSE_PRE_BANK_CORRECTION"/>
          <define VALUE="0.851999998093" UNIT="radians" NAME="ROLL_MAX_SETPOINT"/>
          <define VALUE="0.5" UNIT="radians" NAME="PITCH_MAX_SETPOINT"/>
          <define VALUE="-0.6" UNIT="radians" NAME="PITCH_MIN_SETPOINT"/>
          <define VALUE="16917.2929688" NAME="PITCH_PGAIN"/>
          <define VALUE="7.73400020599" NAME="PITCH_DGAIN"/>
          <define VALUE="3007.81298828" NAME="ELEVATOR_OF_ROLL"/>
          <define VALUE="2." NAME="ROLL_SLEW"/>
          <define VALUE="11718.75" NAME="ROLL_ATTITUDE_GAIN"/>
          <define VALUE="820.312011719" NAME="ROLL_RATE_GAIN"/>
        </section>
        <section PREFIX="V_CTL_" NAME="VERTICAL CONTROL">
          <define VALUE="11.1" UNIT="volt" NAME="POWER_CTL_BAT_NOMINAL"/>
          <define VALUE="0.108000002801" NAME="ALTITUDE_PGAIN"/>
          <define VALUE="2." NAME="ALTITUDE_MAX_CLIMB"/>
          <define VALUE="0.6" NAME="AUTO_THROTTLE_NOMINAL_CRUISE_THROTTLE"/>
          <define VALUE="0.25" NAME="AUTO_THROTTLE_MIN_CRUISE_THROTTLE"/>
          <define VALUE="0.9" NAME="AUTO_THROTTLE_MAX_CRUISE_THROTTLE"/>
          <define VALUE="1500" NAME="AUTO_THROTTLE_LOITER_TRIM"/>
          <define VALUE="-4000" NAME="AUTO_THROTTLE_DASH_TRIM"/>
          <define VALUE="0.158000007272" UNIT="%/(m/s)" NAME="AUTO_THROTTLE_CLIMB_THROTTLE_INCREMENT"/>
          <define VALUE="0." NAME="AUTO_THROTTLE_PGAIN"/>
          <define VALUE="0." NAME="AUTO_THROTTLE_IGAIN"/>
          <define VALUE="0.361000001431" NAME="AUTO_THROTTLE_PITCH_OF_VZ_PGAIN"/>
          <define VALUE="2" UNIT="s" NAME="THROTTLE_SLEW_LIMITER"/>
        </section>
        <section PREFIX="AGR_" NAME="AGGRESSIVE">
          <define VALUE="30" NAME="BLEND_START"/>
          <define VALUE="15" NAME="BLEND_END"/>
          <define VALUE="1." NAME="CLIMB_THROTTLE"/>
          <define VALUE="0.40000000596" NAME="CLIMB_PITCH"/>
          <define VALUE="0." NAME="DESCENT_THROTTLE"/>
          <define VALUE="-0.10000000149" NAME="DESCENT_PITCH"/>
          <define VALUE="0.800000011921" NAME="CLIMB_NAV_RATIO"/>
          <define VALUE="0.834999978542" NAME="DESCENT_NAV_RATIO"/>
        </section>
        <section NAME="BAT">
          <define VALUE="10.5" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="10" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="9.1" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
        </section>
        <section NAME="MISC">
          <define VALUE="8." UNIT="m/s" NAME="NOMINAL_AIRSPEED"/>
          <define VALUE="5." UNIT="s" NAME="CARROT"/>
          <define VALUE="ATPL4\\rATRN5\\rATTT80\\r" TYPE="string" NAME="XBEE_INIT"/>
          <define VALUE="80." NAME="DEFAULT_CIRCLE_RADIUS"/>
          <define VALUE="180" NAME="COMMAND_ROLL_TRIM"/>
          <define VALUE="-194." NAME="COMMAND_PITCH_TRIM"/>
        </section>
        <section PREFIX="DC_" NAME="DIGITAL_CAMERA">
          <define VALUE="1.5" UNIT="sec" NAME="AUTOSHOOT_PERIOD"/>
          <define VALUE="50" UNIT="meter" NAME="AUTOSHOOT_DISTANCE_INTERVAL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Ap">
          <mode NAME="default">
            <message PERIOD="1.4" NAME="AIRSPEED"/>
            <message PERIOD="1.4" NAME="AMSL"/>
            <message PERIOD="5" NAME="ALIVE"/>
            <message PERIOD="0.5" NAME="GPS"/>
            <message PERIOD="1." NAME="NAVIGATION"/>
            <message PERIOD="0.7" NAME="ATTITUDE"/>
            <message PERIOD="0.6" NAME="ESTIMATOR"/>
            <message PERIOD="1.1" NAME="ENERGY"/>
            <message PERIOD="1.1" NAME="WP_MOVED"/>
            <message PERIOD="1.05" NAME="CIRCLE"/>
            <message PERIOD="1.05" NAME="DESIRED"/>
            <message PERIOD="1.2" NAME="SEGMENT"/>
            <message PERIOD="2.1" NAME="CALIBRATION"/>
            <message PERIOD="9." NAME="NAVIGATION_REF"/>
            <message PERIOD="5." NAME="PPRZ_MODE"/>
            <message PERIOD="5." NAME="SETTINGS"/>
            <message PERIOD="2.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="1.2" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="IR_SENSORS"/>
            <message PERIOD="2.1" NAME="SURVEY"/>
            <message PERIOD="2.0" NAME="GPS_SOL"/>
            <message PERIOD=".8" NAME="IMU_ACCEL"/>
            <message PERIOD=".9" NAME="IMU_GYRO"/>
            <message PERIOD="1.9" NAME="IMU_MAG"/>
            <message PERIOD="5" NAME="COMMANDS"/>
            <message PERIOD="2" NAME="FBW_STATUS"/>
            <message PERIOD=".2" NAME="PAYLOAD"/>
            <message PERIOD="1.5" NAME="AIR_DATA"/>
          </mode>
          <mode NAME="minimal">
            <message PERIOD="5" NAME="ALIVE"/>
            <message PERIOD="4" NAME="ATTITUDE"/>
            <message PERIOD="1.05" NAME="GPS"/>
            <message PERIOD="1.3" NAME="ESTIMATOR"/>
            <message PERIOD="1.4" NAME="WP_MOVED"/>
            <message PERIOD="3.05" NAME="CIRCLE"/>
            <message PERIOD="4.05" NAME="DESIRED"/>
            <message PERIOD="1.1" NAME="ENERGY"/>
            <message PERIOD="3.2" NAME="SEGMENT"/>
            <message PERIOD="5.1" NAME="CALIBRATION"/>
            <message PERIOD="9." NAME="NAVIGATION_REF"/>
            <message PERIOD="3." NAME="NAVIGATION"/>
            <message PERIOD="5." NAME="PPRZ_MODE"/>
            <message PERIOD="5." NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="1.5" NAME="DL_VALUE"/>
            <message PERIOD="5.2" NAME="IR_SENSORS"/>
            <message PERIOD="2.1" NAME="SURVEY"/>
            <message PERIOD="5.0" NAME="GPS_SOL"/>
          </mode>
          <mode NAME="extremal">
            <message PERIOD="5" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="GPS"/>
            <message PERIOD="5.3" NAME="ESTIMATOR"/>
            <message PERIOD="10.1" NAME="ENERGY"/>
            <message PERIOD="10.2" NAME="DESIRED"/>
            <message PERIOD="5.4" NAME="NAVIGATION"/>
            <message PERIOD="7.5" NAME="PPRZ_MODE"/>
            <message PERIOD="8." NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="5.7" NAME="DATALINK_REPORT"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD="0.5" NAME="BARO_RAW"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO"/>
            <message PERIOD=".075" NAME="IMU_ACCEL"/>
            <message PERIOD=".1" NAME="IMU_MAG"/>
          </mode>
          <mode NAME="debug_imu">
            <message PERIOD="0.1" NAME="ATTITUDE"/>
            <message PERIOD="5" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="GPS"/>
            <message PERIOD="5.3" NAME="ESTIMATOR"/>
            <message PERIOD="10.1" NAME="ENERGY"/>
            <message PERIOD="10.2" NAME="DESIRED"/>
            <message PERIOD="5.4" NAME="NAVIGATION"/>
            <message PERIOD="5.5" NAME="PPRZ_MODE"/>
            <message PERIOD="5." NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="5.7" NAME="DATALINK_REPORT"/>
            <message PERIOD=".5" NAME="IMU_ACCEL"/>
            <message PERIOD=".5" NAME="IMU_GYRO"/>
            <message PERIOD=".5" NAME="IMU_MAG"/>
            <message PERIOD=".5" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".5" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".5" NAME="IMU_MAG_RAW"/>
          </mode>
        </process>
        <process NAME="Fbw">
          <mode NAME="default">
            <message PERIOD="5" NAME="COMMANDS"/>
            <message PERIOD="2" NAME="FBW_STATUS"/>
            <message PERIOD="5" NAME="ACTUATORS"/>
          </mode>
          <mode NAME="debug">
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="COMMANDS"/>
            <message PERIOD="1" NAME="FBW_STATUS"/>
            <message PERIOD="5" NAME="ACTUATORS"/>
          </mode>
        </process>
      </telemetry>
      <settings>
        <dl_settings>
          <dl_settings NAME="flight params">
            <dl_setting VAR="flight_altitude" STEP="10" SHORTNAME="altitude" MIN="0" MAX="1000"/>
            <dl_setting VAR="nav_course" STEP="1" MIN="0" MAX="360"/>
            <dl_setting VAR="nav_shift" STEP="5" SHORTNAME="inc. shift" MODULE="firmwares/fixedwing/nav" MIN="-10" MAX="10" HANDLER="IncreaseShift"/>
            <dl_setting VAR="autopilot.flight_time" STEP="1" SHORTNAME="flight time" MODULE="autopilot" MIN="0" MAX="0" HANDLER="ResetFlightTimeAndLaunch"/>
            <dl_setting VAR="nav_radius" STEP="10" MODULE="firmwares/fixedwing/nav" MIN="-200" MAX="200" HANDLER="SetNavRadius">
              <strip_button VALUE="1" NAME="Circle right" ICON="circle-right.png" GROUP="circle"/>
              <strip_button VALUE="-1" NAME="Circle left" ICON="circle-left.png" GROUP="circle"/>
              <key_press VALUE="1" KEY="greater"/>
              <key_press VALUE="-1" KEY="less"/>
            </dl_setting>
          </dl_settings>
          <dl_settings NAME="mode">
            <dl_setting VAR="autopilot.mode" VALUES="MANUAL|AUTO1|AUTO2|HOME|NOGPS|FAILSAFE" STEP="1" MODULE="autopilot" MIN="0" MAX="2"/>
            <dl_setting VAR="autopilot.launch" STEP="1" MIN="0" MAX="1"/>
            <dl_setting VAR="autopilot.kill_throttle" STEP="1" MIN="0" MAX="1"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings>
        <dl_settings>
          <dl_settings NAME="ins">
            <dl_setting VAR="ins_roll_neutral" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="roll_neutral" PERSISTENT="true" PARAM="INS_ROLL_NEUTRAL_DEFAULT" MODULE="subsystems/ahrs" MIN="-15" MAX="15" ALT_UNIT="deg"/>
            <dl_setting VAR="ins_pitch_neutral" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="pitch_neutral" PERSISTENT="true" PARAM="INS_PITCH_NEUTRAL_DEFAULT" MIN="-15" MAX="15" ALT_UNIT="deg"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings>
        <dl_settings NAME="control">
          <dl_settings NAME="agr">
            <dl_setting VAR="agr_climb_throttle" STEP="0.05" SHORTNAME="climb_throttle" PARAM="AGR_CLIMB_THROTTLE" MODULE="guidance/guidance_v" MIN="0." MAX="1.0"/>
            <dl_setting VAR="agr_climb_pitch" STEP="0.05" SHORTNAME="climb_pitch" PARAM="AGR_CLIMB_PITCH" MODULE="guidance/guidance_v" MIN="-0.1" MAX="0.5"/>
            <dl_setting VAR="agr_climb_nav_ratio" STEP="0.1" SHORTNAME="climb_nav_ratio" PARAM="AGR_CLIMB_NAV_RATIO" MODULE="guidance/guidance_v" MIN="0." MAX="1.0"/>
            <dl_setting VAR="agr_descent_throttle" STEP="0.05" SHORTNAME="descent_throttle" PARAM="AGR_DESCENT_THROTTLE" MODULE="guidance/guidance_v" MIN="0." MAX="1.0"/>
            <dl_setting VAR="agr_descent_pitch" STEP="0.05" SHORTNAME="descent_pitch" PARAM="AGR_DESCENT_PITCH" MODULE="guidance/guidance_v" MIN="-0.5" MAX="0.1"/>
            <dl_setting VAR="agr_descent_nav_ratio" STEP="0.1" SHORTNAME="descent_nav_ratio" PARAM="AGR_DESCENT_NAV_RATIO" MODULE="guidance/guidance_v" MIN="0." MAX="1.0"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="Splash" ac_id="67" airframe="airframes/tudelft/splash.xml" radio="radios/spektrum.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/tudelft/delft_basic.xml" settings="settings/rotorcraft_basic.xml" settings_modules="modules/spektrum_soft_bind.xml [modules/air_data.xml] modules/geo_mag.xml modules/ins_extended.xml modules/ahrs_int_cmpl_quat.xml modules/stabilization_indi_simple.xml modules/nav_basic_rotorcraft.xml modules/guidance_rotorcraft.xml modules/gps_ubx_ucenter.xml modules/gps.xml modules/imu_common.xml" gui_color="#fff0cccaccca">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="NEGATIVE" NAME="fake spektrum" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1000" MIN="1000" MAX="2000" FUNCTION="THROTTLE" CTL="left_stick_vert" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="2000" MAX="1000" FUNCTION="ROLL" CTL="right_stick_horiz" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="2000" MAX="1000" FUNCTION="PITCH" CTL="right_stick_vert" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="2000" MAX="1000" FUNCTION="YAW" CTL="left_stick_horiz" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1000" MAX="2000" FUNCTION="GEAR" CTL="aux0" AVERAGE="1"/>
        <channel NEUTRAL="1500" MIN="1000" MAX="2000" FUNCTION="AUX1" CTL="aux1" AVERAGE="1"/>
        <channel NEUTRAL="1500" MIN="1000" MAX="2000" FUNCTION="AUX2" CTL="aux2" AVERAGE="1"/>
        <channel NEUTRAL="1500" MIN="1000" MAX="2000" FUNCTION="AUX3" CTL="aux3" AVERAGE="1"/>
        <channel NEUTRAL="1500" MIN="1000" MAX="2000" FUNCTION="MODE" CTL="aux4" AVERAGE="1"/>
      </radio>
      <dump>
        <flight_plan security_height="2" name="Delft Basic" max_dist_from_home="1000" lon0="4 22 42.0" lat0="51 59 27.6" ground_alt="0" alt="4">
          <header>    #include &quot;autopilot.h&quot;
    #include &quot;subsystems/datalink/datalink.h&quot;
    #include &quot;subsystems/electrical.h&quot;
    #include &quot;subsystems/radio_control.h&quot;</header>
          <waypoints>
            <waypoint y="0.0" x="0.0" name="HOME"/>
            <waypoint y="5.0" x="0.0" name="CLIMB"/>
            <waypoint y="-5.0" x="-2.0" name="STDBY"/>
            <waypoint y="14.3" x="-19.9" name="p1"/>
            <waypoint y="21.6" x="-0.6" name="p2"/>
            <waypoint y="-26.5" x="22.2" name="p3"/>
            <waypoint y="-34.4" x="4.9" name="p4"/>
            <waypoint y="-29.4" x="14.2" name="CAM"/>
            <waypoint y="-10.9" x="5.6" name="TD"/>
          </waypoints>
          <exceptions>
            <exception deroute="ComeBackAndLand" cond="((radio_control.status == RC_REALLY_LOST) &&
      !(IndexOfBlock('Takeoff') > nav_block) &&
      !(nav_block >= IndexOfBlock('land here')) &&
      (autopilot_in_flight() == true) )"/>
            <exception deroute="DatalinkLoss" cond="(datalink_time > 60 &&
      !(datalink_time > 120) &&
      !(IndexOfBlock('Takeoff') > nav_block) &&
      !(nav_block >= IndexOfBlock('land here')) &&
      (autopilot_in_flight() == true) )"/>
            <exception deroute="ComeBackAndLand" cond="(electrical.bat_low &&
      !(IndexOfBlock('Holding point') > nav_block) &&
      !(nav_block >= IndexOfBlock('land here')) &&
      (autopilot_in_flight() == true) )"/>
            <exception deroute="land here" cond="(electrical.bat_critical &&
      !(IndexOfBlock('Holding point') > nav_block) &&
      !(nav_block >= IndexOfBlock('land here')) &&
      (autopilot_in_flight() == true) )"/>
          </exceptions>
          <blocks>
            <block name="Wait GPS" no="0">
              <call_once fun="NavKillThrottle()" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Geo init" no="1">
              <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
              <call_once fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Holding point" no="2">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="Start Engine" no="3">
              <call_once fun="NavResurrect()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff" name="Takeoff" no="4">
              <exception deroute="Standby" cond="stateGetPositionEnu_f()->z > 2.0"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="5">
              <stay wp="STDBY" no="0"/>
            </block>
            <block name="stay_p1" no="6">
              <stay wp="p1" no="0"/>
            </block>
            <block name="go_p2" no="7">
              <go wp="p2" no="0"/>
              <deroute block="stay_p1" no="1"/>
            </block>
            <block name="line_p1_p2" no="8">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <stay wp="p2" until="stage_time>10" no="1"/>
              <go wp="p1" hmode="route" from="p2" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="route" no="9">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <go wp="p3" hmode="route" from="p2" no="1"/>
              <go wp="p4" hmode="route" from="p3" no="2"/>
              <go wp="p1" hmode="route" from="p4" no="3"/>
              <deroute block="stay_p1" no="4"/>
            </block>
            <block name="test yaw" no="10">
              <go wp="p1" no="0"/>
              <for var="i" to="16" from="1" no="2">
                <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
              </for>
              <deroute block="Standby" no="5"/>
            </block>
            <block pre_call="nav_set_heading_towards_waypoint(WP_CAM)" name="circle CAM" no="11">
              <circle wp="CAM" radius="nav_radius" no="0"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land Here" name="land here" no="12">
              <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
            </block>
            <block name="land" no="13">
              <go wp="TD" no="0"/>
            </block>
            <block name="flare" no="14">
              <exception deroute="Holding point" cond="NavDetectGround()"/>
              <exception deroute="landed" cond="!nav_is_in_flight()"/>
              <call_once fun="NavStartDetectGround()" no="0"/>
              <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
            </block>
            <block name="landed" no="15">
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
            </block>
            <block name="ComeBackAndLand" no="16">
              <go wp="HOME" no="0"/>
              <deroute block="land here" no="1"/>
            </block>
            <block name="DatalinkLoss" no="17">
              <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
              <stay wp="TD" until="stage_time>60" no="1"/>
              <deroute block="ComeBackAndLand" no="2"/>
            </block>
            <block name="HOME" no="18">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="18" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="17" block_name="DatalinkLoss" stage="2">
            <deroute block="ComeBackAndLand" no="2"/>
          </stage>
          <stage block="17" block_name="DatalinkLoss" stage="1">
            <stay wp="TD" until="stage_time>60" no="1"/>
          </stage>
          <stage block="17" block_name="DatalinkLoss" stage="0">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="16" block_name="ComeBackAndLand" stage="1">
            <deroute block="land here" no="1"/>
          </stage>
          <stage block="16" block_name="ComeBackAndLand" stage="0">
            <go wp="HOME" no="0"/>
          </stage>
          <stage block="15" block_name="landed" stage="0">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
          </stage>
          <stage block="14" block_name="flare" stage="1">
            <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
          </stage>
          <stage block="14" block_name="flare" stage="0">
            <call_once fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="13" block_name="land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="12" block_name="land here" stage="0">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="11" block_name="circle CAM" stage="0">
            <circle wp="CAM" radius="nav_radius" no="0"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="5">
            <deroute block="Standby" no="5"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="3">
            <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="2">
            <for var="i" to="16" from="1" no="2">
              <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
            </for>
          </stage>
          <stage block="10" block_name="test yaw" stage="0">
            <go wp="p1" no="0"/>
          </stage>
          <stage block="9" block_name="route" stage="4">
            <deroute block="stay_p1" no="4"/>
          </stage>
          <stage block="9" block_name="route" stage="3">
            <go wp="p1" hmode="route" from="p4" no="3"/>
          </stage>
          <stage block="9" block_name="route" stage="2">
            <go wp="p4" hmode="route" from="p3" no="2"/>
          </stage>
          <stage block="9" block_name="route" stage="1">
            <go wp="p3" hmode="route" from="p2" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="2">
            <go wp="p1" hmode="route" from="p2" no="2"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="1">
            <stay wp="p2" until="stage_time>10" no="1"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="1">
            <deroute block="stay_p1" no="1"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="0">
            <go wp="p2" no="0"/>
          </stage>
          <stage block="6" block_name="stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="5" block_name="Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="1">
            <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="0">
            <call_once fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="2">
            <call_once fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="0">
            <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings TARGET="ap">
          <dl_settings>
            <dl_settings NAME="Spektrum soft bind">
              <dl_setting VAR="bind_soft_value" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="Bind Spektrum" MODULE="spektrum_soft_bind/spektrum_soft_bind" MIN="0" MAX="1" HANDLER="click"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="geo_mag">
              <dl_setting VAR="geo_mag.calc_once" VALUES="OFF|CALC" STEP="1" SHORTNAME="calcNow" MODULE="geo_mag/geo_mag" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="Ins Extended">
            <dl_settings NAME="INS">
              <dl_setting VAR="vff.accel_noise" STEP="0.1" SHORTNAME="accel_noise" MODULE="subsystems/ins/vf_extended_float" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_baro" STEP="0.1" SHORTNAME="r_baro" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_alt" STEP="0.1" SHORTNAME="r_alt" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_obs_height" STEP="0.1" SHORTNAME="r_obs_height" MIN="0" MAX="10"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
              <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
              <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
              <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
              <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="indi">
              <dl_setting VAR="indi.reference_acceleration.err_p" STEP="1" SHORTNAME="kp_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_P" MODULE="stabilization/stabilization_indi_simple" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_p" STEP="0.1" SHORTNAME="kd_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.p" STEP="0.001" SHORTNAME="ctl_eff_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_P" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.reference_acceleration.err_q" STEP="1" SHORTNAME="kp_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_Q" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_q" STEP="0.1" SHORTNAME="kd_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.q" STEP="0.001" SHORTNAME="ctl_eff_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_Q" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.reference_acceleration.err_r" STEP="1" SHORTNAME="kp_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_R" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_r" STEP="0.1" SHORTNAME="kd_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.r" STEP="0.001" SHORTNAME="ctl_eff_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_R" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.g2" STEP="0.01" SHORTNAME="g2" PERSISTENT="true" PARAM="STABILIZATION_INDI_G2_R" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.adaptive" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="use_adaptive" PERSISTENT="true" PARAM="STABILIZATION_INDI_USE_ADAPTIVE" MIN="0" MAX="1"/>
              <dl_setting VAR="indi.max_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_rate" PARAM="STABILIZATION_INDI_MAX_RATE" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
              <dl_setting VAR="indi.attitude_max_yaw_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_yaw_rate_attitude" PARAM="STABILIZATION_INDI_MAX_R" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="NAV">
              <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
              <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
              <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MIN="-50" MAX="50"/>
              <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MIN="0" MAX="10.0"/>
              <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MIN="-10.0" MAX="0.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Vert Loop">
              <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
              <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MIN="0.2" MAX="0.8"/>
              <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MIN="0" MAX="1"/>
              <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
            <dl_settings NAME="Horiz Loop">
              <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="true" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
              <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
              <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MIN="0" MAX="1"/>
              <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
              <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
              <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
              <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
              <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
              <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="ublox">
            <dl_settings NAME="ucenter">
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_h" STEP="1" SHORTNAME="sw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_l" STEP="1" SHORTNAME="sw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_h" STEP="1" SHORTNAME="hw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_l" STEP="1" SHORTNAME="hw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_init" STEP="100" SHORTNAME="inibaud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_run" STEP="100" SHORTNAME="baud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="splash">
        <description>Pixracer</description>
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="px4fmu_4.0"/>
          <define VALUE="80" NAME="BAT_CHECKER_DELAY"/>
          <define VALUE="80" NAME="CATASTROPHIC_BATTERY_KILL_DELAY"/>
          <module TYPE="xbee_api" NAME="telemetry"/>
          <module TYPE="mpu9250_spi" NAME="imu">
            <configure VALUE="spi1" NAME="IMU_MPU9250_SPI_DEV"/>
            <configure VALUE="SPI_SLAVE2" NAME="IMU_MPU9250_SPI_SLAVE_IDX"/>
            <define VALUE="FALSE" NAME="IMU_MPU9250_READ_MAG"/>
          </module>
          <module TYPE="ublox" NAME="gps">
            <configure VALUE="B57600" NAME="GPS_BAUD"/>
          </module>
          <module TYPE="ubx_ucenter" NAME="gps"/>
          <module TYPE="indi_simple" NAME="stabilization"/>
          <module TYPE="int_cmpl_quat" NAME="ahrs">
            <define VALUE="MAG_HMC58XX_SENDER_ID" NAME="AHRS_ICQ_MAG_ID"/>
            <configure VALUE="TRUE" NAME="USE_MAGNETOMETER"/>
            <define VALUE="FALSE" NAME="AHRS_USE_GPS_HEADING"/>
          </module>
          <module TYPE="extended" NAME="ins"/>
          <module NAME="current_sensor">
            <configure VALUE="ADC_3" NAME="ADC_CURRENT_SENSOR"/>
          </module>
          <module TYPE="pwm" NAME="actuators">
            <define VALUE="400" NAME="SERVO_HZ"/>
          </module>
          <module NAME="motor_mixing"/>
          <module TYPE="spektrum" NAME="radio_control">
            <define VALUE="1" NAME="RADIO_CONTROL_SPEKTRUM_NO_SIGN"/>
            <define VALUE="1" NAME="SPEKTRUM_HAS_SOFT_BIND_PIN"/>
            <define VALUE="0" NAME="USE_KILL_SWITCH_FOR_MOTOR_ARMING"/>
            <define VALUE="5" NAME="RADIO_KILL_SWITCH"/>
          </module>
          <module NAME="px4_flash"/>
          <module NAME="geo_mag"/>
          <module NAME="air_data"/>
          <module NAME="send_imu_mag_current"/>
          <module NAME="spektrum_soft_bind"/>
        </firmware>
        <section NAME="MISC">
          <define VALUE="((float)adc) * (3.3f / 4096.0f) * (90.0f / 5.0f)" NAME="MilliAmpereOfAdc(adc)"/>
        </section>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="105" NAME="MAG_X_NEUTRAL"/>
          <define VALUE="10" NAME="MAG_Y_NEUTRAL"/>
          <define VALUE="-23" NAME="MAG_Z_NEUTRAL"/>
          <define VALUE="4.01453293111" NAME="MAG_X_SENS" INTEGER="16"/>
          <define VALUE="3.96379405627" NAME="MAG_Y_SENS" INTEGER="16"/>
          <define VALUE="3.92499630895" NAME="MAG_Z_SENS" INTEGER="16"/>
        </section>
        <commands>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="0"/>
        </commands>
        <rc_commands>
          <set VALUE="@THROTTLE" COMMAND="THRUST"/>
          <set VALUE="@ROLL" COMMAND="ROLL"/>
          <set VALUE="@PITCH" COMMAND="PITCH"/>
          <set VALUE="@YAW" COMMAND="YAW"/>
        </rc_commands>
        <servos DRIVER="Default">
          <servo NO="0" NEUTRAL="1100" NAME="TOP_LEFT" MIN="1000" MAX="2000"/>
          <servo NO="1" NEUTRAL="1100" NAME="TOP_RIGHT" MIN="1000" MAX="2000"/>
          <servo NO="2" NEUTRAL="1100" NAME="BOTTOM_RIGHT" MIN="1000" MAX="2000"/>
          <servo NO="3" NEUTRAL="1100" NAME="BOTTOM_LEFT" MIN="1000" MAX="2000"/>
          <servo NO="4" NEUTRAL="1700" NAME="ZwaaiLight" MIN="1500" MAX="2000"/>
        </servos>
        <section PREFIX="MOTOR_MIXING_" NAME="MIXING">
          <define VALUE="0" NAME="TRIM_ROLL"/>
          <define VALUE="0" NAME="TRIM_PITCH"/>
          <define VALUE="0" NAME="TRIM_YAW"/>
          <define VALUE="FALSE" NAME="REVERSE"/>
          <define VALUE="QUAD_X" NAME="TYPE"/>
        </section>
        <command_laws>
          <call FUN="motor_mixing_run(autopilot_get_motors_on(),FALSE,values)"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_LEFT]" SERVO="TOP_LEFT"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_RIGHT]" SERVO="TOP_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_RIGHT]" SERVO="BOTTOM_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_LEFT]" SERVO="BOTTOM_LEFT"/>
        </command_laws>
        <section PREFIX="AIR_DATA_" NAME="AIR_DATA">
          <define VALUE="FALSE" NAME="CALC_AIRSPEED"/>
          <define VALUE="FALSE" NAME="CALC_TAS_FACTOR"/>
          <define VALUE="TRUE" NAME="CALC_AMSL_BARO"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.3892503" NAME="H_X"/>
          <define VALUE="0.0017972" NAME="H_Y"/>
          <define VALUE="0.9211303" NAME="H_Z"/>
          <define VALUE="0" NAME="GRAVITY_HEURISTIC_FACTOR"/>
        </section>
        <section PREFIX="INS_" NAME="INS">
          <define VALUE="2.2" NAME="SONAR_MAX_RANGE"/>
          <define VALUE="TRUE" NAME="SONAR_UPDATE_ON_AGL"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="RC_SETPOINT">
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="300" UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="0" NAME="DEADBAND_A"/>
          <define VALUE="0" NAME="DEADBAND_E"/>
          <define VALUE="50" NAME="DEADBAND_R"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="ATTITUDE_REFERENCE">
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.9" NAME="REF_ZETA_P"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.9" NAME="REF_ZETA_Q"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.9" NAME="REF_ZETA_R"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_RDOT"/>
        </section>
        <section PREFIX="STABILIZATION_INDI_" NAME="STABILIZATION_ATTITUDE_INDI">
          <define VALUE="0.02692" NAME="G1_P"/>
          <define VALUE="0.025867" NAME="G1_Q"/>
          <define VALUE="0.002055" NAME="G1_R"/>
          <define VALUE="0.15865" NAME="G2_R"/>
          <define VALUE="FALSE" NAME="FILTER_ROLL_RATE"/>
          <define VALUE="FALSE" NAME="FILTER_PITCH_RATE"/>
          <define VALUE="FALSE" NAME="FILTER_YAW_RATE"/>
          <define VALUE="100.0" NAME="REF_ERR_P"/>
          <define VALUE="100.0" NAME="REF_ERR_Q"/>
          <define VALUE="100.0" NAME="REF_ERR_R"/>
          <define VALUE="14.0" NAME="REF_RATE_P"/>
          <define VALUE="14.0" NAME="REF_RATE_Q"/>
          <define VALUE="14.0" NAME="REF_RATE_R"/>
          <define VALUE="3.2" NAME="FILT_CUTOFF"/>
          <define VALUE="3.2" NAME="FILT_CUTOFF_R"/>
          <define VALUE="0.04" NAME="ACT_DYN_P"/>
          <define VALUE="0.04" NAME="ACT_DYN_Q"/>
          <define VALUE="0.04" NAME="ACT_DYN_R"/>
          <define VALUE="FALSE" NAME="USE_ADAPTIVE"/>
          <define VALUE="0.0001" NAME="ADAPTIVE_MU"/>
          <define VALUE="343.77" UNIT="deg/s" NAME="STABILIZATION_INDI_MAX_RATE"/>
          <define VALUE="200" UNIT="deg/s" NAME="STABILIZATION_INDI_MAX_R"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="350" NAME="HOVER_KP"/>
          <define VALUE="85" NAME="HOVER_KD"/>
          <define VALUE="20" NAME="HOVER_KI"/>
          <define VALUE="0.6" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="TRUE" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="20" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="2" UNIT="m/s" NAME="REF_MAX_SPEED"/>
          <define VALUE="50" NAME="PGAIN"/>
          <define VALUE="100" NAME="DGAIN"/>
          <define VALUE="30" NAME="IGAIN"/>
        </section>
        <section PREFIX="NAV_" NAME="NAVIGATION">
          <define VALUE="4.5" NAME="CLIMB_VSPEED"/>
          <define VALUE="-1.0" NAME="DESCEND_VSPEED"/>
        </section>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_STARTUP"/>
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_HOVER_Z_HOLD" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_RC_DIRECT" NAME="MODE_AUTO2"/>
          <define VALUE="TRUE" NAME="NO_RC_THRUST_LIMIT"/>
        </section>
        <section NAME="BAT">
          <define VALUE="8700" NAME="MILLIAMP_AT_FULL_THROTTLE"/>
          <define VALUE="9.2" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="9.9" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="10.2" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="12.4" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.05" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
            <message PERIOD="0.05" NAME="OPTICAL_FLOW_HOVER"/>
            <message PERIOD="0.10" NAME="VISUALTARGET"/>
            <message PERIOD="0.1" NAME="VISION_POSITION_ESTIMATE"/>
            <message PERIOD="0.05" NAME="DIVERGENCE"/>
            <message PERIOD="0.02" NAME="DRAGSPEED"/>
            <message PERIOD="5.1" NAME="LOGGER_STATUS"/>
            <message PERIOD="1.2" NAME="LIDAR"/>
            <message PERIOD=".25" NAME="INS_EKF2"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="BEBOP_ACTUATORS"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_FLOAT"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
            <message PERIOD="2.0" NAME="INDI_G"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="vel_guidance" KEY_PRESS="q">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HYBRID_GUIDANCE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1.0" NAME="GPS_INT"/>
            <message PERIOD="1.0" NAME="INS"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="RTCM3">
            <message PERIOD="1" NAME="GPS_RXMRTCM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD="1" NAME="GPS_RTK"/>
          </mode>
        </process>
        <process NAME="FlightRecorder">
          <mode NAME="default">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD=".1" NAME="GPS_INT"/>
            <message PERIOD=".1" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".2" NAME="IMU_MAG_SCALED"/>
            <message PERIOD="0.05" NAME="LIDAR"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="19"/>
            <dl_setting VAR="autopilot.kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot.power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot.mode" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="19" HANDLER="SetModeHandler"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="Splash3" ac_id="17" airframe="airframes/tudelft/splash3.xml" radio="radios/crossfire_sbus.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/rotorcraft_basic.xml" settings="settings/rotorcraft_basic.xml" settings_modules="modules/air_data.xml modules/lidar_tfmini.xml modules/ins_ekf2.xml modules/stabilization_rate.xml modules/stabilization_int_quat.xml modules/nav_basic_rotorcraft.xml modules/guidance_rotorcraft.xml modules/gps_ubx_ucenter.xml modules/gps.xml modules/imu_common.xml" gui_color="blue">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="Crossfire SBUS" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1100" MIN="1100" MAX="1900" FUNCTION="THROTTLE" CTL="left_stick_vert" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="ROLL" CTL="right_stick_horiz" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="PITCH" CTL="right_stick_vert" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="YAW" CTL="left_stick_horiz" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="MODE" CTL="aux0" AVERAGE="1"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="AUX1" CTL="aux1" AVERAGE="1"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="AUX2" CTL="aux2" AVERAGE="1"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="AUX3" CTL="aux3" AVERAGE="1"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="AUX4" CTL="aux4" AVERAGE="1"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="AUX5" CTL="aux5" AVERAGE="1"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="AUX6" CTL="aux6" AVERAGE="1"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="AUX7" CTL="aux7" AVERAGE="1"/>
      </radio>
      <dump>
        <flight_plan security_height="2" name="Rotorcraft Basic (Enac)" max_dist_from_home="150" lon0="1 28 52.61" lat0="43 33 50.83" ground_alt="147" alt="152">
          <header>#include &quot;autopilot.h&quot;</header>
          <waypoints>
            <waypoint y="0.0" x="0.0" name="HOME"/>
            <waypoint y="5.0" x="0.0" name="CLIMB"/>
            <waypoint y="-5.0" x="-2.0" name="STDBY"/>
            <waypoint y="-13.9" x="3.6" name="p1"/>
            <waypoint y="-48.2" x="27.5" name="p2"/>
            <waypoint y="-19.6" x="16.7" name="p3"/>
            <waypoint y="-40.7" x="13.7" name="p4"/>
            <waypoint y="-50" x="-20" name="CAM" height="2."/>
            <waypoint y="-10.9" x="5.6" name="TD"/>
          </waypoints>
          <blocks>
            <block name="Wait GPS" no="0">
              <call_once fun="NavKillThrottle()" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Geo init" no="1">
              <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
              <call_once fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Holding point" no="2">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="Start Engine" no="3">
              <call_once fun="NavResurrect()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff" name="Takeoff" no="4">
              <exception deroute="Standby" cond="stateGetPositionEnu_f() @DEREF z @GT 2.0"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="5">
              <stay wp="STDBY" no="0"/>
            </block>
            <block name="stay_p1" no="6">
              <stay wp="p1" no="0"/>
            </block>
            <block name="go_p2" no="7">
              <call_once fun="nav_set_heading_deg(90)" no="0"/>
              <go wp="p2" no="1"/>
              <deroute block="stay_p1" no="2"/>
            </block>
            <block name="line_p1_p2" no="8">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <stay wp="p2" until="stage_time>10" no="1"/>
              <go wp="p1" hmode="route" from="p2" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="route" no="9">
              <go wp="p3" hmode="route" from="p1" no="0"/>
              <go wp="p4" hmode="route" from="p3" no="1"/>
              <go wp="p1" hmode="route" from="p4" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="Oval" no="10">
              <oval radius="-1" p2="p2" p1="p1" no="1"/>
            </block>
            <block name="test yaw" no="11">
              <go wp="p1" no="0"/>
              <for var="i" to="16" from="1" no="2">
                <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
              </for>
              <deroute block="Standby" no="5"/>
            </block>
            <block pre_call="nav_set_heading_towards_waypoint(WP_CAM)" name="circle CAM" no="12">
              <circle wp="CAM" radius="nav_radius" no="0"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land Here" name="land here" no="13">
              <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
            </block>
            <block name="land" no="14">
              <go wp="TD" no="0"/>
            </block>
            <block name="flare" no="15">
              <exception deroute="Holding point" cond="NavDetectGround()"/>
              <exception deroute="landed" cond="!nav_is_in_flight()"/>
              <call_once fun="NavStartDetectGround()" no="0"/>
              <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
            </block>
            <block name="landed" no="16">
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
            </block>
            <block name="HOME" no="17">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="17" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="16" block_name="landed" stage="0">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
          </stage>
          <stage block="15" block_name="flare" stage="1">
            <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
          </stage>
          <stage block="15" block_name="flare" stage="0">
            <call_once fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="14" block_name="land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="13" block_name="land here" stage="0">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="12" block_name="circle CAM" stage="0">
            <circle wp="CAM" radius="nav_radius" no="0"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="5">
            <deroute block="Standby" no="5"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="3">
            <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="2">
            <for var="i" to="16" from="1" no="2">
              <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
            </for>
          </stage>
          <stage block="11" block_name="test yaw" stage="0">
            <go wp="p1" no="0"/>
          </stage>
          <stage block="10" block_name="Oval" stage="1">
            <oval radius="-1" p2="p2" p1="p1" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="9" block_name="route" stage="2">
            <go wp="p1" hmode="route" from="p4" no="2"/>
          </stage>
          <stage block="9" block_name="route" stage="1">
            <go wp="p4" hmode="route" from="p3" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="0">
            <go wp="p3" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="2">
            <go wp="p1" hmode="route" from="p2" no="2"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="1">
            <stay wp="p2" until="stage_time>10" no="1"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="2">
            <deroute block="stay_p1" no="2"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="1">
            <go wp="p2" no="1"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="0">
            <call_once fun="nav_set_heading_deg(90)" no="0"/>
          </stage>
          <stage block="6" block_name="stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="5" block_name="Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="1">
            <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="0">
            <call_once fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="2">
            <call_once fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="0">
            <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="air_data">
              <dl_setting VAR="air_data.qnh" STEP="1" SHORTNAME="QNH" MODULE="air_data/air_data" MIN="800" MAX="1200"/>
              <dl_setting VAR="air_data.tas_factor" TYPE="float" STEP="0.01" SHORTNAME="TASfactor" PERSISTENT="true" PARAM="AIR_DATA_TAS_FACTOR" MODULE="air_data/air_data" MIN="0.8" MAX="1.3"/>
              <dl_setting VAR="air_data.calc_qnh_once" STEP="1" SHORTNAME="calcQNH" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_airspeed" TYPE="uint8" STEP="1" SHORTNAME="calcAirspeed" PERSISTENT="true" PARAM="AIR_DATA_CALC_AIRSPEED" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_tas_factor" TYPE="uint8" STEP="1" SHORTNAME="calcTASfactor" PERSISTENT="true" PARAM="AIR_DATA_CALC_TAS_FACTOR" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_amsl_baro" TYPE="uint8" STEP="1" SHORTNAME="calcAMSL" PERSISTENT="true" PARAM="AIR_DATA_CALC_AMSL_BARO" MODULE="air_data/air_data" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="Lidar TFMini">
            <dl_settings NAME="Lidar">
              <dl_setting VAR="tfmini.compensate_rotation" STEP="1" SHORTNAME="derotate_agl" MIN="0" MAX="1"/>
              <dl_setting VAR="tfmini.update_agl" STEP="1" SHORTNAME="update_agl" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="INS">
            <dl_settings NAME="ekf2">
              <dl_setting VAR="ekf2_params.mag_fusion_type" VALUES="AUTO|HEADING|3D|AUTOFW|INDOOR|NONE" STEP="1" SHORTNAME="mag_fusion" MODULE="subsystems/ins/ins_ekf2" MIN="0" MAX="5" HANDLER="change_param"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Rate Loop">
              <dl_setting VAR="stabilization_rate_gain.p" TYPE="int32" STEP="1" SHORTNAME="pgain p" PERSISTENT="true" PARAM="STABILIZATION_RATE_GAIN_P" MODULE="stabilization/stabilization_rate" MIN="1" MAX="1000"/>
              <dl_setting VAR="stabilization_rate_gain.q" TYPE="int32" STEP="1" SHORTNAME="pgain q" PERSISTENT="true" PARAM="STABILIZATION_RATE_GAIN_Q" MIN="1" MAX="1000"/>
              <dl_setting VAR="stabilization_rate_gain.r" TYPE="int32" STEP="1" SHORTNAME="pgain r" PERSISTENT="true" PARAM="STABILIZATION_RATE_GAIN_R" MIN="1" MAX="1000"/>
              <dl_setting VAR="stabilization_rate_igain.p" TYPE="int32" STEP="1" SHORTNAME="igain p" PERSISTENT="true" PARAM="STABILIZATION_RATE_IGAIN_P" MIN="0" MAX="500"/>
              <dl_setting VAR="stabilization_rate_igain.q" TYPE="int32" STEP="1" SHORTNAME="igain q" PERSISTENT="true" PARAM="STABILIZATION_RATE_IGAIN_Q" MIN="0" MAX="500"/>
              <dl_setting VAR="stabilization_rate_igain.r" TYPE="int32" STEP="1" SHORTNAME="igain r" PERSISTENT="true" PARAM="STABILIZATION_RATE_IGAIN_R" MIN="0" MAX="500"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Att Loop">
              <dl_setting VAR="stabilization_gains.p.x" TYPE="int32" STEP="1" SHORTNAME="pgain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_PGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="8000"/>
              <dl_setting VAR="stabilization_gains.d.x" TYPE="int32" STEP="1" SHORTNAME="dgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.x" TYPE="int32" STEP="1" SHORTNAME="igain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_IGAIN" MIN="0" MAX="800"/>
              <dl_setting VAR="stabilization_gains.dd.x" TYPE="int32" STEP="1" SHORTNAME="ddgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="stabilization_gains.p.y" TYPE="int32" STEP="1" SHORTNAME="pgain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_PGAIN" MIN="1" MAX="8000"/>
              <dl_setting VAR="stabilization_gains.d.y" TYPE="int32" STEP="1" SHORTNAME="dgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.y" TYPE="int32" STEP="1" SHORTNAME="igain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_IGAIN" MIN="0" MAX="800"/>
              <dl_setting VAR="stabilization_gains.dd.y" TYPE="int32" STEP="1" SHORTNAME="ddgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="stabilization_gains.p.z" TYPE="int32" STEP="1" SHORTNAME="pgain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_PGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.d.z" TYPE="int32" STEP="1" SHORTNAME="dgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.z" TYPE="int32" STEP="1" SHORTNAME="igain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_IGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="stabilization_gains.dd.z" TYPE="int32" STEP="1" SHORTNAME="ddgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.p" UNIT="rad/s" STEP="1" SHORTNAME="omega p" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_P" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaP" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.p" STEP="0.05" SHORTNAME="zeta p" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_P" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaP"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.q" UNIT="rad/s" STEP="1" SHORTNAME="omega q" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_Q" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaQ" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.q" STEP="0.05" SHORTNAME="zeta q" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_Q" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaQ"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.r" UNIT="rad/s" STEP="1" SHORTNAME="omega r" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_R" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaR" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.r" STEP="0.05" SHORTNAME="zeta r" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_R" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaR"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="NAV">
              <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
              <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
              <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MIN="-50" MAX="50"/>
              <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MIN="0" MAX="10.0"/>
              <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MIN="-10.0" MAX="0.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Vert Loop">
              <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
              <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MIN="0.2" MAX="0.8"/>
              <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MIN="0" MAX="1"/>
              <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
            <dl_settings NAME="Horiz Loop">
              <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="true" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
              <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
              <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MIN="0" MAX="1"/>
              <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
              <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
              <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
              <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
              <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
              <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="ublox">
            <dl_settings NAME="ucenter">
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_h" STEP="1" SHORTNAME="sw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_l" STEP="1" SHORTNAME="sw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_h" STEP="1" SHORTNAME="hw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_l" STEP="1" SHORTNAME="hw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_init" STEP="100" SHORTNAME="inibaud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_run" STEP="100" SHORTNAME="baud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="Splash3">
        <description>Splash</description>
        <firmware NAME="rotorcraft">
          <configure VALUE="500" NAME="PERIODIC_FREQUENCY"/>
          <target NAME="ap" BOARD="px4fmu_4.0_chibios">
            <module TYPE="sbus" NAME="radio_control">
              <define VALUE="RADIO_AUX1" NAME="RADIO_KILL_SWITCH"/>
            </module>
          </target>
          <target NAME="nps" BOARD="pc">
            <module TYPE="spektrum" NAME="radio_control"/>
            <module TYPE="jsbsim" NAME="fdm"/>
          </target>
          <module NAME="motor_mixing"/>
          <module TYPE="pwm" NAME="actuators">
            <define VALUE="400" NAME="SERVO_HZ"/>
          </module>
          <module TYPE="transparent" NAME="telemetry"/>
          <module TYPE="mpu9250_spi" NAME="imu">
            <configure VALUE="spi1" NAME="IMU_MPU9250_SPI_DEV"/>
            <configure VALUE="SPI_SLAVE2" NAME="IMU_MPU9250_SPI_SLAVE_IDX"/>
            <define VALUE="TRUE" NAME="IMU_MPU9250_READ_MAG"/>
          </module>
          <module TYPE="ublox" NAME="gps">
            <configure VALUE="B57600" NAME="GPS_BAUD"/>
          </module>
          <module TYPE="ubx_ucenter" NAME="gps"/>
          <module TYPE="int_quat" NAME="stabilization"/>
          <module TYPE="rate" NAME="stabilization"/>
          <module TYPE="ekf2" NAME="ins"/>
          <module NAME="tlsf"/>
          <module NAME="pprzlog"/>
          <module TYPE="sd_chibios" NAME="logger"/>
          <module NAME="flight_recorder"/>
          <module TYPE="tfmini" NAME="lidar"/>
          <module NAME="air_data"/>
          <module NAME="send_imu_mag_current"/>
        </firmware>
        <servos DRIVER="Pwm">
          <servo NO="0" NEUTRAL="1150" NAME="MOTOR_0" MIN="1000" MAX="1900"/>
          <servo NO="1" NEUTRAL="1150" NAME="MOTOR_2" MIN="1000" MAX="1900"/>
          <servo NO="2" NEUTRAL="1150" NAME="MOTOR_1" MIN="1000" MAX="1900"/>
          <servo NO="3" NEUTRAL="1150" NAME="MOTOR_3" MIN="1000" MAX="1900"/>
        </servos>
        <commands>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="0"/>
        </commands>
        <section PREFIX="MOTOR_MIXING_" NAME="MIXING">
          <define VALUE="QUAD_X" NAME="TYPE"/>
        </section>
        <command_laws>
          <call FUN="motor_mixing_run(autopilot_get_motors_on(),FALSE,values)"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_RIGHT]" SERVO="MOTOR_0"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_LEFT]" SERVO="MOTOR_1"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_LEFT]" SERVO="MOTOR_2"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_RIGHT]" SERVO="MOTOR_3"/>
        </command_laws>
        <section NAME="MISC">
          <define VALUE="2.5" NAME="NAV_CLIMB_VSPEED"/>
          <define VALUE="-1.0" NAME="NAV_DESCEND_VSPEED"/>
          <define VALUE="TRUE" NAME="NO_RC_THRUST_LIMIT"/>
        </section>
        <section PREFIX="LIS3MDL_" NAME="LIS3MDL">
          <define VALUE="-" NAME="CHAN_X_SIGN"/>
          <define VALUE="+" NAME="CHAN_Y_SIGN"/>
          <define VALUE="-" NAME="CHAN_Z_SIGN"/>
          <define VALUE="0." NAME="MAG_TO_IMU_PHI"/>
          <define VALUE="0." NAME="MAG_TO_IMU_THETA"/>
          <define VALUE="0." NAME="MAG_TO_IMU_PSI"/>
        </section>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="-1.8609825961051705" NAME="MAG_X_CURRENT_COEF"/>
          <define VALUE="-1.6568817208655613" NAME="MAG_Y_CURRENT_COEF"/>
          <define VALUE="16.329866025311297" NAME="MAG_Z_CURRENT_COEF"/>
          <define VALUE="-48" NAME="MAG_X_NEUTRAL"/>
          <define VALUE="69" NAME="MAG_Y_NEUTRAL"/>
          <define VALUE="155" NAME="MAG_Z_NEUTRAL"/>
          <define VALUE="7.646781508055661" NAME="MAG_X_SENS" INTEGER="16"/>
          <define VALUE="7.71865134635356" NAME="MAG_Y_SENS" INTEGER="16"/>
          <define VALUE="7.691679165490501" NAME="MAG_Z_SENS" INTEGER="16"/>
          <define VALUE="0" UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="90." UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.3770441" NAME="H_X"/>
          <define VALUE="0.0193986" NAME="H_Y"/>
          <define VALUE="0.9259921" NAME="H_Z"/>
          <define VALUE="0" NAME="USE_GPS_HEADING"/>
        </section>
        <section PREFIX="STABILIZATION_RATE_" NAME="STABILIZATION_RATE">
          <define VALUE="140" UNIT="deg/s" NAME="SP_MAX_P"/>
          <define VALUE="140" UNIT="deg/s" NAME="SP_MAX_Q"/>
          <define VALUE="140" UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="20" NAME="DEADBAND_P"/>
          <define VALUE="20" NAME="DEADBAND_Q"/>
          <define VALUE="200" NAME="DEADBAND_R"/>
          <define VALUE="400" NAME="GAIN_P"/>
          <define VALUE="400" NAME="GAIN_Q"/>
          <define VALUE="350" NAME="GAIN_R"/>
          <define VALUE="75" NAME="IGAIN_P"/>
          <define VALUE="75" NAME="IGAIN_Q"/>
          <define VALUE="50" NAME="IGAIN_R"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="STABILIZATION_ATTITUDE">
          <define VALUE="35." UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="35." UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="90." UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="200" NAME="DEADBAND_R"/>
          <define VALUE="800" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.85" NAME="REF_ZETA_P"/>
          <define VALUE="300." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(7000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="800" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.85" NAME="REF_ZETA_Q"/>
          <define VALUE="300." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(7000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="500" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.85" NAME="REF_ZETA_R"/>
          <define VALUE="180." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(1800.)" NAME="REF_MAX_RDOT"/>
          <define VALUE="500" NAME="PHI_PGAIN"/>
          <define VALUE="230" NAME="PHI_DGAIN"/>
          <define VALUE="10" NAME="PHI_IGAIN"/>
          <define VALUE="500" NAME="THETA_PGAIN"/>
          <define VALUE="230" NAME="THETA_DGAIN"/>
          <define VALUE="10" NAME="THETA_IGAIN"/>
          <define VALUE="700" NAME="PSI_PGAIN"/>
          <define VALUE="200" NAME="PSI_DGAIN"/>
          <define VALUE="10" NAME="PSI_IGAIN"/>
          <define VALUE="0" NAME="PHI_DDGAIN"/>
          <define VALUE="0" NAME="THETA_DDGAIN"/>
          <define VALUE="0" NAME="PSI_DDGAIN"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="250" NAME="HOVER_KP"/>
          <define VALUE="90" NAME="HOVER_KD"/>
          <define VALUE="5" NAME="HOVER_KI"/>
          <define VALUE="0.5" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="FALSE" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="35" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="TRUE" NAME="USE_SPEED_REF"/>
          <define VALUE="60" NAME="PGAIN"/>
          <define VALUE="100" NAME="DGAIN"/>
          <define VALUE="0" NAME="AGAIN"/>
          <define VALUE="20" NAME="IGAIN"/>
        </section>
        <section PREFIX="NPS_" NAME="SIMULATOR">
          <define VALUE="nw_motor, ne_motor, se_motor, sw_motor" TYPE="string[]" NAME="ACTUATOR_NAMES"/>
          <define VALUE="simple_x_quad_ccw" TYPE="string" NAME="JSBSIM_MODEL"/>
          <define VALUE="nps_sensors_params_default.h" TYPE="string" NAME="SENSORS_PARAMS"/>
          <define VALUE="4" NAME="JS_AXIS_MODE"/>
        </section>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_HOVER_Z_HOLD" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_NAV" NAME="MODE_AUTO2"/>
        </section>
        <section NAME="BAT">
          <define VALUE="12.4" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="12.8" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="13.5" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="17.2" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.05" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
            <message PERIOD="0.05" NAME="OPTICAL_FLOW_HOVER"/>
            <message PERIOD="0.10" NAME="VISUALTARGET"/>
            <message PERIOD="0.1" NAME="VISION_POSITION_ESTIMATE"/>
            <message PERIOD="0.05" NAME="DIVERGENCE"/>
            <message PERIOD="0.02" NAME="DRAGSPEED"/>
            <message PERIOD="5.1" NAME="LOGGER_STATUS"/>
            <message PERIOD="1.2" NAME="LIDAR"/>
            <message PERIOD=".25" NAME="INS_EKF2"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="BEBOP_ACTUATORS"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_FLOAT"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
            <message PERIOD="2.0" NAME="INDI_G"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="vel_guidance" KEY_PRESS="q">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HYBRID_GUIDANCE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1.0" NAME="GPS_INT"/>
            <message PERIOD="1.0" NAME="INS"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="RTCM3">
            <message PERIOD="1" NAME="GPS_RXMRTCM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD="1" NAME="GPS_RTK"/>
          </mode>
        </process>
        <process NAME="FlightRecorder">
          <mode NAME="default">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD=".1" NAME="GPS_INT"/>
            <message PERIOD=".1" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".2" NAME="IMU_MAG_SCALED"/>
            <message PERIOD="0.05" NAME="LIDAR"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="19"/>
            <dl_setting VAR="autopilot.kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot.power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot.mode" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="19" HANDLER="SetModeHandler"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="TwoSeasTwenty" ac_id="200" airframe="airframes/tudelft/twoseastwenty.xml" radio="radios/CDW/cdw_t8fg_sbus.xml" telemetry="telemetry/default_fixedwing.xml" flight_plan="flight_plans/versatile.xml" settings="settings/fixedwing_basic.xml settings/estimation/ins_neutrals.xml" settings_modules="modules/light.xml modules/gps.xml modules/nav_basic_fw.xml modules/guidance_basic_fw.xml modules/stabilization_attitude_fw.xml" gui_color="blue">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="Futaba T10CG with SBUS" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1520" MIN="1107" MAX="1932" FUNCTION="ROLL" CTL="A" AVERAGE="0"/>
        <channel NEUTRAL="1520" MIN="1107" MAX="1932" FUNCTION="PITCH" CTL="B" AVERAGE="0"/>
        <channel NEUTRAL="1932" MIN="1932" MAX="1107" FUNCTION="THROTTLE" CTL="C" AVERAGE="0"/>
        <channel NEUTRAL="1520" MIN="1107" MAX="1932" FUNCTION="YAW" CTL="D" AVERAGE="0"/>
        <channel NEUTRAL="1520" MIN="1932" MAX="1107" FUNCTION="MODE" CTL="E" AVERAGE="1"/>
        <channel NEUTRAL="1520" MIN="1932" MAX="1107" FUNCTION="FLAPS" CTL="F" AVERAGE="1"/>
        <channel NEUTRAL="1520" MIN="1107" MAX="1932" FUNCTION="GAIN1" CTL="G" AVERAGE="0"/>
        <channel NEUTRAL="1520" MIN="1107" MAX="1932" FUNCTION="GAIN2" CTL="H" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="25" qfu="270" name="Versatile" max_dist_from_home="1500" lon0="1.2729" lat0="43.4622" home_mode_height="50" ground_alt="185" alt="260">
          <header>#include &quot;subsystems/datalink/datalink.h&quot;</header>
          <waypoints>
            <waypoint y="0" x="0" name="HOME"/>
            <waypoint y="80" x="20" name="STDBY"/>
            <waypoint y="102.2" x="44.8" name="1"/>
            <waypoint y="122.9" x="-63.5" name="2"/>
            <waypoint y="-21.2" x="-11.5" name="MOB"/>
            <waypoint y="80.4" x="-151.6" name="S1"/>
            <waypoint y="214.9" x="180.1" name="S2"/>
            <waypoint y="-10" x="200" name="AF" alt="215.0"/>
            <waypoint y="20.0" x="80.0" name="TD" alt="185.0"/>
            <waypoint y="-23.0" x="26.9" name="BASELEG"/>
            <waypoint y="0" x="-100" name="_1"/>
            <waypoint y="200" x="-100" name="_2"/>
            <waypoint y="200" x="100" name="_3"/>
            <waypoint y="0" x="100" name="_4"/>
            <waypoint y="35.4" x="-122.5" name="CLIMB"/>
          </waypoints>
          <sectors>
            <sector name="Square">
              <corner name="_1"/>
              <corner name="_2"/>
              <corner name="_3"/>
              <corner name="_4"/>
            </sector>
          </sectors>
          <variables>
            <variable var="roll_step" step="1.0" min="0." max="50." init="15."/>
          </variables>
          <exceptions/>
          <blocks>
            <block name="Wait GPS" no="0">
              <set var="autopilot.kill_throttle" value="1" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Geo init" no="1">
              <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
              <call_once fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Holding point" no="2">
              <set var="autopilot.kill_throttle" value="1" no="0"/>
              <attitude vmode="throttle" throttle="0" roll="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff (wp CLIMB)" name="Takeoff" no="3">
              <exception deroute="Standby" cond="GetPosAlt() > GetAltRef()+25"/>
              <set var="autopilot.kill_throttle" value="0" no="0"/>
              <go wp="CLIMB" no="1"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="4">
              <circle wp="STDBY" radius="nav_radius" no="0"/>
            </block>
            <block strip_icon="line.png" strip_button="Line (wp 1-2)" name="Line 1-2" group="extra_pattern" no="5">
              <call_once fun="nav_line_setup()" no="0"/>
              <call fun="nav_line_run(WP_1, WP_2, nav_radius)" no="1"/>
            </block>
            <block strip_icon="eight.png" strip_button="Figure 8 (wp 1-2)" name="Figure 8 around wp 1" no="6">
              <eight turn_around="2" radius="nav_radius" center="1" no="1"/>
            </block>
            <block strip_icon="oval.png" strip_button="Oval (wp 1-2)" name="Oval 1-2" no="7">
              <oval radius="nav_radius" p2="2" p1="1" no="1"/>
            </block>
            <block strip_icon="mob.png" strip_button="Circle around here" name="MOB" no="8">
              <call_once fun="NavSetWaypointHere(WP_MOB)" no="0"/>
              <circle wp="MOB" radius="100" no="1"/>
            </block>
            <block name="Auto pitch (circle wp 1)" no="9">
              <circle wp="1" throttle="0.7" radius="75" pitch="auto" no="0"/>
            </block>
            <block name="Climb 75% throttle" no="10">
              <circle wp="1" vmode="throttle" until="(10 > PowerVoltage()) || (GetPosAlt() > GetAltRef()+ 1350)" throttle="0.75" radius="50+(GetPosAlt()-GetAltRef())/2" pitch="10" no="0"/>
            </block>
            <block name="Climb 0m/s" no="11">
              <circle wp="1" vmode="climb" until="10 > PowerVoltage()" radius="nav_radius" climb="0" no="0"/>
            </block>
            <block name="Climb 1m/s" no="12">
              <circle wp="1" vmode="climb" until="10 > PowerVoltage()" radius="50+(GetPosAlt()-GetAltRef())/2" pitch="5" climb="1" no="0"/>
            </block>
            <block name="Climb nav_climb m/s" no="13">
              <circle wp="1" vmode="climb" until="(10 > PowerVoltage()) || (GetPosAlt() > GetAltRef()+ 1350)" radius="nav_radius" climb="nav_climb" no="0"/>
            </block>
            <block name="Circle 0% throttle" no="14">
              <circle wp="1" vmode="throttle" until="GetAltRef()+50 > GetPosAlt()" throttle="0.0" radius="nav_radius" pitch="fp_pitch" no="0"/>
              <deroute block="Standby" no="1"/>
            </block>
            <block name="Oval 0% throttle" no="15">
              <oval vmode="throttle" until="GetAltRef()+50 > GetPosAlt()" throttle="0.0" radius="nav_radius" pitch="fp_pitch" p2="2" p1="1" no="1"/>
              <deroute block="Standby" no="2"/>
            </block>
            <block name="Route 1-2" no="16">
              <go wp="2" hmode="route" from="1" approaching_time="0" no="0"/>
            </block>
            <block name="Stack wp 2" no="17">
              <circle wp="2" radius="75" no="0"/>
            </block>
            <block name="Route 2-1" no="18">
              <go wp="1" hmode="route" from="2" approaching_time="0" no="0"/>
            </block>
            <block name="Stack wp 1" no="19">
              <circle wp="1" radius="75" no="0"/>
            </block>
            <block name="Glide 1-2" no="20">
              <go wp="2" vmode="glide" hmode="route" from="1" no="0"/>
              <deroute block="Standby" no="1"/>
            </block>
            <block strip_icon="survey.png" strip_button="Survey (wp S1-S2)" name="Survey S1-S2" no="21">
              <survey_rectangle wp2="S2" wp1="S1" grid="150" no="1"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land right (wp AF-TD)" name="Land Right AF-TD" no="22">
              <set var="nav_radius" value="DEFAULT_CIRCLE_RADIUS" no="0"/>
              <deroute block="land" no="1"/>
            </block>
            <block strip_icon="land-left.png" strip_button="Land left (wp AF-TD)" name="Land Left AF-TD" no="23">
              <set var="nav_radius" value="-DEFAULT_CIRCLE_RADIUS" no="0"/>
              <deroute block="land" no="1"/>
            </block>
            <block name="land" no="24">
              <call_once fun="nav_compute_baseleg(WP_AF, WP_TD, WP_BASELEG, nav_radius)" no="0"/>
              <circle wp="BASELEG" until="NavCircleCount() > 0.5" radius="nav_radius" no="1"/>
              <set var="v_ctl_auto_throttle_cruise_throttle" value="V_CTL_AUTO_THROTTLE_MIN_CRUISE_THROTTLE" no="2"/>
              <circle wp="BASELEG" until="NavQdrCloseTo(DegOfRad(baseleg_out_qdr)-(nav_radius/fabs(nav_radius))*10) && 10 > fabs(GetPosAlt() - WaypointAlt(WP_BASELEG))" radius="nav_radius" no="3"/>
            </block>
            <block name="final" no="25">
              <exception deroute="flare" cond="GetAltRef() + 10 > GetPosAlt()"/>
              <go wp="TD" vmode="glide" hmode="route" from="AF" no="0"/>
            </block>
            <block name="flare" no="26">
              <go wp="TD" vmode="throttle" throttle="0.0" hmode="route" from="AF" approaching_time="0" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0.0" roll="0.0" no="1"/>
            </block>
            <block name="Steps roll -10, +10" no="27">
              <while cond="TRUE" no="0">
                <attitude vmode="alt" until=" stage_time > 6" roll="10.0" alt="250" no="1"/>
                <attitude vmode="alt" until="stage_time > 6" roll="-10.0" alt="250" no="2"/>
              </while>
            </block>
            <block name="Steps roll -20, +20" no="28">
              <while cond="TRUE" no="0">
                <attitude vmode="alt" until=" stage_time > 3" roll="20.0" alt="250" no="1"/>
                <attitude vmode="alt" until="stage_time > 3" roll="-20.0" alt="250" no="2"/>
              </while>
            </block>
            <block name="Steps roll from var" no="29">
              <while cond="TRUE" no="0">
                <attitude vmode="alt" until=" stage_time > 3" roll="roll_step" alt="250" no="1"/>
                <attitude vmode="alt" until="stage_time > 3" roll="-roll_step" alt="250" no="2"/>
              </while>
            </block>
            <block name="Steps pitch -10, +10" no="30">
              <while cond="TRUE" no="0">
                <attitude vmode="alt" until=" stage_time > 2" roll="0.0" pitch="10" alt="250" no="1"/>
                <attitude vmode="alt" until=" stage_time > 2" roll="0.0" pitch="-10" alt="250" no="2"/>
              </while>
            </block>
            <block name="Heading 30" no="31">
              <heading until="FALSE" course="30" alt="GetAltRef()+50" no="0"/>
            </block>
            <block name="For loop (circles wp 1)" no="32">
              <for var="i" to="3" from="0" no="1">
                <circle wp="1" until="NavCircleCount() > 1" radius="DEFAULT_CIRCLE_RADIUS+ $i*10" no="2"/>
              </for>
              <deroute block="Standby" no="4"/>
            </block>
            <block name="Test datalink (go to wp 2)" no="33">
              <exception deroute="Standby" cond="datalink_time > 22"/>
              <go wp="2" hmode="route" from="STDBY" no="0"/>
              <go wp="STDBY" hmode="route" from="2" no="1"/>
            </block>
            <block name="Fly in Square" no="34">
              <exception deroute="Come back wp 1" cond="! InsideSquare(GetPosX(), GetPosY())"/>
              <attitude vmode="alt" roll="0" alt="GetAltRef()+75" no="0"/>
            </block>
            <block name="Come back wp 1" no="35">
              <exception deroute="Fly in Square" cond="InsideSquare(GetPosX(), GetPosY())"/>
              <go wp="1" no="0"/>
              <deroute block="Fly in Square" no="1"/>
            </block>
            <block name="HOME" no="36">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="36" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="35" block_name="Come back wp 1" stage="1">
            <deroute block="Fly in Square" no="1"/>
          </stage>
          <stage block="35" block_name="Come back wp 1" stage="0">
            <go wp="1" no="0"/>
          </stage>
          <stage block="34" block_name="Fly in Square" stage="0">
            <attitude vmode="alt" roll="0" alt="GetAltRef()+75" no="0"/>
          </stage>
          <stage block="33" block_name="Test datalink (go to wp 2)" stage="1">
            <go wp="STDBY" hmode="route" from="2" no="1"/>
          </stage>
          <stage block="33" block_name="Test datalink (go to wp 2)" stage="0">
            <go wp="2" hmode="route" from="STDBY" no="0"/>
          </stage>
          <stage block="32" block_name="For loop (circles wp 1)" stage="4">
            <deroute block="Standby" no="4"/>
          </stage>
          <stage block="32" block_name="For loop (circles wp 1)" stage="2">
            <circle wp="1" until="NavCircleCount() > 1" radius="DEFAULT_CIRCLE_RADIUS+ $i*10" no="2"/>
          </stage>
          <stage block="32" block_name="For loop (circles wp 1)" stage="1">
            <for var="i" to="3" from="0" no="1">
              <circle wp="1" until="NavCircleCount() > 1" radius="DEFAULT_CIRCLE_RADIUS+ $i*10" no="2"/>
            </for>
          </stage>
          <stage block="31" block_name="Heading 30" stage="0">
            <heading until="FALSE" course="30" alt="GetAltRef()+50" no="0"/>
          </stage>
          <stage block="30" block_name="Steps pitch -10, +10" stage="2">
            <attitude vmode="alt" until=" stage_time > 2" roll="0.0" pitch="-10" alt="250" no="2"/>
          </stage>
          <stage block="30" block_name="Steps pitch -10, +10" stage="1">
            <attitude vmode="alt" until=" stage_time > 2" roll="0.0" pitch="10" alt="250" no="1"/>
          </stage>
          <stage block="30" block_name="Steps pitch -10, +10" stage="0">
            <while cond="TRUE" no="0">
              <attitude vmode="alt" until=" stage_time > 2" roll="0.0" pitch="10" alt="250" no="1"/>
              <attitude vmode="alt" until=" stage_time > 2" roll="0.0" pitch="-10" alt="250" no="2"/>
            </while>
          </stage>
          <stage block="29" block_name="Steps roll from var" stage="2">
            <attitude vmode="alt" until="stage_time > 3" roll="-roll_step" alt="250" no="2"/>
          </stage>
          <stage block="29" block_name="Steps roll from var" stage="1">
            <attitude vmode="alt" until=" stage_time > 3" roll="roll_step" alt="250" no="1"/>
          </stage>
          <stage block="29" block_name="Steps roll from var" stage="0">
            <while cond="TRUE" no="0">
              <attitude vmode="alt" until=" stage_time > 3" roll="roll_step" alt="250" no="1"/>
              <attitude vmode="alt" until="stage_time > 3" roll="-roll_step" alt="250" no="2"/>
            </while>
          </stage>
          <stage block="28" block_name="Steps roll -20, +20" stage="2">
            <attitude vmode="alt" until="stage_time > 3" roll="-20.0" alt="250" no="2"/>
          </stage>
          <stage block="28" block_name="Steps roll -20, +20" stage="1">
            <attitude vmode="alt" until=" stage_time > 3" roll="20.0" alt="250" no="1"/>
          </stage>
          <stage block="28" block_name="Steps roll -20, +20" stage="0">
            <while cond="TRUE" no="0">
              <attitude vmode="alt" until=" stage_time > 3" roll="20.0" alt="250" no="1"/>
              <attitude vmode="alt" until="stage_time > 3" roll="-20.0" alt="250" no="2"/>
            </while>
          </stage>
          <stage block="27" block_name="Steps roll -10, +10" stage="2">
            <attitude vmode="alt" until="stage_time > 6" roll="-10.0" alt="250" no="2"/>
          </stage>
          <stage block="27" block_name="Steps roll -10, +10" stage="1">
            <attitude vmode="alt" until=" stage_time > 6" roll="10.0" alt="250" no="1"/>
          </stage>
          <stage block="27" block_name="Steps roll -10, +10" stage="0">
            <while cond="TRUE" no="0">
              <attitude vmode="alt" until=" stage_time > 6" roll="10.0" alt="250" no="1"/>
              <attitude vmode="alt" until="stage_time > 6" roll="-10.0" alt="250" no="2"/>
            </while>
          </stage>
          <stage block="26" block_name="flare" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0.0" roll="0.0" no="1"/>
          </stage>
          <stage block="26" block_name="flare" stage="0">
            <go wp="TD" vmode="throttle" throttle="0.0" hmode="route" from="AF" approaching_time="0" no="0"/>
          </stage>
          <stage block="25" block_name="final" stage="0">
            <go wp="TD" vmode="glide" hmode="route" from="AF" no="0"/>
          </stage>
          <stage block="24" block_name="land" stage="3">
            <circle wp="BASELEG" until="NavQdrCloseTo(DegOfRad(baseleg_out_qdr)-(nav_radius/fabs(nav_radius))*10) && 10 > fabs(GetPosAlt() - WaypointAlt(WP_BASELEG))" radius="nav_radius" no="3"/>
          </stage>
          <stage block="24" block_name="land" stage="2">
            <set var="v_ctl_auto_throttle_cruise_throttle" value="V_CTL_AUTO_THROTTLE_MIN_CRUISE_THROTTLE" no="2"/>
          </stage>
          <stage block="24" block_name="land" stage="1">
            <circle wp="BASELEG" until="NavCircleCount() > 0.5" radius="nav_radius" no="1"/>
          </stage>
          <stage block="24" block_name="land" stage="0">
            <call_once fun="nav_compute_baseleg(WP_AF, WP_TD, WP_BASELEG, nav_radius)" no="0"/>
          </stage>
          <stage block="23" block_name="Land Left AF-TD" stage="1">
            <deroute block="land" no="1"/>
          </stage>
          <stage block="23" block_name="Land Left AF-TD" stage="0">
            <set var="nav_radius" value="-DEFAULT_CIRCLE_RADIUS" no="0"/>
          </stage>
          <stage block="22" block_name="Land Right AF-TD" stage="1">
            <deroute block="land" no="1"/>
          </stage>
          <stage block="22" block_name="Land Right AF-TD" stage="0">
            <set var="nav_radius" value="DEFAULT_CIRCLE_RADIUS" no="0"/>
          </stage>
          <stage block="21" block_name="Survey S1-S2" stage="1">
            <survey_rectangle wp2="S2" wp1="S1" grid="150" no="1"/>
          </stage>
          <stage block="20" block_name="Glide 1-2" stage="1">
            <deroute block="Standby" no="1"/>
          </stage>
          <stage block="20" block_name="Glide 1-2" stage="0">
            <go wp="2" vmode="glide" hmode="route" from="1" no="0"/>
          </stage>
          <stage block="19" block_name="Stack wp 1" stage="0">
            <circle wp="1" radius="75" no="0"/>
          </stage>
          <stage block="18" block_name="Route 2-1" stage="0">
            <go wp="1" hmode="route" from="2" approaching_time="0" no="0"/>
          </stage>
          <stage block="17" block_name="Stack wp 2" stage="0">
            <circle wp="2" radius="75" no="0"/>
          </stage>
          <stage block="16" block_name="Route 1-2" stage="0">
            <go wp="2" hmode="route" from="1" approaching_time="0" no="0"/>
          </stage>
          <stage block="15" block_name="Oval 0% throttle" stage="2">
            <deroute block="Standby" no="2"/>
          </stage>
          <stage block="15" block_name="Oval 0% throttle" stage="1">
            <oval vmode="throttle" until="GetAltRef()+50 > GetPosAlt()" throttle="0.0" radius="nav_radius" pitch="fp_pitch" p2="2" p1="1" no="1"/>
          </stage>
          <stage block="14" block_name="Circle 0% throttle" stage="1">
            <deroute block="Standby" no="1"/>
          </stage>
          <stage block="14" block_name="Circle 0% throttle" stage="0">
            <circle wp="1" vmode="throttle" until="GetAltRef()+50 > GetPosAlt()" throttle="0.0" radius="nav_radius" pitch="fp_pitch" no="0"/>
          </stage>
          <stage block="13" block_name="Climb nav_climb m/s" stage="0">
            <circle wp="1" vmode="climb" until="(10 > PowerVoltage()) || (GetPosAlt() > GetAltRef()+ 1350)" radius="nav_radius" climb="nav_climb" no="0"/>
          </stage>
          <stage block="12" block_name="Climb 1m/s" stage="0">
            <circle wp="1" vmode="climb" until="10 > PowerVoltage()" radius="50+(GetPosAlt()-GetAltRef())/2" pitch="5" climb="1" no="0"/>
          </stage>
          <stage block="11" block_name="Climb 0m/s" stage="0">
            <circle wp="1" vmode="climb" until="10 > PowerVoltage()" radius="nav_radius" climb="0" no="0"/>
          </stage>
          <stage block="10" block_name="Climb 75% throttle" stage="0">
            <circle wp="1" vmode="throttle" until="(10 > PowerVoltage()) || (GetPosAlt() > GetAltRef()+ 1350)" throttle="0.75" radius="50+(GetPosAlt()-GetAltRef())/2" pitch="10" no="0"/>
          </stage>
          <stage block="9" block_name="Auto pitch (circle wp 1)" stage="0">
            <circle wp="1" throttle="0.7" radius="75" pitch="auto" no="0"/>
          </stage>
          <stage block="8" block_name="MOB" stage="1">
            <circle wp="MOB" radius="100" no="1"/>
          </stage>
          <stage block="8" block_name="MOB" stage="0">
            <call_once fun="NavSetWaypointHere(WP_MOB)" no="0"/>
          </stage>
          <stage block="7" block_name="Oval 1-2" stage="1">
            <oval radius="nav_radius" p2="2" p1="1" no="1"/>
          </stage>
          <stage block="6" block_name="Figure 8 around wp 1" stage="1">
            <eight turn_around="2" radius="nav_radius" center="1" no="1"/>
          </stage>
          <stage block="5" block_name="Line 1-2" stage="1">
            <call fun="nav_line_run(WP_1, WP_2, nav_radius)" no="1"/>
          </stage>
          <stage block="5" block_name="Line 1-2" stage="0">
            <call_once fun="nav_line_setup()" no="0"/>
          </stage>
          <stage block="4" block_name="Standby" stage="0">
            <circle wp="STDBY" radius="nav_radius" no="0"/>
          </stage>
          <stage block="3" block_name="Takeoff" stage="1">
            <go wp="CLIMB" no="1"/>
          </stage>
          <stage block="3" block_name="Takeoff" stage="0">
            <set var="autopilot.kill_throttle" value="0" no="0"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="1">
            <attitude vmode="throttle" throttle="0" roll="0" no="1"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="0">
            <set var="autopilot.kill_throttle" value="1" no="0"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="2">
            <call_once fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="0">
            <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <set var="autopilot.kill_throttle" value="1" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings NAME="lights control">
            <dl_settings NAME="lights">
              <dl_setting VAR="strobe_light_mode" VALUES="OFF|ON|BLINK_1|BLINK_2|BLINK_3|COMPLEX_1|COMPLEX_2" STEP="1" MODULE="light/light" MIN="0" MAX="6">
                <strip_button VALUE="1" NAME="LightOn" ICON="on.png" GROUP="light"/>
                <strip_button VALUE="0" NAME="LightOff" ICON="off.png" GROUP="light"/>
              </dl_setting>
              <dl_setting VAR="nav_light_mode" VALUES="OFF|ON|BLINK_1|BLINK_2|BLINK_3" STEP="1" MIN="0" MAX="4"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="nav">
              <dl_setting VAR="nav_radius" STEP="5" MIN="-500" MAX="500"/>
              <dl_setting VAR="nav_course" STEP="5" MIN="0" MAX="359"/>
              <dl_setting VAR="nav_mode" STEP="1" MIN="1" MAX="2"/>
              <dl_setting VAR="nav_climb" STEP="0.5" MIN="-5" MAX="5"/>
              <dl_setting VAR="fp_pitch" STEP="1" MIN="-15" MAX="15"/>
              <dl_setting VAR="fp_throttle" STEP="0.01" MIN="0.0" MAX="1.0"/>
              <dl_setting VAR="fp_climb" STEP="0.1" MIN="-5.0" MAX="5.0"/>
              <dl_setting VAR="nav_shift" STEP="5" SHORTNAME="inc. shift" MODULE="firmwares/fixedwing/nav" MIN="-50" MAX="50" HANDLER="IncreaseShift"/>
              <dl_setting VAR="nav_ground_speed_setpoint" STEP="0.5" SHORTNAME="ground speed" MIN="5" MAX="50"/>
              <dl_setting VAR="nav_ground_speed_pgain" STEP="0.01" SHORTNAME="ground speed pgain" MIN="0" MAX="0.2"/>
              <dl_setting VAR="nav_survey_shift" STEP="5" MIN="50" MAX="500"/>
              <dl_setting VAR="nav_survey_sweep" TYPE="float" STEP="1" SHORTNAME="Distance" MODULE="subsystems/navigation/nav_survey_rectangle" MIN="10" MAX="500"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="control vert">
              <dl_settings NAME="auto_throttle">
                <dl_setting VAR="v_ctl_auto_throttle_cruise_throttle" STEP="0.05" SHORTNAME="cruise throttle" PARAM="V_CTL_AUTO_THROTTLE_NOMINAL_CRUISE_THROTTLE" MODULE="guidance/guidance_v" MIN="0.0" MAX="1" HANDLER="SetCruiseThrottle">
                  <strip_button VALUE="0.1" NAME="Loiter" GROUP="dash_loiter"/>
                  <strip_button VALUE="0" NAME="Cruise" GROUP="dash_loiter"/>
                  <strip_button VALUE="1" NAME="Dash" GROUP="dash_loiter"/>
                </dl_setting>
                <dl_setting VAR="v_ctl_pitch_trim" UNIT="rad" STEP="0.1" SHORTNAME="pitch trim" PARAM="V_CTL_PITCH_TRIM" MIN="-15" MAX="15" ALT_UNIT="deg"/>
                <dl_setting VAR="v_ctl_auto_throttle_pgain" STEP="0.005" SHORTNAME="throttle_pgain" PARAM="V_CTL_AUTO_THROTTLE_PGAIN" MIN="0.00" MAX="0.05"/>
                <dl_setting VAR="v_ctl_auto_throttle_igain" STEP="0.05" SHORTNAME="throttle_igain" PARAM="V_CTL_AUTO_THROTTLE_IGAIN" MIN="0.0" MAX="1"/>
                <dl_setting VAR="v_ctl_auto_throttle_dgain" STEP="0.1" SHORTNAME="throttle_dgain" MIN="0.0" MAX="2"/>
                <dl_setting VAR="v_ctl_auto_throttle_climb_throttle_increment" STEP="0.01" SHORTNAME="throttle_incr" PARAM="V_CTL_AUTO_THROTTLE_CLIMB_THROTTLE_INCREMENT" MIN="0" MAX="1"/>
                <dl_setting VAR="v_ctl_auto_throttle_pitch_of_vz_pgain" STEP="0.01" SHORTNAME="pitch_of_vz" PARAM="V_CTL_AUTO_THROTTLE_PITCH_OF_VZ_PGAIN" MIN="0" MAX="1"/>
                <dl_setting VAR="v_ctl_auto_throttle_pitch_of_vz_dgain" STEP="0.1" SHORTNAME="pitch_of_vz (d)" MIN="-10" MAX="10"/>
              </dl_settings>
              <dl_settings NAME="auto_pitch">
                <dl_setting VAR="v_ctl_auto_pitch_pgain" STEP="0.01" SHORTNAME="pgain" PARAM="V_CTL_AUTO_PITCH_PGAIN" MIN="0.01" MAX="0.1"/>
                <dl_setting VAR="v_ctl_auto_pitch_igain" STEP="0.01" SHORTNAME="igain" PARAM="V_CTL_AUTO_PITCH_IGAIN" MIN="0" MAX="1"/>
              </dl_settings>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="control horiz">
              <dl_settings NAME="trim">
                <dl_setting VAR="ap_state->command_roll_trim" STEP="1" SHORTNAME="roll_trim" PARAM="COMMAND_ROLL_TRIM" MODULE="inter_mcu" MIN="-960" MAX="960"/>
                <dl_setting VAR="ap_state->command_pitch_trim" STEP="1" SHORTNAME="pitch_trim" PARAM="COMMAND_PITCH_TRIM" MIN="-960" MAX="960"/>
                <dl_setting VAR="ap_state->command_yaw_trim" STEP="1" SHORTNAME="yaw_trim" PARAM="COMMAND_YAW_TRIM" MIN="-9000" MAX="9000"/>
              </dl_settings>
              <dl_settings NAME="attitude">
                <dl_setting VAR="h_ctl_roll_pgain" STEP="250" SHORTNAME="roll_pgain" MODULE="stabilization/stabilization_attitude" MIN="000" MAX="25000"/>
                <dl_setting VAR="h_ctl_roll_max_setpoint" UNIT="rad" STEP="1." SHORTNAME="max_roll" PARAM="H_CTL_ROLL_MAX_SETPOINT" MIN="0" MAX="60" ALT_UNIT="deg"/>
                <dl_setting VAR="h_ctl_pitch_pgain" STEP="250" SHORTNAME="pitch_pgain" PARAM="H_CTL_PITCH_PGAIN" MIN="0" MAX="25000"/>
                <dl_setting VAR="h_ctl_pitch_dgain" STEP="10" SHORTNAME="pitch_dgain" PARAM="H_CTL_PITCH_DGAIN" MIN="0" MAX="50000"/>
                <dl_setting VAR="h_ctl_elevator_of_roll" STEP="100" SHORTNAME="elevator_of_roll" PARAM="H_CTL_ELEVATOR_OF_ROLL" MIN="0" MAX="5000"/>
                <dl_setting VAR="h_ctl_aileron_of_throttle" STEP="100" SHORTNAME="aileron_of_throttle" MIN="0" MAX="5000"/>
                <dl_setting VAR="h_ctl_roll_attitude_gain" STEP="250" SHORTNAME="roll attitude pgain" PARAM="H_CTL_ROLL_ATTITUDE_GAIN" MIN="0" MAX="15000"/>
                <dl_setting VAR="h_ctl_roll_rate_gain" STEP="250" SHORTNAME="roll rate gain" PARAM="H_CTL_ROLL_RATE_GAIN" MIN="0" MAX="15000"/>
              </dl_settings>
              <dl_settings NAME="course">
                <dl_setting VAR="h_ctl_course_pgain" STEP="0.05" SHORTNAME="course pgain" PARAM="H_CTL_COURSE_PGAIN" MIN="0.1" MAX="3"/>
                <dl_setting VAR="h_ctl_course_dgain" STEP="0.1" SHORTNAME="course dgain" PARAM="H_CTL_COURSE_DGAIN" MIN="0" MAX="2"/>
                <dl_setting VAR="h_ctl_course_pre_bank_correction" STEP="0.05" SHORTNAME="pre bank cor" PARAM="H_CTL_COURSE_PRE_BANK_CORRECTION" MIN="0.1" MAX="2"/>
                <dl_setting VAR="h_ctl_roll_slew" STEP="0.01" SHORTNAME="roll slew" MIN="0.02" MAX="1"/>
              </dl_settings>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="TwoSeasTwenty">
        <description>  3x parallel redundant FBW-boards with DUAL-SBUS
  1x Lisa-L with XSens Mtig700</description>
        <firmware NAME="fixedwing">
          <define VALUE="8" NAME="RADIO_CONTROL_NB_CHANNEL"/>
          <target NAME="ap" BOARD="lisa_l_1.0">
            <configure VALUE="1" NAME="SEPARATE_FBW"/>
            <configure VALUE="1" NAME="AHRS_ALIGNER_LED"/>
            <configure VALUE="1" NAME="CPU_LED"/>
            <define VALUE="4" NAME="LINK_MCU_LED"/>
            <module TYPE="dummy" NAME="actuators"/>
            <module TYPE="uart" NAME="intermcu">
              <configure VALUE="UART2" NAME="INTERMCU_PORT"/>
            </module>
            <module TYPE="sbus_dual" NAME="radio_control">
              <configure VALUE="UART3" NAME="SBUS1_PORT"/>
              <configure VALUE="UART5" NAME="SBUS2_PORT"/>
            </module>
            <module NAME="control"/>
            <module NAME="navigation"/>
            <module TYPE="xbee_api" NAME="telemetry">
              <configure VALUE="B9600" NAME="MODEM_BAUD"/>
              <configure VALUE="UART3" NAME="MODEM_PORT"/>
            </module>
            <module TYPE="xsens700" NAME="ins">
              <configure VALUE="uart1" NAME="XSENS_PORT"/>
              <configure VALUE="B230400" NAME="XSENS_BAUD"/>
            </module>
            <module NAME="light">
              <define VALUE="6" NAME="LIGHT_LED_STROBE"/>
              <define VALUE="6" NAME="STROBE_LIGHT_MODE_DEFAULT"/>
              <define VALUE="4" NAME="NAV_LIGHT_MODE_DEFAULT"/>
            </module>
            <module TYPE="line" NAME="nav"/>
          </target>
          <target NAME="fbw" BOARD="lisa_m_2.0">
            <configure VALUE="1" NAME="SEPARATE_FBW"/>
            <define VALUE="1" NAME="OUTBACK_CHALLENGE_DANGEROUS_RULE_RC_LOST_NO_AP"/>
            <define VALUE="1" NAME="LINK_MCU_LED"/>
            <configure VALUE="0" NAME="HAS_LUFTBOOT"/>
            <module TYPE="sbus_dual" NAME="radio_control">
              <configure VALUE="UART3" NAME="SBUS1_PORT"/>
              <configure VALUE="UART5" NAME="SBUS2_PORT"/>
            </module>
            <module TYPE="uart" NAME="intermcu">
              <configure VALUE="UART1" NAME="INTERMCU_PORT"/>
            </module>
            <module TYPE="pwm" NAME="actuators"/>
            <define NAME="USE_SERVOS_7AND8"/>
          </target>
          <target NAME="sim" BOARD="pc">
            <module TYPE="ppm" NAME="radio_control"/>
            <module NAME="control"/>
            <module NAME="navigation"/>
            <module TYPE="xbee_api" NAME="telemetry">
              <configure VALUE="B9600" NAME="MODEM_BAUD"/>
              <configure VALUE="UART3" NAME="MODEM_PORT"/>
            </module>
            <module TYPE="xsens700" NAME="ins">
              <configure VALUE="uart1" NAME="XSENS_PORT"/>
              <configure VALUE="B230400" NAME="XSENS_BAUD"/>
            </module>
            <module TYPE="line" NAME="nav"/>
          </target>
          <define NAME="AGR_CLIMB"/>
          <define NAME="LOITER_TRIM"/>
          <define NAME="TUNE_AGRESSIVE_CLIMB"/>
          <define NAME="STRONG_WIND"/>
          <define NAME="WIND_INFO"/>
          <define NAME="WIND_INFO_RET"/>
          <define NAME="RADIO_CONTROL_AUTO1"/>
        </firmware>
        <servos>
          <servo NO="3" NEUTRAL="1850" NAME="THROTTLE_LEFT" MIN="1950" MAX="900"/>
          <servo NO="2" NEUTRAL="1850" NAME="THROTTLE_RIGHT" MIN="1950" MAX="900"/>
          <servo NO="1" NEUTRAL="1500" NAME="AILERONS" MIN="1800" MAX="1120"/>
          <servo NO="0" NEUTRAL="1455" NAME="ELEVATORS" MIN="1900" MAX="1000"/>
          <servo NO="4" NEUTRAL="1555" NAME="RUDDER" MIN="1200" MAX="1875"/>
          <servo NO="5" NEUTRAL="1335" NAME="FLAPS" MIN="1650" MAX="1020"/>
        </servos>
        <commands>
          <axis NAME="THROTTLE" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="FLAPS" FAILSAFE_VALUE="-9600"/>
          <axis NAME="IDLE1" FAILSAFE_VALUE="0"/>
          <axis NAME="IDLE2" FAILSAFE_VALUE="0"/>
        </commands>
        <rc_commands>
          <set VALUE="@THROTTLE" COMMAND="THROTTLE"/>
          <set VALUE="@ROLL" COMMAND="ROLL"/>
          <set VALUE="@PITCH" COMMAND="PITCH"/>
          <set VALUE="@YAW" COMMAND="YAW"/>
          <set VALUE="@FLAPS" COMMAND="FLAPS"/>
          <set VALUE="@GAIN1" COMMAND="IDLE1"/>
          <set VALUE="@GAIN2" COMMAND="IDLE2"/>
        </rc_commands>
        <section PREFIX="AUTO1_" NAME="AUTO1">
          <define VALUE="70" UNIT="deg" NAME="MAX_ROLL"/>
          <define VALUE="50" UNIT="deg" NAME="MAX_PITCH"/>
        </section>
        <section NAME="SERVO_MIXER_GAINS">
          <define VALUE="80" NAME="MAX_BRAKE_RATE"/>
        </section>
        <command_laws>
          <ratelimit VAR="slow_flaps" VALUE="@FLAPS" RATE_MIN="-MAX_BRAKE_RATE" RATE_MAX="MAX_BRAKE_RATE"/>
          <set VALUE="((@THROTTLE)*0.9f) - ((@IDLE1)*0.1f)" SERVO="THROTTLE_LEFT"/>
          <set VALUE="((@THROTTLE)*0.9f) - ((@IDLE2)*0.1f)" SERVO="THROTTLE_RIGHT"/>
          <set VALUE="@ROLL" SERVO="AILERONS"/>
          <set VALUE="@PITCH" SERVO="ELEVATORS"/>
          <set VALUE="@YAW" SERVO="RUDDER"/>
          <set VALUE="$slow_flaps" SERVO="FLAPS"/>
        </command_laws>
        <section PREFIX="FAILSAFE_" NAME="FAILSAFE">
          <define VALUE="1" UNIT="s" NAME="DELAY_WITHOUT_GPS"/>
          <define VALUE="0.0" UNIT="%" NAME="DEFAULT_THROTTLE"/>
          <define VALUE="0.0" UNIT="rad" NAME="DEFAULT_ROLL"/>
          <define VALUE="0.0" UNIT="rad" NAME="DEFAULT_PITCH"/>
          <define VALUE="100" UNIT="m" NAME="HOME_RADIUS"/>
        </section>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="INS_" NAME="INS">
          <define VALUE="0" UNIT="deg" NAME="ROLL_NEUTRAL_DEFAULT"/>
          <define VALUE="0" UNIT="deg" NAME="PITCH_NEUTRAL_DEFAULT"/>
        </section>
        <section PREFIX="H_CTL_" NAME="HORIZONTAL CONTROL">
          <define VALUE="0.85" NAME="COURSE_PGAIN"/>
          <define VALUE="0.6" UNIT="rad" NAME="ROLL_MAX_SETPOINT"/>
          <define VALUE="0.5" UNIT="rad" NAME="PITCH_MAX_SETPOINT"/>
          <define VALUE="-0.5" UNIT="rad" NAME="PITCH_MIN_SETPOINT"/>
          <define VALUE="12000." NAME="ROLL_PGAIN"/>
          <define VALUE="0.0" NAME="AILERON_OF_THROTTLE"/>
          <define VALUE="9000." NAME="PITCH_PGAIN"/>
          <define VALUE="1.5" NAME="PITCH_DGAIN"/>
          <define VALUE="1250" NAME="ELEVATOR_OF_ROLL"/>
        </section>
        <section PREFIX="V_CTL_" NAME="VERTICAL CONTROL">
          <define VALUE="7.6" UNIT="volt" NAME="POWER_CTL_BAT_NOMINAL"/>
          <define VALUE="0.07" NAME="ALTITUDE_PGAIN"/>
          <define VALUE="2." NAME="ALTITUDE_MAX_CLIMB"/>
          <define VALUE="0.55" NAME="AUTO_THROTTLE_NOMINAL_CRUISE_THROTTLE"/>
          <define VALUE="0.30" NAME="AUTO_THROTTLE_MIN_CRUISE_THROTTLE"/>
          <define VALUE="0.80" NAME="AUTO_THROTTLE_MAX_CRUISE_THROTTLE"/>
          <define VALUE="1500" NAME="AUTO_THROTTLE_LOITER_TRIM"/>
          <define VALUE="-500" NAME="AUTO_THROTTLE_DASH_TRIM"/>
          <define VALUE="0.15" UNIT="%/(m/s)" NAME="AUTO_THROTTLE_CLIMB_THROTTLE_INCREMENT"/>
          <define VALUE="0.025" NAME="AUTO_THROTTLE_PGAIN"/>
          <define VALUE="0.1" NAME="AUTO_THROTTLE_IGAIN"/>
          <define VALUE="0.05" NAME="AUTO_THROTTLE_PITCH_OF_VZ_PGAIN"/>
          <define VALUE="0.05" NAME="AUTO_PITCH_PGAIN"/>
          <define VALUE="0.075" NAME="AUTO_PITCH_IGAIN"/>
          <define VALUE="0.35" NAME="AUTO_PITCH_MAX_PITCH"/>
          <define VALUE="-0.35" NAME="AUTO_PITCH_MIN_PITCH"/>
          <define VALUE="0.05" NAME="THROTTLE_SLEW"/>
        </section>
        <section PREFIX="AGR_" NAME="AGGRESSIVE">
          <define VALUE="20" NAME="BLEND_START"/>
          <define VALUE="10" NAME="BLEND_END"/>
          <define VALUE="0.8" NAME="CLIMB_THROTTLE"/>
          <define VALUE="0.3" NAME="CLIMB_PITCH"/>
          <define VALUE="0.1" NAME="DESCENT_THROTTLE"/>
          <define VALUE="-0.25" NAME="DESCENT_PITCH"/>
          <define VALUE="0.8" NAME="CLIMB_NAV_RATIO"/>
          <define VALUE="1.0" NAME="DESCENT_NAV_RATIO"/>
        </section>
        <section NAME="BAT">
          <define VALUE="7.5" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="7.3" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="7.0" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="8.4" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
        <section NAME="SIMU">
          <define VALUE="0.7" NAME="YAW_RESPONSE_FACTOR"/>
        </section>
        <section NAME="MISC">
          <define VALUE="1" NAME="TELEMETRY_MODE_FBW"/>
          <define VALUE="28.0" UNIT="m/s" NAME="NOMINAL_AIRSPEED"/>
          <define VALUE="5." UNIT="s" NAME="CARROT"/>
          <define VALUE="(1.5*MAX_DIST_FROM_HOME)" NAME="KILL_MODE_DISTANCE"/>
          <define VALUE="80." NAME="DEFAULT_CIRCLE_RADIUS"/>
          <define VALUE="ATPL4\\rATRN5\\rATTT80\\r" TYPE="string" NAME="XBEE_INIT"/>
          <define VALUE="180" NAME="COMMAND_ROLL_TRIM"/>
          <define VALUE="-194." NAME="COMMAND_PITCH_TRIM"/>
          <define VALUE="(0.0034912109375*adc)" NAME="VoltageOfAdc(adc)"/>
        </section>
        <section NAME="NAV">
          <define VALUE="0" NAME="NAV_GLIDE_PITCH_TRIM"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Ap">
          <mode NAME="default">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1" NAME="AIRSPEED"/>
            <message PERIOD="5" NAME="ALIVE"/>
            <message PERIOD="0.25" NAME="GPS"/>
            <message PERIOD="1." NAME="NAVIGATION"/>
            <message PERIOD="0.5" NAME="ATTITUDE"/>
            <message PERIOD="0.5" NAME="ESTIMATOR"/>
            <message PERIOD="1.1" NAME="ENERGY"/>
            <message PERIOD="0.5" NAME="WP_MOVED"/>
            <message PERIOD="1.05" NAME="CIRCLE"/>
            <message PERIOD="1.05" NAME="DESIRED"/>
            <message PERIOD="1.2" NAME="SEGMENT"/>
            <message PERIOD="2.1" NAME="CALIBRATION"/>
            <message PERIOD="9." NAME="NAVIGATION_REF"/>
            <message PERIOD="5." NAME="PPRZ_MODE"/>
            <message PERIOD="5." NAME="SETTINGS"/>
            <message PERIOD="5." NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="1.5" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="IR_SENSORS"/>
            <message PERIOD="1.1" NAME="IMU_GYRO"/>
            <message PERIOD="2.1" NAME="SURVEY"/>
            <message PERIOD="2.0" NAME="GPS_SOL"/>
            <message PERIOD="0.5" NAME="CAM"/>
            <message PERIOD="1.0" NAME="CAM_POINT"/>
            <message PERIOD="5" NAME="COMMANDS"/>
            <message PERIOD="2" NAME="FBW_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
          </mode>
          <mode NAME="minimal">
            <message PERIOD="5" NAME="ALIVE"/>
            <message PERIOD="4" NAME="ATTITUDE"/>
            <message PERIOD="1.05" NAME="GPS"/>
            <message PERIOD="1.3" NAME="ESTIMATOR"/>
            <message PERIOD="1.4" NAME="WP_MOVED"/>
            <message PERIOD="3.05" NAME="CIRCLE"/>
            <message PERIOD="4.05" NAME="DESIRED"/>
            <message PERIOD="1.1" NAME="ENERGY"/>
            <message PERIOD="3.2" NAME="SEGMENT"/>
            <message PERIOD="5.1" NAME="CALIBRATION"/>
            <message PERIOD="9." NAME="NAVIGATION_REF"/>
            <message PERIOD="3." NAME="NAVIGATION"/>
            <message PERIOD="5." NAME="PPRZ_MODE"/>
            <message PERIOD="5." NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="1.5" NAME="DL_VALUE"/>
            <message PERIOD="5.2" NAME="IR_SENSORS"/>
            <message PERIOD="10.1" NAME="IMU_GYRO"/>
            <message PERIOD="2.1" NAME="SURVEY"/>
            <message PERIOD="5.0" NAME="GPS_SOL"/>
          </mode>
          <mode NAME="extremal">
            <message PERIOD="5" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="GPS"/>
            <message PERIOD="5.3" NAME="ESTIMATOR"/>
            <message PERIOD="10.1" NAME="ENERGY"/>
            <message PERIOD="10.2" NAME="DESIRED"/>
            <message PERIOD="5.4" NAME="NAVIGATION"/>
            <message PERIOD="5.5" NAME="PPRZ_MODE"/>
            <message PERIOD="7." NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="5.7" NAME="DATALINK_REPORT"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.5" NAME="BARO_RAW"/>
            <message PERIOD="0.5" NAME="IR_SENSORS"/>
            <message PERIOD="0.1" NAME="IMU_GYRO_RAW"/>
          </mode>
        </process>
        <process NAME="Fbw">
          <mode NAME="default">
            <message PERIOD="5" NAME="COMMANDS"/>
            <message PERIOD="2" NAME="FBW_STATUS"/>
            <message PERIOD="5" NAME="ACTUATORS"/>
          </mode>
          <mode NAME="debug">
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="COMMANDS"/>
            <message PERIOD="1" NAME="FBW_STATUS"/>
            <message PERIOD="5" NAME="ACTUATORS"/>
          </mode>
        </process>
      </telemetry>
      <settings>
        <dl_settings>
          <dl_settings NAME="flight params">
            <dl_setting VAR="flight_altitude" STEP="10" SHORTNAME="altitude" MIN="0" MAX="1000"/>
            <dl_setting VAR="nav_course" STEP="1" MIN="0" MAX="360"/>
            <dl_setting VAR="nav_shift" STEP="5" SHORTNAME="inc. shift" MODULE="firmwares/fixedwing/nav" MIN="-10" MAX="10" HANDLER="IncreaseShift"/>
            <dl_setting VAR="autopilot.flight_time" STEP="1" SHORTNAME="flight time" MODULE="autopilot" MIN="0" MAX="0" HANDLER="ResetFlightTimeAndLaunch"/>
            <dl_setting VAR="nav_radius" STEP="10" MODULE="firmwares/fixedwing/nav" MIN="-200" MAX="200" HANDLER="SetNavRadius">
              <strip_button VALUE="1" NAME="Circle right" ICON="circle-right.png" GROUP="circle"/>
              <strip_button VALUE="-1" NAME="Circle left" ICON="circle-left.png" GROUP="circle"/>
              <key_press VALUE="1" KEY="greater"/>
              <key_press VALUE="-1" KEY="less"/>
            </dl_setting>
          </dl_settings>
          <dl_settings NAME="mode">
            <dl_setting VAR="autopilot.mode" VALUES="MANUAL|AUTO1|AUTO2|HOME|NOGPS|FAILSAFE" STEP="1" MODULE="autopilot" MIN="0" MAX="2"/>
            <dl_setting VAR="autopilot.launch" STEP="1" MIN="0" MAX="1"/>
            <dl_setting VAR="autopilot.kill_throttle" STEP="1" MIN="0" MAX="1"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings>
        <dl_settings>
          <dl_settings NAME="ins">
            <dl_setting VAR="ins_roll_neutral" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="roll_neutral" PERSISTENT="true" PARAM="INS_ROLL_NEUTRAL_DEFAULT" MODULE="subsystems/ahrs" MIN="-15" MAX="15" ALT_UNIT="deg"/>
            <dl_setting VAR="ins_pitch_neutral" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="pitch_neutral" PERSISTENT="true" PARAM="INS_PITCH_NEUTRAL_DEFAULT" MIN="-15" MAX="15" ALT_UNIT="deg"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="Walkera_GeniusV1" ac_id="134" airframe="airframes/tudelft/IMAV2013/walkera_genius_v1.xml" radio="radios/cockpitSX.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/rotorcraft_basic.xml" settings="settings/rotorcraft_basic.xml" settings_modules="modules/ahrs_int_cmpl_quat.xml modules/stabilization_int_quat.xml modules/nav_basic_rotorcraft.xml modules/guidance_rotorcraft.xml modules/gps.xml modules/imu_common.xml modules/radio_control_superbitrf_rc.xml modules/gps_ubx_ucenter.xml" gui_color="orange">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitSX (easy)" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1500" MIN="2050" MAX="950" FUNCTION="ROLL" CTL="D" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="2050" MAX="950" FUNCTION="PITCH" CTL="C" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="950" MAX="2050" FUNCTION="YAW" CTL="B" AVERAGE="0"/>
        <channel NEUTRAL="1223" MIN="1223" MAX="2050" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="2050" MAX="950" FUNCTION="UNUSED" CTL="G" AVERAGE="1"/>
        <channel NEUTRAL="1496" MIN="2050" MAX="948" FUNCTION="GAIN1" CTL="E" AVERAGE="1"/>
        <channel NEUTRAL="1500" MIN="2050" MAX="948" FUNCTION="MODE" CTL="PHAUX2" AVERAGE="1"/>
      </radio>
      <dump>
        <flight_plan security_height="2" name="Rotorcraft Basic (Enac)" max_dist_from_home="150" lon0="1 28 52.61" lat0="43 33 50.83" ground_alt="147" alt="152">
          <header>#include &quot;autopilot.h&quot;</header>
          <waypoints>
            <waypoint y="0.0" x="0.0" name="HOME"/>
            <waypoint y="5.0" x="0.0" name="CLIMB"/>
            <waypoint y="-5.0" x="-2.0" name="STDBY"/>
            <waypoint y="-13.9" x="3.6" name="p1"/>
            <waypoint y="-48.2" x="27.5" name="p2"/>
            <waypoint y="-19.6" x="16.7" name="p3"/>
            <waypoint y="-40.7" x="13.7" name="p4"/>
            <waypoint y="-50" x="-20" name="CAM" height="2."/>
            <waypoint y="-10.9" x="5.6" name="TD"/>
          </waypoints>
          <blocks>
            <block name="Wait GPS" no="0">
              <call_once fun="NavKillThrottle()" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Geo init" no="1">
              <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
              <call_once fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Holding point" no="2">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="Start Engine" no="3">
              <call_once fun="NavResurrect()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff" name="Takeoff" no="4">
              <exception deroute="Standby" cond="stateGetPositionEnu_f() @DEREF z @GT 2.0"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="5">
              <stay wp="STDBY" no="0"/>
            </block>
            <block name="stay_p1" no="6">
              <stay wp="p1" no="0"/>
            </block>
            <block name="go_p2" no="7">
              <call_once fun="nav_set_heading_deg(90)" no="0"/>
              <go wp="p2" no="1"/>
              <deroute block="stay_p1" no="2"/>
            </block>
            <block name="line_p1_p2" no="8">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <stay wp="p2" until="stage_time>10" no="1"/>
              <go wp="p1" hmode="route" from="p2" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="route" no="9">
              <go wp="p3" hmode="route" from="p1" no="0"/>
              <go wp="p4" hmode="route" from="p3" no="1"/>
              <go wp="p1" hmode="route" from="p4" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="Oval" no="10">
              <oval radius="-1" p2="p2" p1="p1" no="1"/>
            </block>
            <block name="test yaw" no="11">
              <go wp="p1" no="0"/>
              <for var="i" to="16" from="1" no="2">
                <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
              </for>
              <deroute block="Standby" no="5"/>
            </block>
            <block pre_call="nav_set_heading_towards_waypoint(WP_CAM)" name="circle CAM" no="12">
              <circle wp="CAM" radius="nav_radius" no="0"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land Here" name="land here" no="13">
              <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
            </block>
            <block name="land" no="14">
              <go wp="TD" no="0"/>
            </block>
            <block name="flare" no="15">
              <exception deroute="Holding point" cond="NavDetectGround()"/>
              <exception deroute="landed" cond="!nav_is_in_flight()"/>
              <call_once fun="NavStartDetectGround()" no="0"/>
              <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
            </block>
            <block name="landed" no="16">
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
            </block>
            <block name="HOME" no="17">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="17" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="16" block_name="landed" stage="0">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
          </stage>
          <stage block="15" block_name="flare" stage="1">
            <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
          </stage>
          <stage block="15" block_name="flare" stage="0">
            <call_once fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="14" block_name="land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="13" block_name="land here" stage="0">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="12" block_name="circle CAM" stage="0">
            <circle wp="CAM" radius="nav_radius" no="0"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="5">
            <deroute block="Standby" no="5"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="3">
            <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="2">
            <for var="i" to="16" from="1" no="2">
              <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
            </for>
          </stage>
          <stage block="11" block_name="test yaw" stage="0">
            <go wp="p1" no="0"/>
          </stage>
          <stage block="10" block_name="Oval" stage="1">
            <oval radius="-1" p2="p2" p1="p1" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="9" block_name="route" stage="2">
            <go wp="p1" hmode="route" from="p4" no="2"/>
          </stage>
          <stage block="9" block_name="route" stage="1">
            <go wp="p4" hmode="route" from="p3" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="0">
            <go wp="p3" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="2">
            <go wp="p1" hmode="route" from="p2" no="2"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="1">
            <stay wp="p2" until="stage_time>10" no="1"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="2">
            <deroute block="stay_p1" no="2"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="1">
            <go wp="p2" no="1"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="0">
            <call_once fun="nav_set_heading_deg(90)" no="0"/>
          </stage>
          <stage block="6" block_name="stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="5" block_name="Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="1">
            <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="0">
            <call_once fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="2">
            <call_once fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="0">
            <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
              <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
              <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
              <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
              <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Att Loop">
              <dl_setting VAR="stabilization_gains.p.x" TYPE="int32" STEP="1" SHORTNAME="pgain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_PGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="8000"/>
              <dl_setting VAR="stabilization_gains.d.x" TYPE="int32" STEP="1" SHORTNAME="dgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.x" TYPE="int32" STEP="1" SHORTNAME="igain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_IGAIN" MIN="0" MAX="800"/>
              <dl_setting VAR="stabilization_gains.dd.x" TYPE="int32" STEP="1" SHORTNAME="ddgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="stabilization_gains.p.y" TYPE="int32" STEP="1" SHORTNAME="pgain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_PGAIN" MIN="1" MAX="8000"/>
              <dl_setting VAR="stabilization_gains.d.y" TYPE="int32" STEP="1" SHORTNAME="dgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.y" TYPE="int32" STEP="1" SHORTNAME="igain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_IGAIN" MIN="0" MAX="800"/>
              <dl_setting VAR="stabilization_gains.dd.y" TYPE="int32" STEP="1" SHORTNAME="ddgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="stabilization_gains.p.z" TYPE="int32" STEP="1" SHORTNAME="pgain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_PGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.d.z" TYPE="int32" STEP="1" SHORTNAME="dgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.z" TYPE="int32" STEP="1" SHORTNAME="igain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_IGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="stabilization_gains.dd.z" TYPE="int32" STEP="1" SHORTNAME="ddgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.p" UNIT="rad/s" STEP="1" SHORTNAME="omega p" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_P" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaP" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.p" STEP="0.05" SHORTNAME="zeta p" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_P" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaP"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.q" UNIT="rad/s" STEP="1" SHORTNAME="omega q" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_Q" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaQ" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.q" STEP="0.05" SHORTNAME="zeta q" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_Q" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaQ"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.r" UNIT="rad/s" STEP="1" SHORTNAME="omega r" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_R" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaR" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.r" STEP="0.05" SHORTNAME="zeta r" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_R" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaR"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="NAV">
              <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
              <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
              <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MIN="-50" MAX="50"/>
              <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MIN="0" MAX="10.0"/>
              <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MIN="-10.0" MAX="0.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Vert Loop">
              <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
              <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MIN="0.2" MAX="0.8"/>
              <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MIN="0" MAX="1"/>
              <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
            <dl_settings NAME="Horiz Loop">
              <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="true" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
              <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
              <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MIN="0" MAX="1"/>
              <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
              <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
              <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
              <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
              <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
              <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="Superbit">
              <dl_setting VAR="settings_store_flag" VALUES="Store" STEP="1" SHORTNAME="store" MODULE="subsystems/settings" MIN="1" MAX="1" HANDLER="StoreSettings"/>
              <dl_setting VAR="superbitrf.bind_mfg_id32" TYPE="uint32" STEP="1" SHORTNAME="mfg_id" PERSISTENT="true" MODULE="subsystems/datalink/superbitrf" MIN="0" MAX="4294967295" HANDLER="set_mfg_id"/>
              <dl_setting VAR="superbitrf.num_channels" TYPE="uint8" STEP="1" SHORTNAME="#chan" PERSISTENT="true" MODULE="subsystems/datalink/superbitrf" MIN="0" MAX="14"/>
              <dl_setting VAR="superbitrf.protocol" TYPE="uint8" STEP="1" SHORTNAME="prot" PERSISTENT="true" MODULE="subsystems/datalink/superbitrf" MIN="0" MAX="32" HANDLER="set_protocol"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="ublox">
            <dl_settings NAME="ucenter">
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_h" STEP="1" SHORTNAME="sw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_l" STEP="1" SHORTNAME="sw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_h" STEP="1" SHORTNAME="hw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_l" STEP="1" SHORTNAME="hw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_init" STEP="100" SHORTNAME="inibaud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_run" STEP="100" SHORTNAME="baud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe name="walkera_genius_v1">
        <servos driver="Pwm">
          <servo name="CIC_FRONT" no="4" min="570" neutral="1600" max="2200"/>
          <servo name="CIC_RIGHT" no="5" min="570" neutral="1400" max="2200"/>
          <servo name="CIC_LEFT" no="0" min="570" neutral="1600" max="2200"/>
          <servo name="TAIL" no="2" min="0" neutral="0" max="500"/>
          <servo name="GAS" no="3" min="0" neutral="10" max="500"/>
        </servos>
        <commands>
          <axis name="PITCH" failsafe_value="0"/>
          <axis name="ROLL" failsafe_value="0"/>
          <axis name="YAW" failsafe_value="0"/>
          <axis name="THRUST" failsafe_value="0"/>
        </commands>
        <command_laws>
          <let var="hoverpower" value=".75*MAX_PPRZ"/>
          <let var="hoverstick" value=".35*MAX_PPRZ"/>
          <let var="halfway" value="(@THRUST >= ($hoverstick) ? 1 : 0)"/>
          <let var="collective" value="@THRUST * 0.4 + (MAX_PPRZ*0.01)"/>
          <let var="gas" value="($hoverpower) + $halfway * (((@THRUST) - ($hoverstick)) * (MAX_PPRZ - ($hoverpower))) / (MAX_PPRZ - ($hoverstick))  + (1 - $halfway) * ((@THRUST - ($hoverstick)) * ($hoverpower)) / ($hoverstick)"/>
          <set servo="GAS" value="$gas"/>
          <set servo="CIC_LEFT" value="((@PITCH*0.5*0.5)-(@ROLL*0.5*0.73))-($collective)"/>
          <set servo="CIC_RIGHT" value="((-@PITCH*0.5*0.5)-(@ROLL*0.5*0.73))+($collective)"/>
          <set servo="CIC_FRONT" value="-@PITCH*0.5-($collective)"/>
          <set servo="TAIL" value="@YAW+0.4*$gas"/>
        </command_laws>
        <section name="IMU" prefix="IMU_">
          <define name="BODY_TO_IMU_PHI" value="185." unit="deg"/>
          <define name="BODY_TO_IMU_THETA" value="0." unit="deg"/>
          <define name="BODY_TO_IMU_PSI" value="0." unit="deg"/>
          <define name="ACCEL_X_NEUTRAL" value="0"/>
          <define name="ACCEL_Y_NEUTRAL" value="0"/>
          <define name="ACCEL_Z_NEUTRAL" value="0"/>
          <define name="MAG_X_NEUTRAL" value="396"/>
          <define name="MAG_Y_NEUTRAL" value="-260"/>
          <define name="MAG_Z_NEUTRAL" value="-91"/>
          <define name="MAG_X_SENS" value="3.71635905504" integer="16"/>
          <define name="MAG_Y_SENS" value="3.5526454063" integer="16"/>
          <define name="MAG_Z_SENS" value="3.52339566014" integer="16"/>
          <define name="MAG_X_CURRENT_COEF" value="-0.390312445109"/>
          <define name="MAG_Y_CURRENT_COEF" value="-0.068976232866"/>
          <define name="MAG_Z_CURRENT_COEF" value="-0.181415585657"/>
        </section>
        <section name="AUTOPILOT">
          <define name="MODE_MANUAL" value="AP_MODE_ATTITUDE_DIRECT"/>
          <define name="MODE_AUTO1" value="AP_MODE_ATTITUDE_Z_HOLD"/>
          <define name="MODE_AUTO2" value="AP_MODE_ATTITUDE_DIRECT"/>
        </section>
        <section name="BAT">
          <define name="MILLIAMP_AT_FULL_THROTTLE" value="3700"/>
          <define name="CATASTROPHIC_BAT_LEVEL" value="3.4" unit="V"/>
        </section>
        <section name="STABILIZATION_ATTITUDE" prefix="STABILIZATION_ATTITUDE_">
          <define name="SP_MAX_PHI" value="45." unit="deg"/>
          <define name="SP_MAX_THETA" value="45." unit="deg"/>
          <define name="SP_MAX_R" value="90." unit="deg/s"/>
          <define name="DEADBAND_R" value="250"/>
          <define name="DEADBAND_A" value="250"/>
          <define name="REF_OMEGA_P" value="3000" unit="deg/s"/>
          <define name="REF_ZETA_P" value="0.85"/>
          <define name="REF_MAX_P" value="300." unit="deg/s"/>
          <define name="REF_MAX_PDOT" value="RadOfDeg(7000.)"/>
          <define name="REF_OMEGA_Q" value="3000" unit="deg/s"/>
          <define name="REF_ZETA_Q" value="0.85"/>
          <define name="REF_MAX_Q" value="300." unit="deg/s"/>
          <define name="REF_MAX_QDOT" value="RadOfDeg(7000.)"/>
          <define name="REF_OMEGA_R" value="3000" unit="deg/s"/>
          <define name="REF_ZETA_R" value="0.85"/>
          <define name="REF_MAX_R" value="300." unit="deg/s"/>
          <define name="REF_MAX_RDOT" value="RadOfDeg(7000.)"/>
          <define name="PHI_PGAIN" value="3052"/>
          <define name="PHI_DGAIN" value="108"/>
          <define name="PHI_IGAIN" value="0"/>
          <define name="THETA_PGAIN" value="3052"/>
          <define name="THETA_DGAIN" value="108"/>
          <define name="THETA_IGAIN" value="0"/>
          <define name="PSI_PGAIN" value="944"/>
          <define name="PSI_DGAIN" value="300"/>
          <define name="PSI_IGAIN" value="10"/>
          <define name="PHI_DDGAIN" value="0"/>
          <define name="THETA_DDGAIN" value="0"/>
          <define name="PSI_DDGAIN" value=" 300"/>
          <define name="PHI_AGAIN" value="0"/>
          <define name="THETA_AGAIN" value="0"/>
          <define name="PSI_AGAIN" value="0"/>
        </section>
        <section name="INS" prefix="INS_"/>
        <section name="GUIDANCE_V" prefix="GUIDANCE_V_">
          <define name="HOVER_KP" value="281"/>
          <define name="HOVER_KD" value="66"/>
          <define name="HOVER_KI" value="0"/>
          <define name="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" value="0.9"/>
        </section>
        <section name="AHRS" prefix="AHRS_">
          <define name="H_X" value=" 0.47577"/>
          <define name="H_Y" value=" 0.11811"/>
          <define name="H_Z" value=" 0.87161"/>
        </section>
        <section name="GUIDANCE_H" prefix="GUIDANCE_H_">
          <define name="PGAIN" value="50"/>
          <define name="DGAIN" value="50"/>
          <define name="IGAIN" value="0"/>
        </section>
        <modules main_freq="512">
          <module name="gps" type="ubx_ucenter"/>
          <module name="send_imu_mag_current"/>
        </modules>
        <firmware name="rotorcraft">
          <target name="ap" board="lisa_s_1.0">
            <module name="radio_control" type="superbitrf_rc">
              <define name="RADIO_TRANSMITTER_ID" value="2008496626"/>
              <define name="RADIO_TRANSMITTER_CHAN" value="6"/>
              <define name="RADIO_TRANSMITTER_PROTOCOL" value="0x01"/>
            </module>
            <configure name="AHRS_PROPAGATE_FREQUENCY" value="500"/>
          </target>
          <module name="actuators" type="pwm">
            <define name="TIM5_SERVO_HZ" value="2000"/>
            <define name="SERVO_HZ" value="300"/>
            <define name="USE_SERVOS_1AND2"/>
          </module>
          <module name="telemetry" type="superbitrf"/>
          <module name="imu" type="lisa_s_v1.0"/>
          <module name="gps" type="ublox"/>
          <module name="stabilization" type="int_quat"/>
          <module name="ahrs" type="int_cmpl_quat"/>
          <module name="ins"/>
        </firmware>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.05" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
            <message PERIOD="0.05" NAME="OPTICAL_FLOW_HOVER"/>
            <message PERIOD="0.10" NAME="VISUALTARGET"/>
            <message PERIOD="0.1" NAME="VISION_POSITION_ESTIMATE"/>
            <message PERIOD="0.05" NAME="DIVERGENCE"/>
            <message PERIOD="0.02" NAME="DRAGSPEED"/>
            <message PERIOD="5.1" NAME="LOGGER_STATUS"/>
            <message PERIOD="1.2" NAME="LIDAR"/>
            <message PERIOD=".25" NAME="INS_EKF2"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="BEBOP_ACTUATORS"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_FLOAT"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
            <message PERIOD="2.0" NAME="INDI_G"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="vel_guidance" KEY_PRESS="q">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HYBRID_GUIDANCE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1.0" NAME="GPS_INT"/>
            <message PERIOD="1.0" NAME="INS"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="RTCM3">
            <message PERIOD="1" NAME="GPS_RXMRTCM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD="1" NAME="GPS_RTK"/>
          </mode>
        </process>
        <process NAME="FlightRecorder">
          <mode NAME="default">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD=".1" NAME="GPS_INT"/>
            <message PERIOD=".1" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".2" NAME="IMU_MAG_SCALED"/>
            <message PERIOD="0.05" NAME="LIDAR"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="19"/>
            <dl_setting VAR="autopilot.kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot.power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot.mode" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="19" HANDLER="SetModeHandler"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="Walkera_V120D02S" ac_id="133" airframe="airframes/tudelft/IMAV2013/walkera_V120D02S.xml" radio="radios/cockpitSX.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/rotorcraft_basic.xml" settings="settings/rotorcraft_basic.xml" settings_modules="modules/ahrs_int_cmpl_quat.xml modules/stabilization_int_quat.xml modules/nav_basic_rotorcraft.xml modules/guidance_rotorcraft.xml modules/gps.xml modules/imu_common.xml modules/radio_control_superbitrf_rc.xml modules/gps_ubx_ucenter.xml" gui_color="green">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitSX (easy)" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1500" MIN="2050" MAX="950" FUNCTION="ROLL" CTL="D" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="2050" MAX="950" FUNCTION="PITCH" CTL="C" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="950" MAX="2050" FUNCTION="YAW" CTL="B" AVERAGE="0"/>
        <channel NEUTRAL="1223" MIN="1223" MAX="2050" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="2050" MAX="950" FUNCTION="UNUSED" CTL="G" AVERAGE="1"/>
        <channel NEUTRAL="1496" MIN="2050" MAX="948" FUNCTION="GAIN1" CTL="E" AVERAGE="1"/>
        <channel NEUTRAL="1500" MIN="2050" MAX="948" FUNCTION="MODE" CTL="PHAUX2" AVERAGE="1"/>
      </radio>
      <dump>
        <flight_plan security_height="2" name="Rotorcraft Basic (Enac)" max_dist_from_home="150" lon0="1 28 52.61" lat0="43 33 50.83" ground_alt="147" alt="152">
          <header>#include &quot;autopilot.h&quot;</header>
          <waypoints>
            <waypoint y="0.0" x="0.0" name="HOME"/>
            <waypoint y="5.0" x="0.0" name="CLIMB"/>
            <waypoint y="-5.0" x="-2.0" name="STDBY"/>
            <waypoint y="-13.9" x="3.6" name="p1"/>
            <waypoint y="-48.2" x="27.5" name="p2"/>
            <waypoint y="-19.6" x="16.7" name="p3"/>
            <waypoint y="-40.7" x="13.7" name="p4"/>
            <waypoint y="-50" x="-20" name="CAM" height="2."/>
            <waypoint y="-10.9" x="5.6" name="TD"/>
          </waypoints>
          <blocks>
            <block name="Wait GPS" no="0">
              <call_once fun="NavKillThrottle()" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Geo init" no="1">
              <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
              <call_once fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Holding point" no="2">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="Start Engine" no="3">
              <call_once fun="NavResurrect()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff" name="Takeoff" no="4">
              <exception deroute="Standby" cond="stateGetPositionEnu_f() @DEREF z @GT 2.0"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="5">
              <stay wp="STDBY" no="0"/>
            </block>
            <block name="stay_p1" no="6">
              <stay wp="p1" no="0"/>
            </block>
            <block name="go_p2" no="7">
              <call_once fun="nav_set_heading_deg(90)" no="0"/>
              <go wp="p2" no="1"/>
              <deroute block="stay_p1" no="2"/>
            </block>
            <block name="line_p1_p2" no="8">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <stay wp="p2" until="stage_time>10" no="1"/>
              <go wp="p1" hmode="route" from="p2" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="route" no="9">
              <go wp="p3" hmode="route" from="p1" no="0"/>
              <go wp="p4" hmode="route" from="p3" no="1"/>
              <go wp="p1" hmode="route" from="p4" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="Oval" no="10">
              <oval radius="-1" p2="p2" p1="p1" no="1"/>
            </block>
            <block name="test yaw" no="11">
              <go wp="p1" no="0"/>
              <for var="i" to="16" from="1" no="2">
                <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
              </for>
              <deroute block="Standby" no="5"/>
            </block>
            <block pre_call="nav_set_heading_towards_waypoint(WP_CAM)" name="circle CAM" no="12">
              <circle wp="CAM" radius="nav_radius" no="0"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land Here" name="land here" no="13">
              <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
            </block>
            <block name="land" no="14">
              <go wp="TD" no="0"/>
            </block>
            <block name="flare" no="15">
              <exception deroute="Holding point" cond="NavDetectGround()"/>
              <exception deroute="landed" cond="!nav_is_in_flight()"/>
              <call_once fun="NavStartDetectGround()" no="0"/>
              <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
            </block>
            <block name="landed" no="16">
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
            </block>
            <block name="HOME" no="17">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="17" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="16" block_name="landed" stage="0">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
          </stage>
          <stage block="15" block_name="flare" stage="1">
            <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
          </stage>
          <stage block="15" block_name="flare" stage="0">
            <call_once fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="14" block_name="land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="13" block_name="land here" stage="0">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="12" block_name="circle CAM" stage="0">
            <circle wp="CAM" radius="nav_radius" no="0"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="5">
            <deroute block="Standby" no="5"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="3">
            <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="2">
            <for var="i" to="16" from="1" no="2">
              <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
            </for>
          </stage>
          <stage block="11" block_name="test yaw" stage="0">
            <go wp="p1" no="0"/>
          </stage>
          <stage block="10" block_name="Oval" stage="1">
            <oval radius="-1" p2="p2" p1="p1" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="9" block_name="route" stage="2">
            <go wp="p1" hmode="route" from="p4" no="2"/>
          </stage>
          <stage block="9" block_name="route" stage="1">
            <go wp="p4" hmode="route" from="p3" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="0">
            <go wp="p3" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="2">
            <go wp="p1" hmode="route" from="p2" no="2"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="1">
            <stay wp="p2" until="stage_time>10" no="1"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="2">
            <deroute block="stay_p1" no="2"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="1">
            <go wp="p2" no="1"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="0">
            <call_once fun="nav_set_heading_deg(90)" no="0"/>
          </stage>
          <stage block="6" block_name="stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="5" block_name="Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="1">
            <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="0">
            <call_once fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="2">
            <call_once fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="0">
            <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
              <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
              <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
              <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
              <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Att Loop">
              <dl_setting VAR="stabilization_gains.p.x" TYPE="int32" STEP="1" SHORTNAME="pgain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_PGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="8000"/>
              <dl_setting VAR="stabilization_gains.d.x" TYPE="int32" STEP="1" SHORTNAME="dgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.x" TYPE="int32" STEP="1" SHORTNAME="igain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_IGAIN" MIN="0" MAX="800"/>
              <dl_setting VAR="stabilization_gains.dd.x" TYPE="int32" STEP="1" SHORTNAME="ddgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="stabilization_gains.p.y" TYPE="int32" STEP="1" SHORTNAME="pgain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_PGAIN" MIN="1" MAX="8000"/>
              <dl_setting VAR="stabilization_gains.d.y" TYPE="int32" STEP="1" SHORTNAME="dgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.y" TYPE="int32" STEP="1" SHORTNAME="igain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_IGAIN" MIN="0" MAX="800"/>
              <dl_setting VAR="stabilization_gains.dd.y" TYPE="int32" STEP="1" SHORTNAME="ddgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="stabilization_gains.p.z" TYPE="int32" STEP="1" SHORTNAME="pgain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_PGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.d.z" TYPE="int32" STEP="1" SHORTNAME="dgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.z" TYPE="int32" STEP="1" SHORTNAME="igain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_IGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="stabilization_gains.dd.z" TYPE="int32" STEP="1" SHORTNAME="ddgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.p" UNIT="rad/s" STEP="1" SHORTNAME="omega p" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_P" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaP" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.p" STEP="0.05" SHORTNAME="zeta p" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_P" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaP"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.q" UNIT="rad/s" STEP="1" SHORTNAME="omega q" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_Q" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaQ" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.q" STEP="0.05" SHORTNAME="zeta q" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_Q" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaQ"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.r" UNIT="rad/s" STEP="1" SHORTNAME="omega r" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_R" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaR" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.r" STEP="0.05" SHORTNAME="zeta r" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_R" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaR"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="NAV">
              <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
              <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
              <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MIN="-50" MAX="50"/>
              <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MIN="0" MAX="10.0"/>
              <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MIN="-10.0" MAX="0.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Vert Loop">
              <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
              <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MIN="0.2" MAX="0.8"/>
              <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MIN="0" MAX="1"/>
              <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
            <dl_settings NAME="Horiz Loop">
              <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="true" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
              <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
              <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MIN="0" MAX="1"/>
              <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
              <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
              <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
              <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
              <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
              <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="Superbit">
              <dl_setting VAR="settings_store_flag" VALUES="Store" STEP="1" SHORTNAME="store" MODULE="subsystems/settings" MIN="1" MAX="1" HANDLER="StoreSettings"/>
              <dl_setting VAR="superbitrf.bind_mfg_id32" TYPE="uint32" STEP="1" SHORTNAME="mfg_id" PERSISTENT="true" MODULE="subsystems/datalink/superbitrf" MIN="0" MAX="4294967295" HANDLER="set_mfg_id"/>
              <dl_setting VAR="superbitrf.num_channels" TYPE="uint8" STEP="1" SHORTNAME="#chan" PERSISTENT="true" MODULE="subsystems/datalink/superbitrf" MIN="0" MAX="14"/>
              <dl_setting VAR="superbitrf.protocol" TYPE="uint8" STEP="1" SHORTNAME="prot" PERSISTENT="true" MODULE="subsystems/datalink/superbitrf" MIN="0" MAX="32" HANDLER="set_protocol"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="ublox">
            <dl_settings NAME="ucenter">
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_h" STEP="1" SHORTNAME="sw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_l" STEP="1" SHORTNAME="sw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_h" STEP="1" SHORTNAME="hw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_l" STEP="1" SHORTNAME="hw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_init" STEP="100" SHORTNAME="inibaud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_run" STEP="100" SHORTNAME="baud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe name="walkera_v120d02s">
        <servos driver="Pwm">
          <servo name="CIC_FRONT" no="5" min="2000" neutral="1550" max="900"/>
          <servo name="CIC_RIGHT" no="0" min="900" neutral="1550" max="2000"/>
          <servo name="CIC_LEFT" no="1" min="900" neutral="1550" max="2000"/>
          <servo name="TAIL" no="2" min="1000" neutral="1400" max="1800"/>
          <servo name="GAS" no="3" min="900" neutral="980" max="2200"/>
        </servos>
        <commands>
          <axis name="PITCH" failsafe_value="0"/>
          <axis name="ROLL" failsafe_value="0"/>
          <axis name="YAW" failsafe_value="0"/>
          <axis name="THRUST" failsafe_value="0"/>
        </commands>
        <command_laws>
          <let var="hoverpower" value=".75*MAX_PPRZ"/>
          <let var="hoverstick" value=".35*MAX_PPRZ"/>
          <let var="halfway" value="(@THRUST >= ($hoverstick) ? 1 : 0)"/>
          <let var="collective" value="@THRUST * 0.4 + (MAX_PPRZ*0.01)"/>
          <let var="gas" value="($hoverpower) + $halfway * (((@THRUST) - ($hoverstick)) * (MAX_PPRZ - ($hoverpower))) / (MAX_PPRZ - ($hoverstick))  + (1 - $halfway) * ((@THRUST - ($hoverstick)) * ($hoverpower)) / ($hoverstick)"/>
          <set servo="GAS" value="$gas"/>
          <set servo="CIC_LEFT" value="((@PITCH*0.5*0.5)-(@ROLL*0.5*0.7))+($collective)"/>
          <set servo="CIC_RIGHT" value="((-@PITCH*0.5*0.5)-(@ROLL*0.5*0.7))-($collective)"/>
          <set servo="CIC_FRONT" value="-@PITCH*0.5*1.0+($collective)"/>
          <set servo="TAIL" value="@YAW"/>
        </command_laws>
        <section name="IMU" prefix="IMU_">
          <define name="BODY_TO_IMU_PHI" value="190." unit="deg"/>
          <define name="BODY_TO_IMU_THETA" value="0." unit="deg"/>
          <define name="BODY_TO_IMU_PSI" value="0." unit="deg"/>
          <define name="ACCEL_X_NEUTRAL" value="0"/>
          <define name="ACCEL_Y_NEUTRAL" value="0"/>
          <define name="ACCEL_Z_NEUTRAL" value="0"/>
          <define name="MAG_X_NEUTRAL" value="-638"/>
          <define name="MAG_Y_NEUTRAL" value="-101"/>
          <define name="MAG_Z_NEUTRAL" value="-307"/>
          <define name="MAG_X_SENS" value="3.61215021824" integer="16"/>
          <define name="MAG_Y_SENS" value="4.23407732206" integer="16"/>
          <define name="MAG_Z_SENS" value="4.28237277804" integer="16"/>
        </section>
        <section name="AUTOPILOT">
          <define name="MODE_MANUAL" value="AP_MODE_ATTITUDE_DIRECT"/>
          <define name="MODE_AUTO1" value="AP_MODE_ATTITUDE_Z_HOLD"/>
          <define name="MODE_AUTO2" value="AP_MODE_ATTITUDE_DIRECT"/>
        </section>
        <section name="BAT">
          <define name="MILLIAMP_AT_FULL_THROTTLE" value="10"/>
          <define name="CATASTROPHIC_BAT_LEVEL" value="4.3" unit="V"/>
        </section>
        <section name="STABILIZATION_ATTITUDE" prefix="STABILIZATION_ATTITUDE_">
          <define name="SP_MAX_PHI" value="45." unit="deg"/>
          <define name="SP_MAX_THETA" value="45." unit="deg"/>
          <define name="SP_MAX_R" value="90." unit="deg/s"/>
          <define name="DEADBAND_R" value="250"/>
          <define name="DEADBAND_A" value="250"/>
          <define name="REF_OMEGA_P" value="3000" unit="deg/s"/>
          <define name="REF_ZETA_P" value="0.85"/>
          <define name="REF_MAX_P" value="300." unit="deg/s"/>
          <define name="REF_MAX_PDOT" value="RadOfDeg(7000.)"/>
          <define name="REF_OMEGA_Q" value="3000" unit="deg/s"/>
          <define name="REF_ZETA_Q" value="0.85"/>
          <define name="REF_MAX_Q" value="300." unit="deg/s"/>
          <define name="REF_MAX_QDOT" value="RadOfDeg(7000.)"/>
          <define name="REF_OMEGA_R" value="3000" unit="deg/s"/>
          <define name="REF_ZETA_R" value="0.85"/>
          <define name="REF_MAX_R" value="300." unit="deg/s"/>
          <define name="REF_MAX_RDOT" value="RadOfDeg(7000.)"/>
          <define name="PHI_PGAIN" value="3052"/>
          <define name="PHI_DGAIN" value="108"/>
          <define name="PHI_IGAIN" value="14"/>
          <define name="THETA_PGAIN" value="3052"/>
          <define name="THETA_DGAIN" value="108"/>
          <define name="THETA_IGAIN" value="14"/>
          <define name="PSI_PGAIN" value="1099"/>
          <define name="PSI_DGAIN" value="201"/>
          <define name="PSI_IGAIN" value="19"/>
          <define name="PHI_DDGAIN" value="0"/>
          <define name="THETA_DDGAIN" value="0"/>
          <define name="PSI_DDGAIN" value="0"/>
          <define name="PHI_AGAIN" value="0"/>
          <define name="THETA_AGAIN" value="0"/>
          <define name="PSI_AGAIN" value="0"/>
        </section>
        <section name="INS" prefix="INS_"/>
        <section name="GUIDANCE_V" prefix="GUIDANCE_V_">
          <define name="HOVER_KP" value="281"/>
          <define name="HOVER_KD" value="66"/>
          <define name="HOVER_KI" value="0"/>
          <define name="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" value="0.9"/>
        </section>
        <section name="AHRS" prefix="AHRS_">
          <define name="H_X" value=" 0.47577"/>
          <define name="H_Y" value=" 0.11811"/>
          <define name="H_Z" value=" 0.87161"/>
        </section>
        <section name="GUIDANCE_H" prefix="GUIDANCE_H_">
          <define name="PGAIN" value="16"/>
          <define name="DGAIN" value="35"/>
          <define name="IGAIN" value="6"/>
        </section>
        <modules main_freq="512">
          <module name="gps" type="ubx_ucenter"/>
        </modules>
        <firmware name="rotorcraft">
          <target name="ap" board="lisa_s_1.0">
            <module name="radio_control" type="superbitrf_rc">
              <define name="RADIO_TRANSMITTER_ID" value="2008496626"/>
              <define name="RADIO_TRANSMITTER_CHAN" value="6"/>
              <define name="RADIO_TRANSMITTER_PROTOCOL" value="0x01"/>
              <define name="RADIO_KILL_SWITCH" value="RADIO_FLAP"/>
            </module>
            <configure name="AHRS_PROPAGATE_FREQUENCY" value="500"/>
          </target>
          <module name="actuators" type="pwm">
            <define name="SERVO_HZ" value="50"/>
            <define name="USE_SERVOS_1AND2"/>
          </module>
          <module name="telemetry" type="superbitrf"/>
          <module name="imu" type="lisa_s_v1.0"/>
          <module name="gps" type="ublox"/>
          <module name="stabilization" type="int_quat"/>
          <module name="ahrs" type="int_cmpl_quat"/>
          <module name="ins"/>
        </firmware>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.05" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
            <message PERIOD="0.05" NAME="OPTICAL_FLOW_HOVER"/>
            <message PERIOD="0.10" NAME="VISUALTARGET"/>
            <message PERIOD="0.1" NAME="VISION_POSITION_ESTIMATE"/>
            <message PERIOD="0.05" NAME="DIVERGENCE"/>
            <message PERIOD="0.02" NAME="DRAGSPEED"/>
            <message PERIOD="5.1" NAME="LOGGER_STATUS"/>
            <message PERIOD="1.2" NAME="LIDAR"/>
            <message PERIOD=".25" NAME="INS_EKF2"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="BEBOP_ACTUATORS"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_FLOAT"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
            <message PERIOD="2.0" NAME="INDI_G"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="vel_guidance" KEY_PRESS="q">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HYBRID_GUIDANCE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1.0" NAME="GPS_INT"/>
            <message PERIOD="1.0" NAME="INS"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="RTCM3">
            <message PERIOD="1" NAME="GPS_RXMRTCM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD="1" NAME="GPS_RTK"/>
          </mode>
        </process>
        <process NAME="FlightRecorder">
          <mode NAME="default">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD=".1" NAME="GPS_INT"/>
            <message PERIOD=".1" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".2" NAME="IMU_MAG_SCALED"/>
            <message PERIOD="0.05" NAME="LIDAR"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="19"/>
            <dl_setting VAR="autopilot.kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot.power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot.mode" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="19" HANDLER="SetModeHandler"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="ardrone2_flightplan_guided_gazebo" ac_id="235" airframe="airframes/examples/ardrone2_gazebo.xml" radio="radios/dummy.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/rotorcraft_guided_flightplan.xml" settings="settings/rotorcraft_basic.xml settings/nps.xml" settings_modules="modules/video_rtp_stream.xml modules/cv_colorfilter.xml modules/cv_opticflow.xml [modules/geo_mag.xml] modules/air_data.xml [modules/ins_extended.xml] modules/ahrs_int_cmpl_quat.xml modules/stabilization_int_quat.xml modules/nav_basic_rotorcraft.xml modules/guidance_rotorcraft.xml modules/gps.xml modules/imu_common.xml" gui_color="red">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitMM" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1120" MIN="1120" MAX="2000" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="0.3" name="Rotorcraft Optitrack (Delft)" max_dist_from_home="20" lon0="4.376789" lat0="51.990634" ground_alt="0" alt="1">
          <header>#include &quot;autopilot_guided.h&quot;
// Useful Combination of the flags fir the autopilot_guided_update
#define GUIDED_FLAG_XY_VEL_BODY GUIDED_FLAG_XY_BODY|GUIDED_FLAG_XY_VEL
#define GUIDED_FLAG_XY_VEL_BODY_YAW_RATE GUIDED_FLAG_XY_BODY|GUIDED_FLAG_XY_VEL|GUIDED_FLAG_YAW_RATE
#define GUIDED_FLAG_XY_OFFSET_Z_VEL GUIDED_FLAG_XY_OFFSET|GUIDED_FLAG_Z_VEL
#define GUIDED_FLAG_XY_OFFSET_YAW_OFFSET GUIDED_FLAG_XY_OFFSET|GUIDED_FLAG_YAW_OFFSET
#ifdef NAV_C
static float obstacle_dist, obstacle_azimuth, obstacle_bearing;
static inline void obstacle_detection_cb(uint8_t sender_id __attribute__((unused)), float _obstacle_dist, float _obstacle_azimuth, float _obstacle_bearing)
{
  if (And(CloseRadAngles(_obstacle_azimuth,0), CloseRadAngles(_obstacle_bearing,0))) {
    obstacle_dist = _obstacle_dist;
    obstacle_azimuth = _obstacle_azimuth;
    obstacle_bearing = _obstacle_bearing;
  }
}
#endif</header>
          <waypoints>
            <waypoint y="0.0" x="0.0" name="HOME"/>
            <waypoint y="0.0" x="0.0" name="STDBY"/>
          </waypoints>
          <variables>
            <variable var="desired_heading" type="float" step="0.1" min="0." max="10." init="0.0f"/>
            <variable var="turn_angle" type="float" step="1" min="-180" max="180" init="90.0f"/>
            <variable var="turn_rate" type="float" step="0.1" min="0." max="10." init="0.5f"/>
            <variable var="climb_descent_vel" type="float" step="0.1" min="0." max="1" init="0.3f"/>
            <variable var="forward_vel" type="float" step="0.1" min="0." max="2" init="0.5f"/>
            <variable var="nominal_alt" type="float" step="0.1" min="0." max="10." init="NAV_DEFAULT_ALT"/>
            <abi_binding name="OBSTACLE_DETECTION" handler="obstacle_detection_cb"/>
            <abi_binding vars="vel_body_x_FF, vel_body_y_FF, vel_body_z_FF" name="RANGE_FORCEFIELD"/>
          </variables>
          <blocks>
            <block name="FPInit" no="0">
              <while cond="!GpsFixValid()" no="0"/>
              <set var="obstacle_dist" value="10.0" no="2"/>
              <set var="vel_body_x_FF" value="0." no="3"/>
              <set var="vel_body_y_FF" value="0." no="4"/>
              <set var="vel_body_z_FF" value="0." no="5"/>
              <call_once fun="ins_reset_altitude_ref()" no="6"/>
              <while cond="1" no="7"/>
            </block>
            <block name="Start Engine" no="1">
              <call_once fun="autopilot_set_motors_on(TRUE)" no="0"/>
              <while cond="1" no="1"/>
            </block>
            <block name="Take off" no="2">
              <set var="desired_heading" value="stateGetNedToBodyEulers_f()->psi" no="0"/>
              <call_once fun="autopilot_guided_update(GUIDED_FLAG_XY_OFFSET_Z_VEL,0.,0.,-climb_descent_vel,desired_heading)" no="1"/>
              <while cond="LessThan(stateGetPositionEnu_f()->z,nominal_alt-0.2)" no="2"/>
              <call_once fun="autopilot_guided_update(GUIDED_FLAG_XY_OFFSET,0.,0.,-nominal_alt,desired_heading)" no="4"/>
              <while cond="LessThan(stage_time,1)" no="5"/>
            </block>
            <block name="Go Forward" no="3">
              <while cond="1" no="0">
                <call_once fun="autopilot_guided_update(GUIDED_FLAG_XY_VEL_BODY,forward_vel + vel_body_x_FF,vel_body_y_FF,-nominal_alt,desired_heading)" no="1"/>
              </while>
              <exception deroute="Turn 90 deg" cond="1.5>obstacle_dist"/>
            </block>
            <block name="Turn 90 deg" no="4">
              <call_once fun="autopilot_guided_update(GUIDED_FLAG_XY_VEL_BODY,0.,0.,-nominal_alt,desired_heading)" no="0"/>
              <while cond="LessThan(stage_time,1)" no="1"/>
              <set var="desired_heading" value="stateGetNedToBodyEulers_f()->psi + RadOfDeg(turn_angle)" no="3"/>
              <call_once fun="autopilot_guided_update(GUIDED_FLAG_XY_VEL_BODY_YAW_RATE,0.,0.,-nominal_alt,turn_rate)" no="4"/>
              <while cond="!CloseRadAngles(stateGetNedToBodyEulers_f()->psi,desired_heading)" no="5"/>
              <call_once fun="autopilot_guided_update(GUIDED_FLAG_XY_VEL_BODY,0.,0.,-nominal_alt,desired_heading)" no="7"/>
              <while cond="LessThan(stage_time,1)" no="8"/>
              <set var="obstacle_dist" value="10" no="10"/>
              <deroute block="Go Forward" no="11"/>
            </block>
            <block name="Land" no="5">
              <set var="desired_heading" value="stateGetNedToBodyEulers_f()->psi" no="0"/>
              <call_once fun="autopilot_guided_update(GUIDED_FLAG_XY_OFFSET_Z_VEL,0.,0.,climb_descent_vel,desired_heading)" no="1"/>
              <while cond="MoreThan(stateGetPositionEnu_f()->z,0.1)" no="2"/>
              <call_once fun="autopilot_guided_update(GUIDED_FLAG_XY_OFFSET_YAW_OFFSET,0.,0.,0.,0.)" no="4"/>
              <while cond="LessThan(block_time,5)" no="5"/>
              <deroute block="Kill Engines" no="7"/>
            </block>
            <block name="Kill Engines" no="6">
              <call_once fun="autopilot_set_motors_on(FALSE)" no="0"/>
              <while cond="1" no="1"/>
            </block>
            <block name="HOME" no="7">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="7" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="6" block_name="Kill Engines" stage="1">
            <while cond="1" no="1"/>
          </stage>
          <stage block="6" block_name="Kill Engines" stage="0">
            <call_once fun="autopilot_set_motors_on(FALSE)" no="0"/>
          </stage>
          <stage block="5" block_name="Land" stage="7">
            <deroute block="Kill Engines" no="7"/>
          </stage>
          <stage block="5" block_name="Land" stage="5">
            <while cond="LessThan(block_time,5)" no="5"/>
          </stage>
          <stage block="5" block_name="Land" stage="4">
            <call_once fun="autopilot_guided_update(GUIDED_FLAG_XY_OFFSET_YAW_OFFSET,0.,0.,0.,0.)" no="4"/>
          </stage>
          <stage block="5" block_name="Land" stage="2">
            <while cond="MoreThan(stateGetPositionEnu_f()->z,0.1)" no="2"/>
          </stage>
          <stage block="5" block_name="Land" stage="1">
            <call_once fun="autopilot_guided_update(GUIDED_FLAG_XY_OFFSET_Z_VEL,0.,0.,climb_descent_vel,desired_heading)" no="1"/>
          </stage>
          <stage block="5" block_name="Land" stage="0">
            <set var="desired_heading" value="stateGetNedToBodyEulers_f()->psi" no="0"/>
          </stage>
          <stage block="4" block_name="Turn 90 deg" stage="11">
            <deroute block="Go Forward" no="11"/>
          </stage>
          <stage block="4" block_name="Turn 90 deg" stage="10">
            <set var="obstacle_dist" value="10" no="10"/>
          </stage>
          <stage block="4" block_name="Turn 90 deg" stage="8">
            <while cond="LessThan(stage_time,1)" no="8"/>
          </stage>
          <stage block="4" block_name="Turn 90 deg" stage="7">
            <call_once fun="autopilot_guided_update(GUIDED_FLAG_XY_VEL_BODY,0.,0.,-nominal_alt,desired_heading)" no="7"/>
          </stage>
          <stage block="4" block_name="Turn 90 deg" stage="5">
            <while cond="!CloseRadAngles(stateGetNedToBodyEulers_f()->psi,desired_heading)" no="5"/>
          </stage>
          <stage block="4" block_name="Turn 90 deg" stage="4">
            <call_once fun="autopilot_guided_update(GUIDED_FLAG_XY_VEL_BODY_YAW_RATE,0.,0.,-nominal_alt,turn_rate)" no="4"/>
          </stage>
          <stage block="4" block_name="Turn 90 deg" stage="3">
            <set var="desired_heading" value="stateGetNedToBodyEulers_f()->psi + RadOfDeg(turn_angle)" no="3"/>
          </stage>
          <stage block="4" block_name="Turn 90 deg" stage="1">
            <while cond="LessThan(stage_time,1)" no="1"/>
          </stage>
          <stage block="4" block_name="Turn 90 deg" stage="0">
            <call_once fun="autopilot_guided_update(GUIDED_FLAG_XY_VEL_BODY,0.,0.,-nominal_alt,desired_heading)" no="0"/>
          </stage>
          <stage block="3" block_name="Go Forward" stage="1">
            <call_once fun="autopilot_guided_update(GUIDED_FLAG_XY_VEL_BODY,forward_vel + vel_body_x_FF,vel_body_y_FF,-nominal_alt,desired_heading)" no="1"/>
          </stage>
          <stage block="3" block_name="Go Forward" stage="0">
            <while cond="1" no="0">
              <call_once fun="autopilot_guided_update(GUIDED_FLAG_XY_VEL_BODY,forward_vel + vel_body_x_FF,vel_body_y_FF,-nominal_alt,desired_heading)" no="1"/>
            </while>
          </stage>
          <stage block="2" block_name="Take off" stage="5">
            <while cond="LessThan(stage_time,1)" no="5"/>
          </stage>
          <stage block="2" block_name="Take off" stage="4">
            <call_once fun="autopilot_guided_update(GUIDED_FLAG_XY_OFFSET,0.,0.,-nominal_alt,desired_heading)" no="4"/>
          </stage>
          <stage block="2" block_name="Take off" stage="2">
            <while cond="LessThan(stateGetPositionEnu_f()->z,nominal_alt-0.2)" no="2"/>
          </stage>
          <stage block="2" block_name="Take off" stage="1">
            <call_once fun="autopilot_guided_update(GUIDED_FLAG_XY_OFFSET_Z_VEL,0.,0.,-climb_descent_vel,desired_heading)" no="1"/>
          </stage>
          <stage block="2" block_name="Take off" stage="0">
            <set var="desired_heading" value="stateGetNedToBodyEulers_f()->psi" no="0"/>
          </stage>
          <stage block="1" block_name="Start Engine" stage="1">
            <while cond="1" no="1"/>
          </stage>
          <stage block="1" block_name="Start Engine" stage="0">
            <call_once fun="autopilot_set_motors_on(TRUE)" no="0"/>
          </stage>
          <stage block="0" block_name="FPInit" stage="7">
            <while cond="1" no="7"/>
          </stage>
          <stage block="0" block_name="FPInit" stage="6">
            <call_once fun="ins_reset_altitude_ref()" no="6"/>
          </stage>
          <stage block="0" block_name="FPInit" stage="5">
            <set var="vel_body_z_FF" value="0." no="5"/>
          </stage>
          <stage block="0" block_name="FPInit" stage="4">
            <set var="vel_body_y_FF" value="0." no="4"/>
          </stage>
          <stage block="0" block_name="FPInit" stage="3">
            <set var="vel_body_x_FF" value="0." no="3"/>
          </stage>
          <stage block="0" block_name="FPInit" stage="2">
            <set var="obstacle_dist" value="10.0" no="2"/>
          </stage>
          <stage block="0" block_name="FPInit" stage="0">
            <while cond="!GpsFixValid()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="video">
              <dl_setting VAR="viewvideo.use_rtp" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="rtp" PARAM="VIEWVIDEO_USE_RTP" MODULE="computer_vision/viewvideo" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="ColorFilter">
              <dl_setting VAR="color_lum_min" STEP="1" SHORTNAME="y_min" MIN="0" MAX="255"/>
              <dl_setting VAR="color_lum_max" STEP="1" SHORTNAME="y_max" MIN="0" MAX="255"/>
              <dl_setting VAR="color_cb_min" STEP="1" SHORTNAME="u_min" MIN="0" MAX="255"/>
              <dl_setting VAR="color_cb_max" STEP="1" SHORTNAME="u_max" MIN="0" MAX="255"/>
              <dl_setting VAR="color_cr_min" STEP="1" SHORTNAME="v_min" MIN="0" MAX="255"/>
              <dl_setting VAR="color_cr_max" STEP="1" SHORTNAME="v_max" MIN="0" MAX="255"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="Vision stabilization">
            <dl_settings NAME="vision_calc">
              <dl_setting VAR="opticflow.method" VALUES="LK_Fast9|EdgeFlow" STEP="1" SHORTNAME="method" PARAM="METHOD" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.corner_method" VALUES="exhaustive-FAST|ACT-FAST" STEP="1" SHORTNAME="corner_method" PARAM="CORNER_METHOD" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.window_size" STEP="1" SHORTNAME="window_size" PARAM="OPTICFLOW_WINDOW_SIZE" MODULE="computer_vision/opticflow_module" MIN="0" MAX="20"/>
              <dl_setting VAR="opticflow.search_distance" STEP="1" SHORTNAME="search_distance" PARAM="SEARCH_DISTANCE" MODULE="computer_vision/opticflow_module" MIN="0" MAX="50"/>
              <dl_setting VAR="opticflow.subpixel_factor" STEP="10" SHORTNAME="subpixel_factor" PARAM="OPTICFLOW_SUBPIXEL_FACTOR" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1000"/>
              <dl_setting VAR="opticflow.resolution_factor" STEP="10" SHORTNAME="resolution_factor" PARAM="OPTICFLOW_RESOLUTION_FACTOR" MODULE="computer_vision/opticflow_module" MIN="10" MAX="10000"/>
              <dl_setting VAR="opticflow.derotation" VALUES="OFF|ON" STEP="1" SHORTNAME="derotation" PARAM="OPTICFLOW_DEROTATION" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.median_filter" VALUES="OFF|ON" STEP="1" SHORTNAME="median_filter" PARAM="OPTICFLOW_MEDIAN_FILTER" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.feature_management" VALUES="OFF|ON" STEP="1" SHORTNAME="feature_management" PARAM="OPTICFLOW_FEATURE_MANAGEMENT" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.track_back" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="track_back" PARAM="OPTICFLOW_TRACK_BACK" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.show_flow" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="show_flow" PARAM="OPTICFLOW_SHOW_FLOW" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.max_track_corners" STEP="1" SHORTNAME="max_trck_corners" PARAM="OPTICFLOW_MAX_TRACK_CORNERS" MODULE="computer_vision/opticflow_module" MIN="0" MAX="500"/>
              <dl_setting VAR="opticflow.max_iterations" STEP="1" SHORTNAME="max_iterations" PARAM="OPTICFLOW_MAX_ITERATIONS" MODULE="computer_vision/opticflow_module" MIN="0" MAX="100"/>
              <dl_setting VAR="opticflow.threshold_vec" STEP="1" SHORTNAME="threshold_vec" PARAM="OPTICFLOW_THRESHOLD_VEC" MODULE="computer_vision/opticflow_module" MIN="0" MAX="100"/>
              <dl_setting VAR="opticflow.fast9_adaptive" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="fast9_adaptive" PARAM="OPTICFLOW_FAST9_ADAPTIVE" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.fast9_threshold" STEP="1" SHORTNAME="fast9_threshold" PARAM="OPTICFLOW_FAST9_THRESHOLD" MODULE="computer_vision/opticflow_module" MIN="0" MAX="255"/>
              <dl_setting VAR="opticflow.fast9_min_distance" STEP="1" SHORTNAME="fast9_min_distance" PARAM="OPTICFLOW_FAST9_MIN_DISTANCE" MODULE="computer_vision/opticflow_module" MIN="0" MAX="500"/>
              <dl_setting VAR="opticflow.fast9_padding" STEP="1" SHORTNAME="fast9_padding" PARAM="OPTICFLOW_FAST9_PADDING" MODULE="computer_vision/opticflow_module" MIN="0" MAX="50"/>
              <dl_setting VAR="opticflow.fast9_region_detect" VALUES="OFF|ON" STEP="1" SHORTNAME="fast9_region_detect" PARAM="OPTICFLOW_FAST9_REGION_DETECT" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.fast9_num_regions" STEP="1" SHORTNAME="fast9_num_regions" PARAM="OPTICFLOW_FAST9_NUM_REGIONS" MODULE="computer_vision/opticflow_module" MIN="1" MAX="25"/>
              <dl_setting VAR="opticflow.actfast_long_step" STEP="1" SHORTNAME="actfast_long_step" PARAM="OPTICFLOW_ACTFAST_LONG_STEP" MODULE="computer_vision/opticflow_module" MIN="1" MAX="100"/>
              <dl_setting VAR="opticflow.actfast_short_step" STEP="1" SHORTNAME="actfast_short_step" PARAM="OPTICFLOW_ACTFAST_SHORT_STEP" MODULE="computer_vision/opticflow_module" MIN="1" MAX="10"/>
              <dl_setting VAR="opticflow.actfast_min_gradient" STEP="1" SHORTNAME="actfast_min_gradient" PARAM="OPTICFLOW_ACTFAST_MIN_GRADIENT" MODULE="computer_vision/opticflow_module" MIN="1" MAX="255"/>
              <dl_setting VAR="opticflow.actfast_gradient_method" VALUES="SIMPLE|SOBEL" STEP="1" SHORTNAME="actfast_gradient_method" PARAM="OPTICFLOW_ACTFAST_GRADIENT_METHOD" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.pyramid_level" STEP="1" SHORTNAME="pyramid_level" PARAM="OPTICFLOW_PYRAMID_LEVEL" MODULE="computer_vision/opticflow_module" MIN="0" MAX="10"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="air_data">
              <dl_setting VAR="air_data.qnh" STEP="1" SHORTNAME="QNH" MODULE="air_data/air_data" MIN="800" MAX="1200"/>
              <dl_setting VAR="air_data.tas_factor" TYPE="float" STEP="0.01" SHORTNAME="TASfactor" PERSISTENT="true" PARAM="AIR_DATA_TAS_FACTOR" MODULE="air_data/air_data" MIN="0.8" MAX="1.3"/>
              <dl_setting VAR="air_data.calc_qnh_once" STEP="1" SHORTNAME="calcQNH" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_airspeed" TYPE="uint8" STEP="1" SHORTNAME="calcAirspeed" PERSISTENT="true" PARAM="AIR_DATA_CALC_AIRSPEED" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_tas_factor" TYPE="uint8" STEP="1" SHORTNAME="calcTASfactor" PERSISTENT="true" PARAM="AIR_DATA_CALC_TAS_FACTOR" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_amsl_baro" TYPE="uint8" STEP="1" SHORTNAME="calcAMSL" PERSISTENT="true" PARAM="AIR_DATA_CALC_AMSL_BARO" MODULE="air_data/air_data" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
              <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
              <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
              <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
              <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Att Loop">
              <dl_setting VAR="stabilization_gains.p.x" TYPE="int32" STEP="1" SHORTNAME="pgain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_PGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="8000"/>
              <dl_setting VAR="stabilization_gains.d.x" TYPE="int32" STEP="1" SHORTNAME="dgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.x" TYPE="int32" STEP="1" SHORTNAME="igain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_IGAIN" MIN="0" MAX="800"/>
              <dl_setting VAR="stabilization_gains.dd.x" TYPE="int32" STEP="1" SHORTNAME="ddgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="stabilization_gains.p.y" TYPE="int32" STEP="1" SHORTNAME="pgain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_PGAIN" MIN="1" MAX="8000"/>
              <dl_setting VAR="stabilization_gains.d.y" TYPE="int32" STEP="1" SHORTNAME="dgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.y" TYPE="int32" STEP="1" SHORTNAME="igain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_IGAIN" MIN="0" MAX="800"/>
              <dl_setting VAR="stabilization_gains.dd.y" TYPE="int32" STEP="1" SHORTNAME="ddgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="stabilization_gains.p.z" TYPE="int32" STEP="1" SHORTNAME="pgain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_PGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.d.z" TYPE="int32" STEP="1" SHORTNAME="dgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.z" TYPE="int32" STEP="1" SHORTNAME="igain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_IGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="stabilization_gains.dd.z" TYPE="int32" STEP="1" SHORTNAME="ddgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.p" UNIT="rad/s" STEP="1" SHORTNAME="omega p" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_P" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaP" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.p" STEP="0.05" SHORTNAME="zeta p" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_P" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaP"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.q" UNIT="rad/s" STEP="1" SHORTNAME="omega q" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_Q" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaQ" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.q" STEP="0.05" SHORTNAME="zeta q" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_Q" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaQ"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.r" UNIT="rad/s" STEP="1" SHORTNAME="omega r" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_R" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaR" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.r" STEP="0.05" SHORTNAME="zeta r" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_R" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaR"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="NAV">
              <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
              <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
              <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MIN="-50" MAX="50"/>
              <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MIN="0" MAX="10.0"/>
              <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MIN="-10.0" MAX="0.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Vert Loop">
              <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
              <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MIN="0.2" MAX="0.8"/>
              <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MIN="0" MAX="1"/>
              <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
            <dl_settings NAME="Horiz Loop">
              <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="true" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
              <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
              <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MIN="0" MAX="1"/>
              <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
              <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
              <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
              <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
              <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
              <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="ardrone2">
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="ardrone2"/>
          <target NAME="nps" BOARD="pc">
            <module TYPE="gazebo" NAME="fdm"/>
          </target>
          <define VALUE="TRUE" NAME="USE_SONAR"/>
          <module TYPE="transparent_udp" NAME="telemetry"/>
          <module TYPE="datalink" NAME="radio_control"/>
          <module NAME="motor_mixing"/>
          <module TYPE="ardrone2" NAME="actuators"/>
          <module TYPE="ardrone2" NAME="imu"/>
          <module TYPE="ublox" NAME="gps"/>
          <module TYPE="int_quat" NAME="stabilization"/>
          <module TYPE="int_cmpl_quat" NAME="ahrs"/>
          <module TYPE="extended" NAME="ins"/>
          <module NAME="bat_voltage_ardrone2"/>
          <module NAME="send_imu_mag_current"/>
          <module NAME="air_data"/>
          <module NAME="geo_mag"/>
          <module NAME="video_thread"/>
          <module NAME="cv_opticflow">
            <define VALUE="bottom_camera" NAME="OPTICFLOW_CAMERA"/>
            <define VALUE="0.8" NAME="OPTICFLOW_DEROTATION_CORRECTION_FACTOR_X"/>
            <define VALUE="0.85" NAME="OPTICFLOW_DEROTATION_CORRECTION_FACTOR_Y"/>
            <define VALUE="0" NAME="OPTICFLOW_PYRAMID_LEVEL"/>
            <define VALUE="1" NAME="OPTICFLOW_FEATURE_MANAGEMENT"/>
          </module>
          <module NAME="cv_colorfilter">
            <define VALUE="front_camera" NAME="COLORFILTER_CAMERA"/>
          </module>
          <module NAME="video_rtp_stream">
            <define VALUE="front_camera" NAME="VIEWVIDEO_CAMERA"/>
            <define VALUE="4" NAME="VIEWVIDEO_DOWNSIZE_FACTOR"/>
            <define VALUE="60" NAME="VIEWVIDEO_QUALITY_FACTOR"/>
          </module>
        </firmware>
        <commands>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="3000"/>
        </commands>
        <servos DRIVER="Default">
          <servo NO="0" NEUTRAL="1" NAME="TOP_LEFT" MIN="0" MAX="500"/>
          <servo NO="1" NEUTRAL="1" NAME="TOP_RIGHT" MIN="0" MAX="500"/>
          <servo NO="2" NEUTRAL="1" NAME="BOTTOM_RIGHT" MIN="0" MAX="500"/>
          <servo NO="3" NEUTRAL="1" NAME="BOTTOM_LEFT" MIN="0" MAX="500"/>
        </servos>
        <section PREFIX="MOTOR_MIXING_" NAME="MIXING">
          <define VALUE="0" NAME="TRIM_ROLL"/>
          <define VALUE="0" NAME="TRIM_PITCH"/>
          <define VALUE="0" NAME="TRIM_YAW"/>
          <define VALUE="QUAD_X" NAME="TYPE"/>
        </section>
        <command_laws>
          <call FUN="motor_mixing_run(autopilot_get_motors_on(),FALSE,values)"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_LEFT]" SERVO="TOP_LEFT"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_RIGHT]" SERVO="TOP_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_RIGHT]" SERVO="BOTTOM_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_LEFT]" SERVO="BOTTOM_LEFT"/>
        </command_laws>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="2048" NAME="ACCEL_X_NEUTRAL"/>
          <define VALUE="2048" NAME="ACCEL_Y_NEUTRAL"/>
          <define VALUE="2048" NAME="ACCEL_Z_NEUTRAL"/>
          <define VALUE="0" NAME="MAG_X_NEUTRAL"/>
          <define VALUE="0" NAME="MAG_Y_NEUTRAL"/>
          <define VALUE="-180" NAME="MAG_Z_NEUTRAL"/>
          <define VALUE="16." NAME="MAG_X_SENS" INTEGER="16"/>
          <define VALUE="16." NAME="MAG_Y_SENS" INTEGER="16"/>
          <define VALUE="16." NAME="MAG_Z_SENS" INTEGER="16"/>
          <define VALUE="0.0" NAME="MAG_X_CURRENT_COEF"/>
          <define VALUE="0.0" NAME="MAG_Y_CURRENT_COEF"/>
          <define VALUE="0.0" NAME="MAG_Z_CURRENT_COEF"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.513081" NAME="H_X"/>
          <define VALUE="-0.00242783" NAME="H_Y"/>
          <define VALUE="0.858336" NAME="H_Z"/>
        </section>
        <section PREFIX="INS_" NAME="INS">
          <define VALUE="2.2" NAME="SONAR_MAX_RANGE"/>
          <define VALUE="TRUE" NAME="SONAR_UPDATE_ON_AGL"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="STABILIZATION_ATTITUDE">
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="600" UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="0" NAME="DEADBAND_A"/>
          <define VALUE="0" NAME="DEADBAND_E"/>
          <define VALUE="250" NAME="DEADBAND_R"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.9" NAME="REF_ZETA_P"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.9" NAME="REF_ZETA_Q"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="200" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.9" NAME="REF_ZETA_R"/>
          <define VALUE="300." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(4000.)" NAME="REF_MAX_RDOT"/>
          <define VALUE="850" NAME="PHI_PGAIN"/>
          <define VALUE="425" NAME="PHI_DGAIN"/>
          <define VALUE="0" NAME="PHI_IGAIN"/>
          <define VALUE="850" NAME="THETA_PGAIN"/>
          <define VALUE="425" NAME="THETA_DGAIN"/>
          <define VALUE="0" NAME="THETA_IGAIN"/>
          <define VALUE="1000" NAME="PSI_PGAIN"/>
          <define VALUE="700" NAME="PSI_DGAIN"/>
          <define VALUE="0" NAME="PSI_IGAIN"/>
          <define VALUE="0" NAME="PHI_DDGAIN"/>
          <define VALUE="0" NAME="THETA_DDGAIN"/>
          <define VALUE="100" NAME="PSI_DDGAIN"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="460" NAME="HOVER_KP"/>
          <define VALUE="160" NAME="HOVER_KD"/>
          <define VALUE="26" NAME="HOVER_KI"/>
          <define VALUE="0.655" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="FALSE" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="20" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="160" NAME="PGAIN"/>
          <define VALUE="200" NAME="DGAIN"/>
          <define VALUE="60" NAME="IGAIN"/>
        </section>
        <section PREFIX="NPS_" NAME="SIMULATOR">
          <define VALUE="nw_motor, ne_motor, se_motor, sw_motor" TYPE="string[]" NAME="ACTUATOR_NAMES"/>
          <define VALUE="simple_ardrone2" TYPE="string" NAME="JSBSIM_MODEL"/>
          <define VALUE="nps_sensors_params_ardrone2.h" TYPE="string" NAME="SENSORS_PARAMS"/>
        </section>
        <include HREF="conf/simulator/gazebo/airframes/ardrone2.xml"/>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_NAV" NAME="MODE_STARTUP"/>
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_ATTITUDE_Z_HOLD" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_NAV" NAME="MODE_AUTO2"/>
        </section>
        <section NAME="BAT">
          <define VALUE="8700" NAME="MILLIAMP_AT_FULL_THROTTLE"/>
          <define VALUE="9.3" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="9.6" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="9.7" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="12.4" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.05" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
            <message PERIOD="0.05" NAME="OPTICAL_FLOW_HOVER"/>
            <message PERIOD="0.10" NAME="VISUALTARGET"/>
            <message PERIOD="0.1" NAME="VISION_POSITION_ESTIMATE"/>
            <message PERIOD="0.05" NAME="DIVERGENCE"/>
            <message PERIOD="0.02" NAME="DRAGSPEED"/>
            <message PERIOD="5.1" NAME="LOGGER_STATUS"/>
            <message PERIOD="1.2" NAME="LIDAR"/>
            <message PERIOD=".25" NAME="INS_EKF2"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="BEBOP_ACTUATORS"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_FLOAT"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
            <message PERIOD="2.0" NAME="INDI_G"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="vel_guidance" KEY_PRESS="q">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HYBRID_GUIDANCE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1.0" NAME="GPS_INT"/>
            <message PERIOD="1.0" NAME="INS"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="RTCM3">
            <message PERIOD="1" NAME="GPS_RXMRTCM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD="1" NAME="GPS_RTK"/>
          </mode>
        </process>
        <process NAME="FlightRecorder">
          <mode NAME="default">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD=".1" NAME="GPS_INT"/>
            <message PERIOD=".1" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".2" NAME="IMU_MAG_SCALED"/>
            <message PERIOD="0.05" NAME="LIDAR"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="19"/>
            <dl_setting VAR="autopilot.kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot.power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot.mode" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="19" HANDLER="SetModeHandler"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="nps|hitl">
        <dl_settings>
          <dl_settings NAME="Sim">
            <dl_setting VAR="nps_bypass_ahrs" VALUES="No|Yes" STEP="1" SHORTNAME="bypass_ahrs" MODULE="nps/nps_autopilot" MIN="0" MAX="1"/>
            <dl_setting VAR="nps_bypass_ins" VALUES="No|Yes" STEP="1" SHORTNAME="bypass_ins" MODULE="nps/nps_autopilot" MIN="0" MAX="1"/>
            <dl_setting VAR="gps_has_fix" VALUES="No|Yes" STEP="1" SHORTNAME="gps_fix" MODULE="subsystems/gps/gps_sim_nps" MIN="0" MAX="1"/>
            <dl_setting VAR="datalink_enabled" VALUES="OFF|ON" STEP="1" SHORTNAME="datalink" MODULE="subsystems/datalink/datalink" MIN="0" MAX="1"/>
            <dl_setting VAR="nps_electrical.supply_voltage" UNIT="V" STEP="0.1" SHORTNAME="bat_voltage" MODULE="nps/nps_electrical" MIN="0" MAX="24"/>
            <dl_setting VAR="nps_atmosphere.wind_speed" UNIT="m/s" STEP="0.1" SHORTNAME="wind_speed" MODULE="nps/nps_atmosphere" MIN="0" MAX="25" HANDLER="set_wind_speed"/>
            <dl_setting VAR="nps_atmosphere.wind_dir" UNIT="rad" STEP="1" SHORTNAME="wind_dir" MODULE="nps/nps_atmosphere" MIN="0" MAX="360" HANDLER="set_wind_dir" ALT_UNIT="deg"/>
            <dl_setting VAR="nps_atmosphere.turbulence_severity" STEP="1" SHORTNAME="turbulence" MODULE="nps/nps_atmosphere" MIN="0" MAX="7"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="autonomous_race_2018" ac_id="121" airframe="airframes/tudelft/bebop_autonomous_race_2018.xml" radio="radios/dummy.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/tudelft/rotorcraft_autonomous_drone_race.xml" settings="settings/rotorcraft_basic.xml settings/control/rotorcraft_speed.xml" settings_modules="modules/ctrl_module_outerloop_demo.xml modules/air_data.xml modules/geo_mag.xml modules/ins_extended.xml modules/ahrs_int_cmpl_quat.xml modules/stabilization_indi_simple.xml modules/nav_basic_rotorcraft.xml modules/guidance_rotorcraft.xml modules/gps.xml modules/imu_common.xml" gui_color="#ffffbc3bce5b">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitMM" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1120" MIN="1120" MAX="2000" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="0.3" qfu="270" name="Rotorcraft Optitrack (Delft)" max_dist_from_home="25" lon0="4.376789" lat0="51.990634" ground_alt="0" alt="2.0">
          <header>    // Note: use &apos;git submodule update --init -- sw/ext/tudelft_gazebo_models/&apos;
    // to download the required models.
    #define NPS_GAZEBO_WORLD &quot;drone_race_track_2018_actual_with_gatepapers.world&quot;</header>
          <waypoints>
            <waypoint y="0.0" x="0.0" name="HOME"/>
            <waypoint y="0" x="20" name="CLIMB"/>
            <waypoint y="0" x="0" name="STDBY"/>
            <waypoint y="6" x="20" name="TD"/>
            <waypoint y="-4" x="0" name="G1"/>
            <waypoint y="-4" x="0" name="G2"/>
            <waypoint y="-4" x="0" name="G3"/>
            <waypoint y="-4" x="0" name="G4"/>
            <waypoint y="-4" x="0" name="G5"/>
            <waypoint y="-4" x="0" name="G6"/>
            <waypoint y="-4" x="0" name="G7"/>
            <waypoint y="-4" x="0" name="G8"/>
            <waypoint y="-4" x="0" name="G9"/>
            <waypoint y="-4" x="0" name="G10"/>
            <waypoint y="-4" x="0" name="G11"/>
            <waypoint y="-4" x="0" name="G12"/>
            <waypoint y="-6" x="0" name="p1"/>
            <waypoint y="-6" x="0" name="p2"/>
            <waypoint y="-6" x="0" name="p3"/>
            <waypoint y="-6" x="0" name="p4"/>
            <waypoint y="-6" x="0" name="p5"/>
            <waypoint y="-6" x="0" name="p6"/>
            <waypoint y="-6" x="0" name="p7"/>
            <waypoint y="-6" x="0" name="p8"/>
            <waypoint y="-6" x="0" name="p9"/>
            <waypoint y="-6" x="0" name="p10"/>
            <waypoint y="-6" x="0" name="p11"/>
            <waypoint y="-6" x="0" name="p12"/>
            <waypoint y="-5" x="-2" name="FA1"/>
            <waypoint y="15" x="-2" name="FA2"/>
            <waypoint y="15" x="12" name="FA3"/>
            <waypoint y="-5" x="12" name="FA4"/>
          </waypoints>
          <sectors>
            <sector name="Flight_Area_1" color="red">
              <corner name="FA4"/>
              <corner name="FA3"/>
              <corner name="FA2"/>
              <corner name="FA1"/>
            </sector>
          </sectors>
          <blocks>
            <block name="Holding point" no="0">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="Start Engine" no="1">
              <call_once fun="NavResurrect()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff" name="Takeoff" no="2">
              <exception deroute="Standby" cond="stateGetPositionEnu_f()->z > 1.0"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="3">
              <stay wp="STDBY" no="0"/>
            </block>
            <block name="route" no="4">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <go wp="p3" hmode="route" from="p2" no="1"/>
              <go wp="p4" hmode="route" from="p3" no="2"/>
              <go wp="p5" hmode="route" from="p4" no="3"/>
              <go wp="p6" hmode="route" from="p5" no="4"/>
              <go wp="p7" hmode="route" from="p6" no="5"/>
              <go wp="p8" hmode="route" from="p7" no="6"/>
              <go wp="p9" hmode="route" from="p8" no="7"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land Here" name="land here" no="5">
              <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
            </block>
            <block name="land" no="6">
              <go wp="TD" no="0"/>
            </block>
            <block name="flare" no="7">
              <exception deroute="Holding point" cond="NavDetectGround()"/>
              <exception deroute="landed" cond="!nav_is_in_flight()"/>
              <call_once fun="NavStartDetectGround()" no="0"/>
              <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
            </block>
            <block name="landed" no="8">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="HOME" no="9">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="9" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="8" block_name="landed" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="8" block_name="landed" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="7" block_name="flare" stage="1">
            <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
          </stage>
          <stage block="7" block_name="flare" stage="0">
            <call_once fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="6" block_name="land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="5" block_name="land here" stage="0">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="4" block_name="route" stage="7">
            <go wp="p9" hmode="route" from="p8" no="7"/>
          </stage>
          <stage block="4" block_name="route" stage="6">
            <go wp="p8" hmode="route" from="p7" no="6"/>
          </stage>
          <stage block="4" block_name="route" stage="5">
            <go wp="p7" hmode="route" from="p6" no="5"/>
          </stage>
          <stage block="4" block_name="route" stage="4">
            <go wp="p6" hmode="route" from="p5" no="4"/>
          </stage>
          <stage block="4" block_name="route" stage="3">
            <go wp="p5" hmode="route" from="p4" no="3"/>
          </stage>
          <stage block="4" block_name="route" stage="2">
            <go wp="p4" hmode="route" from="p3" no="2"/>
          </stage>
          <stage block="4" block_name="route" stage="1">
            <go wp="p3" hmode="route" from="p2" no="1"/>
          </stage>
          <stage block="4" block_name="route" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="3" block_name="Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="2" block_name="Takeoff" stage="1">
            <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
          </stage>
          <stage block="2" block_name="Takeoff" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="1" block_name="Start Engine" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="1" block_name="Start Engine" stage="0">
            <call_once fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="0" block_name="Holding point" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="0" block_name="Holding point" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="CtrlModDemo">
              <dl_setting VAR="comode_time" STEP="0.01" SHORTNAME="time" MODULE="ctrl/ctrl_module_outerloop_demo" MIN="0" MAX="3"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="air_data">
              <dl_setting VAR="air_data.qnh" STEP="1" SHORTNAME="QNH" MODULE="air_data/air_data" MIN="800" MAX="1200"/>
              <dl_setting VAR="air_data.tas_factor" TYPE="float" STEP="0.01" SHORTNAME="TASfactor" PERSISTENT="true" PARAM="AIR_DATA_TAS_FACTOR" MODULE="air_data/air_data" MIN="0.8" MAX="1.3"/>
              <dl_setting VAR="air_data.calc_qnh_once" STEP="1" SHORTNAME="calcQNH" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_airspeed" TYPE="uint8" STEP="1" SHORTNAME="calcAirspeed" PERSISTENT="true" PARAM="AIR_DATA_CALC_AIRSPEED" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_tas_factor" TYPE="uint8" STEP="1" SHORTNAME="calcTASfactor" PERSISTENT="true" PARAM="AIR_DATA_CALC_TAS_FACTOR" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_amsl_baro" TYPE="uint8" STEP="1" SHORTNAME="calcAMSL" PERSISTENT="true" PARAM="AIR_DATA_CALC_AMSL_BARO" MODULE="air_data/air_data" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="geo_mag">
              <dl_setting VAR="geo_mag.calc_once" VALUES="OFF|CALC" STEP="1" SHORTNAME="calcNow" MODULE="geo_mag/geo_mag" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="Ins Extended">
            <dl_settings NAME="INS">
              <dl_setting VAR="vff.accel_noise" STEP="0.1" SHORTNAME="accel_noise" MODULE="subsystems/ins/vf_extended_float" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_baro" STEP="0.1" SHORTNAME="r_baro" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_alt" STEP="0.1" SHORTNAME="r_alt" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_obs_height" STEP="0.1" SHORTNAME="r_obs_height" MIN="0" MAX="10"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
              <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
              <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
              <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
              <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="indi">
              <dl_setting VAR="indi.reference_acceleration.err_p" STEP="1" SHORTNAME="kp_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_P" MODULE="stabilization/stabilization_indi_simple" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_p" STEP="0.1" SHORTNAME="kd_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.p" STEP="0.001" SHORTNAME="ctl_eff_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_P" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.reference_acceleration.err_q" STEP="1" SHORTNAME="kp_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_Q" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_q" STEP="0.1" SHORTNAME="kd_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.q" STEP="0.001" SHORTNAME="ctl_eff_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_Q" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.reference_acceleration.err_r" STEP="1" SHORTNAME="kp_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_R" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_r" STEP="0.1" SHORTNAME="kd_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.r" STEP="0.001" SHORTNAME="ctl_eff_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_R" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.g2" STEP="0.01" SHORTNAME="g2" PERSISTENT="true" PARAM="STABILIZATION_INDI_G2_R" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.adaptive" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="use_adaptive" PERSISTENT="true" PARAM="STABILIZATION_INDI_USE_ADAPTIVE" MIN="0" MAX="1"/>
              <dl_setting VAR="indi.max_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_rate" PARAM="STABILIZATION_INDI_MAX_RATE" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
              <dl_setting VAR="indi.attitude_max_yaw_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_yaw_rate_attitude" PARAM="STABILIZATION_INDI_MAX_R" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="NAV">
              <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
              <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
              <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MIN="-50" MAX="50"/>
              <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MIN="0" MAX="10.0"/>
              <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MIN="-10.0" MAX="0.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Vert Loop">
              <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
              <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MIN="0.2" MAX="0.8"/>
              <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MIN="0" MAX="1"/>
              <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
            <dl_settings NAME="Horiz Loop">
              <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="true" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
              <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
              <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MIN="0" MAX="1"/>
              <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
              <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
              <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
              <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
              <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
              <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="bebop">
        <description>Autonomous Race 2018 Bebop1</description>
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="bebop"/>
          <target NAME="nps" BOARD="pc">
            <module TYPE="jsbsim" NAME="fdm"/>
            <module NAME="udp"/>
          </target>
          <define VALUE="TRUE" NAME="USE_SONAR"/>
          <define VALUE="TRUE" NAME="SONAR_BEBOP_FILTER_NARROW_OBSTACLES"/>
          <define VALUE="0.4" NAME="SONAR_BEBOP_FILTER_NARROW_OBSTACLES_JUMP"/>
          <define VALUE="1.0" NAME="SONAR_BEBOP_FILTER_NARROW_OBSTACLES_TIME"/>
          <module TYPE="transparent_udp" NAME="telemetry"/>
          <module TYPE="datalink" NAME="radio_control"/>
          <module NAME="motor_mixing"/>
          <module TYPE="bebop" NAME="actuators"/>
          <module TYPE="bebop" NAME="imu"/>
          <module TYPE="datalink" NAME="gps"/>
          <module TYPE="indi_simple" NAME="stabilization"/>
          <module TYPE="rate_indi" NAME="stabilization"/>
          <module TYPE="int_cmpl_quat" NAME="ahrs">
            <configure VALUE="FALSE" NAME="USE_MAGNETOMETER"/>
            <configure VALUE="TRUE" NAME="USE_GPS"/>
            <define VALUE="TRUE" NAME="AHRS_USE_GPS_HEADING"/>
            <define VALUE="TRUE" NAME="AHRS_GRAVITY_UPDATE_COORDINATED_TURN"/>
          </module>
          <module TYPE="extended" NAME="ins"/>
          <module NAME="geo_mag"/>
          <module NAME="air_data"/>
          <module NAME="send_imu_mag_current"/>
          <module NAME="logger_file">
            <define VALUE="/data/ftp/internal_000" NAME="FILE_LOGGER_PATH"/>
          </module>
          <module NAME="ctrl_module_outerloop_demo"/>
          <module NAME="sonar_bebop"/>
          <module NAME="jevois_mavlink"/>
        </firmware>
        <commands>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="6000"/>
        </commands>
        <servos DRIVER="Default">
          <servo NO="0" NEUTRAL="3000" NAME="TOP_LEFT" MIN="3000" MAX="12000"/>
          <servo NO="1" NEUTRAL="3000" NAME="TOP_RIGHT" MIN="3000" MAX="12000"/>
          <servo NO="2" NEUTRAL="3000" NAME="BOTTOM_RIGHT" MIN="3000" MAX="12000"/>
          <servo NO="3" NEUTRAL="3000" NAME="BOTTOM_LEFT" MIN="3000" MAX="12000"/>
        </servos>
        <section PREFIX="MOTOR_MIXING_" NAME="MIXING">
          <define VALUE="0" NAME="TRIM_ROLL"/>
          <define VALUE="0" NAME="TRIM_PITCH"/>
          <define VALUE="0" NAME="TRIM_YAW"/>
          <define VALUE="QUAD_X" NAME="TYPE"/>
        </section>
        <command_laws>
          <call FUN="motor_mixing_run(autopilot_get_motors_on(),FALSE,values)"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_LEFT]" SERVO="TOP_LEFT"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_RIGHT]" SERVO="TOP_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_RIGHT]" SERVO="BOTTOM_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_LEFT]" SERVO="BOTTOM_LEFT"/>
        </command_laws>
        <section PREFIX="AIR_DATA_" NAME="AIR_DATA">
          <define VALUE="FALSE" NAME="CALC_AIRSPEED"/>
          <define VALUE="FALSE" NAME="CALC_TAS_FACTOR"/>
          <define VALUE="TRUE" NAME="CALC_AMSL_BARO"/>
        </section>
        <include HREF="conf/airframes/tudelft/calibrations/bebop7.xml"/>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.3892503" NAME="H_X"/>
          <define VALUE="0.0017972" NAME="H_Y"/>
          <define VALUE="0.9211303" NAME="H_Z"/>
          <define VALUE="0" NAME="HEADING_UPDATE_GPS_MIN_SPEED"/>
          <define VALUE="30" NAME="GRAVITY_HEURISTIC_FACTOR"/>
        </section>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="INS_" NAME="INS">
          <define VALUE="5" NAME="SONAR_MAX_RANGE"/>
          <define VALUE="TRUE" NAME="SONAR_UPDATE_ON_AGL"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="RC_SETPOINT">
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="90." UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="0" NAME="DEADBAND_A"/>
          <define VALUE="0" NAME="DEADBAND_E"/>
          <define VALUE="250" NAME="DEADBAND_R"/>
        </section>
        <section PREFIX="STABILIZATION_INDI_" NAME="STABILIZATION_ATTITUDE_INDI">
          <define VALUE="0.04762" NAME="G1_P"/>
          <define VALUE="0.041149" NAME="G1_Q"/>
          <define VALUE="0.00194" NAME="G1_R"/>
          <define VALUE="0.151811" NAME="G2_R"/>
          <define VALUE="400.0" NAME="REF_ERR_P"/>
          <define VALUE="400.0" NAME="REF_ERR_Q"/>
          <define VALUE="400.0" NAME="REF_ERR_R"/>
          <define VALUE="28.0" NAME="REF_RATE_P"/>
          <define VALUE="28.0" NAME="REF_RATE_Q"/>
          <define VALUE="28.0" NAME="REF_RATE_R"/>
          <define VALUE="120.0" UNIT="deg/s" NAME="MAX_R"/>
          <define VALUE="50.0" NAME="FILT_OMEGA"/>
          <define VALUE="0.55" NAME="FILT_ZETA"/>
          <define VALUE="50.0" NAME="FILT_OMEGA_R"/>
          <define VALUE="0.55" NAME="FILT_ZETA_R"/>
          <define VALUE="0.1" NAME="ACT_DYN_P"/>
          <define VALUE="0.1" NAME="ACT_DYN_Q"/>
          <define VALUE="0.1" NAME="ACT_DYN_R"/>
          <define VALUE="FALSE" NAME="USE_ADAPTIVE"/>
          <define VALUE="0.0001" NAME="ADAPTIVE_MU"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="283" NAME="HOVER_KP"/>
          <define VALUE="82" NAME="HOVER_KD"/>
          <define VALUE="20" NAME="HOVER_KI"/>
          <define VALUE="0.655" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="TRUE" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="20" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="2" UNIT="m/s" NAME="REF_MAX_SPEED"/>
          <define VALUE="79" NAME="PGAIN"/>
          <define VALUE="100" NAME="DGAIN"/>
          <define VALUE="30" NAME="IGAIN"/>
        </section>
        <section PREFIX="NAV_" NAME="NAVIGATION">
          <define VALUE="2.5" NAME="CLIMB_VSPEED"/>
          <define VALUE="-1.0" NAME="DESCEND_VSPEED"/>
        </section>
        <section PREFIX="NPS_" NAME="SIMULATOR">
          <define VALUE="nw_motor, ne_motor, se_motor, sw_motor" TYPE="string[]" NAME="ACTUATOR_NAMES"/>
          <define VALUE="simple_x_quad_ccw" TYPE="string" NAME="JSBSIM_MODEL"/>
          <define VALUE="nps_sensors_params_default.h" TYPE="string" NAME="SENSORS_PARAMS"/>
        </section>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_NAV" NAME="MODE_STARTUP"/>
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_ATTITUDE_Z_HOLD" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_MODULE" NAME="MODE_AUTO2"/>
          <define VALUE="TRUE" NAME="NO_RC_THRUST_LIMIT"/>
        </section>
        <section NAME="BAT">
          <define VALUE="8700" NAME="MILLIAMP_AT_FULL_THROTTLE"/>
          <define VALUE="9.9" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="11.0" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="11.1" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="12.4" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.05" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
            <message PERIOD="0.05" NAME="OPTICAL_FLOW_HOVER"/>
            <message PERIOD="0.10" NAME="VISUALTARGET"/>
            <message PERIOD="0.1" NAME="VISION_POSITION_ESTIMATE"/>
            <message PERIOD="0.05" NAME="DIVERGENCE"/>
            <message PERIOD="0.02" NAME="DRAGSPEED"/>
            <message PERIOD="5.1" NAME="LOGGER_STATUS"/>
            <message PERIOD="1.2" NAME="LIDAR"/>
            <message PERIOD=".25" NAME="INS_EKF2"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="BEBOP_ACTUATORS"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_FLOAT"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
            <message PERIOD="2.0" NAME="INDI_G"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="vel_guidance" KEY_PRESS="q">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HYBRID_GUIDANCE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1.0" NAME="GPS_INT"/>
            <message PERIOD="1.0" NAME="INS"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="RTCM3">
            <message PERIOD="1" NAME="GPS_RXMRTCM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD="1" NAME="GPS_RTK"/>
          </mode>
        </process>
        <process NAME="FlightRecorder">
          <mode NAME="default">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD=".1" NAME="GPS_INT"/>
            <message PERIOD=".1" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".2" NAME="IMU_MAG_SCALED"/>
            <message PERIOD="0.05" NAME="LIDAR"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="19"/>
            <dl_setting VAR="autopilot.kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot.power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot.mode" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="19" HANDLER="SetModeHandler"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Horiz Loop">
            <dl_setting VAR="gh_ref.max_speed" STEP="0.1" SHORTNAME="max_speed" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed">
              <strip_button VALUE="1" NAME="V1" GROUP="speed"/>
              <strip_button VALUE="2" NAME="V2" GROUP="speed"/>
              <strip_button VALUE="5" NAME="V5" GROUP="speed"/>
              <strip_button VALUE="10" NAME="V10" GROUP="speed"/>
            </dl_setting>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="bebop2_22" ac_id="22" airframe="airframes/tudelft/bebop2_indi.xml" radio="radios/dummy.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/tudelft/delft_basic.xml" settings="settings/rotorcraft_basic.xml settings/estimation/ahrs_secondary.xml" settings_modules="modules/gps_ubx_ucenter.xml modules/air_data.xml modules/geo_mag.xml modules/ins_extended.xml modules/ahrs_int_cmpl_quat.xml modules/stabilization_indi.xml modules/nav_basic_rotorcraft.xml modules/guidance_rotorcraft.xml modules/gps.xml modules/imu_common.xml" gui_color="#baa3d698b729">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitMM" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1120" MIN="1120" MAX="2000" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="2" name="Delft Basic" max_dist_from_home="1000" lon0="4 22 42.0" lat0="51 59 27.6" ground_alt="0" alt="4">
          <header>    #include &quot;autopilot.h&quot;
    #include &quot;subsystems/datalink/datalink.h&quot;
    #include &quot;subsystems/electrical.h&quot;
    #include &quot;subsystems/radio_control.h&quot;</header>
          <waypoints>
            <waypoint y="0.0" x="0.0" name="HOME"/>
            <waypoint y="5.0" x="0.0" name="CLIMB"/>
            <waypoint y="-5.0" x="-2.0" name="STDBY"/>
            <waypoint y="14.3" x="-19.9" name="p1"/>
            <waypoint y="21.6" x="-0.6" name="p2"/>
            <waypoint y="-26.5" x="22.2" name="p3"/>
            <waypoint y="-34.4" x="4.9" name="p4"/>
            <waypoint y="-29.4" x="14.2" name="CAM"/>
            <waypoint y="-10.9" x="5.6" name="TD"/>
          </waypoints>
          <exceptions>
            <exception deroute="ComeBackAndLand" cond="((radio_control.status == RC_REALLY_LOST) &&
      !(IndexOfBlock('Takeoff') > nav_block) &&
      !(nav_block >= IndexOfBlock('land here')) &&
      (autopilot_in_flight() == true) )"/>
            <exception deroute="DatalinkLoss" cond="(datalink_time > 60 &&
      !(datalink_time > 120) &&
      !(IndexOfBlock('Takeoff') > nav_block) &&
      !(nav_block >= IndexOfBlock('land here')) &&
      (autopilot_in_flight() == true) )"/>
            <exception deroute="ComeBackAndLand" cond="(electrical.bat_low &&
      !(IndexOfBlock('Holding point') > nav_block) &&
      !(nav_block >= IndexOfBlock('land here')) &&
      (autopilot_in_flight() == true) )"/>
            <exception deroute="land here" cond="(electrical.bat_critical &&
      !(IndexOfBlock('Holding point') > nav_block) &&
      !(nav_block >= IndexOfBlock('land here')) &&
      (autopilot_in_flight() == true) )"/>
          </exceptions>
          <blocks>
            <block name="Wait GPS" no="0">
              <call_once fun="NavKillThrottle()" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Geo init" no="1">
              <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
              <call_once fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Holding point" no="2">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="Start Engine" no="3">
              <call_once fun="NavResurrect()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff" name="Takeoff" no="4">
              <exception deroute="Standby" cond="stateGetPositionEnu_f()->z > 2.0"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="5">
              <stay wp="STDBY" no="0"/>
            </block>
            <block name="stay_p1" no="6">
              <stay wp="p1" no="0"/>
            </block>
            <block name="go_p2" no="7">
              <go wp="p2" no="0"/>
              <deroute block="stay_p1" no="1"/>
            </block>
            <block name="line_p1_p2" no="8">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <stay wp="p2" until="stage_time>10" no="1"/>
              <go wp="p1" hmode="route" from="p2" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="route" no="9">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <go wp="p3" hmode="route" from="p2" no="1"/>
              <go wp="p4" hmode="route" from="p3" no="2"/>
              <go wp="p1" hmode="route" from="p4" no="3"/>
              <deroute block="stay_p1" no="4"/>
            </block>
            <block name="test yaw" no="10">
              <go wp="p1" no="0"/>
              <for var="i" to="16" from="1" no="2">
                <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
              </for>
              <deroute block="Standby" no="5"/>
            </block>
            <block pre_call="nav_set_heading_towards_waypoint(WP_CAM)" name="circle CAM" no="11">
              <circle wp="CAM" radius="nav_radius" no="0"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land Here" name="land here" no="12">
              <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
            </block>
            <block name="land" no="13">
              <go wp="TD" no="0"/>
            </block>
            <block name="flare" no="14">
              <exception deroute="Holding point" cond="NavDetectGround()"/>
              <exception deroute="landed" cond="!nav_is_in_flight()"/>
              <call_once fun="NavStartDetectGround()" no="0"/>
              <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
            </block>
            <block name="landed" no="15">
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
            </block>
            <block name="ComeBackAndLand" no="16">
              <go wp="HOME" no="0"/>
              <deroute block="land here" no="1"/>
            </block>
            <block name="DatalinkLoss" no="17">
              <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
              <stay wp="TD" until="stage_time>60" no="1"/>
              <deroute block="ComeBackAndLand" no="2"/>
            </block>
            <block name="HOME" no="18">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="18" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="17" block_name="DatalinkLoss" stage="2">
            <deroute block="ComeBackAndLand" no="2"/>
          </stage>
          <stage block="17" block_name="DatalinkLoss" stage="1">
            <stay wp="TD" until="stage_time>60" no="1"/>
          </stage>
          <stage block="17" block_name="DatalinkLoss" stage="0">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="16" block_name="ComeBackAndLand" stage="1">
            <deroute block="land here" no="1"/>
          </stage>
          <stage block="16" block_name="ComeBackAndLand" stage="0">
            <go wp="HOME" no="0"/>
          </stage>
          <stage block="15" block_name="landed" stage="0">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
          </stage>
          <stage block="14" block_name="flare" stage="1">
            <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
          </stage>
          <stage block="14" block_name="flare" stage="0">
            <call_once fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="13" block_name="land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="12" block_name="land here" stage="0">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="11" block_name="circle CAM" stage="0">
            <circle wp="CAM" radius="nav_radius" no="0"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="5">
            <deroute block="Standby" no="5"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="3">
            <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="2">
            <for var="i" to="16" from="1" no="2">
              <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
            </for>
          </stage>
          <stage block="10" block_name="test yaw" stage="0">
            <go wp="p1" no="0"/>
          </stage>
          <stage block="9" block_name="route" stage="4">
            <deroute block="stay_p1" no="4"/>
          </stage>
          <stage block="9" block_name="route" stage="3">
            <go wp="p1" hmode="route" from="p4" no="3"/>
          </stage>
          <stage block="9" block_name="route" stage="2">
            <go wp="p4" hmode="route" from="p3" no="2"/>
          </stage>
          <stage block="9" block_name="route" stage="1">
            <go wp="p3" hmode="route" from="p2" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="2">
            <go wp="p1" hmode="route" from="p2" no="2"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="1">
            <stay wp="p2" until="stage_time>10" no="1"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="1">
            <deroute block="stay_p1" no="1"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="0">
            <go wp="p2" no="0"/>
          </stage>
          <stage block="6" block_name="stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="5" block_name="Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="1">
            <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="0">
            <call_once fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="2">
            <call_once fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="0">
            <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings NAME="ublox">
            <dl_settings NAME="ucenter">
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_h" STEP="1" SHORTNAME="sw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_l" STEP="1" SHORTNAME="sw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_h" STEP="1" SHORTNAME="hw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_l" STEP="1" SHORTNAME="hw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_init" STEP="100" SHORTNAME="inibaud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_run" STEP="100" SHORTNAME="baud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="air_data">
              <dl_setting VAR="air_data.qnh" STEP="1" SHORTNAME="QNH" MODULE="air_data/air_data" MIN="800" MAX="1200"/>
              <dl_setting VAR="air_data.tas_factor" TYPE="float" STEP="0.01" SHORTNAME="TASfactor" PERSISTENT="true" PARAM="AIR_DATA_TAS_FACTOR" MODULE="air_data/air_data" MIN="0.8" MAX="1.3"/>
              <dl_setting VAR="air_data.calc_qnh_once" STEP="1" SHORTNAME="calcQNH" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_airspeed" TYPE="uint8" STEP="1" SHORTNAME="calcAirspeed" PERSISTENT="true" PARAM="AIR_DATA_CALC_AIRSPEED" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_tas_factor" TYPE="uint8" STEP="1" SHORTNAME="calcTASfactor" PERSISTENT="true" PARAM="AIR_DATA_CALC_TAS_FACTOR" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_amsl_baro" TYPE="uint8" STEP="1" SHORTNAME="calcAMSL" PERSISTENT="true" PARAM="AIR_DATA_CALC_AMSL_BARO" MODULE="air_data/air_data" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="geo_mag">
              <dl_setting VAR="geo_mag.calc_once" VALUES="OFF|CALC" STEP="1" SHORTNAME="calcNow" MODULE="geo_mag/geo_mag" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="Ins Extended">
            <dl_settings NAME="INS">
              <dl_setting VAR="vff.accel_noise" STEP="0.1" SHORTNAME="accel_noise" MODULE="subsystems/ins/vf_extended_float" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_baro" STEP="0.1" SHORTNAME="r_baro" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_alt" STEP="0.1" SHORTNAME="r_alt" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_obs_height" STEP="0.1" SHORTNAME="r_obs_height" MIN="0" MAX="10"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
              <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
              <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
              <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
              <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="indi">
              <dl_setting VAR="reference_acceleration.err_p" STEP="1" SHORTNAME="kp_p" PARAM="STABILIZATION_INDI_REF_ERR_P" MIN="0" MAX="2500"/>
              <dl_setting VAR="reference_acceleration.rate_p" STEP="0.1" SHORTNAME="kd_p" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="reference_acceleration.err_q" STEP="1" SHORTNAME="kp_q" PARAM="STABILIZATION_INDI_REF_ERR_Q" MIN="0" MAX="2500"/>
              <dl_setting VAR="reference_acceleration.rate_q" STEP="0.1" SHORTNAME="kd_q" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="reference_acceleration.err_r" STEP="1" SHORTNAME="kp_r" PARAM="STABILIZATION_INDI_REF_ERR_R" MIN="0" MAX="2500"/>
              <dl_setting VAR="reference_acceleration.rate_r" STEP="0.1" SHORTNAME="kd_r" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi_use_adaptive" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="use_adaptive" PARAM="STABILIZATION_INDI_USE_ADAPTIVE" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="NAV">
              <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
              <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
              <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MIN="-50" MAX="50"/>
              <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MIN="0" MAX="10.0"/>
              <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MIN="-10.0" MAX="0.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Vert Loop">
              <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
              <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MIN="0.2" MAX="0.8"/>
              <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MIN="0" MAX="1"/>
              <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
            <dl_settings NAME="Horiz Loop">
              <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="true" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
              <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
              <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MIN="0" MAX="1"/>
              <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
              <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
              <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
              <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
              <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
              <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="bebop2_indi">
        <description>Bebop2, Outdoor</description>
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="bebop2"/>
          <module TYPE="transparent_udp" NAME="telemetry"/>
          <module TYPE="datalink" NAME="radio_control"/>
          <module TYPE="bebop" NAME="actuators"/>
          <module TYPE="bebop" NAME="imu"/>
          <module TYPE="ublox" NAME="gps"/>
          <module TYPE="indi" NAME="stabilization">
            <define VALUE="TRUE" NAME="INDI_RPM_FEEDBACK"/>
          </module>
          <module TYPE="int_cmpl_quat" NAME="ahrs">
            <configure VALUE="TRUE" NAME="USE_MAGNETOMETER"/>
            <define VALUE="FALSE" NAME="AHRS_USE_GPS_HEADING"/>
          </module>
          <module TYPE="extended" NAME="ins"/>
          <module NAME="geo_mag"/>
          <module NAME="air_data"/>
          <module NAME="send_imu_mag_current"/>
          <module TYPE="ubx_ucenter" NAME="gps"/>
          <module NAME="logger_file">
            <define VALUE="/data/ftp/internal_000" NAME="FILE_LOGGER_PATH"/>
          </module>
        </firmware>
        <commands>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="6000"/>
        </commands>
        <servos DRIVER="Default">
          <servo NO="0" NEUTRAL="3000" NAME="TOP_LEFT" MIN="3000" MAX="11000"/>
          <servo NO="1" NEUTRAL="3000" NAME="TOP_RIGHT" MIN="3000" MAX="11000"/>
          <servo NO="2" NEUTRAL="3000" NAME="BOTTOM_RIGHT" MIN="3000" MAX="11000"/>
          <servo NO="3" NEUTRAL="3000" NAME="BOTTOM_LEFT" MIN="3000" MAX="11000"/>
        </servos>
        <command_laws>
          <set VALUE="autopilot_get_motors_on() ? actuators_pprz[0] : -MAX_PPRZ" SERVO="TOP_LEFT"/>
          <set VALUE="autopilot_get_motors_on() ? actuators_pprz[1] : -MAX_PPRZ" SERVO="TOP_RIGHT"/>
          <set VALUE="autopilot_get_motors_on() ? actuators_pprz[2] : -MAX_PPRZ" SERVO="BOTTOM_RIGHT"/>
          <set VALUE="autopilot_get_motors_on() ? actuators_pprz[3] : -MAX_PPRZ" SERVO="BOTTOM_LEFT"/>
        </command_laws>
        <section PREFIX="AIR_DATA_" NAME="AIR_DATA">
          <define VALUE="FALSE" NAME="CALC_AIRSPEED"/>
          <define VALUE="FALSE" NAME="CALC_TAS_FACTOR"/>
          <define VALUE="TRUE" NAME="CALC_AMSL_BARO"/>
        </section>
        <include HREF="conf/airframes/tudelft/calibrations/bebop2_$AC_ID.xml"/>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.3892503" NAME="H_X"/>
          <define VALUE="0.0017972" NAME="H_Y"/>
          <define VALUE="0.9211303" NAME="H_Z"/>
        </section>
        <section PREFIX="INS_" NAME="INS">
          <define VALUE="2.2" NAME="SONAR_MAX_RANGE"/>
          <define VALUE="TRUE" NAME="SONAR_UPDATE_ON_AGL"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="RC_SETPOINT">
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="300" UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="0" NAME="DEADBAND_A"/>
          <define VALUE="0" NAME="DEADBAND_E"/>
          <define VALUE="50" NAME="DEADBAND_R"/>
        </section>
        <section PREFIX="STABILIZATION_INDI_" NAME="STABILIZATION_ATTITUDE_INDI">
          <define VALUE="{18.f, -18.f, -18.f , 18.f}" NAME="G1_ROLL"/>
          <define VALUE="{15.f , 15.f, -15.f, -15.f }" NAME="G1_PITCH"/>
          <define VALUE="{0.65f, -0.65f, 0.65f, -0.65f}" NAME="G1_YAW"/>
          <define VALUE="{-.7f, -.7f, -.7f, -.7f}" NAME="G1_THRUST"/>
          <define VALUE="{ 110.f,   -110.f,   110.f,   -110.f}" NAME="G2"/>
          <define VALUE="FALSE" NAME="FILTER_ROLL_RATE"/>
          <define VALUE="FALSE" NAME="FILTER_PITCH_RATE"/>
          <define VALUE="FALSE" NAME="FILTER_YAW_RATE"/>
          <define VALUE="380.f" NAME="REF_ERR_P"/>
          <define VALUE="380.f" NAME="REF_ERR_Q"/>
          <define VALUE="380.f" NAME="REF_ERR_R"/>
          <define VALUE="23.f" NAME="REF_RATE_P"/>
          <define VALUE="23.f" NAME="REF_RATE_Q"/>
          <define VALUE="23.f" NAME="REF_RATE_R"/>
          <define VALUE="3.2f" NAME="FILT_CUTOFF"/>
          <define VALUE="3.2f" NAME="ESTIMATION_FILT_CUTOFF"/>
          <define VALUE="{0.08f, 0.08f, 0.08f, 0.08f}" NAME="ACT_DYN"/>
          <define VALUE="FALSE" NAME="USE_ADAPTIVE"/>
          <define VALUE="0.0001f" NAME="ADAPTIVE_MU"/>
          <define VALUE="{1000.f, 1000.f, 1.f, 100.f}" NAME="WLS_PRIORITIES"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="350" NAME="HOVER_KP"/>
          <define VALUE="85" NAME="HOVER_KD"/>
          <define VALUE="20" NAME="HOVER_KI"/>
          <define VALUE="0.655" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="TRUE" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="20" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="2" UNIT="m/s" NAME="REF_MAX_SPEED"/>
          <define VALUE="120" NAME="PGAIN"/>
          <define VALUE="100" NAME="DGAIN"/>
          <define VALUE="30" NAME="IGAIN"/>
        </section>
        <section PREFIX="NAV_" NAME="NAVIGATION">
          <define VALUE="4.5" NAME="CLIMB_VSPEED"/>
          <define VALUE="-1.0" NAME="DESCEND_VSPEED"/>
        </section>
        <section PREFIX="NPS_" NAME="SIMULATOR">
          <define VALUE="nw_motor, ne_motor, se_motor, sw_motor" TYPE="string[]" NAME="ACTUATOR_NAMES"/>
          <define VALUE="simple_x_quad_ccw" TYPE="string" NAME="JSBSIM_MODEL"/>
          <define VALUE="nps_sensors_params_default.h" TYPE="string" NAME="SENSORS_PARAMS"/>
        </section>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_NAV" NAME="MODE_STARTUP"/>
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_ATTITUDE_Z_HOLD" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_NAV" NAME="MODE_AUTO2"/>
          <define VALUE="TRUE" NAME="NO_RC_THRUST_LIMIT"/>
        </section>
        <section NAME="BAT">
          <define VALUE="8700" NAME="MILLIAMP_AT_FULL_THROTTLE"/>
          <define VALUE="9.9" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="11.0" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="11.1" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="12.4" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.05" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
            <message PERIOD="0.05" NAME="OPTICAL_FLOW_HOVER"/>
            <message PERIOD="0.10" NAME="VISUALTARGET"/>
            <message PERIOD="0.1" NAME="VISION_POSITION_ESTIMATE"/>
            <message PERIOD="0.05" NAME="DIVERGENCE"/>
            <message PERIOD="0.02" NAME="DRAGSPEED"/>
            <message PERIOD="5.1" NAME="LOGGER_STATUS"/>
            <message PERIOD="1.2" NAME="LIDAR"/>
            <message PERIOD=".25" NAME="INS_EKF2"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="BEBOP_ACTUATORS"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_FLOAT"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
            <message PERIOD="2.0" NAME="INDI_G"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="vel_guidance" KEY_PRESS="q">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HYBRID_GUIDANCE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1.0" NAME="GPS_INT"/>
            <message PERIOD="1.0" NAME="INS"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="RTCM3">
            <message PERIOD="1" NAME="GPS_RXMRTCM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD="1" NAME="GPS_RTK"/>
          </mode>
        </process>
        <process NAME="FlightRecorder">
          <mode NAME="default">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD=".1" NAME="GPS_INT"/>
            <message PERIOD=".1" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".2" NAME="IMU_MAG_SCALED"/>
            <message PERIOD="0.05" NAME="LIDAR"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="19"/>
            <dl_setting VAR="autopilot.kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot.power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot.mode" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="19" HANDLER="SetModeHandler"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps|test_ahrs">
        <dl_settings>
          <dl_settings NAME="AHRS">
            <dl_setting VAR="ahrs_output_idx" VALUES="PRIMARY|SECONDARY" STEP="1" SHORTNAME="ahrs output" MODULE="subsystems/ahrs" MIN="0" MAX="1" HANDLER="switch"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="bebop2_detect_gate_front" ac_id="218" airframe="airframes/tudelft/bebop2_detect_gate_front.xml" radio="radios/dummy.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/tudelft/rotorcraft_autonomous_drone_race.xml" settings="settings/rotorcraft_basic.xml" settings_modules="modules/video_rtp_stream.xml modules/cv_detect_gate.xml modules/ctrl_module_outerloop_demo.xml modules/video_capture.xml modules/bebop_cam.xml modules/air_data.xml modules/geo_mag.xml modules/ins_extended.xml modules/ahrs_int_cmpl_quat.xml modules/stabilization_indi_simple.xml modules/nav_basic_rotorcraft.xml modules/guidance_rotorcraft.xml modules/gps.xml modules/imu_common.xml" gui_color="#ffffbf17bf17">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitMM" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1120" MIN="1120" MAX="2000" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="0.3" qfu="270" name="Rotorcraft Optitrack (Delft)" max_dist_from_home="25" lon0="4.376789" lat0="51.990634" ground_alt="0" alt="2.0">
          <header>    // Note: use &apos;git submodule update --init -- sw/ext/tudelft_gazebo_models/&apos;
    // to download the required models.
    #define NPS_GAZEBO_WORLD &quot;drone_race_track_2018_actual_with_gatepapers.world&quot;</header>
          <waypoints>
            <waypoint y="0.0" x="0.0" name="HOME"/>
            <waypoint y="0" x="20" name="CLIMB"/>
            <waypoint y="0" x="0" name="STDBY"/>
            <waypoint y="6" x="20" name="TD"/>
            <waypoint y="-4" x="0" name="G1"/>
            <waypoint y="-4" x="0" name="G2"/>
            <waypoint y="-4" x="0" name="G3"/>
            <waypoint y="-4" x="0" name="G4"/>
            <waypoint y="-4" x="0" name="G5"/>
            <waypoint y="-4" x="0" name="G6"/>
            <waypoint y="-4" x="0" name="G7"/>
            <waypoint y="-4" x="0" name="G8"/>
            <waypoint y="-4" x="0" name="G9"/>
            <waypoint y="-4" x="0" name="G10"/>
            <waypoint y="-4" x="0" name="G11"/>
            <waypoint y="-4" x="0" name="G12"/>
            <waypoint y="-6" x="0" name="p1"/>
            <waypoint y="-6" x="0" name="p2"/>
            <waypoint y="-6" x="0" name="p3"/>
            <waypoint y="-6" x="0" name="p4"/>
            <waypoint y="-6" x="0" name="p5"/>
            <waypoint y="-6" x="0" name="p6"/>
            <waypoint y="-6" x="0" name="p7"/>
            <waypoint y="-6" x="0" name="p8"/>
            <waypoint y="-6" x="0" name="p9"/>
            <waypoint y="-6" x="0" name="p10"/>
            <waypoint y="-6" x="0" name="p11"/>
            <waypoint y="-6" x="0" name="p12"/>
            <waypoint y="-5" x="-2" name="FA1"/>
            <waypoint y="15" x="-2" name="FA2"/>
            <waypoint y="15" x="12" name="FA3"/>
            <waypoint y="-5" x="12" name="FA4"/>
          </waypoints>
          <sectors>
            <sector name="Flight_Area_1" color="red">
              <corner name="FA4"/>
              <corner name="FA3"/>
              <corner name="FA2"/>
              <corner name="FA1"/>
            </sector>
          </sectors>
          <blocks>
            <block name="Holding point" no="0">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="Start Engine" no="1">
              <call_once fun="NavResurrect()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff" name="Takeoff" no="2">
              <exception deroute="Standby" cond="stateGetPositionEnu_f()->z > 1.0"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="3">
              <stay wp="STDBY" no="0"/>
            </block>
            <block name="route" no="4">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <go wp="p3" hmode="route" from="p2" no="1"/>
              <go wp="p4" hmode="route" from="p3" no="2"/>
              <go wp="p5" hmode="route" from="p4" no="3"/>
              <go wp="p6" hmode="route" from="p5" no="4"/>
              <go wp="p7" hmode="route" from="p6" no="5"/>
              <go wp="p8" hmode="route" from="p7" no="6"/>
              <go wp="p9" hmode="route" from="p8" no="7"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land Here" name="land here" no="5">
              <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
            </block>
            <block name="land" no="6">
              <go wp="TD" no="0"/>
            </block>
            <block name="flare" no="7">
              <exception deroute="Holding point" cond="NavDetectGround()"/>
              <exception deroute="landed" cond="!nav_is_in_flight()"/>
              <call_once fun="NavStartDetectGround()" no="0"/>
              <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
            </block>
            <block name="landed" no="8">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="HOME" no="9">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="9" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="8" block_name="landed" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="8" block_name="landed" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="7" block_name="flare" stage="1">
            <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
          </stage>
          <stage block="7" block_name="flare" stage="0">
            <call_once fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="6" block_name="land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="5" block_name="land here" stage="0">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="4" block_name="route" stage="7">
            <go wp="p9" hmode="route" from="p8" no="7"/>
          </stage>
          <stage block="4" block_name="route" stage="6">
            <go wp="p8" hmode="route" from="p7" no="6"/>
          </stage>
          <stage block="4" block_name="route" stage="5">
            <go wp="p7" hmode="route" from="p6" no="5"/>
          </stage>
          <stage block="4" block_name="route" stage="4">
            <go wp="p6" hmode="route" from="p5" no="4"/>
          </stage>
          <stage block="4" block_name="route" stage="3">
            <go wp="p5" hmode="route" from="p4" no="3"/>
          </stage>
          <stage block="4" block_name="route" stage="2">
            <go wp="p4" hmode="route" from="p3" no="2"/>
          </stage>
          <stage block="4" block_name="route" stage="1">
            <go wp="p3" hmode="route" from="p2" no="1"/>
          </stage>
          <stage block="4" block_name="route" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="3" block_name="Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="2" block_name="Takeoff" stage="1">
            <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
          </stage>
          <stage block="2" block_name="Takeoff" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="1" block_name="Start Engine" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="1" block_name="Start Engine" stage="0">
            <call_once fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="0" block_name="Holding point" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="0" block_name="Holding point" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="video">
              <dl_setting VAR="viewvideo.use_rtp" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="rtp" PARAM="VIEWVIDEO_USE_RTP" MODULE="computer_vision/viewvideo" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="Detect gate">
              <dl_setting VAR="just_filtering" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="just_filter" PARAM="DETECT_GATE_JUST_FILTER" MIN="0" MAX="1"/>
              <dl_setting VAR="n_samples" STEP="10" SHORTNAME="n_samples" PARAM="DETECT_GATE_N_SAMPLES" MIN="0" MAX="10000"/>
              <dl_setting VAR="min_px_size" STEP="5" SHORTNAME="min_px" PARAM="DETECT_GATE_MIN_PIX_SIZE" MIN="10" MAX="500"/>
              <dl_setting VAR="min_gate_quality" STEP="0.01" SHORTNAME="min_qual" PARAM="DETECT_GATE_MIN_GATE_QUALITY" MIN="0.0" MAX="1.0"/>
              <dl_setting VAR="min_n_sides" STEP="1" SHORTNAME="min_sides" PARAM="DETECT_GATE_MIN_N_SIDES" MIN="0" MAX="4"/>
              <dl_setting VAR="gate_thickness" STEP="0.01" SHORTNAME="thickness" PARAM="DETECT_GATE_GATE_THICKNESS" MIN="0.0" MAX="0.2"/>
              <dl_setting VAR="color_Ym" STEP="1" SHORTNAME="Y_min" PARAM="DETECT_GATE_Y_MIN" MIN="0" MAX="255"/>
              <dl_setting VAR="color_YM" STEP="1" SHORTNAME="Y_max" PARAM="DETECT_GATE_Y_MAX" MIN="0" MAX="255"/>
              <dl_setting VAR="color_Um" STEP="1" SHORTNAME="U_min" PARAM="DETECT_GATE_U_MIN" MIN="0" MAX="255"/>
              <dl_setting VAR="color_UM" STEP="1" SHORTNAME="U_max" PARAM="DETECT_GATE_U_MAX" MIN="0" MAX="255"/>
              <dl_setting VAR="color_Vm" STEP="1" SHORTNAME="V_min" PARAM="DETECT_GATE_V_MIN" MIN="0" MAX="255"/>
              <dl_setting VAR="color_VM" STEP="1" SHORTNAME="V_max" PARAM="DETECT_GATE_V_MAX" MIN="0" MAX="255"/>
              <dl_setting VAR="exclude_top" STEP="1" SHORTNAME="exclude_top" PARAM="DETECT_GATE_EXCLUDE_PIXELS_TOP" MIN="0" MAX="320"/>
              <dl_setting VAR="exclude_bottom" STEP="1" SHORTNAME="exclude_bottom" PARAM="DETECT_GATE_EXCCLUDE_PIXELS_BOTTOM" MIN="0" MAX="320"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="CtrlModDemo">
              <dl_setting VAR="comode_time" STEP="0.01" SHORTNAME="time" MODULE="ctrl/ctrl_module_outerloop_demo" MIN="0" MAX="3"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="video">
              <dl_setting VAR="video_capture_record_video" STEP="1" SHORTNAME="record_video" MODULE="computer_vision/video_capture" MIN="0" MAX="1">
                <strip_button VALUE="1" NAME="Start video capture" ICON="dcstart.png" GROUP="cv"/>
                <strip_button VALUE="0" NAME="Stop video capture" ICON="dcstop.png" GROUP="cv"/>
              </dl_setting>
              <dl_setting VAR="video_capture_take_shot" STEP="1" SHORTNAME="take_shot" MODULE="computer_vision/video_capture" MIN="0" MAX="1">
                <strip_button VALUE="1" NAME="Save Image" ICON="digital-camera.png" GROUP="cv"/>
              </dl_setting>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="Bebop camera control">
            <dl_settings NAME="Front camera">
              <dl_setting VAR="mt9f002.set_zoom" STEP="0.05" SHORTNAME="zoom" PARAM="MT9F002_ZOOM" MIN="1." MAX="2.5"/>
              <dl_setting VAR="mt9f002.set_offset_x" STEP="0.05" SHORTNAME="offset_x" PARAM="MT9F002_OFFSET_X" MIN="-0.5" MAX="0.5"/>
              <dl_setting VAR="mt9f002.set_offset_y" STEP="0.05" SHORTNAME="offset_y" PARAM="MT9F002_OFFSET_Y" MIN="-0.5" MAX="0.5"/>
              <dl_setting VAR="mt9f002_send_resolution" VALUES="SEND" STEP="1" SHORTNAME="update_resolution" MODULE="boards/bebop/mt9f002" MIN="1" MAX="1" HANDLER="setting_update_resolution"/>
              <dl_setting VAR="mt9f002.gain_green1" STEP="0.1" SHORTNAME="green_1" PARAM="MT9F002_GAIN_GREEN1" MIN="1" MAX="60"/>
              <dl_setting VAR="mt9f002.gain_green2" STEP="0.1" SHORTNAME="green_2" PARAM="MT9F002_GAIN_GREEN2" MIN="1" MAX="60"/>
              <dl_setting VAR="mt9f002.gain_blue" STEP="0.1" SHORTNAME="blue" PARAM="MT9F002_GAIN_BLUE" MIN="1" MAX="60"/>
              <dl_setting VAR="mt9f002.gain_red" STEP="0.1" SHORTNAME="red" PARAM="MT9F002_GAIN_RED" MIN="1" MAX="60"/>
              <dl_setting VAR="mt9f002_send_color" VALUES="SEND" STEP="1" SHORTNAME="update_color" MODULE="boards/bebop/mt9f002" MIN="1" MAX="1" HANDLER="setting_update_color"/>
              <dl_setting VAR="mt9f002.target_exposure " STEP="0.1" SHORTNAME="exposure" PARAM="MT9F002_TARGET_EXPOSURE" MIN="0.1" MAX="80"/>
              <dl_setting VAR="mt9f002_send_exposure" VALUES="SEND" STEP="1" SHORTNAME="update_exposure" MODULE="boards/bebop/mt9f002" MIN="1" MAX="1" HANDLER="setting_update_exposure"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="air_data">
              <dl_setting VAR="air_data.qnh" STEP="1" SHORTNAME="QNH" MODULE="air_data/air_data" MIN="800" MAX="1200"/>
              <dl_setting VAR="air_data.tas_factor" TYPE="float" STEP="0.01" SHORTNAME="TASfactor" PERSISTENT="true" PARAM="AIR_DATA_TAS_FACTOR" MODULE="air_data/air_data" MIN="0.8" MAX="1.3"/>
              <dl_setting VAR="air_data.calc_qnh_once" STEP="1" SHORTNAME="calcQNH" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_airspeed" TYPE="uint8" STEP="1" SHORTNAME="calcAirspeed" PERSISTENT="true" PARAM="AIR_DATA_CALC_AIRSPEED" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_tas_factor" TYPE="uint8" STEP="1" SHORTNAME="calcTASfactor" PERSISTENT="true" PARAM="AIR_DATA_CALC_TAS_FACTOR" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_amsl_baro" TYPE="uint8" STEP="1" SHORTNAME="calcAMSL" PERSISTENT="true" PARAM="AIR_DATA_CALC_AMSL_BARO" MODULE="air_data/air_data" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="geo_mag">
              <dl_setting VAR="geo_mag.calc_once" VALUES="OFF|CALC" STEP="1" SHORTNAME="calcNow" MODULE="geo_mag/geo_mag" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="Ins Extended">
            <dl_settings NAME="INS">
              <dl_setting VAR="vff.accel_noise" STEP="0.1" SHORTNAME="accel_noise" MODULE="subsystems/ins/vf_extended_float" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_baro" STEP="0.1" SHORTNAME="r_baro" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_alt" STEP="0.1" SHORTNAME="r_alt" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_obs_height" STEP="0.1" SHORTNAME="r_obs_height" MIN="0" MAX="10"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
              <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
              <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
              <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
              <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="indi">
              <dl_setting VAR="indi.reference_acceleration.err_p" STEP="1" SHORTNAME="kp_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_P" MODULE="stabilization/stabilization_indi_simple" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_p" STEP="0.1" SHORTNAME="kd_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.p" STEP="0.001" SHORTNAME="ctl_eff_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_P" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.reference_acceleration.err_q" STEP="1" SHORTNAME="kp_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_Q" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_q" STEP="0.1" SHORTNAME="kd_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.q" STEP="0.001" SHORTNAME="ctl_eff_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_Q" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.reference_acceleration.err_r" STEP="1" SHORTNAME="kp_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_R" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_r" STEP="0.1" SHORTNAME="kd_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.r" STEP="0.001" SHORTNAME="ctl_eff_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_R" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.g2" STEP="0.01" SHORTNAME="g2" PERSISTENT="true" PARAM="STABILIZATION_INDI_G2_R" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.adaptive" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="use_adaptive" PERSISTENT="true" PARAM="STABILIZATION_INDI_USE_ADAPTIVE" MIN="0" MAX="1"/>
              <dl_setting VAR="indi.max_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_rate" PARAM="STABILIZATION_INDI_MAX_RATE" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
              <dl_setting VAR="indi.attitude_max_yaw_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_yaw_rate_attitude" PARAM="STABILIZATION_INDI_MAX_R" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="NAV">
              <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
              <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
              <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MIN="-50" MAX="50"/>
              <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MIN="0" MAX="10.0"/>
              <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MIN="-10.0" MAX="0.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Vert Loop">
              <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
              <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MIN="0.2" MAX="0.8"/>
              <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MIN="0" MAX="1"/>
              <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
            <dl_settings NAME="Horiz Loop">
              <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="true" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
              <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
              <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MIN="0" MAX="1"/>
              <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
              <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
              <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
              <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
              <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
              <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="bebop2_optitrack_visionfront">
        <description>Bebop2: Detects Autonomous-Drone-Race-Gates</description>
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="bebop2">
            <define VALUE="FALSE" NAME="SIMULATE"/>
            <define VALUE="TRUE" NAME="CAMERA_ROTATED_90DEG_RIGHT"/>
          </target>
          <target NAME="nps" BOARD="pc">
            <module TYPE="gazebo" NAME="fdm"/>
            <define VALUE="FALSE" NAME="CAMERA_ROTATED_90DEG_RIGHT"/>
          </target>
          <module TYPE="transparent_udp" NAME="telemetry"/>
          <module TYPE="datalink" NAME="radio_control"/>
          <module NAME="motor_mixing"/>
          <module TYPE="bebop" NAME="actuators"/>
          <module TYPE="bebop" NAME="imu"/>
          <module TYPE="datalink" NAME="gps"/>
          <module TYPE="indi_simple" NAME="stabilization"/>
          <module TYPE="int_cmpl_quat" NAME="ahrs">
            <configure VALUE="FALSE" NAME="USE_MAGNETOMETER"/>
          </module>
          <define VALUE="TRUE" NAME="USE_SONAR"/>
          <module TYPE="extended" NAME="ins"/>
          <module NAME="geo_mag"/>
          <module NAME="air_data"/>
          <module NAME="send_imu_mag_current"/>
          <module NAME="logger_file">
            <define VALUE="/data/ftp/internal_000" NAME="FILE_LOGGER_PATH"/>
          </module>
          <module NAME="bebop_cam"/>
          <module NAME="video_capture">
            <define VALUE="front_camera" NAME="VIDEO_CAPTURE_CAMERA"/>
            <define VALUE="/data/ftp/internal_000/images/" NAME="VIDEO_CAPTURE_PATH"/>
          </module>
          <module NAME="pose_history">
            <define VALUE="128" NAME="POSE_HISTORY_SIZE"/>
          </module>
          <module NAME="ctrl_module_outerloop_demo"/>
          <module NAME="cv_detect_gate">
            <define VALUE="front_camera" NAME="DETECT_GATE_CAMERA"/>
            <define VALUE="0" NAME="DETECT_GATE_FPS"/>
            <define VALUE="31" NAME="DETECT_GATE_Y_MIN"/>
            <define VALUE="130" NAME="DETECT_GATE_Y_MAX"/>
            <define VALUE="62" NAME="DETECT_GATE_U_MIN"/>
            <define VALUE="138" NAME="DETECT_GATE_U_MAX"/>
            <define VALUE="148" NAME="DETECT_GATE_V_MIN"/>
            <define VALUE="221" NAME="DETECT_GATE_V_MAX"/>
          </module>
          <module NAME="video_rtp_stream">
            <define VALUE="front_camera" NAME="VIEWVIDEO_CAMERA"/>
            <define VALUE="4" NAME="VIEWVIDEO_DOWNSIZE_FACTOR"/>
            <define VALUE="50" NAME="VIEWVIDEO_QUALITY_FACTOR"/>
          </module>
        </firmware>
        <commands>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="6000"/>
        </commands>
        <servos DRIVER="Default">
          <servo NO="0" NEUTRAL="2500" NAME="TOP_LEFT" MIN="2500" MAX="12000"/>
          <servo NO="1" NEUTRAL="2500" NAME="TOP_RIGHT" MIN="2500" MAX="12000"/>
          <servo NO="2" NEUTRAL="2500" NAME="BOTTOM_RIGHT" MIN="2500" MAX="12000"/>
          <servo NO="3" NEUTRAL="2500" NAME="BOTTOM_LEFT" MIN="2500" MAX="12000"/>
        </servos>
        <section PREFIX="MOTOR_MIXING_" NAME="MIXING">
          <define VALUE="0" NAME="TRIM_ROLL"/>
          <define VALUE="0" NAME="TRIM_PITCH"/>
          <define VALUE="0" NAME="TRIM_YAW"/>
          <define VALUE="TRUE" NAME="REVERSE"/>
          <define VALUE="QUAD_X" NAME="TYPE"/>
        </section>
        <command_laws>
          <call FUN="motor_mixing_run(autopilot_get_motors_on(),FALSE,values)"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_LEFT]" SERVO="TOP_LEFT"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_RIGHT]" SERVO="TOP_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_RIGHT]" SERVO="BOTTOM_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_LEFT]" SERVO="BOTTOM_LEFT"/>
        </command_laws>
        <section PREFIX="MT9F002_" NAME="BEBOP_FRONT_CAMERA">
          <define VALUE="640" NAME="OUTPUT_HEIGHT"/>
          <define VALUE="640" NAME="OUTPUT_WIDTH"/>
          <define VALUE="0.15" NAME="OFFSET_X"/>
          <define VALUE="30" NAME="TARGET_EXPOSURE"/>
          <define VALUE="1.25" NAME="ZOOM"/>
        </section>
        <section PREFIX="AIR_DATA_" NAME="AIR_DATA">
          <define VALUE="FALSE" NAME="CALC_AIRSPEED"/>
          <define VALUE="FALSE" NAME="CALC_TAS_FACTOR"/>
          <define VALUE="TRUE" NAME="CALC_AMSL_BARO"/>
        </section>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="0" NAME="MAG_X_NEUTRAL"/>
          <define VALUE="0" NAME="MAG_Y_NEUTRAL"/>
          <define VALUE="0" NAME="MAG_Z_NEUTRAL"/>
          <define VALUE="7.28514789391" NAME="MAG_X_SENS" INTEGER="16"/>
          <define VALUE="7.33022132691" NAME="MAG_Y_SENS" INTEGER="16"/>
          <define VALUE="7.57102035692" NAME="MAG_Z_SENS" INTEGER="16"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.3892503" NAME="H_X"/>
          <define VALUE="0.0017972" NAME="H_Y"/>
          <define VALUE="0.9211303" NAME="H_Z"/>
          <define VALUE="FALSE" NAME="USE_GPS_HEADING"/>
          <define VALUE="0" NAME="HEADING_UPDATE_GPS_MIN_SPEED"/>
        </section>
        <section PREFIX="INS_" NAME="INS">
          <define VALUE="2.2" NAME="SONAR_MAX_RANGE"/>
          <define VALUE="TRUE" NAME="SONAR_UPDATE_ON_AGL"/>
          <define VALUE="0" NAME="USE_GPS_ALT"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="RC_SETPOINT">
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="300" UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="0" NAME="DEADBAND_A"/>
          <define VALUE="0" NAME="DEADBAND_E"/>
          <define VALUE="50" NAME="DEADBAND_R"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="ATTITUDE_REFERENCE">
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.9" NAME="REF_ZETA_P"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.9" NAME="REF_ZETA_Q"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.9" NAME="REF_ZETA_R"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_RDOT"/>
        </section>
        <section PREFIX="STABILIZATION_INDI_" NAME="STABILIZATION_ATTITUDE_INDI">
          <define VALUE="0.0397" NAME="G1_P"/>
          <define VALUE="0.0299" NAME="G1_Q"/>
          <define VALUE="0.0014" NAME="G1_R"/>
          <define VALUE="0.1219" NAME="G2_R"/>
          <define VALUE="600.0" NAME="REF_ERR_P"/>
          <define VALUE="600.0" NAME="REF_ERR_Q"/>
          <define VALUE="600.0" NAME="REF_ERR_R"/>
          <define VALUE="28.0" NAME="REF_RATE_P"/>
          <define VALUE="28.0" NAME="REF_RATE_Q"/>
          <define VALUE="28.0" NAME="REF_RATE_R"/>
          <define VALUE="120.0" UNIT="deg/s" NAME="MAX_R"/>
          <define VALUE="8.0" NAME="FILT_CUTOFF"/>
          <define VALUE="8.0" NAME="ESTIMATION_FILT_CUTOFF"/>
          <define VALUE="0.1" NAME="ACT_DYN_P"/>
          <define VALUE="0.1" NAME="ACT_DYN_Q"/>
          <define VALUE="0.1" NAME="ACT_DYN_R"/>
          <define VALUE="FALSE" NAME="USE_ADAPTIVE"/>
          <define VALUE="0.0001" NAME="ADAPTIVE_MU"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="350" NAME="HOVER_KP"/>
          <define VALUE="85" NAME="HOVER_KD"/>
          <define VALUE="20" NAME="HOVER_KI"/>
          <define VALUE="0.655" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="FALSE" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="2" UNIT="m/s" NAME="REF_MAX_SPEED"/>
          <define VALUE="32" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="220" NAME="PGAIN"/>
          <define VALUE="160" NAME="DGAIN"/>
          <define VALUE="15" NAME="IGAIN"/>
        </section>
        <section PREFIX="NAV_" NAME="NAVIGATION">
          <define VALUE="1.0" NAME="CLIMB_VSPEED"/>
          <define VALUE="-1.0" NAME="DESCEND_VSPEED"/>
        </section>
        <section PREFIX="NPS_" NAME="SIMULATOR">
          <define VALUE="nw_motor, ne_motor, se_motor, sw_motor" TYPE="string[]" NAME="ACTUATOR_NAMES"/>
          <define VALUE="simple_x_quad_ccw" TYPE="string" NAME="JSBSIM_MODEL"/>
          <define VALUE="nps_sensors_params_default.h" TYPE="string" NAME="SENSORS_PARAMS"/>
        </section>
        <include HREF="conf/simulator/gazebo/airframes/bebop.xml"/>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_NAV" NAME="MODE_STARTUP"/>
          <define VALUE="AP_MODE_MODULE" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_ATTITUDE_Z_HOLD" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_NAV" NAME="MODE_AUTO2"/>
          <define VALUE="TRUE" NAME="NO_RC_THRUST_LIMIT"/>
        </section>
        <section NAME="BAT">
          <define VALUE="8700" NAME="MILLIAMP_AT_FULL_THROTTLE"/>
          <define VALUE="9.9" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="11.0" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="11.1" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="12.4" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.05" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
            <message PERIOD="0.05" NAME="OPTICAL_FLOW_HOVER"/>
            <message PERIOD="0.10" NAME="VISUALTARGET"/>
            <message PERIOD="0.1" NAME="VISION_POSITION_ESTIMATE"/>
            <message PERIOD="0.05" NAME="DIVERGENCE"/>
            <message PERIOD="0.02" NAME="DRAGSPEED"/>
            <message PERIOD="5.1" NAME="LOGGER_STATUS"/>
            <message PERIOD="1.2" NAME="LIDAR"/>
            <message PERIOD=".25" NAME="INS_EKF2"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="BEBOP_ACTUATORS"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_FLOAT"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
            <message PERIOD="2.0" NAME="INDI_G"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="vel_guidance" KEY_PRESS="q">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HYBRID_GUIDANCE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1.0" NAME="GPS_INT"/>
            <message PERIOD="1.0" NAME="INS"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="RTCM3">
            <message PERIOD="1" NAME="GPS_RXMRTCM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD="1" NAME="GPS_RTK"/>
          </mode>
        </process>
        <process NAME="FlightRecorder">
          <mode NAME="default">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD=".1" NAME="GPS_INT"/>
            <message PERIOD=".1" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".2" NAME="IMU_MAG_SCALED"/>
            <message PERIOD="0.05" NAME="LIDAR"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="19"/>
            <dl_setting VAR="autopilot.kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot.power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot.mode" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="19" HANDLER="SetModeHandler"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="bebop2_no_dampers" ac_id="26" airframe="airframes/tudelft/bebop2_no_damping.xml" radio="radios/dummy.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/tudelft/delft_basic.xml" settings="settings/rotorcraft_basic.xml" settings_modules="modules/gps_ubx_ucenter.xml modules/air_data.xml modules/geo_mag.xml modules/ins_extended.xml modules/ahrs_int_cmpl_quat.xml modules/stabilization_indi_simple.xml modules/nav_basic_rotorcraft.xml modules/guidance_rotorcraft.xml modules/gps.xml modules/imu_common.xml" gui_color="#baa3d698b729">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitMM" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1120" MIN="1120" MAX="2000" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="2" name="Delft Basic" max_dist_from_home="1000" lon0="4 22 42.0" lat0="51 59 27.6" ground_alt="0" alt="4">
          <header>    #include &quot;autopilot.h&quot;
    #include &quot;subsystems/datalink/datalink.h&quot;
    #include &quot;subsystems/electrical.h&quot;
    #include &quot;subsystems/radio_control.h&quot;</header>
          <waypoints>
            <waypoint y="0.0" x="0.0" name="HOME"/>
            <waypoint y="5.0" x="0.0" name="CLIMB"/>
            <waypoint y="-5.0" x="-2.0" name="STDBY"/>
            <waypoint y="14.3" x="-19.9" name="p1"/>
            <waypoint y="21.6" x="-0.6" name="p2"/>
            <waypoint y="-26.5" x="22.2" name="p3"/>
            <waypoint y="-34.4" x="4.9" name="p4"/>
            <waypoint y="-29.4" x="14.2" name="CAM"/>
            <waypoint y="-10.9" x="5.6" name="TD"/>
          </waypoints>
          <exceptions>
            <exception deroute="ComeBackAndLand" cond="((radio_control.status == RC_REALLY_LOST) &&
      !(IndexOfBlock('Takeoff') > nav_block) &&
      !(nav_block >= IndexOfBlock('land here')) &&
      (autopilot_in_flight() == true) )"/>
            <exception deroute="DatalinkLoss" cond="(datalink_time > 60 &&
      !(datalink_time > 120) &&
      !(IndexOfBlock('Takeoff') > nav_block) &&
      !(nav_block >= IndexOfBlock('land here')) &&
      (autopilot_in_flight() == true) )"/>
            <exception deroute="ComeBackAndLand" cond="(electrical.bat_low &&
      !(IndexOfBlock('Holding point') > nav_block) &&
      !(nav_block >= IndexOfBlock('land here')) &&
      (autopilot_in_flight() == true) )"/>
            <exception deroute="land here" cond="(electrical.bat_critical &&
      !(IndexOfBlock('Holding point') > nav_block) &&
      !(nav_block >= IndexOfBlock('land here')) &&
      (autopilot_in_flight() == true) )"/>
          </exceptions>
          <blocks>
            <block name="Wait GPS" no="0">
              <call_once fun="NavKillThrottle()" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Geo init" no="1">
              <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
              <call_once fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Holding point" no="2">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="Start Engine" no="3">
              <call_once fun="NavResurrect()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff" name="Takeoff" no="4">
              <exception deroute="Standby" cond="stateGetPositionEnu_f()->z > 2.0"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="5">
              <stay wp="STDBY" no="0"/>
            </block>
            <block name="stay_p1" no="6">
              <stay wp="p1" no="0"/>
            </block>
            <block name="go_p2" no="7">
              <go wp="p2" no="0"/>
              <deroute block="stay_p1" no="1"/>
            </block>
            <block name="line_p1_p2" no="8">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <stay wp="p2" until="stage_time>10" no="1"/>
              <go wp="p1" hmode="route" from="p2" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="route" no="9">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <go wp="p3" hmode="route" from="p2" no="1"/>
              <go wp="p4" hmode="route" from="p3" no="2"/>
              <go wp="p1" hmode="route" from="p4" no="3"/>
              <deroute block="stay_p1" no="4"/>
            </block>
            <block name="test yaw" no="10">
              <go wp="p1" no="0"/>
              <for var="i" to="16" from="1" no="2">
                <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
              </for>
              <deroute block="Standby" no="5"/>
            </block>
            <block pre_call="nav_set_heading_towards_waypoint(WP_CAM)" name="circle CAM" no="11">
              <circle wp="CAM" radius="nav_radius" no="0"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land Here" name="land here" no="12">
              <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
            </block>
            <block name="land" no="13">
              <go wp="TD" no="0"/>
            </block>
            <block name="flare" no="14">
              <exception deroute="Holding point" cond="NavDetectGround()"/>
              <exception deroute="landed" cond="!nav_is_in_flight()"/>
              <call_once fun="NavStartDetectGround()" no="0"/>
              <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
            </block>
            <block name="landed" no="15">
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
            </block>
            <block name="ComeBackAndLand" no="16">
              <go wp="HOME" no="0"/>
              <deroute block="land here" no="1"/>
            </block>
            <block name="DatalinkLoss" no="17">
              <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
              <stay wp="TD" until="stage_time>60" no="1"/>
              <deroute block="ComeBackAndLand" no="2"/>
            </block>
            <block name="HOME" no="18">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="18" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="17" block_name="DatalinkLoss" stage="2">
            <deroute block="ComeBackAndLand" no="2"/>
          </stage>
          <stage block="17" block_name="DatalinkLoss" stage="1">
            <stay wp="TD" until="stage_time>60" no="1"/>
          </stage>
          <stage block="17" block_name="DatalinkLoss" stage="0">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="16" block_name="ComeBackAndLand" stage="1">
            <deroute block="land here" no="1"/>
          </stage>
          <stage block="16" block_name="ComeBackAndLand" stage="0">
            <go wp="HOME" no="0"/>
          </stage>
          <stage block="15" block_name="landed" stage="0">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
          </stage>
          <stage block="14" block_name="flare" stage="1">
            <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
          </stage>
          <stage block="14" block_name="flare" stage="0">
            <call_once fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="13" block_name="land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="12" block_name="land here" stage="0">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="11" block_name="circle CAM" stage="0">
            <circle wp="CAM" radius="nav_radius" no="0"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="5">
            <deroute block="Standby" no="5"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="3">
            <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="2">
            <for var="i" to="16" from="1" no="2">
              <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
            </for>
          </stage>
          <stage block="10" block_name="test yaw" stage="0">
            <go wp="p1" no="0"/>
          </stage>
          <stage block="9" block_name="route" stage="4">
            <deroute block="stay_p1" no="4"/>
          </stage>
          <stage block="9" block_name="route" stage="3">
            <go wp="p1" hmode="route" from="p4" no="3"/>
          </stage>
          <stage block="9" block_name="route" stage="2">
            <go wp="p4" hmode="route" from="p3" no="2"/>
          </stage>
          <stage block="9" block_name="route" stage="1">
            <go wp="p3" hmode="route" from="p2" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="2">
            <go wp="p1" hmode="route" from="p2" no="2"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="1">
            <stay wp="p2" until="stage_time>10" no="1"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="1">
            <deroute block="stay_p1" no="1"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="0">
            <go wp="p2" no="0"/>
          </stage>
          <stage block="6" block_name="stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="5" block_name="Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="1">
            <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="0">
            <call_once fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="2">
            <call_once fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="0">
            <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings NAME="ublox">
            <dl_settings NAME="ucenter">
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_h" STEP="1" SHORTNAME="sw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_l" STEP="1" SHORTNAME="sw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_h" STEP="1" SHORTNAME="hw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_l" STEP="1" SHORTNAME="hw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_init" STEP="100" SHORTNAME="inibaud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_run" STEP="100" SHORTNAME="baud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="air_data">
              <dl_setting VAR="air_data.qnh" STEP="1" SHORTNAME="QNH" MODULE="air_data/air_data" MIN="800" MAX="1200"/>
              <dl_setting VAR="air_data.tas_factor" TYPE="float" STEP="0.01" SHORTNAME="TASfactor" PERSISTENT="true" PARAM="AIR_DATA_TAS_FACTOR" MODULE="air_data/air_data" MIN="0.8" MAX="1.3"/>
              <dl_setting VAR="air_data.calc_qnh_once" STEP="1" SHORTNAME="calcQNH" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_airspeed" TYPE="uint8" STEP="1" SHORTNAME="calcAirspeed" PERSISTENT="true" PARAM="AIR_DATA_CALC_AIRSPEED" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_tas_factor" TYPE="uint8" STEP="1" SHORTNAME="calcTASfactor" PERSISTENT="true" PARAM="AIR_DATA_CALC_TAS_FACTOR" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_amsl_baro" TYPE="uint8" STEP="1" SHORTNAME="calcAMSL" PERSISTENT="true" PARAM="AIR_DATA_CALC_AMSL_BARO" MODULE="air_data/air_data" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="geo_mag">
              <dl_setting VAR="geo_mag.calc_once" VALUES="OFF|CALC" STEP="1" SHORTNAME="calcNow" MODULE="geo_mag/geo_mag" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="Ins Extended">
            <dl_settings NAME="INS">
              <dl_setting VAR="vff.accel_noise" STEP="0.1" SHORTNAME="accel_noise" MODULE="subsystems/ins/vf_extended_float" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_baro" STEP="0.1" SHORTNAME="r_baro" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_alt" STEP="0.1" SHORTNAME="r_alt" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_obs_height" STEP="0.1" SHORTNAME="r_obs_height" MIN="0" MAX="10"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
              <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
              <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
              <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
              <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="indi">
              <dl_setting VAR="indi.reference_acceleration.err_p" STEP="1" SHORTNAME="kp_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_P" MODULE="stabilization/stabilization_indi_simple" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_p" STEP="0.1" SHORTNAME="kd_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.p" STEP="0.001" SHORTNAME="ctl_eff_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_P" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.reference_acceleration.err_q" STEP="1" SHORTNAME="kp_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_Q" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_q" STEP="0.1" SHORTNAME="kd_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.q" STEP="0.001" SHORTNAME="ctl_eff_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_Q" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.reference_acceleration.err_r" STEP="1" SHORTNAME="kp_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_R" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_r" STEP="0.1" SHORTNAME="kd_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.r" STEP="0.001" SHORTNAME="ctl_eff_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_R" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.g2" STEP="0.01" SHORTNAME="g2" PERSISTENT="true" PARAM="STABILIZATION_INDI_G2_R" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.adaptive" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="use_adaptive" PERSISTENT="true" PARAM="STABILIZATION_INDI_USE_ADAPTIVE" MIN="0" MAX="1"/>
              <dl_setting VAR="indi.max_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_rate" PARAM="STABILIZATION_INDI_MAX_RATE" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
              <dl_setting VAR="indi.attitude_max_yaw_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_yaw_rate_attitude" PARAM="STABILIZATION_INDI_MAX_R" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="NAV">
              <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
              <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
              <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MIN="-50" MAX="50"/>
              <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MIN="0" MAX="10.0"/>
              <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MIN="-10.0" MAX="0.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Vert Loop">
              <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
              <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MIN="0.2" MAX="0.8"/>
              <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MIN="0" MAX="1"/>
              <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
            <dl_settings NAME="Horiz Loop">
              <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="true" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
              <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
              <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MIN="0" MAX="1"/>
              <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
              <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
              <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
              <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
              <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
              <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="bebop2_indi">
        <description>Bebop2, Outdoor</description>
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="bebop2"/>
          <target NAME="nps" BOARD="pc">
            <module TYPE="jsbsim" NAME="fdm"/>
            <module NAME="udp"/>
          </target>
          <module TYPE="transparent_udp" NAME="telemetry"/>
          <module TYPE="datalink" NAME="radio_control"/>
          <module NAME="motor_mixing"/>
          <module TYPE="bebop" NAME="actuators"/>
          <module TYPE="bebop" NAME="imu"/>
          <module TYPE="ublox" NAME="gps"/>
          <module TYPE="indi_simple" NAME="stabilization"/>
          <module TYPE="int_cmpl_quat" NAME="ahrs">
            <configure VALUE="TRUE" NAME="USE_MAGNETOMETER"/>
            <define VALUE="FALSE" NAME="AHRS_USE_GPS_HEADING"/>
          </module>
          <module TYPE="extended" NAME="ins"/>
          <module NAME="geo_mag"/>
          <module NAME="air_data"/>
          <module NAME="send_imu_mag_current"/>
          <module TYPE="ubx_ucenter" NAME="gps"/>
          <module NAME="logger_file">
            <define VALUE="/data/ftp/internal_000" NAME="FILE_LOGGER_PATH"/>
          </module>
        </firmware>
        <commands>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="6000"/>
        </commands>
        <servos DRIVER="Default">
          <servo NO="0" NEUTRAL="2500" NAME="TOP_LEFT" MIN="2500" MAX="12000"/>
          <servo NO="1" NEUTRAL="2500" NAME="TOP_RIGHT" MIN="2500" MAX="12000"/>
          <servo NO="2" NEUTRAL="2500" NAME="BOTTOM_RIGHT" MIN="2500" MAX="12000"/>
          <servo NO="3" NEUTRAL="2500" NAME="BOTTOM_LEFT" MIN="2500" MAX="12000"/>
        </servos>
        <section PREFIX="MOTOR_MIXING_" NAME="MIXING">
          <define VALUE="0" NAME="TRIM_ROLL"/>
          <define VALUE="0" NAME="TRIM_PITCH"/>
          <define VALUE="0" NAME="TRIM_YAW"/>
          <define VALUE="TRUE" NAME="REVERSE"/>
          <define VALUE="QUAD_X" NAME="TYPE"/>
        </section>
        <command_laws>
          <call FUN="motor_mixing_run(autopilot_get_motors_on(),FALSE,values)"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_LEFT]" SERVO="TOP_LEFT"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_RIGHT]" SERVO="TOP_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_RIGHT]" SERVO="BOTTOM_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_LEFT]" SERVO="BOTTOM_LEFT"/>
        </command_laws>
        <section PREFIX="AIR_DATA_" NAME="AIR_DATA">
          <define VALUE="FALSE" NAME="CALC_AIRSPEED"/>
          <define VALUE="FALSE" NAME="CALC_TAS_FACTOR"/>
          <define VALUE="TRUE" NAME="CALC_AMSL_BARO"/>
        </section>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="0" NAME="MAG_X_NEUTRAL"/>
          <define VALUE="0" NAME="MAG_Y_NEUTRAL"/>
          <define VALUE="0" NAME="MAG_Z_NEUTRAL"/>
          <define VALUE="7.28514789391" NAME="MAG_X_SENS" INTEGER="16"/>
          <define VALUE="7.33022132691" NAME="MAG_Y_SENS" INTEGER="16"/>
          <define VALUE="7.57102035692" NAME="MAG_Z_SENS" INTEGER="16"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.3892503" NAME="H_X"/>
          <define VALUE="0.0017972" NAME="H_Y"/>
          <define VALUE="0.9211303" NAME="H_Z"/>
        </section>
        <section PREFIX="INS_" NAME="INS">
          <define VALUE="2.2" NAME="SONAR_MAX_RANGE"/>
          <define VALUE="TRUE" NAME="SONAR_UPDATE_ON_AGL"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="RC_SETPOINT">
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="300" UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="0" NAME="DEADBAND_A"/>
          <define VALUE="0" NAME="DEADBAND_E"/>
          <define VALUE="50" NAME="DEADBAND_R"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="ATTITUDE_REFERENCE">
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.9" NAME="REF_ZETA_P"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.9" NAME="REF_ZETA_Q"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.9" NAME="REF_ZETA_R"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_RDOT"/>
        </section>
        <section PREFIX="STABILIZATION_INDI_" NAME="STABILIZATION_ATTITUDE_INDI">
          <define VALUE="0.05" NAME="G1_P"/>
          <define VALUE="0.04" NAME="G1_Q"/>
          <define VALUE="0.0022" NAME="G1_R"/>
          <define VALUE="0.20" NAME="G2_R"/>
          <define VALUE="FALSE" NAME="FILTER_ROLL_RATE"/>
          <define VALUE="FALSE" NAME="FILTER_PITCH_RATE"/>
          <define VALUE="FALSE" NAME="FILTER_YAW_RATE"/>
          <define VALUE="600.0" NAME="REF_ERR_P"/>
          <define VALUE="600.0" NAME="REF_ERR_Q"/>
          <define VALUE="600.0" NAME="REF_ERR_R"/>
          <define VALUE="28.0" NAME="REF_RATE_P"/>
          <define VALUE="28.0" NAME="REF_RATE_Q"/>
          <define VALUE="28.0" NAME="REF_RATE_R"/>
          <define VALUE="3.2" NAME="FILT_CUTOFF"/>
          <define VALUE="3.2" NAME="FILT_CUTOFF_R"/>
          <define VALUE="0.06" NAME="ACT_DYN_P"/>
          <define VALUE="0.06" NAME="ACT_DYN_Q"/>
          <define VALUE="0.06" NAME="ACT_DYN_R"/>
          <define VALUE="FALSE" NAME="USE_ADAPTIVE"/>
          <define VALUE="0.0001" NAME="ADAPTIVE_MU"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="350" NAME="HOVER_KP"/>
          <define VALUE="85" NAME="HOVER_KD"/>
          <define VALUE="20" NAME="HOVER_KI"/>
          <define VALUE="0.655" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="TRUE" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="2" UNIT="m/s" NAME="REF_MAX_SPEED"/>
          <define VALUE="32" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="120" NAME="PGAIN"/>
          <define VALUE="100" NAME="DGAIN"/>
          <define VALUE="30" NAME="IGAIN"/>
        </section>
        <section PREFIX="NAV_" NAME="NAVIGATION">
          <define VALUE="4.5" NAME="CLIMB_VSPEED"/>
          <define VALUE="-1.0" NAME="DESCEND_VSPEED"/>
        </section>
        <section PREFIX="NPS_" NAME="SIMULATOR">
          <define VALUE="nw_motor, ne_motor, se_motor, sw_motor" TYPE="string[]" NAME="ACTUATOR_NAMES"/>
          <define VALUE="simple_x_quad_ccw" TYPE="string" NAME="JSBSIM_MODEL"/>
          <define VALUE="nps_sensors_params_default.h" TYPE="string" NAME="SENSORS_PARAMS"/>
        </section>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_NAV" NAME="MODE_STARTUP"/>
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_ATTITUDE_Z_HOLD" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_NAV" NAME="MODE_AUTO2"/>
          <define VALUE="TRUE" NAME="NO_RC_THRUST_LIMIT"/>
        </section>
        <section NAME="BAT">
          <define VALUE="8700" NAME="MILLIAMP_AT_FULL_THROTTLE"/>
          <define VALUE="9.9" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="11.0" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="11.1" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="12.4" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.05" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
            <message PERIOD="0.05" NAME="OPTICAL_FLOW_HOVER"/>
            <message PERIOD="0.10" NAME="VISUALTARGET"/>
            <message PERIOD="0.1" NAME="VISION_POSITION_ESTIMATE"/>
            <message PERIOD="0.05" NAME="DIVERGENCE"/>
            <message PERIOD="0.02" NAME="DRAGSPEED"/>
            <message PERIOD="5.1" NAME="LOGGER_STATUS"/>
            <message PERIOD="1.2" NAME="LIDAR"/>
            <message PERIOD=".25" NAME="INS_EKF2"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="BEBOP_ACTUATORS"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_FLOAT"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
            <message PERIOD="2.0" NAME="INDI_G"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="vel_guidance" KEY_PRESS="q">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HYBRID_GUIDANCE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1.0" NAME="GPS_INT"/>
            <message PERIOD="1.0" NAME="INS"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="RTCM3">
            <message PERIOD="1" NAME="GPS_RXMRTCM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD="1" NAME="GPS_RTK"/>
          </mode>
        </process>
        <process NAME="FlightRecorder">
          <mode NAME="default">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD=".1" NAME="GPS_INT"/>
            <message PERIOD=".1" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".2" NAME="IMU_MAG_SCALED"/>
            <message PERIOD="0.05" NAME="LIDAR"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="19"/>
            <dl_setting VAR="autopilot.kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot.power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot.mode" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="19" HANDLER="SetModeHandler"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="bebop2_optitrack" ac_id="48" airframe="airframes/tudelft/bebop2_optitrack.xml" radio="radios/dummy.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/tudelft/rotorcraft_optitrack_path.xml" settings="settings/rotorcraft_basic.xml" settings_modules="modules/air_data.xml modules/geo_mag.xml modules/ins_extended.xml modules/ahrs_int_cmpl_quat.xml modules/stabilization_indi_simple.xml modules/nav_basic_rotorcraft.xml modules/guidance_rotorcraft.xml modules/gps.xml modules/imu_common.xml" gui_color="blue">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitMM" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1120" MIN="1120" MAX="2000" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="0.4" name="Test flight plan" max_dist_from_home="8" lon0="4.376789" lat0="51.990634" ground_alt="0" alt="1.0">
          <header>    #include &quot;autopilot.h&quot;
    #include &quot;subsystems/radio_control.h&quot;
    #include &quot;subsystems/ahrs.h&quot;
    #include &quot;subsystems/electrical.h&quot;
    #include &quot;subsystems/datalink/datalink.h&quot;</header>
          <waypoints>
            <waypoint y="0.0" x="0.0" name="HOME" height="0"/>
            <waypoint y="0.0" x="0.0" name="CIRCLEWP"/>
            <waypoint y="-0.6" x="1.2" name="CLIMB" height="2"/>
            <waypoint y="0" x="0" name="STDBY" height="1.0"/>
            <waypoint y="1.0" x="1.0" name="HOVER"/>
            <waypoint y="-1.7" x="0.8" name="TD"/>
            <waypoint name="t0" lon="4.3767772" lat="51.9906059" x="-0.75" y="-3.14"/>
            <waypoint name="t1" lon="4.3767829" lat="51.9906269" x="-0.40" y="-0.80"/>
            <waypoint name="t2" lon="4.3768187" lat="51.9906216" x="2.07" y="-1.34"/>
            <waypoint name="t3" lon="4.3768251" lat="51.9906388" x="2.47" y="0.58"/>
            <waypoint name="t4" lon="4.3768005" lat="51.9906637" x="0.73" y="3.32"/>
            <waypoint name="t5" lon="4.3767879" lat="51.9906425" x="-0.09" y="0.94"/>
            <waypoint name="t6" lon="4.3767547" lat="51.9906470" x="-2.38" y="1.40"/>
            <waypoint name="t7" lon="4.3767502" lat="51.9906290" x="-2.65" y="-0.61"/>
            <waypoint name="_CZ1" lon="4.3768628" lat="51.9906213" x="5.09" y="-1.32"/>
            <waypoint name="_CZ2" lon="4.3767766" lat="51.9905874" x="-0.75" y="-5.20"/>
            <waypoint name="_CZ3" lon="4.3767226" lat="51.9906409" x="-4.57" y="0.68"/>
            <waypoint name="_CZ4" lon="4.376806" lat="51.990667" x="1.10" y="3.69"/>
            <waypoint name="_DZ1" lon="4.3768073" lat="51.9906831" x="1.15" y="5.48"/>
            <waypoint name="_DZ2" lon="4.3767093" lat="51.9906472" x="-5.50" y="1.36"/>
            <waypoint name="_DZ3" lon="4.3767679" lat="51.9905876" x="-1.35" y="-5.19"/>
            <waypoint name="_DZ4" lon="4.3768677" lat="51.9906254" x="5.42" y="-0.85"/>
          </waypoints>
          <sectors>
            <sector name="DangerZone" color="orange">
              <corner name="_DZ1"/>
              <corner name="_DZ2"/>
              <corner name="_DZ3"/>
              <corner name="_DZ4"/>
            </sector>
          </sectors>
          <exceptions>
            <exception deroute="Force Kill Engines" cond="datalink_time>=2"/>
            <exception deroute="Force Kill Engines" cond="radio_control.status == RC_REALLY_LOST"/>
          </exceptions>
          <blocks>
            <block name="Wait GPS" no="0">
              <call_once fun="NavKillThrottle()" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Holding point" no="1">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="Start Engine" no="2">
              <call_once fun="NavResurrect()" no="0"/>
              <call_once fun="NavSetWaypointHere(WP_STDBY)" no="1"/>
              <attitude vmode="throttle" throttle="0" roll="0" pitch="0" no="2"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff" name="Takeoff" no="3">
              <exception deroute="Standby" cond="stateGetPositionEnu_f()->z > 0.5"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="4">
              <stay wp="STDBY" no="0"/>
            </block>
            <block name="Fly Trajectory" no="5">
              <while cond="TRUE" no="0">
                <go wp="t0" no="1"/>
                <go wp="t1" no="2"/>
                <go wp="t2" no="3"/>
                <go wp="t3" no="4"/>
                <go wp="t7" no="5"/>
              </while>
            </block>
            <block strip_icon="land-right.png" strip_button="land Here" name="land here" no="6">
              <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
            </block>
            <block name="land" no="7">
              <go wp="TD" no="0"/>
            </block>
            <block name="flare" no="8">
              <exception deroute="Holding point" cond="NavDetectGround()"/>
              <exception deroute="landed" cond="!nav_is_in_flight()"/>
              <call_once fun="NavStartDetectGround()" no="0"/>
              <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
            </block>
            <block name="landed" no="9">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="Force Kill Engines" no="10">
              <call_once fun="autopilot_set_motors_on(FALSE)" no="0"/>
              <while cond="1" no="1"/>
            </block>
            <block name="HOME" no="11">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="11" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="10" block_name="Force Kill Engines" stage="1">
            <while cond="1" no="1"/>
          </stage>
          <stage block="10" block_name="Force Kill Engines" stage="0">
            <call_once fun="autopilot_set_motors_on(FALSE)" no="0"/>
          </stage>
          <stage block="9" block_name="landed" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="9" block_name="landed" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="8" block_name="flare" stage="1">
            <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
          </stage>
          <stage block="8" block_name="flare" stage="0">
            <call_once fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="7" block_name="land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="6" block_name="land here" stage="0">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="5" block_name="Fly Trajectory" stage="5">
            <go wp="t7" no="5"/>
          </stage>
          <stage block="5" block_name="Fly Trajectory" stage="4">
            <go wp="t3" no="4"/>
          </stage>
          <stage block="5" block_name="Fly Trajectory" stage="3">
            <go wp="t2" no="3"/>
          </stage>
          <stage block="5" block_name="Fly Trajectory" stage="2">
            <go wp="t1" no="2"/>
          </stage>
          <stage block="5" block_name="Fly Trajectory" stage="1">
            <go wp="t0" no="1"/>
          </stage>
          <stage block="5" block_name="Fly Trajectory" stage="0">
            <while cond="TRUE" no="0">
              <go wp="t0" no="1"/>
              <go wp="t1" no="2"/>
              <go wp="t2" no="3"/>
              <go wp="t3" no="4"/>
              <go wp="t7" no="5"/>
            </while>
          </stage>
          <stage block="4" block_name="Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="3" block_name="Takeoff" stage="1">
            <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
          </stage>
          <stage block="3" block_name="Takeoff" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="2" block_name="Start Engine" stage="2">
            <attitude vmode="throttle" throttle="0" roll="0" pitch="0" no="2"/>
          </stage>
          <stage block="2" block_name="Start Engine" stage="1">
            <call_once fun="NavSetWaypointHere(WP_STDBY)" no="1"/>
          </stage>
          <stage block="2" block_name="Start Engine" stage="0">
            <call_once fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="1" block_name="Holding point" stage="1">
            <attitude vmode="throttle" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="1" block_name="Holding point" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="air_data">
              <dl_setting VAR="air_data.qnh" STEP="1" SHORTNAME="QNH" MODULE="air_data/air_data" MIN="800" MAX="1200"/>
              <dl_setting VAR="air_data.tas_factor" TYPE="float" STEP="0.01" SHORTNAME="TASfactor" PERSISTENT="true" PARAM="AIR_DATA_TAS_FACTOR" MODULE="air_data/air_data" MIN="0.8" MAX="1.3"/>
              <dl_setting VAR="air_data.calc_qnh_once" STEP="1" SHORTNAME="calcQNH" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_airspeed" TYPE="uint8" STEP="1" SHORTNAME="calcAirspeed" PERSISTENT="true" PARAM="AIR_DATA_CALC_AIRSPEED" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_tas_factor" TYPE="uint8" STEP="1" SHORTNAME="calcTASfactor" PERSISTENT="true" PARAM="AIR_DATA_CALC_TAS_FACTOR" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_amsl_baro" TYPE="uint8" STEP="1" SHORTNAME="calcAMSL" PERSISTENT="true" PARAM="AIR_DATA_CALC_AMSL_BARO" MODULE="air_data/air_data" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="geo_mag">
              <dl_setting VAR="geo_mag.calc_once" VALUES="OFF|CALC" STEP="1" SHORTNAME="calcNow" MODULE="geo_mag/geo_mag" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="Ins Extended">
            <dl_settings NAME="INS">
              <dl_setting VAR="vff.accel_noise" STEP="0.1" SHORTNAME="accel_noise" MODULE="subsystems/ins/vf_extended_float" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_baro" STEP="0.1" SHORTNAME="r_baro" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_alt" STEP="0.1" SHORTNAME="r_alt" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_obs_height" STEP="0.1" SHORTNAME="r_obs_height" MIN="0" MAX="10"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
              <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
              <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
              <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
              <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="indi">
              <dl_setting VAR="indi.reference_acceleration.err_p" STEP="1" SHORTNAME="kp_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_P" MODULE="stabilization/stabilization_indi_simple" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_p" STEP="0.1" SHORTNAME="kd_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.p" STEP="0.001" SHORTNAME="ctl_eff_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_P" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.reference_acceleration.err_q" STEP="1" SHORTNAME="kp_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_Q" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_q" STEP="0.1" SHORTNAME="kd_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.q" STEP="0.001" SHORTNAME="ctl_eff_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_Q" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.reference_acceleration.err_r" STEP="1" SHORTNAME="kp_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_R" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_r" STEP="0.1" SHORTNAME="kd_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.r" STEP="0.001" SHORTNAME="ctl_eff_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_R" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.g2" STEP="0.01" SHORTNAME="g2" PERSISTENT="true" PARAM="STABILIZATION_INDI_G2_R" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.adaptive" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="use_adaptive" PERSISTENT="true" PARAM="STABILIZATION_INDI_USE_ADAPTIVE" MIN="0" MAX="1"/>
              <dl_setting VAR="indi.max_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_rate" PARAM="STABILIZATION_INDI_MAX_RATE" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
              <dl_setting VAR="indi.attitude_max_yaw_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_yaw_rate_attitude" PARAM="STABILIZATION_INDI_MAX_R" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="NAV">
              <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
              <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
              <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MIN="-50" MAX="50"/>
              <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MIN="0" MAX="10.0"/>
              <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MIN="-10.0" MAX="0.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Vert Loop">
              <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
              <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MIN="0.2" MAX="0.8"/>
              <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MIN="0" MAX="1"/>
              <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
            <dl_settings NAME="Horiz Loop">
              <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="true" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
              <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
              <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MIN="0" MAX="1"/>
              <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
              <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
              <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
              <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
              <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
              <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="bebop2_optitrack">
        <description>    Airframe file to fly a Bebop2 drone, in stable smooth flight, through waypoints using an optitrack system, such as the Cyberzoo of TUDelft. The values are tuned so that the flight speed is limited and the drone does not over-shoot the waypoints as it would in outdoor settings.</description>
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="bebop2"/>
          <target NAME="nps" BOARD="pc">
            <module TYPE="jsbsim" NAME="fdm"/>
            <module NAME="udp"/>
          </target>
          <define VALUE="FALSE" NAME="USE_SONAR"/>
          <module TYPE="transparent_udp" NAME="telemetry"/>
          <module TYPE="datalink" NAME="radio_control"/>
          <module NAME="motor_mixing"/>
          <module TYPE="bebop" NAME="actuators"/>
          <module TYPE="bebop" NAME="imu"/>
          <module TYPE="datalink" NAME="gps"/>
          <module TYPE="indi_simple" NAME="stabilization"/>
          <module TYPE="int_cmpl_quat" NAME="ahrs">
            <configure VALUE="FALSE" NAME="USE_MAGNETOMETER"/>
            <define VALUE="TRUE" NAME="AHRS_USE_GPS_HEADING"/>
          </module>
          <module TYPE="extended" NAME="ins"/>
          <module NAME="geo_mag"/>
          <module NAME="air_data"/>
          <module NAME="send_imu_mag_current"/>
        </firmware>
        <commands>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="6000"/>
        </commands>
        <servos DRIVER="Default">
          <servo NO="0" NEUTRAL="2500" NAME="TOP_LEFT" MIN="2500" MAX="12000"/>
          <servo NO="1" NEUTRAL="2500" NAME="TOP_RIGHT" MIN="2500" MAX="12000"/>
          <servo NO="2" NEUTRAL="2500" NAME="BOTTOM_RIGHT" MIN="2500" MAX="12000"/>
          <servo NO="3" NEUTRAL="2500" NAME="BOTTOM_LEFT" MIN="2500" MAX="12000"/>
        </servos>
        <section PREFIX="MOTOR_MIXING_" NAME="MIXING">
          <define VALUE="0" NAME="TRIM_ROLL"/>
          <define VALUE="0" NAME="TRIM_PITCH"/>
          <define VALUE="0" NAME="TRIM_YAW"/>
          <define VALUE="TRUE" NAME="REVERSE"/>
          <define VALUE="QUAD_X" NAME="TYPE"/>
        </section>
        <command_laws>
          <call FUN="motor_mixing_run(autopilot_get_motors_on(),FALSE,values)"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_LEFT]" SERVO="TOP_LEFT"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_RIGHT]" SERVO="TOP_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_RIGHT]" SERVO="BOTTOM_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_LEFT]" SERVO="BOTTOM_LEFT"/>
        </command_laws>
        <section PREFIX="AIR_DATA_" NAME="AIR_DATA">
          <define VALUE="FALSE" NAME="CALC_AIRSPEED"/>
          <define VALUE="FALSE" NAME="CALC_TAS_FACTOR"/>
          <define VALUE="TRUE" NAME="CALC_AMSL_BARO"/>
        </section>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="-16" NAME="MAG_X_NEUTRAL"/>
          <define VALUE="55" NAME="MAG_Y_NEUTRAL"/>
          <define VALUE="204" NAME="MAG_Z_NEUTRAL"/>
          <define VALUE="7.28514789391" NAME="MAG_X_SENS" INTEGER="16"/>
          <define VALUE="7.33022132691" NAME="MAG_Y_SENS" INTEGER="16"/>
          <define VALUE="7.57102035692" NAME="MAG_Z_SENS" INTEGER="16"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.3892503" NAME="H_X"/>
          <define VALUE="0.0017972" NAME="H_Y"/>
          <define VALUE="0.9211303" NAME="H_Z"/>
          <define VALUE="0" NAME="HEADING_UPDATE_GPS_MIN_SPEED"/>
        </section>
        <section PREFIX="INS_" NAME="INS">
          <define VALUE="2.2" NAME="SONAR_MAX_RANGE"/>
          <define VALUE="0.2" NAME="SONAR_MIN_RANGE"/>
          <define VALUE="TRUE" NAME="SONAR_UPDATE_ON_AGL"/>
          <define VALUE="1" NAME="USE_GPS_ALT"/>
          <define VALUE="1" NAME="USE_GPS_ALT_SPEED"/>
          <define VALUE="0.01" NAME="VFF_R_GPS"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="RC_SETPOINT">
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="300" UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="0" NAME="DEADBAND_A"/>
          <define VALUE="0" NAME="DEADBAND_E"/>
          <define VALUE="50" NAME="DEADBAND_R"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="ATTITUDE_REFERENCE">
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.9" NAME="REF_ZETA_P"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.9" NAME="REF_ZETA_Q"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.9" NAME="REF_ZETA_R"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_RDOT"/>
        </section>
        <section PREFIX="STABILIZATION_INDI_" NAME="STABILIZATION_ATTITUDE_INDI">
          <define VALUE="0.05" NAME="G1_P"/>
          <define VALUE="0.025" NAME="G1_Q"/>
          <define VALUE="0.0022" NAME="G1_R"/>
          <define VALUE="0.20" NAME="G2_R"/>
          <define VALUE="FALSE" NAME="FILTER_ROLL_RATE"/>
          <define VALUE="FALSE" NAME="FILTER_PITCH_RATE"/>
          <define VALUE="FALSE" NAME="FILTER_YAW_RATE"/>
          <define VALUE="170.0" NAME="REF_ERR_P"/>
          <define VALUE="600.0" NAME="REF_ERR_Q"/>
          <define VALUE="600.0" NAME="REF_ERR_R"/>
          <define VALUE="14.3" NAME="REF_RATE_P"/>
          <define VALUE="28.0" NAME="REF_RATE_Q"/>
          <define VALUE="28.0" NAME="REF_RATE_R"/>
          <define VALUE="3.2" NAME="FILT_CUTOFF"/>
          <define VALUE="3.2" NAME="FILT_CUTOFF_R"/>
          <define VALUE="0.06" NAME="ACT_DYN_P"/>
          <define VALUE="0.06" NAME="ACT_DYN_Q"/>
          <define VALUE="0.06" NAME="ACT_DYN_R"/>
          <define VALUE="FALSE" NAME="USE_ADAPTIVE"/>
          <define VALUE="0.0001" NAME="ADAPTIVE_MU"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="350" NAME="HOVER_KP"/>
          <define VALUE="85" NAME="HOVER_KD"/>
          <define VALUE="20" NAME="HOVER_KI"/>
          <define VALUE="0.53" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="TRUE" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="20" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="0.5" UNIT="m/s" NAME="REF_MAX_SPEED"/>
          <define VALUE="120" NAME="PGAIN"/>
          <define VALUE="100" NAME="DGAIN"/>
          <define VALUE="30" NAME="IGAIN"/>
          <define VALUE="1.0" NAME="REF_ZETA"/>
        </section>
        <section NAME="MISC">
          <define VALUE="0.2" UNIT="m" NAME="ARRIVED_AT_WAYPOINT"/>
        </section>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="NAV_" NAME="NAVIGATION">
          <define VALUE="0.5" NAME="CLIMB_VSPEED"/>
          <define VALUE="-1.0" NAME="DESCEND_VSPEED"/>
        </section>
        <section PREFIX="NPS_" NAME="SIMULATOR">
          <define VALUE="nw_motor, ne_motor, se_motor, sw_motor" TYPE="string[]" NAME="ACTUATOR_NAMES"/>
          <define VALUE="simple_x_quad_ccw" TYPE="string" NAME="JSBSIM_MODEL"/>
          <define VALUE="nps_sensors_params_default.h" TYPE="string" NAME="SENSORS_PARAMS"/>
        </section>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_NAV" NAME="MODE_STARTUP"/>
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_ATTITUDE_Z_HOLD" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_NAV" NAME="MODE_AUTO2"/>
        </section>
        <section NAME="BAT">
          <define VALUE="8700" NAME="MILLIAMP_AT_FULL_THROTTLE"/>
          <define VALUE="9.9" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="11.0" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="11.1" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="12.4" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.05" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
            <message PERIOD="0.05" NAME="OPTICAL_FLOW_HOVER"/>
            <message PERIOD="0.10" NAME="VISUALTARGET"/>
            <message PERIOD="0.1" NAME="VISION_POSITION_ESTIMATE"/>
            <message PERIOD="0.05" NAME="DIVERGENCE"/>
            <message PERIOD="0.02" NAME="DRAGSPEED"/>
            <message PERIOD="5.1" NAME="LOGGER_STATUS"/>
            <message PERIOD="1.2" NAME="LIDAR"/>
            <message PERIOD=".25" NAME="INS_EKF2"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="BEBOP_ACTUATORS"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_FLOAT"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
            <message PERIOD="2.0" NAME="INDI_G"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="vel_guidance" KEY_PRESS="q">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HYBRID_GUIDANCE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1.0" NAME="GPS_INT"/>
            <message PERIOD="1.0" NAME="INS"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="RTCM3">
            <message PERIOD="1" NAME="GPS_RXMRTCM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD="1" NAME="GPS_RTK"/>
          </mode>
        </process>
        <process NAME="FlightRecorder">
          <mode NAME="default">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD=".1" NAME="GPS_INT"/>
            <message PERIOD=".1" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".2" NAME="IMU_MAG_SCALED"/>
            <message PERIOD="0.05" NAME="LIDAR"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="19"/>
            <dl_setting VAR="autopilot.kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot.power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot.mode" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="19" HANDLER="SetModeHandler"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="bebop2_vision_front" ac_id="217" airframe="airframes/tudelft/bebop2_optitrack_visionfront.xml" radio="radios/dummy.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/rotorcraft_guido_optitrack.xml" settings="settings/rotorcraft_basic.xml" settings_modules="modules/video_rtp_stream.xml modules/optical_flow_landing.xml modules/cv_opticflow.xml modules/video_capture.xml modules/bebop_cam.xml modules/air_data.xml modules/geo_mag.xml modules/ins_extended.xml modules/ahrs_int_cmpl_quat.xml modules/stabilization_indi_simple.xml modules/nav_basic_rotorcraft.xml modules/guidance_rotorcraft.xml modules/gps.xml modules/imu_common.xml" gui_color="#ffffbf17bf17">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitMM" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1120" MIN="1120" MAX="2000" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="0.3" name="Rotorcraft Optitrack (Delft)" max_dist_from_home="20" lon0="4.376789" lat0="51.990634" ground_alt="0" alt="1.5">
          <header>#include &quot;autopilot.h&quot;</header>
          <waypoints>
            <waypoint y="0.0" x="0.0" name="HOME"/>
            <waypoint y="-0.6" x="1.2" name="CLIMB"/>
            <waypoint y="2.0" x="2.0" name="GOAL"/>
            <waypoint y="-0.8" x="-0.7" name="STDBY"/>
            <waypoint y="-1.7" x="0.8" name="TD"/>
            <waypoint name="p1" lon="4.376823" lat="51.990630" x="2.34" y="-0.40"/>
            <waypoint name="p2" lon="4.376779" lat="51.990614" x="-0.64" y="-2.24"/>
            <waypoint name="p3" lon="4.376759" lat="51.990636" x="-2.06" y="0.18"/>
            <waypoint name="p4" lon="4.376805" lat="51.990651" x="1.06" y="1.91"/>
            <waypoint name="FA1" lon="4.3768628" lat="51.9906213" x="5.09" y="-1.32"/>
            <waypoint name="FA2" lon="4.3767766" lat="51.9905874" x="-0.75" y="-5.20"/>
            <waypoint name="FA3" lon="4.3767226" lat="51.9906409" x="-4.57" y="0.68"/>
            <waypoint name="FA4" lon="4.3768074" lat="51.9906737" x="1.18" y="4.44"/>
          </waypoints>
          <sectors>
            <sector name="Flight_Area" color="red">
              <corner name="FA4"/>
              <corner name="FA3"/>
              <corner name="FA2"/>
              <corner name="FA1"/>
            </sector>
          </sectors>
          <blocks>
            <block name="Wait GPS" no="0">
              <call_once fun="NavKillThrottle()" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Holding point" no="1">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="Start Engine" no="2">
              <call_once fun="NavResurrect()" no="0"/>
              <call_once fun="NavSetWaypointHere(WP_STDBY)" no="1"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="2"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff" name="Takeoff" no="3">
              <exception deroute="Standby" cond="stateGetPositionEnu_f()->z > 1.0"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="4">
              <stay wp="STDBY" no="0"/>
            </block>
            <block strip_icon="lookfore.png" strip_button="Go" name="START" no="5">
              <call_once fun="NavSetWaypointHere(WP_GOAL)" no="0"/>
            </block>
            <block name="StayGoal" no="6">
              <stay wp="GOAL" no="0"/>
            </block>
            <block name="stay_p1" no="7">
              <stay wp="p1" no="0"/>
            </block>
            <block name="go_p2" no="8">
              <call_once fun="nav_set_heading_deg(90)" no="0"/>
              <go wp="p2" no="1"/>
              <deroute block="stay_p1" no="2"/>
            </block>
            <block name="line_p1_p2" no="9">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <stay wp="p2" until="stage_time>10" no="1"/>
              <go wp="p1" hmode="route" from="p2" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="route" no="10">
              <go wp="p3" hmode="route" from="p1" no="0"/>
              <go wp="p4" hmode="route" from="p3" no="1"/>
              <go wp="p1" hmode="route" from="p4" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="Oval" no="11">
              <oval radius="-1" p2="p2" p1="p1" no="1"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land Here" name="land here" no="12">
              <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
            </block>
            <block name="land" no="13">
              <go wp="TD" no="0"/>
            </block>
            <block name="flare" no="14">
              <exception deroute="Holding point" cond="NavDetectGround()"/>
              <exception deroute="landed" cond="!nav_is_in_flight()"/>
              <call_once fun="NavStartDetectGround()" no="0"/>
              <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
            </block>
            <block name="landed" no="15">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="HOME" no="16">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="16" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="15" block_name="landed" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="15" block_name="landed" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="14" block_name="flare" stage="1">
            <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
          </stage>
          <stage block="14" block_name="flare" stage="0">
            <call_once fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="13" block_name="land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="12" block_name="land here" stage="0">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="11" block_name="Oval" stage="1">
            <oval radius="-1" p2="p2" p1="p1" no="1"/>
          </stage>
          <stage block="10" block_name="route" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="10" block_name="route" stage="2">
            <go wp="p1" hmode="route" from="p4" no="2"/>
          </stage>
          <stage block="10" block_name="route" stage="1">
            <go wp="p4" hmode="route" from="p3" no="1"/>
          </stage>
          <stage block="10" block_name="route" stage="0">
            <go wp="p3" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="9" block_name="line_p1_p2" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="9" block_name="line_p1_p2" stage="2">
            <go wp="p1" hmode="route" from="p2" no="2"/>
          </stage>
          <stage block="9" block_name="line_p1_p2" stage="1">
            <stay wp="p2" until="stage_time>10" no="1"/>
          </stage>
          <stage block="9" block_name="line_p1_p2" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="8" block_name="go_p2" stage="2">
            <deroute block="stay_p1" no="2"/>
          </stage>
          <stage block="8" block_name="go_p2" stage="1">
            <go wp="p2" no="1"/>
          </stage>
          <stage block="8" block_name="go_p2" stage="0">
            <call_once fun="nav_set_heading_deg(90)" no="0"/>
          </stage>
          <stage block="7" block_name="stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="6" block_name="StayGoal" stage="0">
            <stay wp="GOAL" no="0"/>
          </stage>
          <stage block="5" block_name="START" stage="0">
            <call_once fun="NavSetWaypointHere(WP_GOAL)" no="0"/>
          </stage>
          <stage block="4" block_name="Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="3" block_name="Takeoff" stage="1">
            <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
          </stage>
          <stage block="3" block_name="Takeoff" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="2" block_name="Start Engine" stage="2">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="2"/>
          </stage>
          <stage block="2" block_name="Start Engine" stage="1">
            <call_once fun="NavSetWaypointHere(WP_STDBY)" no="1"/>
          </stage>
          <stage block="2" block_name="Start Engine" stage="0">
            <call_once fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="1" block_name="Holding point" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="1" block_name="Holding point" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="video">
              <dl_setting VAR="viewvideo.use_rtp" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="rtp" PARAM="VIEWVIDEO_USE_RTP" MODULE="computer_vision/viewvideo" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="OpticalFlowLanding">
              <dl_setting VAR="of_landing_ctrl.nominal_thrust" STEP="0.001" SHORTNAME="nominal_thrust" MODULE="ctrl/optical_flow_landing" MIN="0" MAX="1"/>
              <dl_setting VAR="of_landing_ctrl.lp_const" STEP="0.005" SHORTNAME="lp_factor" PARAM="OFL_LP_CONST" MODULE="ctrl/optical_flow_landing" MIN="0.005" MAX="1"/>
              <dl_setting VAR="of_landing_ctrl.divergence_setpoint" STEP="0.01" SHORTNAME="div sp" MODULE="ctrl/optical_flow_landing" MIN="-1" MAX="1"/>
              <dl_setting VAR="of_landing_ctrl.cov_set_point" STEP="0.0001" SHORTNAME="cov_set_point" PARAM="OFL_COV_SETPOINT" MODULE="ctrl/optical_flow_landing" MIN="-6" MAX="6"/>
              <dl_setting VAR="of_landing_ctrl.cov_limit" STEP="0.0001" SHORTNAME="cov_limit" PARAM="OFL_COV_LANDING_LIMIT" MODULE="ctrl/optical_flow_landing" MIN="0" MAX="6"/>
              <dl_setting VAR="of_landing_ctrl.pgain" STEP="0.001" SHORTNAME="pgain" PARAM="OFL_PGAIN" MODULE="ctrl/optical_flow_landing" MIN="0" MAX="6"/>
              <dl_setting VAR="of_landing_ctrl.igain" STEP="0.001" SHORTNAME="igain" PARAM="OFL_IGAIN" MODULE="ctrl/optical_flow_landing" MIN="0" MAX="1"/>
              <dl_setting VAR="of_landing_ctrl.dgain" STEP="0.1" SHORTNAME="dgain" PARAM="OFL_DGAIN" MODULE="ctrl/optical_flow_landing" MIN="0" MAX="6"/>
              <dl_setting VAR="of_landing_ctrl.VISION_METHOD" VALUES="Ground truth|Online" STEP="1" SHORTNAME="VISION_METHOD" PARAM="OFL_VISION_METHOD" MODULE="ctrl/optical_flow_landing" MIN="0" MAX="1"/>
              <dl_setting VAR="of_landing_ctrl.CONTROL_METHOD" VALUES="Simple|Adaptive|Exp" STEP="1" SHORTNAME="CONTROL_METHOD" PARAM="OFL_CONTROL_METHOD" MODULE="ctrl/optical_flow_landing" MIN="0" MAX="2"/>
              <dl_setting VAR="of_landing_ctrl.COV_METHOD" VALUES="Div-Thrust|Div-Shift div" STEP="1" SHORTNAME="COV_METHOD" PARAM="OFL_COV_METHOD" MODULE="ctrl/optical_flow_landing" MIN="0" MAX="1"/>
              <dl_setting VAR="of_landing_ctrl.delay_steps" STEP="1" SHORTNAME="delay_steps" MODULE="ctrl/optical_flow_landing" MIN="0" MAX="60"/>
              <dl_setting VAR="of_landing_ctrl.pgain_adaptive" STEP="0.1" SHORTNAME="pgain_adaptive" MODULE="ctrl/optical_flow_landing" MIN="0" MAX="20.0"/>
              <dl_setting VAR="of_landing_ctrl.igain_adaptive" STEP="0.01" SHORTNAME="igain_adaptive" MODULE="ctrl/optical_flow_landing" MIN="0" MAX="1.0"/>
              <dl_setting VAR="of_landing_ctrl.dgain_adaptive" STEP="0.01" SHORTNAME="dgain_adaptive" MODULE="ctrl/optical_flow_landing" MIN="0" MAX="5.0"/>
              <dl_setting VAR="of_landing_ctrl.reduction_factor_elc" STEP="0.01" SHORTNAME="reduction_factor_elc" MODULE="ctrl/optical_flow_landing" MIN="0.1" MAX="3.0"/>
              <dl_setting VAR="of_landing_ctrl.elc_oscillate" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="oscillate" PARAM="OFL_ELC_OSCILLATE" MODULE="ctrl/optical_flow_landing" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="Vision stabilization">
            <dl_settings NAME="vision_calc">
              <dl_setting VAR="opticflow.method" VALUES="LK_Fast9|EdgeFlow" STEP="1" SHORTNAME="method" PARAM="METHOD" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.corner_method" VALUES="exhaustive-FAST|ACT-FAST" STEP="1" SHORTNAME="corner_method" PARAM="CORNER_METHOD" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.window_size" STEP="1" SHORTNAME="window_size" PARAM="OPTICFLOW_WINDOW_SIZE" MODULE="computer_vision/opticflow_module" MIN="0" MAX="20"/>
              <dl_setting VAR="opticflow.search_distance" STEP="1" SHORTNAME="search_distance" PARAM="SEARCH_DISTANCE" MODULE="computer_vision/opticflow_module" MIN="0" MAX="50"/>
              <dl_setting VAR="opticflow.subpixel_factor" STEP="10" SHORTNAME="subpixel_factor" PARAM="OPTICFLOW_SUBPIXEL_FACTOR" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1000"/>
              <dl_setting VAR="opticflow.resolution_factor" STEP="10" SHORTNAME="resolution_factor" PARAM="OPTICFLOW_RESOLUTION_FACTOR" MODULE="computer_vision/opticflow_module" MIN="10" MAX="10000"/>
              <dl_setting VAR="opticflow.derotation" VALUES="OFF|ON" STEP="1" SHORTNAME="derotation" PARAM="OPTICFLOW_DEROTATION" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.median_filter" VALUES="OFF|ON" STEP="1" SHORTNAME="median_filter" PARAM="OPTICFLOW_MEDIAN_FILTER" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.feature_management" VALUES="OFF|ON" STEP="1" SHORTNAME="feature_management" PARAM="OPTICFLOW_FEATURE_MANAGEMENT" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.track_back" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="track_back" PARAM="OPTICFLOW_TRACK_BACK" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.show_flow" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="show_flow" PARAM="OPTICFLOW_SHOW_FLOW" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.max_track_corners" STEP="1" SHORTNAME="max_trck_corners" PARAM="OPTICFLOW_MAX_TRACK_CORNERS" MODULE="computer_vision/opticflow_module" MIN="0" MAX="500"/>
              <dl_setting VAR="opticflow.max_iterations" STEP="1" SHORTNAME="max_iterations" PARAM="OPTICFLOW_MAX_ITERATIONS" MODULE="computer_vision/opticflow_module" MIN="0" MAX="100"/>
              <dl_setting VAR="opticflow.threshold_vec" STEP="1" SHORTNAME="threshold_vec" PARAM="OPTICFLOW_THRESHOLD_VEC" MODULE="computer_vision/opticflow_module" MIN="0" MAX="100"/>
              <dl_setting VAR="opticflow.fast9_adaptive" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="fast9_adaptive" PARAM="OPTICFLOW_FAST9_ADAPTIVE" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.fast9_threshold" STEP="1" SHORTNAME="fast9_threshold" PARAM="OPTICFLOW_FAST9_THRESHOLD" MODULE="computer_vision/opticflow_module" MIN="0" MAX="255"/>
              <dl_setting VAR="opticflow.fast9_min_distance" STEP="1" SHORTNAME="fast9_min_distance" PARAM="OPTICFLOW_FAST9_MIN_DISTANCE" MODULE="computer_vision/opticflow_module" MIN="0" MAX="500"/>
              <dl_setting VAR="opticflow.fast9_padding" STEP="1" SHORTNAME="fast9_padding" PARAM="OPTICFLOW_FAST9_PADDING" MODULE="computer_vision/opticflow_module" MIN="0" MAX="50"/>
              <dl_setting VAR="opticflow.fast9_region_detect" VALUES="OFF|ON" STEP="1" SHORTNAME="fast9_region_detect" PARAM="OPTICFLOW_FAST9_REGION_DETECT" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.fast9_num_regions" STEP="1" SHORTNAME="fast9_num_regions" PARAM="OPTICFLOW_FAST9_NUM_REGIONS" MODULE="computer_vision/opticflow_module" MIN="1" MAX="25"/>
              <dl_setting VAR="opticflow.actfast_long_step" STEP="1" SHORTNAME="actfast_long_step" PARAM="OPTICFLOW_ACTFAST_LONG_STEP" MODULE="computer_vision/opticflow_module" MIN="1" MAX="100"/>
              <dl_setting VAR="opticflow.actfast_short_step" STEP="1" SHORTNAME="actfast_short_step" PARAM="OPTICFLOW_ACTFAST_SHORT_STEP" MODULE="computer_vision/opticflow_module" MIN="1" MAX="10"/>
              <dl_setting VAR="opticflow.actfast_min_gradient" STEP="1" SHORTNAME="actfast_min_gradient" PARAM="OPTICFLOW_ACTFAST_MIN_GRADIENT" MODULE="computer_vision/opticflow_module" MIN="1" MAX="255"/>
              <dl_setting VAR="opticflow.actfast_gradient_method" VALUES="SIMPLE|SOBEL" STEP="1" SHORTNAME="actfast_gradient_method" PARAM="OPTICFLOW_ACTFAST_GRADIENT_METHOD" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.pyramid_level" STEP="1" SHORTNAME="pyramid_level" PARAM="OPTICFLOW_PYRAMID_LEVEL" MODULE="computer_vision/opticflow_module" MIN="0" MAX="10"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="video">
              <dl_setting VAR="video_capture_record_video" STEP="1" SHORTNAME="record_video" MODULE="computer_vision/video_capture" MIN="0" MAX="1">
                <strip_button VALUE="1" NAME="Start video capture" ICON="dcstart.png" GROUP="cv"/>
                <strip_button VALUE="0" NAME="Stop video capture" ICON="dcstop.png" GROUP="cv"/>
              </dl_setting>
              <dl_setting VAR="video_capture_take_shot" STEP="1" SHORTNAME="take_shot" MODULE="computer_vision/video_capture" MIN="0" MAX="1">
                <strip_button VALUE="1" NAME="Save Image" ICON="digital-camera.png" GROUP="cv"/>
              </dl_setting>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="Bebop camera control">
            <dl_settings NAME="Front camera">
              <dl_setting VAR="mt9f002.set_zoom" STEP="0.05" SHORTNAME="zoom" PARAM="MT9F002_ZOOM" MIN="1." MAX="2.5"/>
              <dl_setting VAR="mt9f002.set_offset_x" STEP="0.05" SHORTNAME="offset_x" PARAM="MT9F002_OFFSET_X" MIN="-0.5" MAX="0.5"/>
              <dl_setting VAR="mt9f002.set_offset_y" STEP="0.05" SHORTNAME="offset_y" PARAM="MT9F002_OFFSET_Y" MIN="-0.5" MAX="0.5"/>
              <dl_setting VAR="mt9f002_send_resolution" VALUES="SEND" STEP="1" SHORTNAME="update_resolution" MODULE="boards/bebop/mt9f002" MIN="1" MAX="1" HANDLER="setting_update_resolution"/>
              <dl_setting VAR="mt9f002.gain_green1" STEP="0.1" SHORTNAME="green_1" PARAM="MT9F002_GAIN_GREEN1" MIN="1" MAX="60"/>
              <dl_setting VAR="mt9f002.gain_green2" STEP="0.1" SHORTNAME="green_2" PARAM="MT9F002_GAIN_GREEN2" MIN="1" MAX="60"/>
              <dl_setting VAR="mt9f002.gain_blue" STEP="0.1" SHORTNAME="blue" PARAM="MT9F002_GAIN_BLUE" MIN="1" MAX="60"/>
              <dl_setting VAR="mt9f002.gain_red" STEP="0.1" SHORTNAME="red" PARAM="MT9F002_GAIN_RED" MIN="1" MAX="60"/>
              <dl_setting VAR="mt9f002_send_color" VALUES="SEND" STEP="1" SHORTNAME="update_color" MODULE="boards/bebop/mt9f002" MIN="1" MAX="1" HANDLER="setting_update_color"/>
              <dl_setting VAR="mt9f002.target_exposure " STEP="0.1" SHORTNAME="exposure" PARAM="MT9F002_TARGET_EXPOSURE" MIN="0.1" MAX="80"/>
              <dl_setting VAR="mt9f002_send_exposure" VALUES="SEND" STEP="1" SHORTNAME="update_exposure" MODULE="boards/bebop/mt9f002" MIN="1" MAX="1" HANDLER="setting_update_exposure"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="air_data">
              <dl_setting VAR="air_data.qnh" STEP="1" SHORTNAME="QNH" MODULE="air_data/air_data" MIN="800" MAX="1200"/>
              <dl_setting VAR="air_data.tas_factor" TYPE="float" STEP="0.01" SHORTNAME="TASfactor" PERSISTENT="true" PARAM="AIR_DATA_TAS_FACTOR" MODULE="air_data/air_data" MIN="0.8" MAX="1.3"/>
              <dl_setting VAR="air_data.calc_qnh_once" STEP="1" SHORTNAME="calcQNH" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_airspeed" TYPE="uint8" STEP="1" SHORTNAME="calcAirspeed" PERSISTENT="true" PARAM="AIR_DATA_CALC_AIRSPEED" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_tas_factor" TYPE="uint8" STEP="1" SHORTNAME="calcTASfactor" PERSISTENT="true" PARAM="AIR_DATA_CALC_TAS_FACTOR" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_amsl_baro" TYPE="uint8" STEP="1" SHORTNAME="calcAMSL" PERSISTENT="true" PARAM="AIR_DATA_CALC_AMSL_BARO" MODULE="air_data/air_data" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="geo_mag">
              <dl_setting VAR="geo_mag.calc_once" VALUES="OFF|CALC" STEP="1" SHORTNAME="calcNow" MODULE="geo_mag/geo_mag" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="Ins Extended">
            <dl_settings NAME="INS">
              <dl_setting VAR="vff.accel_noise" STEP="0.1" SHORTNAME="accel_noise" MODULE="subsystems/ins/vf_extended_float" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_baro" STEP="0.1" SHORTNAME="r_baro" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_alt" STEP="0.1" SHORTNAME="r_alt" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_obs_height" STEP="0.1" SHORTNAME="r_obs_height" MIN="0" MAX="10"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
              <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
              <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
              <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
              <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="indi">
              <dl_setting VAR="indi.reference_acceleration.err_p" STEP="1" SHORTNAME="kp_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_P" MODULE="stabilization/stabilization_indi_simple" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_p" STEP="0.1" SHORTNAME="kd_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.p" STEP="0.001" SHORTNAME="ctl_eff_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_P" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.reference_acceleration.err_q" STEP="1" SHORTNAME="kp_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_Q" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_q" STEP="0.1" SHORTNAME="kd_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.q" STEP="0.001" SHORTNAME="ctl_eff_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_Q" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.reference_acceleration.err_r" STEP="1" SHORTNAME="kp_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_R" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_r" STEP="0.1" SHORTNAME="kd_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.r" STEP="0.001" SHORTNAME="ctl_eff_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_R" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.g2" STEP="0.01" SHORTNAME="g2" PERSISTENT="true" PARAM="STABILIZATION_INDI_G2_R" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.adaptive" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="use_adaptive" PERSISTENT="true" PARAM="STABILIZATION_INDI_USE_ADAPTIVE" MIN="0" MAX="1"/>
              <dl_setting VAR="indi.max_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_rate" PARAM="STABILIZATION_INDI_MAX_RATE" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
              <dl_setting VAR="indi.attitude_max_yaw_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_yaw_rate_attitude" PARAM="STABILIZATION_INDI_MAX_R" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="NAV">
              <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
              <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
              <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MIN="-50" MAX="50"/>
              <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MIN="0" MAX="10.0"/>
              <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MIN="-10.0" MAX="0.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Vert Loop">
              <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
              <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MIN="0.2" MAX="0.8"/>
              <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MIN="0" MAX="1"/>
              <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
            <dl_settings NAME="Horiz Loop">
              <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="true" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
              <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
              <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MIN="0" MAX="1"/>
              <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
              <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
              <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
              <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
              <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
              <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="bebop2_optitrack_visionfront">
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="bebop2"/>
          <module TYPE="transparent_udp" NAME="telemetry"/>
          <module TYPE="datalink" NAME="radio_control"/>
          <module NAME="motor_mixing"/>
          <module TYPE="bebop" NAME="actuators"/>
          <module TYPE="bebop" NAME="imu"/>
          <module TYPE="datalink" NAME="gps"/>
          <module TYPE="indi_simple" NAME="stabilization"/>
          <module TYPE="int_cmpl_quat" NAME="ahrs">
            <configure VALUE="FALSE" NAME="USE_MAGNETOMETER"/>
          </module>
          <define VALUE="0" NAME="USE_SONAR"/>
          <module TYPE="extended" NAME="ins"/>
          <module NAME="geo_mag"/>
          <module NAME="air_data"/>
          <module NAME="send_imu_mag_current"/>
          <module NAME="logger_file">
            <define VALUE="/data/ftp/internal_000" NAME="FILE_LOGGER_PATH"/>
          </module>
          <module NAME="bebop_cam"/>
          <module NAME="video_capture">
            <define VALUE="front_camera" NAME="VIDEO_CAPTURE_CAMERA"/>
            <define VALUE="/data/ftp/internal_000/images/" NAME="VIDEO_CAPTURE_PATH"/>
          </module>
          <module NAME="pose_history">
            <define VALUE="128" NAME="POSE_HISTORY_SIZE"/>
          </module>
          <module NAME="cv_opticflow">
            <define VALUE="front_camera" NAME="OPTICFLOW_CAMERA"/>
            <define VALUE="10" NAME="OPTICFLOW_FPS"/>
            <define VALUE="10" NAME="MAX_HORIZON"/>
            <define VALUE="1" NAME="OPTICFLOW_DEROTATION"/>
            <define VALUE="0.8" NAME="OPTICFLOW_DEROTATION_CORRECTION_FACTOR_X"/>
            <define VALUE="0.85" NAME="OPTICFLOW_DEROTATION_CORRECTION_FACTOR_Y"/>
            <define VALUE="0" NAME="OPTICFLOW_FEATURE_MANAGEMENT"/>
            <define VALUE="1" NAME="OPTICFLOW_TRACK_BACK"/>
            <define VALUE="1" NAME="OPTICFLOW_SHOW_FLOW"/>
          </module>
          <module NAME="optical_flow_landing">
            <define VALUE="0.05" NAME="OFL_PGAIN"/>
            <define VALUE="0.0" NAME="OFL_IGAIN"/>
          </module>
          <module NAME="video_rtp_stream">
            <define VALUE="front_camera" NAME="VIEWVIDEO_CAMERA"/>
            <define VALUE="1" NAME="VIEWVIDEO_DOWNSIZE_FACTOR"/>
            <define VALUE="40" NAME="VIEWVIDEO_QUALITY_FACTOR"/>
          </module>
        </firmware>
        <commands>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="6000"/>
        </commands>
        <servos DRIVER="Default">
          <servo NO="0" NEUTRAL="2500" NAME="TOP_LEFT" MIN="2500" MAX="12000"/>
          <servo NO="1" NEUTRAL="2500" NAME="TOP_RIGHT" MIN="2500" MAX="12000"/>
          <servo NO="2" NEUTRAL="2500" NAME="BOTTOM_RIGHT" MIN="2500" MAX="12000"/>
          <servo NO="3" NEUTRAL="2500" NAME="BOTTOM_LEFT" MIN="2500" MAX="12000"/>
        </servos>
        <section PREFIX="MOTOR_MIXING_" NAME="MIXING">
          <define VALUE="0" NAME="TRIM_ROLL"/>
          <define VALUE="0" NAME="TRIM_PITCH"/>
          <define VALUE="0" NAME="TRIM_YAW"/>
          <define VALUE="TRUE" NAME="REVERSE"/>
          <define VALUE="QUAD_X" NAME="TYPE"/>
        </section>
        <command_laws>
          <call FUN="motor_mixing_run(autopilot_get_motors_on(),FALSE,values)"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_LEFT]" SERVO="TOP_LEFT"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_RIGHT]" SERVO="TOP_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_RIGHT]" SERVO="BOTTOM_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_LEFT]" SERVO="BOTTOM_LEFT"/>
        </command_laws>
        <section PREFIX="MT9F002_" NAME="BEBOP_FRONT_CAMERA">
          <define VALUE="640" NAME="OUTPUT_HEIGHT"/>
          <define VALUE="640" NAME="OUTPUT_WIDTH"/>
          <define VALUE="0.15" NAME="OFFSET_X"/>
          <define VALUE="30" NAME="TARGET_EXPOSURE"/>
          <define VALUE="1.25" NAME="ZOOM"/>
        </section>
        <section PREFIX="AIR_DATA_" NAME="AIR_DATA">
          <define VALUE="FALSE" NAME="CALC_AIRSPEED"/>
          <define VALUE="FALSE" NAME="CALC_TAS_FACTOR"/>
          <define VALUE="TRUE" NAME="CALC_AMSL_BARO"/>
        </section>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="0" NAME="MAG_X_NEUTRAL"/>
          <define VALUE="0" NAME="MAG_Y_NEUTRAL"/>
          <define VALUE="0" NAME="MAG_Z_NEUTRAL"/>
          <define VALUE="7.28514789391" NAME="MAG_X_SENS" INTEGER="16"/>
          <define VALUE="7.33022132691" NAME="MAG_Y_SENS" INTEGER="16"/>
          <define VALUE="7.57102035692" NAME="MAG_Z_SENS" INTEGER="16"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.3892503" NAME="H_X"/>
          <define VALUE="0.0017972" NAME="H_Y"/>
          <define VALUE="0.9211303" NAME="H_Z"/>
          <define VALUE="1" NAME="USE_GPS_HEADING"/>
          <define VALUE="0" NAME="HEADING_UPDATE_GPS_MIN_SPEED"/>
        </section>
        <section PREFIX="INS_" NAME="INS">
          <define VALUE="1" NAME="USE_GPS_ALT"/>
          <define VALUE="0.01" NAME="VFF_R_GPS"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="RC_SETPOINT">
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="300" UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="0" NAME="DEADBAND_A"/>
          <define VALUE="0" NAME="DEADBAND_E"/>
          <define VALUE="50" NAME="DEADBAND_R"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="ATTITUDE_REFERENCE">
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.9" NAME="REF_ZETA_P"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.9" NAME="REF_ZETA_Q"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.9" NAME="REF_ZETA_R"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_RDOT"/>
        </section>
        <section PREFIX="STABILIZATION_INDI_" NAME="STABILIZATION_ATTITUDE_INDI">
          <define VALUE="0.094" NAME="G1_P"/>
          <define VALUE="0.094" NAME="G1_Q"/>
          <define VALUE="0.0025" NAME="G1_R"/>
          <define VALUE="0.36" NAME="G2_R"/>
          <define VALUE="FALSE" NAME="FILTER_ROLL_RATE"/>
          <define VALUE="FALSE" NAME="FILTER_PITCH_RATE"/>
          <define VALUE="FALSE" NAME="FILTER_YAW_RATE"/>
          <define VALUE="600.0" NAME="REF_ERR_P"/>
          <define VALUE="600.0" NAME="REF_ERR_Q"/>
          <define VALUE="600.0" NAME="REF_ERR_R"/>
          <define VALUE="28.0" NAME="REF_RATE_P"/>
          <define VALUE="28.0" NAME="REF_RATE_Q"/>
          <define VALUE="28.0" NAME="REF_RATE_R"/>
          <define VALUE="3.2" NAME="FILT_CUTOFF"/>
          <define VALUE="3.2" NAME="FILT_CUTOFF_R"/>
          <define VALUE="0.06" NAME="ACT_DYN_P"/>
          <define VALUE="0.06" NAME="ACT_DYN_Q"/>
          <define VALUE="0.06" NAME="ACT_DYN_R"/>
          <define VALUE="FALSE" NAME="USE_ADAPTIVE"/>
          <define VALUE="0.0001" NAME="ADAPTIVE_MU"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="350" NAME="HOVER_KP"/>
          <define VALUE="85" NAME="HOVER_KD"/>
          <define VALUE="20" NAME="HOVER_KI"/>
          <define VALUE="0.655" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="TRUE" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="2" UNIT="m/s" NAME="REF_MAX_SPEED"/>
          <define VALUE="32" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="220" NAME="PGAIN"/>
          <define VALUE="160" NAME="DGAIN"/>
          <define VALUE="15" NAME="IGAIN"/>
        </section>
        <section PREFIX="NAV_" NAME="NAVIGATION">
          <define VALUE="1.0" NAME="CLIMB_VSPEED"/>
          <define VALUE="-1.0" NAME="DESCEND_VSPEED"/>
        </section>
        <section PREFIX="NPS_" NAME="SIMULATOR">
          <define VALUE="nw_motor, ne_motor, se_motor, sw_motor" TYPE="string[]" NAME="ACTUATOR_NAMES"/>
          <define VALUE="simple_x_quad_ccw" TYPE="string" NAME="JSBSIM_MODEL"/>
          <define VALUE="nps_sensors_params_default.h" TYPE="string" NAME="SENSORS_PARAMS"/>
        </section>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_NAV" NAME="MODE_STARTUP"/>
          <define VALUE="AP_MODE_MODULE" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_ATTITUDE_Z_HOLD" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_NAV" NAME="MODE_AUTO2"/>
          <define VALUE="TRUE" NAME="NO_RC_THRUST_LIMIT"/>
        </section>
        <section NAME="BAT">
          <define VALUE="8700" NAME="MILLIAMP_AT_FULL_THROTTLE"/>
          <define VALUE="9.9" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="11.0" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="11.1" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="12.4" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.05" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
            <message PERIOD="0.05" NAME="OPTICAL_FLOW_HOVER"/>
            <message PERIOD="0.10" NAME="VISUALTARGET"/>
            <message PERIOD="0.1" NAME="VISION_POSITION_ESTIMATE"/>
            <message PERIOD="0.05" NAME="DIVERGENCE"/>
            <message PERIOD="0.02" NAME="DRAGSPEED"/>
            <message PERIOD="5.1" NAME="LOGGER_STATUS"/>
            <message PERIOD="1.2" NAME="LIDAR"/>
            <message PERIOD=".25" NAME="INS_EKF2"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="BEBOP_ACTUATORS"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_FLOAT"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
            <message PERIOD="2.0" NAME="INDI_G"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="vel_guidance" KEY_PRESS="q">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HYBRID_GUIDANCE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1.0" NAME="GPS_INT"/>
            <message PERIOD="1.0" NAME="INS"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="RTCM3">
            <message PERIOD="1" NAME="GPS_RXMRTCM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD="1" NAME="GPS_RTK"/>
          </mode>
        </process>
        <process NAME="FlightRecorder">
          <mode NAME="default">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD=".1" NAME="GPS_INT"/>
            <message PERIOD=".1" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".2" NAME="IMU_MAG_SCALED"/>
            <message PERIOD="0.05" NAME="LIDAR"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="19"/>
            <dl_setting VAR="autopilot.kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot.power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot.mode" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="19" HANDLER="SetModeHandler"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="bebop_OF_Hover" ac_id="45" airframe="airframes/tudelft/bebop_OF_hover.xml" radio="radios/dummy.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/rotorcraft_optitrack.xml" settings="settings/rotorcraft_basic.xml settings/control/rotorcraft_guidance.xml settings/control/stabilization_indi.xml" settings_modules="modules/optical_flow_hover.xml modules/cv_opticflow.xml modules/bebop_cam.xml modules/ahrs_int_cmpl_quat.xml modules/stabilization_indi_simple.xml modules/nav_basic_rotorcraft.xml modules/guidance_rotorcraft.xml modules/gps.xml modules/imu_common.xml" gui_color="red">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitMM" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1120" MIN="1120" MAX="2000" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="0.3" name="Rotorcraft Optitrack (Delft)" max_dist_from_home="20" lon0="4.376789" lat0="51.990634" ground_alt="0" alt="1.5">
          <header>#include &quot;autopilot.h&quot;</header>
          <waypoints>
            <waypoint y="0.0" x="0.0" name="HOME"/>
            <waypoint y="-0.6" x="1.2" name="CLIMB"/>
            <waypoint y="2.0" x="2.0" name="GOAL"/>
            <waypoint y="-0.8" x="-0.7" name="STDBY"/>
            <waypoint y="-1.7" x="0.8" name="TD"/>
            <waypoint name="p1" lon="4.376823" lat="51.990630" x="2.34" y="-0.40"/>
            <waypoint name="p2" lon="4.376779" lat="51.990614" x="-0.64" y="-2.24"/>
            <waypoint name="p3" lon="4.376759" lat="51.990636" x="-2.06" y="0.18"/>
            <waypoint name="p4" lon="4.376805" lat="51.990651" x="1.06" y="1.91"/>
            <waypoint name="FA1" lon="4.3768628" lat="51.9906213" x="5.09" y="-1.32"/>
            <waypoint name="FA2" lon="4.3767766" lat="51.9905874" x="-0.75" y="-5.20"/>
            <waypoint name="FA3" lon="4.3767226" lat="51.9906409" x="-4.57" y="0.68"/>
            <waypoint name="FA4" lon="4.3768074" lat="51.9906737" x="1.18" y="4.44"/>
          </waypoints>
          <sectors>
            <sector name="Flight_Area" color="red">
              <corner name="FA4"/>
              <corner name="FA3"/>
              <corner name="FA2"/>
              <corner name="FA1"/>
            </sector>
          </sectors>
          <blocks>
            <block name="Wait GPS" no="0">
              <call_once fun="NavKillThrottle()" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Holding point" no="1">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="Start Engine" no="2">
              <call_once fun="NavResurrect()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff" name="Takeoff" no="3">
              <exception deroute="Standby" cond="stateGetPositionEnu_f()->z > 1.0"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="4">
              <stay wp="STDBY" no="0"/>
            </block>
            <block strip_icon="lookfore.png" strip_button="Go" name="START" no="5">
              <call_once fun="NavSetWaypointHere(WP_GOAL)" no="0"/>
            </block>
            <block name="StayGoal" no="6">
              <stay wp="GOAL" no="0"/>
            </block>
            <block name="stay_p1" no="7">
              <stay wp="p1" no="0"/>
            </block>
            <block name="go_p2" no="8">
              <call_once fun="nav_set_heading_deg(90)" no="0"/>
              <go wp="p2" no="1"/>
              <deroute block="stay_p1" no="2"/>
            </block>
            <block name="line_p1_p2" no="9">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <stay wp="p2" until="stage_time>10" no="1"/>
              <go wp="p1" hmode="route" from="p2" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="route" no="10">
              <go wp="p3" hmode="route" from="p1" no="0"/>
              <go wp="p4" hmode="route" from="p3" no="1"/>
              <go wp="p1" hmode="route" from="p4" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="Oval" no="11">
              <oval radius="-1" p2="p2" p1="p1" no="1"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land Here" name="land here" no="12">
              <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
            </block>
            <block name="land" no="13">
              <go wp="TD" no="0"/>
            </block>
            <block name="flare" no="14">
              <exception deroute="Holding point" cond="NavDetectGround()"/>
              <exception deroute="landed" cond="!nav_is_in_flight()"/>
              <call_once fun="NavStartDetectGround()" no="0"/>
              <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
            </block>
            <block name="landed" no="15">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="HOME" no="16">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="16" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="15" block_name="landed" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="15" block_name="landed" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="14" block_name="flare" stage="1">
            <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
          </stage>
          <stage block="14" block_name="flare" stage="0">
            <call_once fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="13" block_name="land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="12" block_name="land here" stage="0">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="11" block_name="Oval" stage="1">
            <oval radius="-1" p2="p2" p1="p1" no="1"/>
          </stage>
          <stage block="10" block_name="route" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="10" block_name="route" stage="2">
            <go wp="p1" hmode="route" from="p4" no="2"/>
          </stage>
          <stage block="10" block_name="route" stage="1">
            <go wp="p4" hmode="route" from="p3" no="1"/>
          </stage>
          <stage block="10" block_name="route" stage="0">
            <go wp="p3" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="9" block_name="line_p1_p2" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="9" block_name="line_p1_p2" stage="2">
            <go wp="p1" hmode="route" from="p2" no="2"/>
          </stage>
          <stage block="9" block_name="line_p1_p2" stage="1">
            <stay wp="p2" until="stage_time>10" no="1"/>
          </stage>
          <stage block="9" block_name="line_p1_p2" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="8" block_name="go_p2" stage="2">
            <deroute block="stay_p1" no="2"/>
          </stage>
          <stage block="8" block_name="go_p2" stage="1">
            <go wp="p2" no="1"/>
          </stage>
          <stage block="8" block_name="go_p2" stage="0">
            <call_once fun="nav_set_heading_deg(90)" no="0"/>
          </stage>
          <stage block="7" block_name="stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="6" block_name="StayGoal" stage="0">
            <stay wp="GOAL" no="0"/>
          </stage>
          <stage block="5" block_name="START" stage="0">
            <call_once fun="NavSetWaypointHere(WP_GOAL)" no="0"/>
          </stage>
          <stage block="4" block_name="Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="3" block_name="Takeoff" stage="1">
            <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
          </stage>
          <stage block="3" block_name="Takeoff" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="2" block_name="Start Engine" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="2" block_name="Start Engine" stage="0">
            <call_once fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="1" block_name="Holding point" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="1" block_name="Holding point" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="OpticalFlowHover">
              <dl_settings NAME="General">
                <dl_setting VAR="cov_method" VALUES="input|past" STEP="1" SHORTNAME="COV_METHOD" PARAM="OFH_COV_METHOD" MODULE="ctrl/optical_flow_hover" MIN="0" MAX="1"/>
                <dl_setting VAR="hover_method" VALUES="Sub|Same|Smart" STEP="1" SHORTNAME="HOVER_METHOD" PARAM="OFH_HOVER_METHOD" MODULE="ctrl/optical_flow_hover" MIN="0" MAX="2"/>
              </dl_settings>
              <dl_settings NAME="Vertical">
                <dl_setting VAR="of_hover_ctrl_Z.cov_setpoint" STEP="0.00001" SHORTNAME="covDiv_set_point" PARAM="OFH_COVDIV_SETPOINT" MODULE="ctrl/optical_flow_hover" MIN="-5.05" MAX="0"/>
                <dl_setting VAR="of_hover_ctrl_Z.ramp" STEP="0.005" SHORTNAME="rampZ" PARAM="OFH_RAMPZ" MODULE="ctrl/optical_flow_hover" MIN="0" MAX="1"/>
                <dl_setting VAR="of_hover_ctrl_Z.reduction_factor" STEP="0.01" SHORTNAME="reduction_factorZ" PARAM="OFH_REDUCTIONZ" MODULE="ctrl/optical_flow_hover" MIN="0.1" MAX="1"/>
                <dl_setting VAR="of_hover_ctrl_Z.PID.P" STEP="0.01" SHORTNAME="pgainZ" MODULE="ctrl/optical_flow_hover" MIN="0" MAX="1"/>
                <dl_setting VAR="of_hover_ctrl_Z.PID.I" STEP="0.001" SHORTNAME="igainZ" PARAM="OFH_IGAINZ" MODULE="ctrl/optical_flow_hover" MIN="0" MAX="0.1"/>
                <dl_setting VAR="of_hover_ctrl_Z.PID.D" STEP="0.01" SHORTNAME="dgainZ" PARAM="OFH_DGAINZ" MODULE="ctrl/optical_flow_hover" MIN="0" MAX="1"/>
              </dl_settings>
              <dl_settings NAME="Horizontal">
                <dl_setting VAR="of_hover_ctrl_X.cov_setpoint" STEP="100" SHORTNAME="covFlow_set_pointX" PARAM="OFH_COVDIV_SETPOINT" MODULE="ctrl/optical_flow_hover" MIN="-100000" MAX="10000"/>
                <dl_setting VAR="of_hover_ctrl_Y.cov_setpoint" STEP="100" SHORTNAME="covFlow_set_pointY" PARAM="OFH_COVDIV_SETPOINT" MODULE="ctrl/optical_flow_hover" MIN="-100000" MAX="10000"/>
                <dl_setting VAR="of_hover_ctrl_X.ramp" STEP="0.0001" SHORTNAME="rampX" PARAM="OFH_RAMPXY" MODULE="ctrl/optical_flow_hover" MIN="0" MAX="0.05"/>
                <dl_setting VAR="of_hover_ctrl_Y.ramp" STEP="0.0001" SHORTNAME="rampY" PARAM="OFH_RAMPXY" MODULE="ctrl/optical_flow_hover" MIN="0" MAX="0.05"/>
                <dl_setting VAR="of_hover_ctrl_X.reduction_factor" STEP="0.01" SHORTNAME="reduction_factorX" PARAM="OFH_REDUCTIONXY" MODULE="ctrl/optical_flow_hover" MIN="0.1" MAX="1"/>
                <dl_setting VAR="of_hover_ctrl_Y.reduction_factor" STEP="0.01" SHORTNAME="reduction_factorY" PARAM="OFH_REDUCTIONXY" MODULE="ctrl/optical_flow_hover" MIN="0.1" MAX="1"/>
                <dl_setting VAR="of_hover_ctrl_X.PID.P" STEP="0.00001" SHORTNAME="pgainX" MODULE="ctrl/optical_flow_hover" MIN="0" MAX="0.01"/>
                <dl_setting VAR="of_hover_ctrl_X.PID.I" STEP="0.00001" SHORTNAME="IgainX" PARAM="OFH_IGAINX" MODULE="ctrl/optical_flow_hover" MIN="0" MAX="0.001"/>
                <dl_setting VAR="of_hover_ctrl_X.PID.D" STEP="0.00001" SHORTNAME="DgainX" PARAM="OFH_DGAINX" MODULE="ctrl/optical_flow_hover" MIN="0" MAX="0.001"/>
                <dl_setting VAR="of_hover_ctrl_Y.PID.P" STEP="0.00001" SHORTNAME="pgainY" MODULE="ctrl/optical_flow_hover" MIN="0" MAX="0.01"/>
                <dl_setting VAR="of_hover_ctrl_Y.PID.I" STEP="0.00001" SHORTNAME="IgainY" PARAM="OFH_IGAINY" MODULE="ctrl/optical_flow_hover" MIN="0" MAX="0.001"/>
                <dl_setting VAR="of_hover_ctrl_Y.PID.D" STEP="0.00001" SHORTNAME="DgainY" PARAM="OFH_DGAINY" MODULE="ctrl/optical_flow_hover" MIN="0" MAX="0.001"/>
                <dl_setting VAR="oscphi" VALUES="No|OSC" STEP="1" SHORTNAME="oscphi" MODULE="ctrl/optical_flow_hover" MIN="0" MAX="1"/>
                <dl_setting VAR="osctheta" VALUES="No|OSC" STEP="1" SHORTNAME="osctheta" MODULE="ctrl/optical_flow_hover" MIN="0" MAX="1"/>
                <dl_setting VAR="derotated" VALUES="Reg|Der" STEP="1" SHORTNAME="derotated" MODULE="ctrl/optical_flow_hover" MIN="0" MAX="1"/>
              </dl_settings>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="Vision stabilization">
            <dl_settings NAME="vision_calc">
              <dl_setting VAR="opticflow.method" VALUES="LK_Fast9|EdgeFlow" STEP="1" SHORTNAME="method" PARAM="METHOD" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.corner_method" VALUES="exhaustive-FAST|ACT-FAST" STEP="1" SHORTNAME="corner_method" PARAM="CORNER_METHOD" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.window_size" STEP="1" SHORTNAME="window_size" PARAM="OPTICFLOW_WINDOW_SIZE" MODULE="computer_vision/opticflow_module" MIN="0" MAX="20"/>
              <dl_setting VAR="opticflow.search_distance" STEP="1" SHORTNAME="search_distance" PARAM="SEARCH_DISTANCE" MODULE="computer_vision/opticflow_module" MIN="0" MAX="50"/>
              <dl_setting VAR="opticflow.subpixel_factor" STEP="10" SHORTNAME="subpixel_factor" PARAM="OPTICFLOW_SUBPIXEL_FACTOR" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1000"/>
              <dl_setting VAR="opticflow.resolution_factor" STEP="10" SHORTNAME="resolution_factor" PARAM="OPTICFLOW_RESOLUTION_FACTOR" MODULE="computer_vision/opticflow_module" MIN="10" MAX="10000"/>
              <dl_setting VAR="opticflow.derotation" VALUES="OFF|ON" STEP="1" SHORTNAME="derotation" PARAM="OPTICFLOW_DEROTATION" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.median_filter" VALUES="OFF|ON" STEP="1" SHORTNAME="median_filter" PARAM="OPTICFLOW_MEDIAN_FILTER" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.feature_management" VALUES="OFF|ON" STEP="1" SHORTNAME="feature_management" PARAM="OPTICFLOW_FEATURE_MANAGEMENT" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.track_back" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="track_back" PARAM="OPTICFLOW_TRACK_BACK" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.show_flow" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="show_flow" PARAM="OPTICFLOW_SHOW_FLOW" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.max_track_corners" STEP="1" SHORTNAME="max_trck_corners" PARAM="OPTICFLOW_MAX_TRACK_CORNERS" MODULE="computer_vision/opticflow_module" MIN="0" MAX="500"/>
              <dl_setting VAR="opticflow.max_iterations" STEP="1" SHORTNAME="max_iterations" PARAM="OPTICFLOW_MAX_ITERATIONS" MODULE="computer_vision/opticflow_module" MIN="0" MAX="100"/>
              <dl_setting VAR="opticflow.threshold_vec" STEP="1" SHORTNAME="threshold_vec" PARAM="OPTICFLOW_THRESHOLD_VEC" MODULE="computer_vision/opticflow_module" MIN="0" MAX="100"/>
              <dl_setting VAR="opticflow.fast9_adaptive" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="fast9_adaptive" PARAM="OPTICFLOW_FAST9_ADAPTIVE" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.fast9_threshold" STEP="1" SHORTNAME="fast9_threshold" PARAM="OPTICFLOW_FAST9_THRESHOLD" MODULE="computer_vision/opticflow_module" MIN="0" MAX="255"/>
              <dl_setting VAR="opticflow.fast9_min_distance" STEP="1" SHORTNAME="fast9_min_distance" PARAM="OPTICFLOW_FAST9_MIN_DISTANCE" MODULE="computer_vision/opticflow_module" MIN="0" MAX="500"/>
              <dl_setting VAR="opticflow.fast9_padding" STEP="1" SHORTNAME="fast9_padding" PARAM="OPTICFLOW_FAST9_PADDING" MODULE="computer_vision/opticflow_module" MIN="0" MAX="50"/>
              <dl_setting VAR="opticflow.fast9_region_detect" VALUES="OFF|ON" STEP="1" SHORTNAME="fast9_region_detect" PARAM="OPTICFLOW_FAST9_REGION_DETECT" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.fast9_num_regions" STEP="1" SHORTNAME="fast9_num_regions" PARAM="OPTICFLOW_FAST9_NUM_REGIONS" MODULE="computer_vision/opticflow_module" MIN="1" MAX="25"/>
              <dl_setting VAR="opticflow.actfast_long_step" STEP="1" SHORTNAME="actfast_long_step" PARAM="OPTICFLOW_ACTFAST_LONG_STEP" MODULE="computer_vision/opticflow_module" MIN="1" MAX="100"/>
              <dl_setting VAR="opticflow.actfast_short_step" STEP="1" SHORTNAME="actfast_short_step" PARAM="OPTICFLOW_ACTFAST_SHORT_STEP" MODULE="computer_vision/opticflow_module" MIN="1" MAX="10"/>
              <dl_setting VAR="opticflow.actfast_min_gradient" STEP="1" SHORTNAME="actfast_min_gradient" PARAM="OPTICFLOW_ACTFAST_MIN_GRADIENT" MODULE="computer_vision/opticflow_module" MIN="1" MAX="255"/>
              <dl_setting VAR="opticflow.actfast_gradient_method" VALUES="SIMPLE|SOBEL" STEP="1" SHORTNAME="actfast_gradient_method" PARAM="OPTICFLOW_ACTFAST_GRADIENT_METHOD" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.pyramid_level" STEP="1" SHORTNAME="pyramid_level" PARAM="OPTICFLOW_PYRAMID_LEVEL" MODULE="computer_vision/opticflow_module" MIN="0" MAX="10"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="Bebop camera control">
            <dl_settings NAME="Front camera">
              <dl_setting VAR="mt9f002.set_zoom" STEP="0.05" SHORTNAME="zoom" PARAM="MT9F002_ZOOM" MIN="1." MAX="2.5"/>
              <dl_setting VAR="mt9f002.set_offset_x" STEP="0.05" SHORTNAME="offset_x" PARAM="MT9F002_OFFSET_X" MIN="-0.5" MAX="0.5"/>
              <dl_setting VAR="mt9f002.set_offset_y" STEP="0.05" SHORTNAME="offset_y" PARAM="MT9F002_OFFSET_Y" MIN="-0.5" MAX="0.5"/>
              <dl_setting VAR="mt9f002_send_resolution" VALUES="SEND" STEP="1" SHORTNAME="update_resolution" MODULE="boards/bebop/mt9f002" MIN="1" MAX="1" HANDLER="setting_update_resolution"/>
              <dl_setting VAR="mt9f002.gain_green1" STEP="0.1" SHORTNAME="green_1" PARAM="MT9F002_GAIN_GREEN1" MIN="1" MAX="60"/>
              <dl_setting VAR="mt9f002.gain_green2" STEP="0.1" SHORTNAME="green_2" PARAM="MT9F002_GAIN_GREEN2" MIN="1" MAX="60"/>
              <dl_setting VAR="mt9f002.gain_blue" STEP="0.1" SHORTNAME="blue" PARAM="MT9F002_GAIN_BLUE" MIN="1" MAX="60"/>
              <dl_setting VAR="mt9f002.gain_red" STEP="0.1" SHORTNAME="red" PARAM="MT9F002_GAIN_RED" MIN="1" MAX="60"/>
              <dl_setting VAR="mt9f002_send_color" VALUES="SEND" STEP="1" SHORTNAME="update_color" MODULE="boards/bebop/mt9f002" MIN="1" MAX="1" HANDLER="setting_update_color"/>
              <dl_setting VAR="mt9f002.target_exposure " STEP="0.1" SHORTNAME="exposure" PARAM="MT9F002_TARGET_EXPOSURE" MIN="0.1" MAX="80"/>
              <dl_setting VAR="mt9f002_send_exposure" VALUES="SEND" STEP="1" SHORTNAME="update_exposure" MODULE="boards/bebop/mt9f002" MIN="1" MAX="1" HANDLER="setting_update_exposure"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
              <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
              <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
              <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
              <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="indi">
              <dl_setting VAR="indi.reference_acceleration.err_p" STEP="1" SHORTNAME="kp_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_P" MODULE="stabilization/stabilization_indi_simple" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_p" STEP="0.1" SHORTNAME="kd_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.p" STEP="0.001" SHORTNAME="ctl_eff_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_P" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.reference_acceleration.err_q" STEP="1" SHORTNAME="kp_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_Q" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_q" STEP="0.1" SHORTNAME="kd_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.q" STEP="0.001" SHORTNAME="ctl_eff_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_Q" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.reference_acceleration.err_r" STEP="1" SHORTNAME="kp_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_R" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_r" STEP="0.1" SHORTNAME="kd_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.r" STEP="0.001" SHORTNAME="ctl_eff_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_R" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.g2" STEP="0.01" SHORTNAME="g2" PERSISTENT="true" PARAM="STABILIZATION_INDI_G2_R" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.adaptive" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="use_adaptive" PERSISTENT="true" PARAM="STABILIZATION_INDI_USE_ADAPTIVE" MIN="0" MAX="1"/>
              <dl_setting VAR="indi.max_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_rate" PARAM="STABILIZATION_INDI_MAX_RATE" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
              <dl_setting VAR="indi.attitude_max_yaw_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_yaw_rate_attitude" PARAM="STABILIZATION_INDI_MAX_R" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="NAV">
              <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
              <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
              <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MIN="-50" MAX="50"/>
              <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MIN="0" MAX="10.0"/>
              <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MIN="-10.0" MAX="0.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Vert Loop">
              <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
              <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MIN="0.2" MAX="0.8"/>
              <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MIN="0" MAX="1"/>
              <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
            <dl_settings NAME="Horiz Loop">
              <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="true" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
              <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
              <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MIN="0" MAX="1"/>
              <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
              <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
              <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
              <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
              <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
              <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="tudelft_tb_bebop">
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="bebop"/>
          <define VALUE="FALSE" NAME="USE_SONAR"/>
          <module TYPE="transparent_udp" NAME="telemetry"/>
          <module TYPE="datalink" NAME="radio_control"/>
          <module NAME="motor_mixing"/>
          <module TYPE="bebop" NAME="actuators"/>
          <module TYPE="bebop" NAME="imu"/>
          <module TYPE="datalink" NAME="gps"/>
          <module TYPE="indi_simple" NAME="stabilization"/>
          <module TYPE="rate_indi" NAME="stabilization"/>
          <module TYPE="int_cmpl_quat" NAME="ahrs">
            <configure VALUE="FALSE" NAME="USE_MAGNETOMETER"/>
            <define VALUE="TRUE" NAME="AHRS_USE_GPS_HEADING"/>
          </module>
          <module TYPE="gps_passthrough" NAME="ins"/>
          <module NAME="bebop_cam"/>
          <module NAME="pose_history"/>
          <module NAME="cv_opticflow">
            <define VALUE="0" NAME="OPTICFLOW_METHOD"/>
            <define VALUE="bottom_camera" NAME="OPTICFLOW_CAMERA"/>
            <define VALUE="40" NAME="OPTICFLOW_SEARCH_DISTANCE"/>
          </module>
          <module NAME="optical_flow_hover">
            <define VALUE="1" NAME="OFH_HOVER_METHOD"/>
            <define VALUE="10.f" NAME="OFH_MAXBANK"/>
            <define VALUE="1" NAME="XY_SYMMETRICAL"/>
            <define VALUE="1" NAME="OFH_OSCPHI"/>
            <define VALUE="0" NAME="OFH_OSCTHETA"/>
            <define VALUE="0.4" NAME="OF_LP_CONST"/>
            <define VALUE="300" NAME="COV_WINDOW_SIZE"/>
            <define VALUE="0.002" NAME="OFH_IGAINZ"/>
            <define VALUE="0.15" NAME="OFH_RAMPZ"/>
            <define VALUE="0.45" NAME="OFH_REDUCTIONZ"/>
            <define VALUE="-0.02" NAME="OFH_COVDIV_SETPOINT"/>
            <define VALUE="0.00002" NAME="OFH_IGAINX"/>
            <define VALUE="0.00002" NAME="OFH_IGAINY"/>
            <define VALUE="0.0008" NAME="OFH_RAMPXY"/>
            <define VALUE="0.3" NAME="OFH_REDUCTIONXY"/>
            <define VALUE="-500.f" NAME="OFH_COVFLOW_SETPOINT"/>
            <define VALUE="3.f" NAME="OFH_VER_SLOPE_A"/>
            <define VALUE="-0.5" NAME="OFH_VER_SLOPE_B"/>
            <define VALUE="0.003" NAME="OFH_HOR_X_SLOPE_A"/>
            <define VALUE="0.005" NAME="OFH_HOR_X_SLOPE_B"/>
          </module>
        </firmware>
        <commands>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="6000"/>
        </commands>
        <servos DRIVER="Default">
          <servo NO="0" NEUTRAL="3000" NAME="TOP_LEFT" MIN="3000" MAX="9800"/>
          <servo NO="1" NEUTRAL="3000" NAME="TOP_RIGHT" MIN="3000" MAX="9800"/>
          <servo NO="2" NEUTRAL="3000" NAME="BOTTOM_RIGHT" MIN="3000" MAX="9800"/>
          <servo NO="3" NEUTRAL="3000" NAME="BOTTOM_LEFT" MIN="3000" MAX="9800"/>
        </servos>
        <section PREFIX="MOTOR_MIXING_" NAME="MIXING">
          <define VALUE="QUAD_X" NAME="TYPE"/>
        </section>
        <command_laws>
          <call FUN="motor_mixing_run(autopilot_get_motors_on(),FALSE,values)"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_LEFT]" SERVO="TOP_LEFT"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_RIGHT]" SERVO="TOP_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_RIGHT]" SERVO="BOTTOM_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_LEFT]" SERVO="BOTTOM_LEFT"/>
        </command_laws>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0" NAME="HEADING_UPDATE_GPS_MIN_SPEED"/>
          <define VALUE="0" NAME="GRAVITY_HEURISTIC_FACTOR"/>
          <define VALUE="0.3892503" NAME="H_X"/>
          <define VALUE="0.0017972" NAME="H_Y"/>
          <define VALUE="0.9211303" NAME="H_Z"/>
        </section>
        <section PREFIX="INS_" NAME="INS">
          <define VALUE="1" NAME="USE_GPS_ALT"/>
          <define VALUE="0.01" NAME="VFF_R_GPS"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="RC_SETPOINT">
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="120" UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="0" NAME="DEADBAND_A"/>
          <define VALUE="0" NAME="DEADBAND_E"/>
          <define VALUE="50" NAME="DEADBAND_R"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="ATTITUDE_REFERENCE">
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.9" NAME="REF_ZETA_P"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.9" NAME="REF_ZETA_Q"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.9" NAME="REF_ZETA_R"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_RDOT"/>
        </section>
        <section PREFIX="STABILIZATION_INDI_" NAME="STABILIZATION_ATTITUDE_INDI">
          <define VALUE="0.030367" NAME="G1_P"/>
          <define VALUE="0.023655" NAME="G1_Q"/>
          <define VALUE="0.001005" NAME="G1_R"/>
          <define VALUE="0.10882" NAME="G2_R"/>
          <define VALUE="600.0" NAME="REF_ERR_P"/>
          <define VALUE="600.0" NAME="REF_ERR_Q"/>
          <define VALUE="600.0" NAME="REF_ERR_R"/>
          <define VALUE="28.0" NAME="REF_RATE_P"/>
          <define VALUE="28.0" NAME="REF_RATE_Q"/>
          <define VALUE="28.0" NAME="REF_RATE_R"/>
          <define VALUE="120.0" UNIT="deg/s" NAME="MAX_R"/>
          <define VALUE="8.0" NAME="FILT_CUTOFF"/>
          <define VALUE="8.0" NAME="FILT_CUTOFF_R"/>
          <define VALUE="0.1" NAME="ACT_DYN_P"/>
          <define VALUE="0.1" NAME="ACT_DYN_Q"/>
          <define VALUE="0.1" NAME="ACT_DYN_R"/>
          <define VALUE="FALSE" NAME="USE_ADAPTIVE"/>
          <define VALUE="0.0001" NAME="ADAPTIVE_MU"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="700" NAME="HOVER_KP"/>
          <define VALUE="300" NAME="HOVER_KD"/>
          <define VALUE="100" NAME="HOVER_KI"/>
          <define VALUE="0.715" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="FALSE" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="20" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="300" NAME="PGAIN"/>
          <define VALUE="350" NAME="DGAIN"/>
          <define VALUE="30" NAME="IGAIN"/>
          <define VALUE="0.5" NAME="REF_MAX_SPEED"/>
        </section>
        <section PREFIX="NAV_" NAME="NAVIGATION">
          <define VALUE="1.0" NAME="CLIMB_VSPEED"/>
          <define VALUE="-0.75" NAME="DESCEND_VSPEED"/>
        </section>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_NAV" NAME="MODE_STARTUP"/>
          <define VALUE="AP_MODE_MODULE" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_ATTITUDE_Z_HOLD" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_NAV" NAME="MODE_AUTO2"/>
          <define VALUE="TRUE" NAME="NO_RC_THRUST_LIMIT"/>
        </section>
        <section NAME="BAT">
          <define VALUE="12700" NAME="MILLIAMP_AT_FULL_THROTTLE"/>
          <define VALUE="9.6" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="9.9" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="10.4" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="12.4" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.05" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
            <message PERIOD="0.05" NAME="OPTICAL_FLOW_HOVER"/>
            <message PERIOD="0.10" NAME="VISUALTARGET"/>
            <message PERIOD="0.1" NAME="VISION_POSITION_ESTIMATE"/>
            <message PERIOD="0.05" NAME="DIVERGENCE"/>
            <message PERIOD="0.02" NAME="DRAGSPEED"/>
            <message PERIOD="5.1" NAME="LOGGER_STATUS"/>
            <message PERIOD="1.2" NAME="LIDAR"/>
            <message PERIOD=".25" NAME="INS_EKF2"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="BEBOP_ACTUATORS"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_FLOAT"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
            <message PERIOD="2.0" NAME="INDI_G"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="vel_guidance" KEY_PRESS="q">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HYBRID_GUIDANCE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1.0" NAME="GPS_INT"/>
            <message PERIOD="1.0" NAME="INS"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="RTCM3">
            <message PERIOD="1" NAME="GPS_RXMRTCM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD="1" NAME="GPS_RTK"/>
          </mode>
        </process>
        <process NAME="FlightRecorder">
          <mode NAME="default">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD=".1" NAME="GPS_INT"/>
            <message PERIOD=".1" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".2" NAME="IMU_MAG_SCALED"/>
            <message PERIOD="0.05" NAME="LIDAR"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="19"/>
            <dl_setting VAR="autopilot.kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot.power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot.mode" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="19" HANDLER="SetModeHandler"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Vert Loop">
            <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
            <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
            <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
            <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MODULE="guidance/guidance_v" MIN="0.2" MAX="0.8"/>
            <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MODULE="guidance/guidance_v" MIN="0" MAX="1"/>
            <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MODULE="guidance/guidance_v" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
          </dl_settings>
          <dl_settings NAME="Horiz Loop">
            <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="true" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
            <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
            <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MODULE="guidance/guidance_h" MIN="0" MAX="1"/>
            <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
            <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
            <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
            <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
            <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MODULE="guidance/guidance_h" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MODULE="guidance/guidance_h" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
          </dl_settings>
          <dl_settings NAME="NAV">
            <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
            <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MODULE="navigation" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
            <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MODULE="navigation" MIN="-50" MAX="50"/>
            <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MODULE="navigation" MIN="0" MAX="10.0"/>
            <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MODULE="navigation" MIN="-10.0" MAX="0.0"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings>
        <dl_settings>
          <dl_settings NAME="indi">
            <dl_setting VAR="indi.reference_acceleration.err_p" STEP="1" SHORTNAME="kp_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_P" MODULE="stabilization/stabilization_indi_simple" MIN="0" MAX="2500"/>
            <dl_setting VAR="indi.reference_acceleration.rate_p" STEP="0.1" SHORTNAME="kd_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MODULE="stabilization/stabilization_indi_simple" MIN="0" MAX="100"/>
            <dl_setting VAR="indi.g1.p" STEP="0.001" SHORTNAME="ctl_eff_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_P" MODULE="stabilization/stabilization_indi_simple" MIN="0" MAX="10"/>
            <dl_setting VAR="indi.reference_acceleration.err_q" STEP="1" SHORTNAME="kp_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_Q" MODULE="stabilization/stabilization_indi_simple" MIN="0" MAX="2500"/>
            <dl_setting VAR="indi.reference_acceleration.rate_q" STEP="0.1" SHORTNAME="kd_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MODULE="stabilization/stabilization_indi_simple" MIN="0" MAX="100"/>
            <dl_setting VAR="indi.g1.q" STEP="0.001" SHORTNAME="ctl_eff_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_Q" MODULE="stabilization/stabilization_indi_simple" MIN="0" MAX="10"/>
            <dl_setting VAR="indi.reference_acceleration.err_r" STEP="1" SHORTNAME="kp_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_R" MODULE="stabilization/stabilization_indi_simple" MIN="0" MAX="2500"/>
            <dl_setting VAR="indi.reference_acceleration.rate_r" STEP="0.1" SHORTNAME="kd_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MODULE="stabilization/stabilization_indi_simple" MIN="0" MAX="100"/>
            <dl_setting VAR="indi.g1.r" STEP="0.001" SHORTNAME="ctl_eff_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_R" MODULE="stabilization/stabilization_indi_simple" MIN="0" MAX="10"/>
            <dl_setting VAR="indi.g2" STEP="0.01" SHORTNAME="g2" PERSISTENT="true" PARAM="STABILIZATION_INDI_G2_R" MODULE="stabilization/stabilization_indi_simple" MIN="0" MAX="10"/>
            <dl_setting VAR="indi.adaptive" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="use_adaptive" PERSISTENT="true" PARAM="STABILIZATION_INDI_USE_ADAPTIVE" MODULE="stabilization/stabilization_indi_simple" MIN="0" MAX="1"/>
            <dl_setting VAR="indi.max_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_rate" PARAM="STABILIZATION_INDI_MAX_RATE" MODULE="stabilization/stabilization_indi_simple" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
            <dl_setting VAR="indi.attitude_max_yaw_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_yaw_rate_attitude" PARAM="STABILIZATION_INDI_MAX_R" MODULE="stabilization/stabilization_indi_simple" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="bebop_flip" ac_id="3" airframe="airframes/tudelft/bebop_flip.xml" radio="radios/cockpitSX.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/dummy.xml" settings="settings/rotorcraft_basic.xml" settings_modules="modules/air_data.xml modules/geo_mag.xml modules/ins_extended.xml modules/ahrs_int_cmpl_quat.xml modules/ahrs_float_mlkf.xml modules/stabilization_indi_simple.xml modules/nav_basic_rotorcraft.xml modules/guidance_rotorcraft.xml modules/gps.xml modules/imu_common.xml" gui_color="#7d7fd7e7ffff">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitSX (easy)" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1500" MIN="2050" MAX="950" FUNCTION="ROLL" CTL="D" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="2050" MAX="950" FUNCTION="PITCH" CTL="C" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="950" MAX="2050" FUNCTION="YAW" CTL="B" AVERAGE="0"/>
        <channel NEUTRAL="1223" MIN="1223" MAX="2050" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="2050" MAX="950" FUNCTION="UNUSED" CTL="G" AVERAGE="1"/>
        <channel NEUTRAL="1496" MIN="2050" MAX="948" FUNCTION="GAIN1" CTL="E" AVERAGE="1"/>
        <channel NEUTRAL="1500" MIN="2050" MAX="948" FUNCTION="MODE" CTL="PHAUX2" AVERAGE="1"/>
      </radio>
      <dump>
        <flight_plan name="Dummy" lon0="1.27289" max_dist_from_home="1000" ground_alt="185" security_height="25" qfu="270" alt="250" lat0="43.46223">
          <waypoints>
            <waypoint name="HOME" x="0.0" y="120.0" alt="250."/>
          </waypoints>
          <blocks>
            <block name="HOME" no="0">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="0" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="air_data">
              <dl_setting VAR="air_data.qnh" STEP="1" SHORTNAME="QNH" MODULE="air_data/air_data" MIN="800" MAX="1200"/>
              <dl_setting VAR="air_data.tas_factor" TYPE="float" STEP="0.01" SHORTNAME="TASfactor" PERSISTENT="true" PARAM="AIR_DATA_TAS_FACTOR" MODULE="air_data/air_data" MIN="0.8" MAX="1.3"/>
              <dl_setting VAR="air_data.calc_qnh_once" STEP="1" SHORTNAME="calcQNH" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_airspeed" TYPE="uint8" STEP="1" SHORTNAME="calcAirspeed" PERSISTENT="true" PARAM="AIR_DATA_CALC_AIRSPEED" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_tas_factor" TYPE="uint8" STEP="1" SHORTNAME="calcTASfactor" PERSISTENT="true" PARAM="AIR_DATA_CALC_TAS_FACTOR" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_amsl_baro" TYPE="uint8" STEP="1" SHORTNAME="calcAMSL" PERSISTENT="true" PARAM="AIR_DATA_CALC_AMSL_BARO" MODULE="air_data/air_data" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="geo_mag">
              <dl_setting VAR="geo_mag.calc_once" VALUES="OFF|CALC" STEP="1" SHORTNAME="calcNow" MODULE="geo_mag/geo_mag" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="Ins Extended">
            <dl_settings NAME="INS">
              <dl_setting VAR="vff.accel_noise" STEP="0.1" SHORTNAME="accel_noise" MODULE="subsystems/ins/vf_extended_float" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_baro" STEP="0.1" SHORTNAME="r_baro" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_alt" STEP="0.1" SHORTNAME="r_alt" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_obs_height" STEP="0.1" SHORTNAME="r_obs_height" MIN="0" MAX="10"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
              <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
              <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
              <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
              <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_mlkf.mag_noise.x" TYPE="float" STEP="0.02" SHORTNAME="mag_noise_x" PERSISTENT="true" PARAM="AHRS_MAG_NOISE_X" MODULE="subsystems/ahrs/ahrs_float_mlkf" MIN="0.0" MAX="1.0"/>
              <dl_setting VAR="ahrs_mlkf.mag_noise.y" TYPE="float" STEP="0.02" SHORTNAME="mag_noise_y" PERSISTENT="true" PARAM="AHRS_MAG_NOISE_Y" MODULE="subsystems/ahrs/ahrs_float_mlkf" MIN="0.0" MAX="1.0"/>
              <dl_setting VAR="ahrs_mlkf.mag_noise.z" TYPE="float" STEP="0.02" SHORTNAME="mag_noise_z" PERSISTENT="true" PARAM="AHRS_MAG_NOISE_Z" MODULE="subsystems/ahrs/ahrs_float_mlkf" MIN="0.0" MAX="1.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="indi">
              <dl_setting VAR="indi.reference_acceleration.err_p" STEP="1" SHORTNAME="kp_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_P" MODULE="stabilization/stabilization_indi_simple" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_p" STEP="0.1" SHORTNAME="kd_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.p" STEP="0.001" SHORTNAME="ctl_eff_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_P" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.reference_acceleration.err_q" STEP="1" SHORTNAME="kp_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_Q" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_q" STEP="0.1" SHORTNAME="kd_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.q" STEP="0.001" SHORTNAME="ctl_eff_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_Q" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.reference_acceleration.err_r" STEP="1" SHORTNAME="kp_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_R" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_r" STEP="0.1" SHORTNAME="kd_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.r" STEP="0.001" SHORTNAME="ctl_eff_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_R" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.g2" STEP="0.01" SHORTNAME="g2" PERSISTENT="true" PARAM="STABILIZATION_INDI_G2_R" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.adaptive" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="use_adaptive" PERSISTENT="true" PARAM="STABILIZATION_INDI_USE_ADAPTIVE" MIN="0" MAX="1"/>
              <dl_setting VAR="indi.max_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_rate" PARAM="STABILIZATION_INDI_MAX_RATE" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
              <dl_setting VAR="indi.attitude_max_yaw_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_yaw_rate_attitude" PARAM="STABILIZATION_INDI_MAX_R" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="NAV">
              <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
              <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
              <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MIN="-50" MAX="50"/>
              <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MIN="0" MAX="10.0"/>
              <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MIN="-10.0" MAX="0.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Vert Loop">
              <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
              <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MIN="0.2" MAX="0.8"/>
              <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MIN="0" MAX="1"/>
              <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
            <dl_settings NAME="Horiz Loop">
              <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="true" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
              <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
              <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MIN="0" MAX="1"/>
              <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
              <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
              <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
              <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
              <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
              <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="bebop_indi">
        <description>Bebop, Makes Loopings</description>
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="bebop"/>
          <target NAME="nps" BOARD="pc">
            <module TYPE="jsbsim" NAME="fdm"/>
          </target>
          <module TYPE="transparent_udp" NAME="telemetry"/>
          <module TYPE="datalink" NAME="radio_control"/>
          <module NAME="motor_mixing"/>
          <module TYPE="bebop" NAME="actuators"/>
          <module TYPE="bebop" NAME="imu"/>
          <module TYPE="furuno" NAME="gps"/>
          <module TYPE="indi_simple" NAME="stabilization"/>
          <module TYPE="float_mlkf" NAME="ahrs"/>
          <module TYPE="int_cmpl_quat" NAME="ahrs">
            <define VALUE="FALSE" NAME="AHRS_USE_GPS_HEADING"/>
            <configure VALUE="int_cmpl_quat" NAME="SECONDARY_AHRS"/>
          </module>
          <module TYPE="extended" NAME="ins"/>
          <module NAME="geo_mag"/>
          <module NAME="air_data"/>
          <module NAME="send_imu_mag_current"/>
          <module NAME="logger_file">
            <define VALUE="/data/ftp/internal_000" NAME="FILE_LOGGER_PATH"/>
          </module>
        </firmware>
        <commands>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="6000"/>
        </commands>
        <section NAME="gyro_scaling">
          <define VALUE="MPU60X0_GYRO_RANGE_2000" NAME="BEBOP_GYRO_RANGE"/>
          <define VALUE="4.359" NAME="IMU_GYRO_P_SENS"/>
          <define VALUE="4.359" NAME="IMU_GYRO_Q_SENS"/>
          <define VALUE="4.359" NAME="IMU_GYRO_R_SENS"/>
          <define VALUE="4359" NAME="IMU_GYRO_P_SENS_NUM"/>
          <define VALUE="4359" NAME="IMU_GYRO_Q_SENS_NUM"/>
          <define VALUE="4359" NAME="IMU_GYRO_R_SENS_NUM"/>
          <define VALUE="1000" NAME="IMU_GYRO_P_SENS_DEN"/>
          <define VALUE="1000" NAME="IMU_GYRO_Q_SENS_DEN"/>
          <define VALUE="1000" NAME="IMU_GYRO_R_SENS_DEN"/>
        </section>
        <servos DRIVER="Default">
          <servo NO="0" NEUTRAL="3000" NAME="TOP_RIGHT" MIN="3000" MAX="12000"/>
          <servo NO="1" NEUTRAL="3000" NAME="TOP_LEFT" MIN="3000" MAX="12000"/>
          <servo NO="2" NEUTRAL="3000" NAME="BOTTOM_LEFT" MIN="3000" MAX="12000"/>
          <servo NO="3" NEUTRAL="3000" NAME="BOTTOM_RIGHT" MIN="3000" MAX="12000"/>
        </servos>
        <section PREFIX="MOTOR_MIXING_" NAME="MIXING">
          <define VALUE="0" NAME="TRIM_ROLL"/>
          <define VALUE="0" NAME="TRIM_PITCH"/>
          <define VALUE="0" NAME="TRIM_YAW"/>
          <define VALUE="QUAD_X" NAME="TYPE"/>
        </section>
        <command_laws>
          <call FUN="motor_mixing_run(autopilot_get_motors_on(),FALSE,values)"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_LEFT]" SERVO="TOP_LEFT"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_RIGHT]" SERVO="TOP_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_RIGHT]" SERVO="BOTTOM_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_LEFT]" SERVO="BOTTOM_LEFT"/>
        </command_laws>
        <section PREFIX="AIR_DATA_" NAME="AIR_DATA">
          <define VALUE="FALSE" NAME="CALC_AIRSPEED"/>
          <define VALUE="FALSE" NAME="CALC_TAS_FACTOR"/>
          <define VALUE="TRUE" NAME="CALC_AMSL_BARO"/>
        </section>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="18" NAME="MAG_X_NEUTRAL"/>
          <define VALUE="157" NAME="MAG_Y_NEUTRAL"/>
          <define VALUE="49" NAME="MAG_Z_NEUTRAL"/>
          <define VALUE="10.5007722373" NAME="MAG_X_SENS" INTEGER="16"/>
          <define VALUE="11.1147400462" NAME="MAG_Y_SENS" INTEGER="16"/>
          <define VALUE="11.6479371722" NAME="MAG_Z_SENS" INTEGER="16"/>
          <define VALUE="0.0" NAME="MAG_X_CURRENT_COEF"/>
          <define VALUE="0.0" NAME="MAG_Y_CURRENT_COEF"/>
          <define VALUE="0.0" NAME="MAG_Z_CURRENT_COEF"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.3892503" NAME="H_X"/>
          <define VALUE="0.0017972" NAME="H_Y"/>
          <define VALUE="0.9211303" NAME="H_Z"/>
          <define VALUE="0" NAME="GRAVITY_HEURISTIC_FACTOR"/>
        </section>
        <section PREFIX="INS_" NAME="INS">
          <define VALUE="2.2" NAME="SONAR_MAX_RANGE"/>
          <define VALUE="TRUE" NAME="SONAR_UPDATE_ON_AGL"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="RC_SETPOINT">
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="300" UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="0" NAME="DEADBAND_A"/>
          <define VALUE="0" NAME="DEADBAND_E"/>
          <define VALUE="50" NAME="DEADBAND_R"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="ATTITUDE_REFERENCE">
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.9" NAME="REF_ZETA_P"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.9" NAME="REF_ZETA_Q"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.9" NAME="REF_ZETA_R"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_RDOT"/>
        </section>
        <section PREFIX="STABILIZATION_INDI_" NAME="STABILIZATION_ATTITUDE_INDI">
          <define VALUE="0.0639" NAME="G1_P"/>
          <define VALUE="0.0361" NAME="G1_Q"/>
          <define VALUE="0.0022" NAME="G1_R"/>
          <define VALUE="0.1450" NAME="G2_R"/>
          <define VALUE="600.0" NAME="REF_ERR_P"/>
          <define VALUE="600.0" NAME="REF_ERR_Q"/>
          <define VALUE="600.0" NAME="REF_ERR_R"/>
          <define VALUE="28.0" NAME="REF_RATE_P"/>
          <define VALUE="28.0" NAME="REF_RATE_Q"/>
          <define VALUE="28.0" NAME="REF_RATE_R"/>
          <define VALUE="8.0" NAME="FILT_CUTOFF"/>
          <define VALUE="8.0" NAME="FILT_CUTOFF_R"/>
          <define VALUE="0.1" NAME="ACT_DYN_P"/>
          <define VALUE="0.1" NAME="ACT_DYN_Q"/>
          <define VALUE="0.1" NAME="ACT_DYN_R"/>
          <define VALUE="FALSE" NAME="USE_ADAPTIVE"/>
          <define VALUE="0.0001" NAME="ADAPTIVE_MU"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="283" NAME="HOVER_KP"/>
          <define VALUE="82" NAME="HOVER_KD"/>
          <define VALUE="13" NAME="HOVER_KI"/>
          <define VALUE="0.655" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="TRUE" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="20" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="79" NAME="PGAIN"/>
          <define VALUE="100" NAME="DGAIN"/>
          <define VALUE="30" NAME="IGAIN"/>
        </section>
        <section PREFIX="NPS_" NAME="SIMULATOR">
          <define VALUE="nw_motor, ne_motor, se_motor, sw_motor" TYPE="string[]" NAME="ACTUATOR_NAMES"/>
          <define VALUE="simple_x_quad_ccw" TYPE="string" NAME="JSBSIM_MODEL"/>
          <define VALUE="nps_sensors_params_default.h" TYPE="string" NAME="SENSORS_PARAMS"/>
        </section>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_NAV" NAME="MODE_STARTUP"/>
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_FLIP" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_FLIP" NAME="MODE_AUTO2"/>
        </section>
        <section NAME="BAT">
          <define VALUE="8700" NAME="MILLIAMP_AT_FULL_THROTTLE"/>
          <define VALUE="9.3" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="9.6" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="9.7" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="12.4" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.05" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
            <message PERIOD="0.05" NAME="OPTICAL_FLOW_HOVER"/>
            <message PERIOD="0.10" NAME="VISUALTARGET"/>
            <message PERIOD="0.1" NAME="VISION_POSITION_ESTIMATE"/>
            <message PERIOD="0.05" NAME="DIVERGENCE"/>
            <message PERIOD="0.02" NAME="DRAGSPEED"/>
            <message PERIOD="5.1" NAME="LOGGER_STATUS"/>
            <message PERIOD="1.2" NAME="LIDAR"/>
            <message PERIOD=".25" NAME="INS_EKF2"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="BEBOP_ACTUATORS"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_FLOAT"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
            <message PERIOD="2.0" NAME="INDI_G"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="vel_guidance" KEY_PRESS="q">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HYBRID_GUIDANCE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1.0" NAME="GPS_INT"/>
            <message PERIOD="1.0" NAME="INS"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="RTCM3">
            <message PERIOD="1" NAME="GPS_RXMRTCM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD="1" NAME="GPS_RTK"/>
          </mode>
        </process>
        <process NAME="FlightRecorder">
          <mode NAME="default">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD=".1" NAME="GPS_INT"/>
            <message PERIOD=".1" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".2" NAME="IMU_MAG_SCALED"/>
            <message PERIOD="0.05" NAME="LIDAR"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="19"/>
            <dl_setting VAR="autopilot.kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot.power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot.mode" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="19" HANDLER="SetModeHandler"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="bebop_opticflow_indoor" ac_id="97" airframe="airframes/tudelft/bebop_opticflow_indoor.xml" radio="radios/dummy.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/tudelft/rotorcraft_cyberzoo_no_gps.xml" settings="settings/rotorcraft_basic.xml" settings_modules="modules/video_rtp_stream.xml modules/video_capture.xml modules/cv_opticflow.xml modules/bebop_cam.xml modules/ins_hff_extended.xml modules/ahrs_int_cmpl_quat.xml modules/stabilization_indi.xml modules/nav_basic_rotorcraft.xml modules/guidance_rotorcraft.xml modules/imu_common.xml" gui_color="blue" release="398071ca8f7c8dc24becbe76bc5628b6ea604248">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitMM" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1120" MIN="1120" MAX="2000" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="0.3" name="Rotorcraft Cyberzoo (Delft) no GPS" max_dist_from_home="20" lon0="4.376789" lat0="51.990634" ground_alt="0" alt="1.5">
          <header>#include &quot;autopilot.h&quot;</header>
          <waypoints>
            <waypoint y="0.0" x="0.0" name="HOME"/>
            <waypoint y="-0.6" x="1.2" name="CLIMB"/>
            <waypoint y="2.0" x="2.0" name="GOAL"/>
            <waypoint y="-0.8" x="-0.7" name="STDBY"/>
            <waypoint y="-1.7" x="0.8" name="TD"/>
            <waypoint name="p1" lon="4.376823" lat="51.990630" x="2.34" y="-0.40"/>
            <waypoint name="p2" lon="4.376779" lat="51.990614" x="-0.64" y="-2.24"/>
            <waypoint name="p3" lon="4.376759" lat="51.990636" x="-2.06" y="0.18"/>
            <waypoint name="p4" lon="4.376805" lat="51.990651" x="1.06" y="1.91"/>
            <waypoint name="FA1" lon="4.3768628" lat="51.9906213" x="5.09" y="-1.32"/>
            <waypoint name="FA2" lon="4.3767766" lat="51.9905874" x="-0.75" y="-5.20"/>
            <waypoint name="FA3" lon="4.3767226" lat="51.9906409" x="-4.57" y="0.68"/>
            <waypoint name="FA4" lon="4.3768074" lat="51.9906737" x="1.18" y="4.44"/>
          </waypoints>
          <sectors>
            <sector name="Flight_Area" color="red">
              <corner name="FA4"/>
              <corner name="FA3"/>
              <corner name="FA2"/>
              <corner name="FA1"/>
            </sector>
          </sectors>
          <blocks>
            <block name="Holding point" no="0">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="Start Engine" no="1">
              <call_once fun="NavResurrect()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff" name="Takeoff" no="2">
              <exception deroute="Standby" cond="stateGetPositionEnu_f()->z > 1.0"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="3">
              <stay wp="STDBY" no="0"/>
            </block>
            <block strip_icon="lookfore.png" strip_button="Go" name="START" no="4">
              <call_once fun="NavSetWaypointHere(WP_GOAL)" no="0"/>
            </block>
            <block name="StayGoal" no="5">
              <stay wp="GOAL" no="0"/>
            </block>
            <block name="stay_p1" no="6">
              <stay wp="p1" no="0"/>
            </block>
            <block name="go_p2" no="7">
              <call_once fun="nav_set_heading_deg(90)" no="0"/>
              <go wp="p2" no="1"/>
              <deroute block="stay_p1" no="2"/>
            </block>
            <block name="line_p1_p2" no="8">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <stay wp="p2" until="stage_time>10" no="1"/>
              <go wp="p1" hmode="route" from="p2" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="route" no="9">
              <go wp="p3" hmode="route" from="p1" no="0"/>
              <go wp="p4" hmode="route" from="p3" no="1"/>
              <go wp="p1" hmode="route" from="p4" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="Oval" no="10">
              <oval radius="-1" p2="p2" p1="p1" no="1"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land Here" name="land here" no="11">
              <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
            </block>
            <block name="land" no="12">
              <go wp="TD" no="0"/>
            </block>
            <block name="flare" no="13">
              <exception deroute="Holding point" cond="NavDetectGround()"/>
              <exception deroute="landed" cond="!nav_is_in_flight()"/>
              <call_once fun="NavStartDetectGround()" no="0"/>
              <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
            </block>
            <block name="landed" no="14">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="HOME" no="15">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="15" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="14" block_name="landed" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="14" block_name="landed" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="13" block_name="flare" stage="1">
            <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
          </stage>
          <stage block="13" block_name="flare" stage="0">
            <call_once fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="12" block_name="land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="11" block_name="land here" stage="0">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="10" block_name="Oval" stage="1">
            <oval radius="-1" p2="p2" p1="p1" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="9" block_name="route" stage="2">
            <go wp="p1" hmode="route" from="p4" no="2"/>
          </stage>
          <stage block="9" block_name="route" stage="1">
            <go wp="p4" hmode="route" from="p3" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="0">
            <go wp="p3" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="2">
            <go wp="p1" hmode="route" from="p2" no="2"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="1">
            <stay wp="p2" until="stage_time>10" no="1"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="2">
            <deroute block="stay_p1" no="2"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="1">
            <go wp="p2" no="1"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="0">
            <call_once fun="nav_set_heading_deg(90)" no="0"/>
          </stage>
          <stage block="6" block_name="stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="5" block_name="StayGoal" stage="0">
            <stay wp="GOAL" no="0"/>
          </stage>
          <stage block="4" block_name="START" stage="0">
            <call_once fun="NavSetWaypointHere(WP_GOAL)" no="0"/>
          </stage>
          <stage block="3" block_name="Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="2" block_name="Takeoff" stage="1">
            <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
          </stage>
          <stage block="2" block_name="Takeoff" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="1" block_name="Start Engine" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="1" block_name="Start Engine" stage="0">
            <call_once fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="0" block_name="Holding point" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="0" block_name="Holding point" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="video">
              <dl_setting VAR="viewvideo.use_rtp" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="rtp" PARAM="VIEWVIDEO_USE_RTP" MODULE="computer_vision/viewvideo" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="video">
              <dl_setting VAR="video_capture_record_video" STEP="1" SHORTNAME="record_video" MODULE="computer_vision/video_capture" MIN="0" MAX="1">
                <strip_button VALUE="1" NAME="Start video capture" ICON="dcstart.png" GROUP="cv"/>
                <strip_button VALUE="0" NAME="Stop video capture" ICON="dcstop.png" GROUP="cv"/>
              </dl_setting>
              <dl_setting VAR="video_capture_take_shot" STEP="1" SHORTNAME="take_shot" MODULE="computer_vision/video_capture" MIN="0" MAX="1">
                <strip_button VALUE="1" NAME="Save Image" ICON="digital-camera.png" GROUP="cv"/>
              </dl_setting>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="Vision stabilization">
            <dl_settings NAME="vision_calc">
              <dl_setting VAR="opticflow.method" VALUES="LK_Fast9|EdgeFlow" STEP="1" SHORTNAME="method" PARAM="METHOD" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.corner_method" VALUES="exhaustive-FAST|ACT-FAST" STEP="1" SHORTNAME="corner_method" PARAM="CORNER_METHOD" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.window_size" STEP="1" SHORTNAME="window_size" PARAM="OPTICFLOW_WINDOW_SIZE" MODULE="computer_vision/opticflow_module" MIN="0" MAX="20"/>
              <dl_setting VAR="opticflow.search_distance" STEP="1" SHORTNAME="search_distance" PARAM="SEARCH_DISTANCE" MODULE="computer_vision/opticflow_module" MIN="0" MAX="50"/>
              <dl_setting VAR="opticflow.subpixel_factor" STEP="10" SHORTNAME="subpixel_factor" PARAM="OPTICFLOW_SUBPIXEL_FACTOR" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1000"/>
              <dl_setting VAR="opticflow.resolution_factor" STEP="10" SHORTNAME="resolution_factor" PARAM="OPTICFLOW_RESOLUTION_FACTOR" MODULE="computer_vision/opticflow_module" MIN="10" MAX="10000"/>
              <dl_setting VAR="opticflow.derotation" VALUES="OFF|ON" STEP="1" SHORTNAME="derotation" PARAM="OPTICFLOW_DEROTATION" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.median_filter" VALUES="OFF|ON" STEP="1" SHORTNAME="median_filter" PARAM="OPTICFLOW_MEDIAN_FILTER" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.feature_management" VALUES="OFF|ON" STEP="1" SHORTNAME="feature_management" PARAM="OPTICFLOW_FEATURE_MANAGEMENT" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.track_back" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="track_back" PARAM="OPTICFLOW_TRACK_BACK" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.show_flow" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="show_flow" PARAM="OPTICFLOW_SHOW_FLOW" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.max_track_corners" STEP="1" SHORTNAME="max_trck_corners" PARAM="OPTICFLOW_MAX_TRACK_CORNERS" MODULE="computer_vision/opticflow_module" MIN="0" MAX="500"/>
              <dl_setting VAR="opticflow.max_iterations" STEP="1" SHORTNAME="max_iterations" PARAM="OPTICFLOW_MAX_ITERATIONS" MODULE="computer_vision/opticflow_module" MIN="0" MAX="100"/>
              <dl_setting VAR="opticflow.threshold_vec" STEP="1" SHORTNAME="threshold_vec" PARAM="OPTICFLOW_THRESHOLD_VEC" MODULE="computer_vision/opticflow_module" MIN="0" MAX="100"/>
              <dl_setting VAR="opticflow.fast9_adaptive" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="fast9_adaptive" PARAM="OPTICFLOW_FAST9_ADAPTIVE" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.fast9_threshold" STEP="1" SHORTNAME="fast9_threshold" PARAM="OPTICFLOW_FAST9_THRESHOLD" MODULE="computer_vision/opticflow_module" MIN="0" MAX="255"/>
              <dl_setting VAR="opticflow.fast9_min_distance" STEP="1" SHORTNAME="fast9_min_distance" PARAM="OPTICFLOW_FAST9_MIN_DISTANCE" MODULE="computer_vision/opticflow_module" MIN="0" MAX="500"/>
              <dl_setting VAR="opticflow.fast9_padding" STEP="1" SHORTNAME="fast9_padding" PARAM="OPTICFLOW_FAST9_PADDING" MODULE="computer_vision/opticflow_module" MIN="0" MAX="50"/>
              <dl_setting VAR="opticflow.fast9_region_detect" VALUES="OFF|ON" STEP="1" SHORTNAME="fast9_region_detect" PARAM="OPTICFLOW_FAST9_REGION_DETECT" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.fast9_num_regions" STEP="1" SHORTNAME="fast9_num_regions" PARAM="OPTICFLOW_FAST9_NUM_REGIONS" MODULE="computer_vision/opticflow_module" MIN="1" MAX="25"/>
              <dl_setting VAR="opticflow.actfast_long_step" STEP="1" SHORTNAME="actfast_long_step" PARAM="OPTICFLOW_ACTFAST_LONG_STEP" MODULE="computer_vision/opticflow_module" MIN="1" MAX="100"/>
              <dl_setting VAR="opticflow.actfast_short_step" STEP="1" SHORTNAME="actfast_short_step" PARAM="OPTICFLOW_ACTFAST_SHORT_STEP" MODULE="computer_vision/opticflow_module" MIN="1" MAX="10"/>
              <dl_setting VAR="opticflow.actfast_min_gradient" STEP="1" SHORTNAME="actfast_min_gradient" PARAM="OPTICFLOW_ACTFAST_MIN_GRADIENT" MODULE="computer_vision/opticflow_module" MIN="1" MAX="255"/>
              <dl_setting VAR="opticflow.actfast_gradient_method" VALUES="SIMPLE|SOBEL" STEP="1" SHORTNAME="actfast_gradient_method" PARAM="OPTICFLOW_ACTFAST_GRADIENT_METHOD" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.pyramid_level" STEP="1" SHORTNAME="pyramid_level" PARAM="OPTICFLOW_PYRAMID_LEVEL" MODULE="computer_vision/opticflow_module" MIN="0" MAX="10"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="Bebop camera control">
            <dl_settings NAME="Front camera">
              <dl_setting VAR="mt9f002.set_zoom" STEP="0.05" SHORTNAME="zoom" PARAM="MT9F002_ZOOM" MIN="1." MAX="2.5"/>
              <dl_setting VAR="mt9f002.set_offset_x" STEP="0.05" SHORTNAME="offset_x" PARAM="MT9F002_OFFSET_X" MIN="-0.5" MAX="0.5"/>
              <dl_setting VAR="mt9f002.set_offset_y" STEP="0.05" SHORTNAME="offset_y" PARAM="MT9F002_OFFSET_Y" MIN="-0.5" MAX="0.5"/>
              <dl_setting VAR="mt9f002_send_resolution" VALUES="SEND" STEP="1" SHORTNAME="update_resolution" MODULE="boards/bebop/mt9f002" MIN="1" MAX="1" HANDLER="setting_update_resolution"/>
              <dl_setting VAR="mt9f002.gain_green1" STEP="0.1" SHORTNAME="green_1" PARAM="MT9F002_GAIN_GREEN1" MIN="1" MAX="60"/>
              <dl_setting VAR="mt9f002.gain_green2" STEP="0.1" SHORTNAME="green_2" PARAM="MT9F002_GAIN_GREEN2" MIN="1" MAX="60"/>
              <dl_setting VAR="mt9f002.gain_blue" STEP="0.1" SHORTNAME="blue" PARAM="MT9F002_GAIN_BLUE" MIN="1" MAX="60"/>
              <dl_setting VAR="mt9f002.gain_red" STEP="0.1" SHORTNAME="red" PARAM="MT9F002_GAIN_RED" MIN="1" MAX="60"/>
              <dl_setting VAR="mt9f002_send_color" VALUES="SEND" STEP="1" SHORTNAME="update_color" MODULE="boards/bebop/mt9f002" MIN="1" MAX="1" HANDLER="setting_update_color"/>
              <dl_setting VAR="mt9f002.target_exposure " STEP="0.1" SHORTNAME="exposure" PARAM="MT9F002_TARGET_EXPOSURE" MIN="0.1" MAX="80"/>
              <dl_setting VAR="mt9f002_send_exposure" VALUES="SEND" STEP="1" SHORTNAME="update_exposure" MODULE="boards/bebop/mt9f002" MIN="1" MAX="1" HANDLER="setting_update_exposure"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="Ins Extended">
            <dl_settings NAME="INS">
              <dl_setting VAR="vff.accel_noise" STEP="0.1" SHORTNAME="accel_noise" MODULE="subsystems/ins/vf_extended_float" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_baro" STEP="0.1" SHORTNAME="r_baro" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_alt" STEP="0.1" SHORTNAME="r_alt" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_obs_height" STEP="0.1" SHORTNAME="r_obs_height" MIN="0" MAX="10"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
              <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
              <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
              <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
              <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="indi">
              <dl_setting VAR="reference_acceleration.err_p" STEP="1" SHORTNAME="kp_p" PARAM="STABILIZATION_INDI_REF_ERR_P" MIN="0" MAX="2500"/>
              <dl_setting VAR="reference_acceleration.rate_p" STEP="0.1" SHORTNAME="kd_p" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="reference_acceleration.err_q" STEP="1" SHORTNAME="kp_q" PARAM="STABILIZATION_INDI_REF_ERR_Q" MIN="0" MAX="2500"/>
              <dl_setting VAR="reference_acceleration.rate_q" STEP="0.1" SHORTNAME="kd_q" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="reference_acceleration.err_r" STEP="1" SHORTNAME="kp_r" PARAM="STABILIZATION_INDI_REF_ERR_R" MIN="0" MAX="2500"/>
              <dl_setting VAR="reference_acceleration.rate_r" STEP="0.1" SHORTNAME="kd_r" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi_use_adaptive" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="use_adaptive" PARAM="STABILIZATION_INDI_USE_ADAPTIVE" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="NAV">
              <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
              <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
              <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MIN="-50" MAX="50"/>
              <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MIN="0" MAX="10.0"/>
              <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MIN="-10.0" MAX="0.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Vert Loop">
              <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
              <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MIN="0.2" MAX="0.8"/>
              <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MIN="0" MAX="1"/>
              <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
            <dl_settings NAME="Horiz Loop">
              <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="true" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
              <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
              <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MIN="0" MAX="1"/>
              <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
              <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
              <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
              <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
              <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
              <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="bebop_optitrack">
        <description>    Airframe file to fly a Bebop1 drone, in stable smooth flight, through waypoints using opticflow. As this airframe does not use a magnetometer nor GPS for heading determination, all positions and angles are relative to its starting position. Therefore; the drone should be facing north when started. The values are tuned so that the flight speed is limited and the drone does not over-shoot the waypoints as it would in outdoor settings.</description>
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="bebop"/>
          <define NAME="USE_SONAR"/>
          <module TYPE="transparent_udp" NAME="telemetry"/>
          <module TYPE="datalink" NAME="radio_control"/>
          <module TYPE="bebop" NAME="actuators"/>
          <module TYPE="bebop" NAME="imu"/>
          <module TYPE="indi" NAME="stabilization">
            <define VALUE="TRUE" NAME="INDI_RPM_FEEDBACK"/>
          </module>
          <module TYPE="int_cmpl_quat" NAME="ahrs">
            <configure VALUE="FALSE" NAME="USE_MAGNETOMETER"/>
          </module>
          <module TYPE="hff_extended" NAME="ins"/>
          <module NAME="pose_history"/>
          <module NAME="bebop_cam"/>
          <module NAME="cv_opticflow">
            <define VALUE="bottom_camera" NAME="OPTICFLOW_CAMERA"/>
            <define VALUE="10" NAME="MAX_HORIZON"/>
            <define VALUE="10" NAME="OPTICFLOW_MAX_TRACK_CORNERS"/>
            <define VALUE="200" NAME="OPTICFLOW_SUBPIXEL_FACTOR"/>
            <define VALUE="0" NAME="OPTICFLOW_CORNER_METHOD"/>
            <define VALUE="0.8" NAME="OPTICFLOW_DEROTATION_CORRECTION_FACTOR_X"/>
            <define VALUE="0.85" NAME="OPTICFLOW_DEROTATION_CORRECTION_FACTOR_Y"/>
            <define VALUE="10" NAME="MAX_TRACK_CORNERS"/>
          </module>
          <module NAME="video_capture">
            <define VALUE="bottom_camera" NAME="VIDEO_CAPTURE_CAMERA"/>
            <define VALUE="/data/ftp/internal_000/images" NAME="VIDEO_CAPTURE_PATH"/>
          </module>
          <module NAME="video_rtp_stream">
            <define VALUE="bottom_camera" NAME="VIEWVIDEO_CAMERA"/>
            <define VALUE="1" NAME="VIEWVIDEO_DOWNSIZE_FACTOR"/>
            <define VALUE="40" NAME="VIEWVIDEO_QUALITY_FACTOR"/>
          </module>
        </firmware>
        <commands>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="6000"/>
        </commands>
        <servos DRIVER="Default">
          <servo NO="0" NEUTRAL="1000" NAME="TOP_LEFT" MIN="1000" MAX="9800"/>
          <servo NO="1" NEUTRAL="1000" NAME="TOP_RIGHT" MIN="1000" MAX="9800"/>
          <servo NO="2" NEUTRAL="1000" NAME="BOTTOM_RIGHT" MIN="1000" MAX="9800"/>
          <servo NO="3" NEUTRAL="1000" NAME="BOTTOM_LEFT" MIN="1000" MAX="9800"/>
        </servos>
        <command_laws>
          <set VALUE="autopilot_get_motors_on() ? actuators_pprz[0] : -MAX_PPRZ" SERVO="TOP_LEFT"/>
          <set VALUE="autopilot_get_motors_on() ? actuators_pprz[1] : -MAX_PPRZ" SERVO="TOP_RIGHT"/>
          <set VALUE="autopilot_get_motors_on() ? actuators_pprz[2] : -MAX_PPRZ" SERVO="BOTTOM_RIGHT"/>
          <set VALUE="autopilot_get_motors_on() ? actuators_pprz[3] : -MAX_PPRZ" SERVO="BOTTOM_LEFT"/>
        </command_laws>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="INS_" NAME="INS">
          <define VALUE="2.2" NAME="SONAR_MAX_RANGE"/>
          <define VALUE="TRUE" NAME="SONAR_UPDATE_ON_AGL"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="RC_SETPOINT">
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="120" UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="0" NAME="DEADBAND_A"/>
          <define VALUE="0" NAME="DEADBAND_E"/>
          <define VALUE="50" NAME="DEADBAND_R"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="ATTITUDE_REFERENCE">
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.9" NAME="REF_ZETA_P"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.9" NAME="REF_ZETA_Q"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.9" NAME="REF_ZETA_R"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_RDOT"/>
        </section>
        <section PREFIX="STABILIZATION_INDI_" NAME="STABILIZATION_ATTITUDE_INDI">
          <define VALUE="{11.0, -11.0, -11.0 , 11.0 }" NAME="G1_ROLL"/>
          <define VALUE="{8.5 , 8.5, -8.5 , -8.5}" NAME="G1_PITCH"/>
          <define VALUE="{-0.50, 0.50, -0.50, 0.50}" NAME="G1_YAW"/>
          <define VALUE="{-.40, -.40, -.40, -.40}" NAME="G1_THRUST"/>
          <define VALUE="{-48.0,   48.0,  -48.0,   48.0}" NAME="G2"/>
          <define VALUE="400.0" NAME="REF_ERR_P"/>
          <define VALUE="400.0" NAME="REF_ERR_Q"/>
          <define VALUE="400.0" NAME="REF_ERR_R"/>
          <define VALUE="20.0" NAME="REF_RATE_P"/>
          <define VALUE="20.0" NAME="REF_RATE_Q"/>
          <define VALUE="20.0" NAME="REF_RATE_R"/>
          <define VALUE="4.0" NAME="ESTIMATION_FILT_CUTOFF"/>
          <define VALUE="5.0" NAME="FILT_CUTOFF"/>
          <define VALUE="{0.1, 0.1, 0.1, 0.1}" NAME="ACT_DYN"/>
          <define VALUE="FALSE" NAME="USE_ADAPTIVE"/>
          <define VALUE="0.00001" NAME="ADAPTIVE_MU"/>
          <define VALUE="{1000, 1000, 1, 100}" NAME="WLS_PRIORITIES"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="500" NAME="HOVER_KP"/>
          <define VALUE="100" NAME="HOVER_KD"/>
          <define VALUE="30" NAME="HOVER_KI"/>
          <define VALUE="0.68" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="TRUE" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="20" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="0.7" UNIT="m/s" NAME="REF_MAX_SPEED"/>
          <define VALUE="120" NAME="PGAIN"/>
          <define VALUE="100" NAME="DGAIN"/>
          <define VALUE="30" NAME="IGAIN"/>
          <define VALUE="1.0" NAME="REF_ZETA"/>
        </section>
        <section NAME="MISC">
          <define VALUE="0.4" UNIT="m" NAME="ARRIVED_AT_WAYPOINT"/>
          <define VALUE="40.0" NAME="THRESHOLD_GROUND_DETECT"/>
        </section>
        <section PREFIX="NAV_" NAME="NAVIGATION">
          <define VALUE="0.5" NAME="CLIMB_VSPEED"/>
          <define VALUE="-1.0" NAME="DESCEND_VSPEED"/>
        </section>
        <section PREFIX="NPS_" NAME="SIMULATOR">
          <define VALUE="nw_motor, ne_motor, se_motor, sw_motor" TYPE="string[]" NAME="ACTUATOR_NAMES"/>
          <define VALUE="simple_x_quad_ccw" TYPE="string" NAME="JSBSIM_MODEL"/>
          <define VALUE="nps_sensors_params_default.h" TYPE="string" NAME="SENSORS_PARAMS"/>
        </section>
        <include HREF="conf/simulator/gazebo/airframes/bebop.xml"/>
        <section NAME="AUTOPILOT">
          <define VALUE="TRUE" NAME="NO_GPS_NEEDED_FOR_NAV"/>
          <define VALUE="AP_MODE_NAV" NAME="MODE_STARTUP"/>
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_ATTITUDE_Z_HOLD" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_NAV" NAME="MODE_AUTO2"/>
        </section>
        <section NAME="BAT">
          <define VALUE="8700" NAME="MILLIAMP_AT_FULL_THROTTLE"/>
          <define VALUE="9.6" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="9.9" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="10.4" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="12.4" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
        <section PREFIX="OPTICFLOW_" NAME="OPTICFLOW">
          <define VALUE="0" NAME="CORNER_METHOD"/>
          <define VALUE="10" NAME="MAX_TRACK_CORNERS"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.05" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
            <message PERIOD="0.05" NAME="OPTICAL_FLOW_HOVER"/>
            <message PERIOD="0.10" NAME="VISUALTARGET"/>
            <message PERIOD="0.1" NAME="VISION_POSITION_ESTIMATE"/>
            <message PERIOD="0.05" NAME="DIVERGENCE"/>
            <message PERIOD="0.02" NAME="DRAGSPEED"/>
            <message PERIOD="5.1" NAME="LOGGER_STATUS"/>
            <message PERIOD="1.2" NAME="LIDAR"/>
            <message PERIOD=".25" NAME="INS_EKF2"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="BEBOP_ACTUATORS"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_FLOAT"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
            <message PERIOD="2.0" NAME="INDI_G"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="vel_guidance" KEY_PRESS="q">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HYBRID_GUIDANCE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1.0" NAME="GPS_INT"/>
            <message PERIOD="1.0" NAME="INS"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="RTCM3">
            <message PERIOD="1" NAME="GPS_RXMRTCM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD="1" NAME="GPS_RTK"/>
          </mode>
        </process>
        <process NAME="FlightRecorder">
          <mode NAME="default">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD=".1" NAME="GPS_INT"/>
            <message PERIOD=".1" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".2" NAME="IMU_MAG_SCALED"/>
            <message PERIOD="0.05" NAME="LIDAR"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="19"/>
            <dl_setting VAR="autopilot.kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot.power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot.mode" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="19" HANDLER="SetModeHandler"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="fan_demo" ac_id="28" airframe="airframes/tudelft/fan_demo.xml" radio="radios/dummy.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/tudelft/fan_demo.xml" settings="settings/rotorcraft_basic.xml settings/control/rotorcraft_speed.xml" settings_modules="modules/air_data.xml [modules/geo_mag.xml] modules/guidance_indi.xml modules/ins_extended.xml modules/ahrs_int_cmpl_quat.xml modules/stabilization_indi.xml modules/nav_basic_rotorcraft.xml modules/guidance_rotorcraft.xml modules/gps.xml modules/imu_common.xml" gui_color="#ffffcccaccca" release="f580c07814aa1068bf3f6960318b2417fc069cbe">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitMM" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1120" MIN="1120" MAX="2000" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="0.2" name="Rotorcraft Optitrack (Delft)" max_dist_from_home="20" lon0="4.376789" lat0="51.990634" ground_alt="0" alt="0.4">
          <header>#include &quot;autopilot.h&quot;</header>
          <waypoints>
            <waypoint y="0.0" x="0.0" name="HOME"/>
            <waypoint y="-0.6" x="1.2" name="CLIMB"/>
            <waypoint y="2.0" x="2.0" name="GOAL"/>
            <waypoint y="-0.8" x="-0.7" name="STDBY"/>
            <waypoint y="0.0" x="-0.9" name="TD"/>
            <waypoint name="p1" lon="4.3767862" lat="51.9906079" x="-0.14" y="-2.91"/>
            <waypoint name="p2" lon="4.3767733" lat="51.9906019" x="-1.01" y="-3.59"/>
            <waypoint name="FA1" lon="4.3768628" lat="51.9906213" x="5.09" y="-1.32"/>
            <waypoint name="FA2" lon="4.3767766" lat="51.9905874" x="-0.75" y="-5.20"/>
            <waypoint name="FA3" lon="4.3767226" lat="51.9906409" x="-4.57" y="0.68"/>
            <waypoint name="FA4" lon="4.3768074" lat="51.9906737" x="1.18" y="4.44"/>
          </waypoints>
          <sectors>
            <sector name="Flight_Area" color="red">
              <corner name="FA4"/>
              <corner name="FA3"/>
              <corner name="FA2"/>
              <corner name="FA1"/>
            </sector>
          </sectors>
          <blocks>
            <block name="Wait GPS" no="0">
              <call_once fun="NavKillThrottle()" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Holding point" no="1">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="Start Engine" no="2">
              <call_once fun="NavResurrect()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff" name="Takeoff" no="3">
              <exception deroute="stay_p1" cond="stateGetPositionEnu_f()->z > 0.3"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay wp="CLIMB" no="1"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="4">
              <stay wp="STDBY" no="0"/>
            </block>
            <block name="stay_p1" no="5">
              <call_once fun="nav_set_heading_deg(-30)" no="0"/>
              <stay wp="p1" until="stage_time>3" no="1"/>
            </block>
            <block name="line_p1_p2" no="6">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <stay wp="p2" until="stage_time>10" no="1"/>
              <go wp="p1" hmode="route" from="p2" no="2"/>
              <stay wp="p1" until="stage_time>10" no="3"/>
              <deroute block="line_p1_p2" no="4"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land Here" name="land here" no="7">
              <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
            </block>
            <block name="land" no="8">
              <go wp="TD" no="0"/>
            </block>
            <block name="flare" no="9">
              <exception deroute="Holding point" cond="NavDetectGround()"/>
              <exception deroute="landed" cond="!nav_is_in_flight()"/>
              <call_once fun="NavStartDetectGround()" no="0"/>
              <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
            </block>
            <block name="landed" no="10">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="HOME" no="11">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="11" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="10" block_name="landed" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="10" block_name="landed" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="9" block_name="flare" stage="1">
            <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
          </stage>
          <stage block="9" block_name="flare" stage="0">
            <call_once fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="8" block_name="land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="7" block_name="land here" stage="0">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="6" block_name="line_p1_p2" stage="4">
            <deroute block="line_p1_p2" no="4"/>
          </stage>
          <stage block="6" block_name="line_p1_p2" stage="3">
            <stay wp="p1" until="stage_time>10" no="3"/>
          </stage>
          <stage block="6" block_name="line_p1_p2" stage="2">
            <go wp="p1" hmode="route" from="p2" no="2"/>
          </stage>
          <stage block="6" block_name="line_p1_p2" stage="1">
            <stay wp="p2" until="stage_time>10" no="1"/>
          </stage>
          <stage block="6" block_name="line_p1_p2" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="5" block_name="stay_p1" stage="1">
            <stay wp="p1" until="stage_time>3" no="1"/>
          </stage>
          <stage block="5" block_name="stay_p1" stage="0">
            <call_once fun="nav_set_heading_deg(-30)" no="0"/>
          </stage>
          <stage block="4" block_name="Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="3" block_name="Takeoff" stage="1">
            <stay wp="CLIMB" no="1"/>
          </stage>
          <stage block="3" block_name="Takeoff" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="2" block_name="Start Engine" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="2" block_name="Start Engine" stage="0">
            <call_once fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="1" block_name="Holding point" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="1" block_name="Holding point" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="air_data">
              <dl_setting VAR="air_data.qnh" STEP="1" SHORTNAME="QNH" MODULE="air_data/air_data" MIN="800" MAX="1200"/>
              <dl_setting VAR="air_data.tas_factor" TYPE="float" STEP="0.01" SHORTNAME="TASfactor" PERSISTENT="true" PARAM="AIR_DATA_TAS_FACTOR" MODULE="air_data/air_data" MIN="0.8" MAX="1.3"/>
              <dl_setting VAR="air_data.calc_qnh_once" STEP="1" SHORTNAME="calcQNH" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_airspeed" TYPE="uint8" STEP="1" SHORTNAME="calcAirspeed" PERSISTENT="true" PARAM="AIR_DATA_CALC_AIRSPEED" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_tas_factor" TYPE="uint8" STEP="1" SHORTNAME="calcTASfactor" PERSISTENT="true" PARAM="AIR_DATA_CALC_TAS_FACTOR" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_amsl_baro" TYPE="uint8" STEP="1" SHORTNAME="calcAMSL" PERSISTENT="true" PARAM="AIR_DATA_CALC_AMSL_BARO" MODULE="air_data/air_data" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="guidance_indi">
              <dl_setting VAR="guidance_indi_pos_gain" STEP="0.1" SHORTNAME="kp_p" PERSISTENT="true" PARAM="GUIDANCE_INDI_POS_GAIN" MIN="0" MAX="10.0"/>
              <dl_setting VAR="guidance_indi_speed_gain" STEP="0.1" SHORTNAME="kp_p" PERSISTENT="true" PARAM="GUIDANCE_INDI_SPEED_GAIN" MIN="0" MAX="10.0"/>
              <dl_setting VAR="guidance_indi_max_bank" STEP="0.1" SHORTNAME="max_bank" PARAM="GUIDANCE_H_MAX_BANK" MIN="0" MAX="80.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="Ins Extended">
            <dl_settings NAME="INS">
              <dl_setting VAR="vff.accel_noise" STEP="0.1" SHORTNAME="accel_noise" MODULE="subsystems/ins/vf_extended_float" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_baro" STEP="0.1" SHORTNAME="r_baro" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_alt" STEP="0.1" SHORTNAME="r_alt" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_obs_height" STEP="0.1" SHORTNAME="r_obs_height" MIN="0" MAX="10"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
              <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
              <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
              <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
              <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="indi">
              <dl_setting VAR="reference_acceleration.err_p" STEP="1" SHORTNAME="kp_p" PARAM="STABILIZATION_INDI_REF_ERR_P" MIN="0" MAX="2500"/>
              <dl_setting VAR="reference_acceleration.rate_p" STEP="0.1" SHORTNAME="kd_p" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="reference_acceleration.err_q" STEP="1" SHORTNAME="kp_q" PARAM="STABILIZATION_INDI_REF_ERR_Q" MIN="0" MAX="2500"/>
              <dl_setting VAR="reference_acceleration.rate_q" STEP="0.1" SHORTNAME="kd_q" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="reference_acceleration.err_r" STEP="1" SHORTNAME="kp_r" PARAM="STABILIZATION_INDI_REF_ERR_R" MIN="0" MAX="2500"/>
              <dl_setting VAR="reference_acceleration.rate_r" STEP="0.1" SHORTNAME="kd_r" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi_use_adaptive" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="use_adaptive" PARAM="STABILIZATION_INDI_USE_ADAPTIVE" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="NAV">
              <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
              <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
              <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MIN="-50" MAX="50"/>
              <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MIN="0" MAX="10.0"/>
              <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MIN="-10.0" MAX="0.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Vert Loop">
              <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
              <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MIN="0.2" MAX="0.8"/>
              <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MIN="0" MAX="1"/>
              <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
            <dl_settings NAME="Horiz Loop">
              <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="true" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
              <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
              <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MIN="0" MAX="1"/>
              <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
              <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
              <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
              <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
              <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
              <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="fan_demo">
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="bebop"/>
          <module TYPE="transparent_udp" NAME="telemetry"/>
          <module TYPE="datalink" NAME="radio_control"/>
          <module TYPE="bebop" NAME="actuators"/>
          <module TYPE="bebop" NAME="imu"/>
          <module TYPE="datalink" NAME="gps"/>
          <module TYPE="indi" NAME="stabilization">
            <define VALUE="TRUE" NAME="INDI_RPM_FEEDBACK"/>
          </module>
          <module TYPE="rate_indi" NAME="stabilization"/>
          <module TYPE="int_cmpl_quat" NAME="ahrs">
            <configure VALUE="FALSE" NAME="USE_MAGNETOMETER"/>
            <define VALUE="TRUE" NAME="AHRS_USE_GPS_HEADING"/>
          </module>
          <module TYPE="extended" NAME="ins"/>
          <module TYPE="indi" NAME="guidance"/>
          <module NAME="geo_mag"/>
          <module NAME="air_data"/>
          <module NAME="send_imu_mag_current"/>
        </firmware>
        <section NAME="gyro_scaling">
          <define VALUE="MPU60X0_GYRO_RANGE_2000" NAME="BEBOP_GYRO_RANGE"/>
          <define VALUE="4.359" NAME="IMU_GYRO_P_SENS"/>
          <define VALUE="4.359" NAME="IMU_GYRO_Q_SENS"/>
          <define VALUE="4.359" NAME="IMU_GYRO_R_SENS"/>
          <define VALUE="4359" NAME="IMU_GYRO_P_SENS_NUM"/>
          <define VALUE="4359" NAME="IMU_GYRO_Q_SENS_NUM"/>
          <define VALUE="4359" NAME="IMU_GYRO_R_SENS_NUM"/>
          <define VALUE="1000" NAME="IMU_GYRO_P_SENS_DEN"/>
          <define VALUE="1000" NAME="IMU_GYRO_Q_SENS_DEN"/>
          <define VALUE="1000" NAME="IMU_GYRO_R_SENS_DEN"/>
        </section>
        <commands>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="6000"/>
        </commands>
        <servos DRIVER="Default">
          <servo NO="0" NEUTRAL="3000" NAME="TOP_LEFT" MIN="3000" MAX="9800"/>
          <servo NO="1" NEUTRAL="3000" NAME="TOP_RIGHT" MIN="3000" MAX="9800"/>
          <servo NO="2" NEUTRAL="3000" NAME="BOTTOM_RIGHT" MIN="3000" MAX="9800"/>
          <servo NO="3" NEUTRAL="3000" NAME="BOTTOM_LEFT" MIN="3000" MAX="9800"/>
        </servos>
        <command_laws>
          <set VALUE="autopilot_get_motors_on() ? actuators_pprz[0] : -MAX_PPRZ" SERVO="TOP_LEFT"/>
          <set VALUE="autopilot_get_motors_on() ? actuators_pprz[1] : -MAX_PPRZ" SERVO="TOP_RIGHT"/>
          <set VALUE="autopilot_get_motors_on() ? actuators_pprz[2] : -MAX_PPRZ" SERVO="BOTTOM_RIGHT"/>
          <set VALUE="autopilot_get_motors_on() ? actuators_pprz[3] : -MAX_PPRZ" SERVO="BOTTOM_LEFT"/>
        </command_laws>
        <section PREFIX="AIR_DATA_" NAME="AIR_DATA">
          <define VALUE="FALSE" NAME="CALC_AIRSPEED"/>
          <define VALUE="FALSE" NAME="CALC_TAS_FACTOR"/>
          <define VALUE="TRUE" NAME="CALC_AMSL_BARO"/>
        </section>
        <include HREF="conf/airframes/tudelft/calibrations/bebop7.xml"/>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.3892503" NAME="H_X"/>
          <define VALUE="0.0017972" NAME="H_Y"/>
          <define VALUE="0.9211303" NAME="H_Z"/>
          <define VALUE="0" NAME="GRAVITY_HEURISTIC_FACTOR"/>
          <define VALUE="0" NAME="HEADING_UPDATE_GPS_MIN_SPEED"/>
        </section>
        <section NAME="GUIDANCE_INDI">
          <define VALUE="-500.0" NAME="GUIDANCE_INDI_SPECIFIC_FORCE_GAIN"/>
          <define VALUE="0.1" NAME="GUIDANCE_INDI_THRUST_DYNAMICS"/>
          <define VALUE="FALSE" NAME="GUIDANCE_INDI_RC_DEBUG"/>
          <define VALUE="0.7" NAME="GUIDANCE_INDI_POS_GAIN"/>
          <define VALUE="1.5" NAME="GUIDANCE_INDI_SPEED_GAIN"/>
        </section>
        <section PREFIX="INS_" NAME="INS">
          <define VALUE="2.2" NAME="SONAR_MAX_RANGE"/>
          <define VALUE="TRUE" NAME="SONAR_UPDATE_ON_AGL"/>
          <define VALUE="1" NAME="USE_GPS_ALT"/>
          <define VALUE="0.01" NAME="VFF_R_GPS"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="RC_SETPOINT">
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="400" UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="0" NAME="DEADBAND_A"/>
          <define VALUE="0" NAME="DEADBAND_E"/>
          <define VALUE="50" NAME="DEADBAND_R"/>
        </section>
        <section PREFIX="STABILIZATION_INDI_" NAME="STABILIZATION_ATTITUDE_INDI">
          <define VALUE="{20 , -20, -20 , 20 }" NAME="G1_ROLL"/>
          <define VALUE="{14 , 14, -14 , -14 }" NAME="G1_PITCH"/>
          <define VALUE="{-1, 1, -1, 1}" NAME="G1_YAW"/>
          <define VALUE="{-.4, -.4, -.4, -.4}" NAME="G1_THRUST"/>
          <define VALUE="{-61.2093,   65.3670,  -65.7419,   65.4516}" NAME="G2"/>
          <define VALUE="600.0" NAME="REF_ERR_P"/>
          <define VALUE="600.0" NAME="REF_ERR_Q"/>
          <define VALUE="600.0" NAME="REF_ERR_R"/>
          <define VALUE="28.0" NAME="REF_RATE_P"/>
          <define VALUE="28.0" NAME="REF_RATE_Q"/>
          <define VALUE="28.0" NAME="REF_RATE_R"/>
          <define VALUE="4.0" NAME="ESTIMATION_FILT_CUTOFF"/>
          <define VALUE="5.0" NAME="FILT_CUTOFF"/>
          <define VALUE="{0.1, 0.1, 0.1, 0.1}" NAME="ACT_DYN"/>
          <define VALUE="TRUE" NAME="USE_ADAPTIVE"/>
          <define VALUE="0.0001" NAME="ADAPTIVE_MU"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="700" NAME="HOVER_KP"/>
          <define VALUE="200" NAME="HOVER_KD"/>
          <define VALUE="400" NAME="HOVER_KI"/>
          <define VALUE="0.63" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="FALSE" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="20" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="2" UNIT="m/s" NAME="REF_MAX_SPEED"/>
          <define VALUE="FALSE" NAME="USE_REF"/>
          <define VALUE="130" NAME="PGAIN"/>
          <define VALUE="200" NAME="DGAIN"/>
          <define VALUE="70" NAME="IGAIN"/>
        </section>
        <section PREFIX="NAV_" NAME="NAVIGATION">
          <define VALUE="2.5" NAME="CLIMB_VSPEED"/>
          <define VALUE="-1.0" NAME="DESCEND_VSPEED"/>
        </section>
        <section PREFIX="NPS_" NAME="SIMULATOR">
          <define VALUE="nw_motor, ne_motor, se_motor, sw_motor" TYPE="string[]" NAME="ACTUATOR_NAMES"/>
          <define VALUE="bebop" TYPE="string" NAME="JSBSIM_MODEL"/>
          <define VALUE="nps_sensors_params_default.h" TYPE="string" NAME="SENSORS_PARAMS"/>
          <define VALUE="TRUE" NAME="NO_MOTOR_MIXING"/>
        </section>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_NAV" NAME="MODE_STARTUP"/>
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_ATTITUDE_Z_HOLD" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_NAV" NAME="MODE_AUTO2"/>
          <define VALUE="TRUE" NAME="NO_RC_THRUST_LIMIT"/>
        </section>
        <section NAME="BAT">
          <define VALUE="8700" NAME="MILLIAMP_AT_FULL_THROTTLE"/>
          <define VALUE="9.9" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="11.0" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="11.1" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="12.4" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.05" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
            <message PERIOD="0.05" NAME="OPTICAL_FLOW_HOVER"/>
            <message PERIOD="0.10" NAME="VISUALTARGET"/>
            <message PERIOD="0.1" NAME="VISION_POSITION_ESTIMATE"/>
            <message PERIOD="0.05" NAME="DIVERGENCE"/>
            <message PERIOD="0.02" NAME="DRAGSPEED"/>
            <message PERIOD="5.1" NAME="LOGGER_STATUS"/>
            <message PERIOD="1.2" NAME="LIDAR"/>
            <message PERIOD=".25" NAME="INS_EKF2"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="BEBOP_ACTUATORS"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_FLOAT"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
            <message PERIOD="2.0" NAME="INDI_G"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="vel_guidance" KEY_PRESS="q">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HYBRID_GUIDANCE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1.0" NAME="GPS_INT"/>
            <message PERIOD="1.0" NAME="INS"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="RTCM3">
            <message PERIOD="1" NAME="GPS_RXMRTCM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD="1" NAME="GPS_RTK"/>
          </mode>
        </process>
        <process NAME="FlightRecorder">
          <mode NAME="default">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD=".1" NAME="GPS_INT"/>
            <message PERIOD=".1" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".2" NAME="IMU_MAG_SCALED"/>
            <message PERIOD="0.05" NAME="LIDAR"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="19"/>
            <dl_setting VAR="autopilot.kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot.power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot.mode" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="19" HANDLER="SetModeHandler"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Horiz Loop">
            <dl_setting VAR="gh_ref.max_speed" STEP="0.1" SHORTNAME="max_speed" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed">
              <strip_button VALUE="1" NAME="V1" GROUP="speed"/>
              <strip_button VALUE="2" NAME="V2" GROUP="speed"/>
              <strip_button VALUE="5" NAME="V5" GROUP="speed"/>
              <strip_button VALUE="10" NAME="V10" GROUP="speed"/>
            </dl_setting>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="frog1" ac_id="25" airframe="airframes/BR/bebop_indi_frog.xml" radio="radios/dummy.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/tudelft/rotorcraft_survey_imav2015_competition.xml" settings="settings/rotorcraft_basic.xml settings/control/rotorcraft_speed.xml" settings_modules="modules/digital_cam_video.xml modules/video_capture.xml modules/nav_survey_poly_rotorcraft.xml [modules/nav_survey_rectangle_rotorcraft.xml] modules/video_rtp_stream.xml modules/cv_blob_locator.xml modules/air_data.xml [modules/geo_mag.xml] modules/ins_extended.xml modules/ahrs_int_cmpl_quat.xml modules/ahrs_float_mlkf.xml modules/stabilization_indi_simple.xml modules/nav_basic_rotorcraft.xml modules/guidance_rotorcraft.xml modules/gps.xml modules/imu_common.xml" gui_color="#68f5eb116e0c">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitMM" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1120" MIN="1120" MAX="2000" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="2" name="IMAV2015_competition_outdoor" max_dist_from_home="500" lon0="6.04692" lat0="50.788595" ground_alt="260" alt="290">
          <modules/>
          <exceptions>
            <exception cond="(electrical.bat_low&&(exception_flag[0]==0))" deroute="Mission.ComeBackAndLand" exec="set_exception_flag(0)"/>
            <exception cond="(electrical.bat_critical&&(exception_flag[1]==0))" deroute="Mission.land_here" exec="set_exception_flag(1)"/>
            <exception cond="((((!(InsideRED(GetPosX(),GetPosY()))&&!((nav_block==IndexOfBlock('Mission.flare'))))&&!((nav_block==IndexOfBlock('Mission.landed'))))&&!((nav_block==IndexOfBlock('Mission.WaitGPS'))))&&!((nav_block==IndexOfBlock('Mission.GeoInit'))))" deroute="Mission.land_emergency"/>
          </exceptions>
          <header>#include &quot;autopilot.h&quot;
#include &quot;subsystems/electrical.h&quot;
#ifdef dc_Survey
#define LINE_START_FUNCTION dc_Survey(dc_distance_interval);
#define LINE_STOP_FUNCTION {dc_autoshoot = DC_AUTOSHOOT_STOP;}
#endif
#ifndef DropOpen
#define DropOpen() FALSE
#endif
#ifndef StartVision
#define StartVision() FALSE
#endif
#ifndef StartVisionLand
#define StartVisionLand() FALSE
#endif
#ifndef StopVision
#define StopVision() FALSE
#endif
#define WpAlt(X) (30)</header>
          <waypoints>
            <waypoint name="_PLATE1" lon="6.04674224830944" lat="50.7888090239206" x="-11.57" y="24.29"/>
            <waypoint name="_PLATE2" lon="6.04647268082583" lat="50.7890460391004" x="-29.52" y="51.40"/>
            <waypoint name="_PLATE3" lon="6.04631880264475" lat="50.7888723417903" x="-41.13" y="32.53"/>
            <waypoint y=".0" x="0.0" name="HOME"/>
            <waypoint y="15.4" x="-7.6" name="CLIMB"/>
            <waypoint y="24.0" x="-3.7" name="STDBY"/>
            <waypoint name="raceA" lon="6.047899" lat="50.790483" x="77.38" y="207.13"/>
            <waypoint name="raceB" lon="6.050200" lat="50.791800" x="245.37" y="347.07"/>
            <waypoint name="WG" lon="6.047431" lat="50.789794" x="41.34" y="131.85"/>
            <waypoint name="WD" lon="6.04677769236132" lat="50.7889307058111" height="30" x="-8.54" y="37.72"/>
            <waypoint name="DROP" lon="6.04652336854142" lat="50.788775526101" height="15" x="-27.15" y="21.19"/>
            <waypoint name="RZ1" lon="6.04652336854142" lat="50.788775526101" height="15" x="-27.15" y="21.19"/>
            <waypoint name="RZ2" lon="6.04640018582595" lat="50.7889170568219" height="15" x="-35.20" y="37.27"/>
            <waypoint name="RZ3" lon="6.04642327267965" lat="50.7889755961272" height="15" x="-33.31" y="43.71"/>
            <waypoint name="FC" lon="6.047118" lat="50.789522" height="20" x="18.07" y="102.50"/>
            <waypoint y="95.0" x="27.5" name="CAM" height="20"/>
            <waypoint name="S1" lon="6.046721" lat="50.788597" x="-14.01" y="0.78"/>
            <waypoint name="S2" lon="6.045944" lat="50.788973" x="-67.10" y="44.77"/>
            <waypoint name="S3" lon="6.046330" lat="50.789323" x="-38.34" y="82.59"/>
            <waypoint name="S4" lon="6.047113" lat="50.788917" x="15.03" y="35.25"/>
            <waypoint name="p1" lon="6.047864" lat="50.790483" x="74.91" y="207.23"/>
            <waypoint name="p2" lon="6.047897" lat="50.790463" x="77.15" y="204.91"/>
            <waypoint name="p3" lon="6.050232" lat="50.791799" x="247.62" y="346.87"/>
            <waypoint name="p4" lon="6.050201" lat="50.791818" x="245.52" y="349.07"/>
            <waypoint y="-55.4" x="19.2" name="CRUISE" height="25"/>
            <waypoint name="TD" lon="6.04695109268497" lat="50.7887171157922" height="15" x="2.73" y="13.49"/>
            <waypoint y="0" x="0" name="ETD" height="15"/>
            <waypoint name="_green1A" lon="6.046879" lat="50.790144" x="3.99" y="172.32"/>
            <waypoint name="_green1B" lon="6.047844" lat="50.789748" x="70.24" y="125.58"/>
            <waypoint name="_green1C" lon="6.047072" lat="50.789058" x="12.77" y="51.04"/>
            <waypoint name="_green1D" lon="6.047391" lat="50.788919" x="34.63" y="34.69"/>
            <waypoint name="_green1E" lon="6.046880" lat="50.788477" x="-3.34" y="-13.01"/>
            <waypoint name="_green1F" lon="6.045554" lat="50.789113" x="-93.96" y="61.43"/>
            <waypoint name="_green2A" lon="6.050405" lat="50.792252" x="261.82" y="396.74"/>
            <waypoint name="_green2B" lon="6.050962" lat="50.791915" x="299.57" y="357.71"/>
            <waypoint name="_green2C" lon="6.047761" lat="50.790077" x="65.85" y="162.39"/>
            <waypoint name="_green2D" lon="6.047251" lat="50.790426" x="31.46" y="202.62"/>
            <waypoint name="_red1" lon="6.050093" lat="50.792552" x="241.16" y="430.97"/>
            <waypoint name="_red2" lon="6.051268" lat="50.791882" x="320.98" y="353.18"/>
            <waypoint name="_red3" lon="6.047834" lat="50.789988" x="70.60" y="152.29"/>
            <waypoint name="_red4" lon="6.048204" lat="50.789781" x="95.75" y="128.23"/>
            <waypoint name="_red5" lon="6.047626" lat="50.788865" x="50.95" y="28.03"/>
            <waypoint name="_red6" lon="6.046744" lat="50.788209" x="-14.12" y="-42.42"/>
            <waypoint name="_red7" lon="6.045032" lat="50.789046" x="-131.04" y="55.46"/>
            <waypoint name="_red8" lon="6.046338" lat="50.790416" x="-32.92" y="204.08"/>
            <waypoint name="_vision1" lon="6.047338" lat="50.789622" x="34.02" y="112.99"/>
            <waypoint name="_vision2" lon="6.047115" lat="50.789352" x="17.11" y="83.61"/>
            <waypoint name="_vision3" lon="6.046932" lat="50.789443" x="4.61" y="94.24"/>
            <waypoint name="_vision4" lon="6.047205" lat="50.789662" x="24.82" y="117.82"/>
            <waypoint name="_land1" lon="6.046939" lat="50.788606" x="1.39" y="1.17"/>
            <waypoint name="_land2" lon="6.046810" lat="50.788686" x="-7.35" y="10.43"/>
            <waypoint name="_land3" lon="6.046949" lat="50.788813" x="3.01" y="24.15"/>
            <waypoint name="_land4" lon="6.047124" lat="50.788737" x="15.01" y="15.21"/>
          </waypoints>
          <sectors>
            <sector name="RED" color="red">
              <corner name="_red1"/>
              <corner name="_red2"/>
              <corner name="_red3"/>
              <corner name="_red4"/>
              <corner name="_red5"/>
              <corner name="_red6"/>
              <corner name="_red7"/>
              <corner name="_red8"/>
            </sector>
            <sector name="GREEN1" color="green">
              <corner name="_green1A"/>
              <corner name="_green1B"/>
              <corner name="_green1C"/>
              <corner name="_green1D"/>
              <corner name="_green1E"/>
              <corner name="_green1F"/>
            </sector>
            <sector name="GREEN2" color="green">
              <corner name="_green2A"/>
              <corner name="_green2B"/>
              <corner name="_green2C"/>
              <corner name="_green2D"/>
            </sector>
            <sector name="TENNIS" color="green">
              <corner name="_vision1"/>
              <corner name="_vision2"/>
              <corner name="_vision3"/>
              <corner name="_vision4"/>
            </sector>
            <sector name="LAND" color="green">
              <corner name="_land1"/>
              <corner name="_land2"/>
              <corner name="_land3"/>
              <corner name="_land4"/>
            </sector>
          </sectors>
          <blocks>
            <block name="Dummy" no="0"/>
            <block name="Mission.WaitGPS" no="1">
              <call_once fun="NavKillThrottle()" no="0"/>
              <while cond="!(GpsFixValid())" no="1"/>
            </block>
            <block name="Mission.GeoInit" no="2">
              <while cond="LessThan(NavBlockTime(),10)" no="0"/>
              <call_once fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Mission.holding_point" no="3">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="1"/>
            </block>
            <block strip_button="Start Engine" strip_icon="resurrect.png" group="engine" name="Mission.Start Engine" no="4">
              <call_once fun="NavResurrect()" no="0"/>
              <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="1"/>
            </block>
            <block strip_button="Takeoff-Standby" strip_icon="takeoff.png" group="takeoff" name="Mission.Takeoff-Standby" no="5">
              <exception cond="((stateGetPositionEnu_f())->z>10.000000)" deroute="Mission.Standby"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
            </block>
            <block strip_button="Takeoff-Map" strip_icon="survey.png" group="takeoff" name="Mission.Takeoff-Map" no="6">
              <exception cond="((stateGetPositionEnu_f())->z>10.000000)" deroute="Mission.SurveyPoly"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
            </block>
            <block strip_button="Takeoff-Drop" strip_icon="parachute.png" group="takeoff" name="Mission.Takeoff-Drop" no="7">
              <exception cond="((stateGetPositionEnu_f())->z>10.000000)" deroute="Mission.drop"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
            </block>
            <block strip_button="Takeoff-Water" group="takeoff" name="Mission.Takeoff-Water" no="8">
              <exception cond="((stateGetPositionEnu_f())->z>27.000000)" deroute="Mission.drop_water"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
            </block>
            <block strip_button="Standby" strip_icon="home.png" group="hover" name="Mission.Standby" no="9">
              <stay wp="STDBY" no="0"/>
            </block>
            <block strip_button="LookRobot-FC" strip_icon="lookdown.png" group="hover" name="Mission.GoTennis" no="10">
              <call_once fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_FC)" no="0"/>
              <go wp="CRUISE" no="1"/>
            </block>
            <block name="Mission.LookRobot" no="11">
              <stay climb="nav_descend_vspeed" vmode="climb" wp="FC" until="LessThan((stateGetPositionEnu_f())->z,20)" no="0"/>
              <call_once fun="NavCopyWaypointPositionOnly(WP_CAM,WP_FC)" no="1"/>
            </block>
            <block name="Mission.Vision" no="12">
              <exception cond="!(InsideTENNIS(GetPosX(),GetPosY()))" deroute="Mission.NoVision"/>
              <exception cond="(block_time>60)" deroute="Mission.ComeBackAndVisualLand"/>
              <call_once fun="StartVision()" no="0"/>
              <stay wp="CAM" no="1"/>
            </block>
            <block name="Mission.NoVision" no="13">
              <exception cond="(block_time>60)" deroute="Mission.ComeBackAndLand"/>
              <call_once fun="StartVision()" no="0"/>
              <stay wp="FC" no="1"/>
            </block>
            <block strip_button="ComeBackAndLand" strip_icon="land-right.png" group="hover" name="Mission.ComeBackAndLand" no="14">
              <call_once fun="StopVision()" no="0"/>
              <call_once fun="NavSetWaypointHere(WP_CRUISE)" no="1"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CRUISE" until="((stateGetPositionEnu_f())->z>30)" no="2"/>
              <call_once fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_TD)" no="3"/>
              <go wp="CRUISE" no="4"/>
              <deroute block="Mission.land" no="5"/>
            </block>
            <block name="Mission.ComeBackAndVisualLand" no="15">
              <call_once fun="StopVision()" no="0"/>
              <call_once fun="NavSetWaypointHere(WP_CRUISE)" no="1"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CRUISE" until="((stateGetPositionEnu_f())->z>30)" no="2"/>
              <call_once fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_TD)" no="3"/>
              <call_once fun="NavCopyWaypointPositionOnly(WP_CAM,WP_TD)" no="4"/>
              <go wp="CRUISE" no="5"/>
              <deroute block="Mission.visual_flare" no="6"/>
            </block>
            <block strip_button="Follow-Vision-Geolocation-Results" strip_icon="lookdown.png" group="hover" name="Mission.CAM" no="16">
              <stay wp="CAM" no="0"/>
            </block>
            <block name="Mission.stay_p1" no="17">
              <stay wp="p1" no="0"/>
            </block>
            <block name="Mission.go_p2" no="18">
              <go wp="p2" no="0"/>
              <deroute block="Mission.stay_p1" no="1"/>
            </block>
            <block name="Mission.line_p1_p2" no="19">
              <go from="p1" hmode="route" wp="p2" no="0"/>
              <stay until="(stage_time>10)" wp="p2" no="1"/>
              <go from="p2" hmode="route" wp="p1" no="2"/>
              <deroute block="Mission.stay_p1" no="3"/>
            </block>
            <block pre_call="nav_set_heading_towards_waypoint(WP_CAM)" name="Mission.circle CV" no="20">
              <circle radius="nav_radius" wp="CAM" no="0"/>
            </block>
            <block group="drop" name="Mission.drop" no="21">
              <go wp="DROP" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="DROP" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
              <call_once fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="DROP" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block group="drop" name="Mission.drop_zone1" no="22">
              <go wp="RZ1" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ1" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
              <call_once fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ1" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block group="drop" name="Mission.drop_zone2" no="23">
              <go wp="RZ2" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ2" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
              <call_once fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ2" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block group="drop" name="Mission.drop_zone3" no="24">
              <go wp="RZ3" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ3" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
              <call_once fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ3" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block group="drop" name="Mission.drop_water" no="25">
              <go wp="WD" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="WD" until="LessThan((stateGetPositionEnu_f())->z,8)" no="1"/>
              <call_once fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="WD" until="((stateGetPositionEnu_f())->z>12)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block strip_button="Oval p1-p2-p3-p4" strip_icon="oval.png" group="race" name="Mission.race" no="26">
              <go from="p1" hmode="route" wp="p2" no="0"/>
              <go from="p2" hmode="route" wp="p3" no="1"/>
              <go from="p3" hmode="route" wp="p4" no="2"/>
              <go from="p4" hmode="route" wp="p1" no="3"/>
              <deroute block="Mission.race" no="4"/>
            </block>
            <block strip_button="Line raceA-raceB" strip_icon="line.png" group="race" name="Mission.raceline" no="27">
              <go from="raceA" hmode="route" wp="raceB" no="0"/>
              <go from="raceB" hmode="route" wp="raceA" no="1"/>
              <deroute block="Mission.raceline" no="2"/>
            </block>
            <block group="survey" strip_button="Survey-Polygon-S1-S2-S3-S4" strip_icon="googleearth.png" name="Mission.SurveyPoly" no="28">
              <call_once fun="nav_survey_poly_setup_towards(WP_S1,4,sweep,WP_S2)" no="0"/>
              <deroute block="Mission.Survey Poly RUN" no="1"/>
            </block>
            <block name="Mission.Survey Poly RUN" no="29">
              <exception cond="(PolySurveySweepNum>=5)" deroute="Mission.GoTennis"/>
              <call fun="nav_survey_poly_run()" no="0"/>
            </block>
            <block strip_button="Land Here" strip_icon="downdown.png" group="landing" name="Mission.land_here" no="30">
              <call_once fun="NavCopyWaypoint(WP_CAM,WP_TD)" no="0"/>
              <call_once fun="NavSetWaypointHere(WP_TD)" no="1"/>
              <deroute block="Mission.flare" no="2"/>
            </block>
            <block strip_button="Land at TD" strip_icon="land-right.png" group="landing" name="Mission.land" no="31">
              <go wp="TD" no="0"/>
              <call_once fun="StartVisionLand()" no="1"/>
              <deroute block="Mission.flare" no="2"/>
            </block>
            <block strip_button="VisualLanding-CAM" strip_icon="cam_lock.png" group="landing" name="Mission.visual_flare" no="32">
              <exception cond="NavDetectGround()" deroute="Mission.holding_point"/>
              <exception cond="!(nav_is_in_flight())" deroute="Mission.landed"/>
              <exception cond="!(InsideLAND(GetPosX(),GetPosY()))" deroute="Mission.land"/>
              <call_once fun="NavStartDetectGround()" no="0"/>
              <stay climb="-(0.200000)" vmode="climb" wp="CAM" no="1"/>
              <deroute block="Mission.landed" no="2"/>
            </block>
            <block name="Mission.flare" no="33">
              <exception cond="NavDetectGround()" deroute="Mission.holding_point"/>
              <exception cond="!(nav_is_in_flight())" deroute="Mission.landed"/>
              <call_once fun="NavStartDetectGround()" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="TD" no="1"/>
              <deroute block="Mission.landed" no="2"/>
            </block>
            <block strip_button="Kill" strip_icon="kill.png" group="landing" name="Mission.landed" no="34">
              <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="0"/>
            </block>
            <block name="Mission.land_emergency" no="35">
              <call_once fun="NavSetWaypointHere(WP_ETD)" no="0"/>
              <deroute block="Mission.flare_emergency" no="1"/>
            </block>
            <block name="Mission.flare_emergency" no="36">
              <exception cond="NavDetectGround()" deroute="Mission.landed_emergency"/>
              <exception cond="!(nav_is_in_flight())" deroute="Mission.landed_emergency"/>
              <call_once fun="NavStartDetectGround()" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="ETD" no="1"/>
              <deroute block="Mission.landed" no="2"/>
            </block>
            <block name="Mission.landed_emergency" no="37">
              <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="0"/>
            </block>
            <block name="HOME" no="38">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="38" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="37" block_name="Mission.landed_emergency" stage="0">
            <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="0"/>
          </stage>
          <stage block="36" block_name="Mission.flare_emergency" stage="2">
            <deroute block="Mission.landed" no="2"/>
          </stage>
          <stage block="36" block_name="Mission.flare_emergency" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="ETD" no="1"/>
          </stage>
          <stage block="36" block_name="Mission.flare_emergency" stage="0">
            <call_once fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="35" block_name="Mission.land_emergency" stage="1">
            <deroute block="Mission.flare_emergency" no="1"/>
          </stage>
          <stage block="35" block_name="Mission.land_emergency" stage="0">
            <call_once fun="NavSetWaypointHere(WP_ETD)" no="0"/>
          </stage>
          <stage block="34" block_name="Mission.landed" stage="0">
            <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="0"/>
          </stage>
          <stage block="33" block_name="Mission.flare" stage="2">
            <deroute block="Mission.landed" no="2"/>
          </stage>
          <stage block="33" block_name="Mission.flare" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="TD" no="1"/>
          </stage>
          <stage block="33" block_name="Mission.flare" stage="0">
            <call_once fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="32" block_name="Mission.visual_flare" stage="2">
            <deroute block="Mission.landed" no="2"/>
          </stage>
          <stage block="32" block_name="Mission.visual_flare" stage="1">
            <stay climb="-(0.200000)" vmode="climb" wp="CAM" no="1"/>
          </stage>
          <stage block="32" block_name="Mission.visual_flare" stage="0">
            <call_once fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="31" block_name="Mission.land" stage="2">
            <deroute block="Mission.flare" no="2"/>
          </stage>
          <stage block="31" block_name="Mission.land" stage="1">
            <call_once fun="StartVisionLand()" no="1"/>
          </stage>
          <stage block="31" block_name="Mission.land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="30" block_name="Mission.land_here" stage="2">
            <deroute block="Mission.flare" no="2"/>
          </stage>
          <stage block="30" block_name="Mission.land_here" stage="1">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="1"/>
          </stage>
          <stage block="30" block_name="Mission.land_here" stage="0">
            <call_once fun="NavCopyWaypoint(WP_CAM,WP_TD)" no="0"/>
          </stage>
          <stage block="29" block_name="Mission.Survey Poly RUN" stage="0">
            <call fun="nav_survey_poly_run()" no="0"/>
          </stage>
          <stage block="28" block_name="Mission.SurveyPoly" stage="1">
            <deroute block="Mission.Survey Poly RUN" no="1"/>
          </stage>
          <stage block="28" block_name="Mission.SurveyPoly" stage="0">
            <call_once fun="nav_survey_poly_setup_towards(WP_S1,4,sweep,WP_S2)" no="0"/>
          </stage>
          <stage block="27" block_name="Mission.raceline" stage="2">
            <deroute block="Mission.raceline" no="2"/>
          </stage>
          <stage block="27" block_name="Mission.raceline" stage="1">
            <go from="raceB" hmode="route" wp="raceA" no="1"/>
          </stage>
          <stage block="27" block_name="Mission.raceline" stage="0">
            <go from="raceA" hmode="route" wp="raceB" no="0"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="4">
            <deroute block="Mission.race" no="4"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="3">
            <go from="p4" hmode="route" wp="p1" no="3"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="2">
            <go from="p3" hmode="route" wp="p4" no="2"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="1">
            <go from="p2" hmode="route" wp="p3" no="1"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="0">
            <go from="p1" hmode="route" wp="p2" no="0"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="WD" until="((stateGetPositionEnu_f())->z>12)" no="3"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="2">
            <call_once fun="DropOpen()" no="2"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="WD" until="LessThan((stateGetPositionEnu_f())->z,8)" no="1"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="0">
            <go wp="WD" no="0"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ3" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="2">
            <call_once fun="DropOpen()" no="2"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ3" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="0">
            <go wp="RZ3" no="0"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ2" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="2">
            <call_once fun="DropOpen()" no="2"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ2" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="0">
            <go wp="RZ2" no="0"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ1" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="2">
            <call_once fun="DropOpen()" no="2"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ1" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="0">
            <go wp="RZ1" no="0"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="DROP" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="2">
            <call_once fun="DropOpen()" no="2"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="DROP" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="0">
            <go wp="DROP" no="0"/>
          </stage>
          <stage block="20" block_name="Mission.circle CV" stage="0">
            <circle radius="nav_radius" wp="CAM" no="0"/>
          </stage>
          <stage block="19" block_name="Mission.line_p1_p2" stage="3">
            <deroute block="Mission.stay_p1" no="3"/>
          </stage>
          <stage block="19" block_name="Mission.line_p1_p2" stage="2">
            <go from="p2" hmode="route" wp="p1" no="2"/>
          </stage>
          <stage block="19" block_name="Mission.line_p1_p2" stage="1">
            <stay until="(stage_time>10)" wp="p2" no="1"/>
          </stage>
          <stage block="19" block_name="Mission.line_p1_p2" stage="0">
            <go from="p1" hmode="route" wp="p2" no="0"/>
          </stage>
          <stage block="18" block_name="Mission.go_p2" stage="1">
            <deroute block="Mission.stay_p1" no="1"/>
          </stage>
          <stage block="18" block_name="Mission.go_p2" stage="0">
            <go wp="p2" no="0"/>
          </stage>
          <stage block="17" block_name="Mission.stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="16" block_name="Mission.CAM" stage="0">
            <stay wp="CAM" no="0"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="6">
            <deroute block="Mission.visual_flare" no="6"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="5">
            <go wp="CRUISE" no="5"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="4">
            <call_once fun="NavCopyWaypointPositionOnly(WP_CAM,WP_TD)" no="4"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="3">
            <call_once fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_TD)" no="3"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="2">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CRUISE" until="((stateGetPositionEnu_f())->z>30)" no="2"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="1">
            <call_once fun="NavSetWaypointHere(WP_CRUISE)" no="1"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="0">
            <call_once fun="StopVision()" no="0"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="5">
            <deroute block="Mission.land" no="5"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="4">
            <go wp="CRUISE" no="4"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="3">
            <call_once fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_TD)" no="3"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="2">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CRUISE" until="((stateGetPositionEnu_f())->z>30)" no="2"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="1">
            <call_once fun="NavSetWaypointHere(WP_CRUISE)" no="1"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="0">
            <call_once fun="StopVision()" no="0"/>
          </stage>
          <stage block="13" block_name="Mission.NoVision" stage="1">
            <stay wp="FC" no="1"/>
          </stage>
          <stage block="13" block_name="Mission.NoVision" stage="0">
            <call_once fun="StartVision()" no="0"/>
          </stage>
          <stage block="12" block_name="Mission.Vision" stage="1">
            <stay wp="CAM" no="1"/>
          </stage>
          <stage block="12" block_name="Mission.Vision" stage="0">
            <call_once fun="StartVision()" no="0"/>
          </stage>
          <stage block="11" block_name="Mission.LookRobot" stage="1">
            <call_once fun="NavCopyWaypointPositionOnly(WP_CAM,WP_FC)" no="1"/>
          </stage>
          <stage block="11" block_name="Mission.LookRobot" stage="0">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="FC" until="LessThan((stateGetPositionEnu_f())->z,20)" no="0"/>
          </stage>
          <stage block="10" block_name="Mission.GoTennis" stage="1">
            <go wp="CRUISE" no="1"/>
          </stage>
          <stage block="10" block_name="Mission.GoTennis" stage="0">
            <call_once fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_FC)" no="0"/>
          </stage>
          <stage block="9" block_name="Mission.Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="8" block_name="Mission.Takeoff-Water" stage="1">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
          </stage>
          <stage block="8" block_name="Mission.Takeoff-Water" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="7" block_name="Mission.Takeoff-Drop" stage="1">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
          </stage>
          <stage block="7" block_name="Mission.Takeoff-Drop" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="6" block_name="Mission.Takeoff-Map" stage="1">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
          </stage>
          <stage block="6" block_name="Mission.Takeoff-Map" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="5" block_name="Mission.Takeoff-Standby" stage="1">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
          </stage>
          <stage block="5" block_name="Mission.Takeoff-Standby" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="4" block_name="Mission.Start Engine" stage="1">
            <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="1"/>
          </stage>
          <stage block="4" block_name="Mission.Start Engine" stage="0">
            <call_once fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="3" block_name="Mission.holding_point" stage="1">
            <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="1"/>
          </stage>
          <stage block="3" block_name="Mission.holding_point" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="2" block_name="Mission.GeoInit" stage="2">
            <call_once fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="2" block_name="Mission.GeoInit" stage="0">
            <while cond="LessThan(NavBlockTime(),10)" no="0"/>
          </stage>
          <stage block="1" block_name="Mission.WaitGPS" stage="1">
            <while cond="!(GpsFixValid())" no="1"/>
          </stage>
          <stage block="1" block_name="Mission.WaitGPS" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings NAME="control">
            <dl_settings NAME="dc">
              <dl_setting VAR="0" STEP="1" SHORTNAME="Shutter" MODULE="digital_cam/dc" MIN="0" MAX="255" HANDLER="send_command">
                <strip_button VALUE="32" NAME="Photo" ICON="digital-camera.png" GROUP="dc"/>
              </dl_setting>
              <dl_setting VAR="dc_autoshoot" VALUES="STOP|PERIODIC|DISTANCE|EXT_TRIG" STEP="1" MIN="0" MAX="3">
                <strip_button VALUE="1" NAME="Start Autoshoot" ICON="dcstart.png" GROUP="dc"/>
                <strip_button VALUE="0" NAME="Stop Autoshoot" ICON="dcstop.png" GROUP="dc"/>
              </dl_setting>
              <dl_setting VAR="dc_autoshoot_period" UNIT="sec" STEP="0.5" SHORTNAME="Periodic" PARAM="DC_AUTOSHOOT_PERIOD" MIN="0.1" MAX="60"/>
              <dl_setting VAR="dc_distance_interval" UNIT="meter" STEP="1" SHORTNAME="dist" PARAM="DC_AUTOSHOOT_DISTANCE_INTERVAL" MIN="0" MAX="255"/>
              <dl_setting VAR="dc_survey_interval" STEP="5" SHORTNAME="Survey-Interval" MODULE="digital_cam/dc" MIN="0" MAX="250" HANDLER="Survey"/>
              <dl_setting VAR="dc_circle_interval" STEP="5" SHORTNAME="Circle-Interval" MODULE="digital_cam/dc" MIN="5" MAX="90" HANDLER="Circle"/>
              <dl_setting VAR="dc_cam_tracing" STEP="1" SHORTNAME="Cam-Tracing" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="video">
              <dl_setting VAR="video_capture_record_video" STEP="1" SHORTNAME="record_video" MODULE="computer_vision/video_capture" MIN="0" MAX="1">
                <strip_button VALUE="1" NAME="Start video capture" ICON="dcstart.png" GROUP="cv"/>
                <strip_button VALUE="0" NAME="Stop video capture" ICON="dcstop.png" GROUP="cv"/>
              </dl_setting>
              <dl_setting VAR="video_capture_take_shot" STEP="1" SHORTNAME="take_shot" MODULE="computer_vision/video_capture" MIN="0" MAX="1">
                <strip_button VALUE="1" NAME="Save Image" ICON="digital-camera.png" GROUP="cv"/>
              </dl_setting>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="P_Survey">
              <dl_setting VAR="Poly_Size" TYPE="uint8_t" STEP="1" SHORTNAME="Size" MODULE="modules/nav/nav_survey_poly_rotorcraft" MIN="0" MAX="20"/>
              <dl_setting VAR="Poly_Distance" TYPE="float" STEP="1" SHORTNAME="Sweep" MODULE="modules/nav/nav_survey_poly_rotorcraft" MIN="0" MAX="500"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="video">
              <dl_setting VAR="viewvideo.use_rtp" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="rtp" PARAM="VIEWVIDEO_USE_RTP" MODULE="computer_vision/viewvideo" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="ColorFilter">
              <dl_setting VAR="color_lum_min" STEP="1" SHORTNAME="y_min" MIN="0" MAX="255"/>
              <dl_setting VAR="color_lum_max" STEP="1" SHORTNAME="y_max" MIN="0" MAX="255"/>
              <dl_setting VAR="color_cb_min" STEP="1" SHORTNAME="u_min" MIN="0" MAX="255"/>
              <dl_setting VAR="color_cb_max" STEP="1" SHORTNAME="u_max" MIN="0" MAX="255"/>
              <dl_setting VAR="color_cr_min" STEP="1" SHORTNAME="v_min" MIN="0" MAX="255"/>
              <dl_setting VAR="color_cr_max" STEP="1" SHORTNAME="v_max" MIN="0" MAX="255"/>
              <dl_setting VAR="marker_size" STEP="1" SHORTNAME="marker" MIN="1" MAX="20"/>
              <dl_setting VAR="geofilter_length" STEP="1" SHORTNAME="filter" MIN="1" MAX="100"/>
              <dl_setting VAR="record_video" VALUES="OFF|ON" STEP="1" SHORTNAME="record" MIN="0" MAX="1"/>
              <dl_setting VAR="cv_blob_locator_reset" STEP="1" MODULE="computer_vision/cv_blob_locator" MIN="0" MAX="1" HANDLER="GeoReset">
                <strip_button VALUE="1" NAME="Reset Geoprojection Filter" ICON="resurrect.png" GROUP="cv"/>
              </dl_setting>
              <dl_setting VAR="cv_blob_locator_type" VALUES="NONE|BLOB|IMAVMARKER|WINDOW" STEP="1" MODULE="computer_vision/cv_blob_locator" MIN="0" MAX="2">
                <strip_button VALUE="0" NAME="CV: None" ICON="off.png" GROUP="cv"/>
                <strip_button VALUE="1" NAME="CV: Colored Blob" ICON="cv_blob.png" GROUP="cv"/>
                <strip_button VALUE="2" NAME="CV: Marker" ICON="cv_marker.png" GROUP="cv"/>
                <strip_button VALUE="3" NAME="CV: Window Finder" ICON="cv_window.png" GROUP="cv"/>
              </dl_setting>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="air_data">
              <dl_setting VAR="air_data.qnh" STEP="1" SHORTNAME="QNH" MODULE="air_data/air_data" MIN="800" MAX="1200"/>
              <dl_setting VAR="air_data.tas_factor" TYPE="float" STEP="0.01" SHORTNAME="TASfactor" PERSISTENT="true" PARAM="AIR_DATA_TAS_FACTOR" MODULE="air_data/air_data" MIN="0.8" MAX="1.3"/>
              <dl_setting VAR="air_data.calc_qnh_once" STEP="1" SHORTNAME="calcQNH" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_airspeed" TYPE="uint8" STEP="1" SHORTNAME="calcAirspeed" PERSISTENT="true" PARAM="AIR_DATA_CALC_AIRSPEED" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_tas_factor" TYPE="uint8" STEP="1" SHORTNAME="calcTASfactor" PERSISTENT="true" PARAM="AIR_DATA_CALC_TAS_FACTOR" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_amsl_baro" TYPE="uint8" STEP="1" SHORTNAME="calcAMSL" PERSISTENT="true" PARAM="AIR_DATA_CALC_AMSL_BARO" MODULE="air_data/air_data" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="Ins Extended">
            <dl_settings NAME="INS">
              <dl_setting VAR="vff.accel_noise" STEP="0.1" SHORTNAME="accel_noise" MODULE="subsystems/ins/vf_extended_float" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_baro" STEP="0.1" SHORTNAME="r_baro" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_alt" STEP="0.1" SHORTNAME="r_alt" MIN="0" MAX="10"/>
              <dl_setting VAR="vff.r_obs_height" STEP="0.1" SHORTNAME="r_obs_height" MIN="0" MAX="10"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
              <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
              <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
              <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
              <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_mlkf.mag_noise.x" TYPE="float" STEP="0.02" SHORTNAME="mag_noise_x" PERSISTENT="true" PARAM="AHRS_MAG_NOISE_X" MODULE="subsystems/ahrs/ahrs_float_mlkf" MIN="0.0" MAX="1.0"/>
              <dl_setting VAR="ahrs_mlkf.mag_noise.y" TYPE="float" STEP="0.02" SHORTNAME="mag_noise_y" PERSISTENT="true" PARAM="AHRS_MAG_NOISE_Y" MODULE="subsystems/ahrs/ahrs_float_mlkf" MIN="0.0" MAX="1.0"/>
              <dl_setting VAR="ahrs_mlkf.mag_noise.z" TYPE="float" STEP="0.02" SHORTNAME="mag_noise_z" PERSISTENT="true" PARAM="AHRS_MAG_NOISE_Z" MODULE="subsystems/ahrs/ahrs_float_mlkf" MIN="0.0" MAX="1.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="indi">
              <dl_setting VAR="indi.reference_acceleration.err_p" STEP="1" SHORTNAME="kp_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_P" MODULE="stabilization/stabilization_indi_simple" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_p" STEP="0.1" SHORTNAME="kd_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.p" STEP="0.001" SHORTNAME="ctl_eff_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_P" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.reference_acceleration.err_q" STEP="1" SHORTNAME="kp_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_Q" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_q" STEP="0.1" SHORTNAME="kd_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.q" STEP="0.001" SHORTNAME="ctl_eff_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_Q" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.reference_acceleration.err_r" STEP="1" SHORTNAME="kp_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_R" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_r" STEP="0.1" SHORTNAME="kd_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.r" STEP="0.001" SHORTNAME="ctl_eff_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_R" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.g2" STEP="0.01" SHORTNAME="g2" PERSISTENT="true" PARAM="STABILIZATION_INDI_G2_R" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.adaptive" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="use_adaptive" PERSISTENT="true" PARAM="STABILIZATION_INDI_USE_ADAPTIVE" MIN="0" MAX="1"/>
              <dl_setting VAR="indi.max_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_rate" PARAM="STABILIZATION_INDI_MAX_RATE" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
              <dl_setting VAR="indi.attitude_max_yaw_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_yaw_rate_attitude" PARAM="STABILIZATION_INDI_MAX_R" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="NAV">
              <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
              <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
              <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MIN="-50" MAX="50"/>
              <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MIN="0" MAX="10.0"/>
              <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MIN="-10.0" MAX="0.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Vert Loop">
              <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
              <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MIN="0.2" MAX="0.8"/>
              <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MIN="0" MAX="1"/>
              <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
            <dl_settings NAME="Horiz Loop">
              <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="true" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
              <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
              <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MIN="0" MAX="1"/>
              <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
              <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
              <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
              <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
              <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
              <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="bebop_indi">
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="bebop">
            <define VALUE="0.1450" NAME="STABILIZATION_INDI_G2_R"/>
          </target>
          <target NAME="nps" BOARD="pc">
            <module TYPE="jsbsim" NAME="fdm"/>
            <module NAME="udp"/>
            <define VALUE="0.0" NAME="STABILIZATION_INDI_G2_R"/>
          </target>
          <module TYPE="transparent_udp" NAME="telemetry"/>
          <module TYPE="datalink" NAME="radio_control"/>
          <module NAME="motor_mixing"/>
          <module TYPE="bebop" NAME="actuators"/>
          <module TYPE="bebop" NAME="imu"/>
          <module TYPE="furuno" NAME="gps"/>
          <module TYPE="indi_simple" NAME="stabilization"/>
          <module TYPE="float_mlkf" NAME="ahrs"/>
          <module TYPE="int_cmpl_quat" NAME="ahrs">
            <configure VALUE="TRUE" NAME="USE_MAGNETOMETER"/>
            <define VALUE="FALSE" NAME="AHRS_USE_GPS_HEADING"/>
            <configure VALUE="int_cmpl_quat" NAME="SECONDARY_AHRS"/>
          </module>
          <module TYPE="extended" NAME="ins"/>
        </firmware>
        <modules MAIN_FREQ="512">
          <module NAME="geo_mag"/>
          <module NAME="air_data"/>
          <module NAME="send_imu_mag_current"/>
          <module NAME="bebop_cam"/>
          <module NAME="cv_blob_locator">
            <define VALUE="bottom_camera" NAME="BLOB_LOCATOR_CAMERA"/>
          </module>
          <module NAME="video_rtp_stream">
            <define VALUE="bottom_camera" NAME="VIEWVIDEO_CAMERA"/>
            <define VALUE="60" NAME="VIEWVIDEO_QUALITY_FACTOR"/>
            <define VALUE="2" NAME="VIEWVIDEO_DOWNSIZE_FACTOR"/>
          </module>
          <module TYPE="survey_rectangle_rotorcraft" NAME="nav">
            <define VALUE="10" NAME="RECTANGLE_SURVEY_DEFAULT_SWEEP"/>
          </module>
          <module TYPE="survey_poly_rotorcraft" NAME="nav">
            <define VALUE="10" NAME="POLYSURVEY_DEFAULT_DISTANCE"/>
          </module>
          <module NAME="video_capture">
            <define VALUE="bottom_camera" NAME="VIDEO_CAPTURE_CAMERA"/>
          </module>
          <module NAME="digital_cam_video">
            <define VALUE="5" NAME="DC_AUTOSHOOT_DISTANCE_INTERVAL"/>
          </module>
          <module NAME="video_exif"/>
        </modules>
        <commands>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="6000"/>
        </commands>
        <servos DRIVER="Default">
          <servo NO="0" NEUTRAL="3000" NAME="TOP_RIGHT" MIN="3000" MAX="12000"/>
          <servo NO="1" NEUTRAL="3000" NAME="TOP_LEFT" MIN="3000" MAX="12000"/>
          <servo NO="2" NEUTRAL="3000" NAME="BOTTOM_LEFT" MIN="3000" MAX="12000"/>
          <servo NO="3" NEUTRAL="3000" NAME="BOTTOM_RIGHT" MIN="3000" MAX="12000"/>
        </servos>
        <section PREFIX="MOTOR_MIXING_" NAME="MIXING">
          <define VALUE="0" NAME="TRIM_ROLL"/>
          <define VALUE="0" NAME="TRIM_PITCH"/>
          <define VALUE="0" NAME="TRIM_YAW"/>
          <define VALUE="QUAD_X" NAME="TYPE"/>
        </section>
        <command_laws>
          <call FUN="motor_mixing_run(autopilot_get_motors_on(),FALSE,values)"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_LEFT]" SERVO="TOP_LEFT"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_RIGHT]" SERVO="TOP_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_RIGHT]" SERVO="BOTTOM_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_LEFT]" SERVO="BOTTOM_LEFT"/>
        </command_laws>
        <section PREFIX="AIR_DATA_" NAME="AIR_DATA">
          <define VALUE="FALSE" NAME="CALC_AIRSPEED"/>
          <define VALUE="FALSE" NAME="CALC_TAS_FACTOR"/>
          <define VALUE="TRUE" NAME="CALC_AMSL_BARO"/>
        </section>
        <include HREF="conf/airframes/tudelft/calibrations/bebop8.xml"/>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.3892503" NAME="H_X"/>
          <define VALUE="0.0017972" NAME="H_Y"/>
          <define VALUE="0.9211303" NAME="H_Z"/>
        </section>
        <section PREFIX="INS_" NAME="INS">
          <define VALUE="2.2" NAME="SONAR_MAX_RANGE"/>
          <define VALUE="TRUE" NAME="SONAR_UPDATE_ON_AGL"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="RC_SETPOINT">
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="300" UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="0" NAME="DEADBAND_A"/>
          <define VALUE="0" NAME="DEADBAND_E"/>
          <define VALUE="50" NAME="DEADBAND_R"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="ATTITUDE_REFERENCE">
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.9" NAME="REF_ZETA_P"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.9" NAME="REF_ZETA_Q"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.9" NAME="REF_ZETA_R"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_RDOT"/>
        </section>
        <section PREFIX="STABILIZATION_INDI_" NAME="STABILIZATION_ATTITUDE_INDI">
          <define VALUE="0.0639" NAME="G1_P"/>
          <define VALUE="0.0361" NAME="G1_Q"/>
          <define VALUE="0.0022" NAME="G1_R"/>
          <define VALUE="600.0" NAME="REF_ERR_P"/>
          <define VALUE="600.0" NAME="REF_ERR_Q"/>
          <define VALUE="600.0" NAME="REF_ERR_R"/>
          <define VALUE="28.0" NAME="REF_RATE_P"/>
          <define VALUE="28.0" NAME="REF_RATE_Q"/>
          <define VALUE="28.0" NAME="REF_RATE_R"/>
          <define VALUE="8.0" NAME="FILT_CUTOFF"/>
          <define VALUE="8.0" NAME="FILT_CUTOFF_R"/>
          <define VALUE="0.1" NAME="ACT_DYN_P"/>
          <define VALUE="0.1" NAME="ACT_DYN_Q"/>
          <define VALUE="0.1" NAME="ACT_DYN_R"/>
          <define VALUE="FALSE" NAME="USE_ADAPTIVE"/>
          <define VALUE="0.0001" NAME="ADAPTIVE_MU"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="283" NAME="HOVER_KP"/>
          <define VALUE="82" NAME="HOVER_KD"/>
          <define VALUE="20" NAME="HOVER_KI"/>
          <define VALUE="0.655" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="TRUE" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="20" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="2" UNIT="m/s" NAME="REF_MAX_SPEED"/>
          <define VALUE="15" NAME="PGAIN"/>
          <define VALUE="100" NAME="DGAIN"/>
          <define VALUE="30" NAME="IGAIN"/>
        </section>
        <section PREFIX="NAV_" NAME="NAVIGATION">
          <define VALUE="2.5" NAME="CLIMB_VSPEED"/>
          <define VALUE="-1.0" NAME="DESCEND_VSPEED"/>
        </section>
        <section PREFIX="NPS_" NAME="SIMULATOR">
          <define VALUE="nw_motor, ne_motor, se_motor, sw_motor" TYPE="string[]" NAME="ACTUATOR_NAMES"/>
          <define VALUE="simple_x_quad_ccw" TYPE="string" NAME="JSBSIM_MODEL"/>
          <define VALUE="nps_sensors_params_default.h" TYPE="string" NAME="SENSORS_PARAMS"/>
        </section>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_NAV" NAME="MODE_STARTUP"/>
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_ATTITUDE_Z_HOLD" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_NAV" NAME="MODE_AUTO2"/>
        </section>
        <section NAME="BAT">
          <define VALUE="8700" NAME="MILLIAMP_AT_FULL_THROTTLE"/>
          <define VALUE="9.9" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="11.0" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="11.1" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="12.4" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.05" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
            <message PERIOD="0.05" NAME="OPTICAL_FLOW_HOVER"/>
            <message PERIOD="0.10" NAME="VISUALTARGET"/>
            <message PERIOD="0.1" NAME="VISION_POSITION_ESTIMATE"/>
            <message PERIOD="0.05" NAME="DIVERGENCE"/>
            <message PERIOD="0.02" NAME="DRAGSPEED"/>
            <message PERIOD="5.1" NAME="LOGGER_STATUS"/>
            <message PERIOD="1.2" NAME="LIDAR"/>
            <message PERIOD=".25" NAME="INS_EKF2"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="BEBOP_ACTUATORS"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_FLOAT"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
            <message PERIOD="2.0" NAME="INDI_G"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="vel_guidance" KEY_PRESS="q">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HYBRID_GUIDANCE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1.0" NAME="GPS_INT"/>
            <message PERIOD="1.0" NAME="INS"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="RTCM3">
            <message PERIOD="1" NAME="GPS_RXMRTCM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD="1" NAME="GPS_RTK"/>
          </mode>
        </process>
        <process NAME="FlightRecorder">
          <mode NAME="default">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD=".1" NAME="GPS_INT"/>
            <message PERIOD=".1" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".2" NAME="IMU_MAG_SCALED"/>
            <message PERIOD="0.05" NAME="LIDAR"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="19"/>
            <dl_setting VAR="autopilot.kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot.power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot.mode" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="19" HANDLER="SetModeHandler"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Horiz Loop">
            <dl_setting VAR="gh_ref.max_speed" STEP="0.1" SHORTNAME="max_speed" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed">
              <strip_button VALUE="1" NAME="V1" GROUP="speed"/>
              <strip_button VALUE="2" NAME="V2" GROUP="speed"/>
              <strip_button VALUE="5" NAME="V5" GROUP="speed"/>
              <strip_button VALUE="10" NAME="V10" GROUP="speed"/>
            </dl_setting>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="mavshot" ac_id="5" airframe="airframes/tudelft/mavshot.xml" radio="radios/cockpitSX.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/dummy.xml" settings="settings/rotorcraft_basic.xml settings/modules/config_asctec_v2_new.xml" settings_modules="modules/ahrs_int_cmpl_quat.xml modules/stabilization_indi_simple.xml modules/nav_basic_rotorcraft.xml modules/guidance_rotorcraft.xml modules/gps.xml modules/imu_common.xml modules/gps_ubx_ucenter.xml" gui_color="#ffff9027e8ad">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitSX (easy)" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1500" MIN="2050" MAX="950" FUNCTION="ROLL" CTL="D" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="2050" MAX="950" FUNCTION="PITCH" CTL="C" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="950" MAX="2050" FUNCTION="YAW" CTL="B" AVERAGE="0"/>
        <channel NEUTRAL="1223" MIN="1223" MAX="2050" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="2050" MAX="950" FUNCTION="UNUSED" CTL="G" AVERAGE="1"/>
        <channel NEUTRAL="1496" MIN="2050" MAX="948" FUNCTION="GAIN1" CTL="E" AVERAGE="1"/>
        <channel NEUTRAL="1500" MIN="2050" MAX="948" FUNCTION="MODE" CTL="PHAUX2" AVERAGE="1"/>
      </radio>
      <dump>
        <flight_plan name="Dummy" lon0="1.27289" max_dist_from_home="1000" ground_alt="185" security_height="25" qfu="270" alt="250" lat0="43.46223">
          <waypoints>
            <waypoint name="HOME" x="0.0" y="120.0" alt="250."/>
          </waypoints>
          <blocks>
            <block name="HOME" no="0">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="0" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
              <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
              <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
              <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
              <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="indi">
              <dl_setting VAR="indi.reference_acceleration.err_p" STEP="1" SHORTNAME="kp_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_P" MODULE="stabilization/stabilization_indi_simple" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_p" STEP="0.1" SHORTNAME="kd_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.p" STEP="0.001" SHORTNAME="ctl_eff_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_P" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.reference_acceleration.err_q" STEP="1" SHORTNAME="kp_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_Q" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_q" STEP="0.1" SHORTNAME="kd_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.q" STEP="0.001" SHORTNAME="ctl_eff_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_Q" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.reference_acceleration.err_r" STEP="1" SHORTNAME="kp_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_R" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_r" STEP="0.1" SHORTNAME="kd_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.r" STEP="0.001" SHORTNAME="ctl_eff_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_R" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.g2" STEP="0.01" SHORTNAME="g2" PERSISTENT="true" PARAM="STABILIZATION_INDI_G2_R" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.adaptive" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="use_adaptive" PERSISTENT="true" PARAM="STABILIZATION_INDI_USE_ADAPTIVE" MIN="0" MAX="1"/>
              <dl_setting VAR="indi.max_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_rate" PARAM="STABILIZATION_INDI_MAX_RATE" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
              <dl_setting VAR="indi.attitude_max_yaw_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_yaw_rate_attitude" PARAM="STABILIZATION_INDI_MAX_R" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="NAV">
              <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
              <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
              <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MIN="-50" MAX="50"/>
              <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MIN="0" MAX="10.0"/>
              <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MIN="-10.0" MAX="0.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Vert Loop">
              <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
              <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MIN="0.2" MAX="0.8"/>
              <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MIN="0" MAX="1"/>
              <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
            <dl_settings NAME="Horiz Loop">
              <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="true" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
              <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
              <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MIN="0" MAX="1"/>
              <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
              <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
              <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
              <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
              <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
              <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="ublox">
            <dl_settings NAME="ucenter">
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_h" STEP="1" SHORTNAME="sw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_l" STEP="1" SHORTNAME="sw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_h" STEP="1" SHORTNAME="hw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_l" STEP="1" SHORTNAME="hw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_init" STEP="100" SHORTNAME="inibaud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_run" STEP="100" SHORTNAME="baud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe name="quadshot aspirin 2.1 spektrum">
        <description>Quadshot vehicle equiped with Asctec motor controllers.</description>
        <servos driver="Pwm">
          <servo name="ELEVON_LEFT" no="4" min="1000" neutral="1500" max="2000"/>
          <servo name="ELEVON_RIGHT" no="5" min="1000" neutral="1500" max="2000"/>
        </servos>
        <servos driver="Asctec_v2_new">
          <servo name="FRONT" no="0" min="0" neutral="3" max="200"/>
          <servo name="BACK" no="1" min="0" neutral="3" max="200"/>
          <servo name="LEFT" no="2" min="0" neutral="3" max="200"/>
          <servo name="RIGHT" no="3" min="0" neutral="3" max="200"/>
        </servos>
        <commands>
          <axis name="PITCH" failsafe_value="0"/>
          <axis name="ROLL" failsafe_value="0"/>
          <axis name="YAW" failsafe_value="0"/>
          <axis name="THRUST" failsafe_value="0"/>
        </commands>
        <command_laws>
          <call fun="motor_mixing_run(autopilot_get_motors_on(),FALSE,values)"/>
          <set servo="FRONT" value="motor_mixing.commands[0]"/>
          <set servo="BACK" value="motor_mixing.commands[1]"/>
          <set servo="LEFT" value="motor_mixing.commands[2]"/>
          <set servo="RIGHT" value="motor_mixing.commands[3]"/>
          <let var="aileron_feedback_left" value="-@YAW"/>
          <let var="aileron_feedback_right" value="-@YAW"/>
          <let var="elevator_feedback_left" value="+@PITCH"/>
          <let var="elevator_feedback_right" value="-@PITCH"/>
          <let var="hover_left" value="3*$aileron_feedback_left"/>
          <let var="hover_right" value="3*$aileron_feedback_right"/>
          <let var="forward_left" value="1*$aileron_feedback_left+4*$elevator_feedback_left"/>
          <let var="forward_right" value="1*$aileron_feedback_right+4*$elevator_feedback_right"/>
          <set servo="ELEVON_LEFT" value="AP_MODE == AP_MODE_ATTITUDE_DIRECT ? $hover_left  : $forward_left"/>
          <set servo="ELEVON_RIGHT" value="AP_MODE == AP_MODE_ATTITUDE_DIRECT ? $hover_right  : $forward_right"/>
        </command_laws>
        <section name="MIXING" prefix="MOTOR_MIXING_">
          <define name="TRIM_ROLL" value="0"/>
          <define name="TRIM_PITCH" value="0"/>
          <define name="TRIM_YAW" value="0"/>
          <define name="NB_MOTOR" value="4"/>
          <define name="SCALE" value="256"/>
          <define name="PITCH_COEF" value="{ -256, -256,  256,  256 }"/>
          <define name="ROLL_COEF" value="{  256, -256,  256, -256 }"/>
          <define name="YAW_COEF" value="{  256, -256, -128,  128 }"/>
          <define name="THRUST_COEF" value="{  256,  256,  256,  256 }"/>
        </section>
        <section name="IMU" prefix="IMU_">
          <define name="ACCEL_X_NEUTRAL" value="0"/>
          <define name="ACCEL_Y_NEUTRAL" value="0"/>
          <define name="ACCEL_Z_NEUTRAL" value="0"/>
          <define name="ACCEL_X_SENS" value="4.86487566223" integer="16"/>
          <define name="ACCEL_Y_SENS" value="4.89957269597" integer="16"/>
          <define name="ACCEL_Z_SENS" value="4.82616398266" integer="16"/>
          <define name="MAG_X_NEUTRAL" value="0"/>
          <define name="MAG_Y_NEUTRAL" value="0"/>
          <define name="MAG_Z_NEUTRAL" value="0"/>
          <define name="MAG_X_SENS" value="4.19385009207" integer="16"/>
          <define name="MAG_Y_SENS" value="4.32306399648" integer="16"/>
          <define name="MAG_Z_SENS" value="4.63243801309" integer="16"/>
        </section>
        <section name="IMU" prefix="IMU_">
          <define name="BODY_TO_IMU_PHI" value="0." unit="deg"/>
          <define name="BODY_TO_IMU_THETA" value="90." unit="deg"/>
          <define name="BODY_TO_IMU_PSI" value="0." unit="deg"/>
        </section>
        <section name="AUTOPILOT">
          <define name="MODE_MANUAL" value="AP_MODE_ATTITUDE_DIRECT"/>
          <define name="MODE_AUTO1" value="AP_MODE_FORWARD"/>
          <define name="MODE_AUTO2" value="AP_MODE_RATE_DIRECT"/>
        </section>
        <section name="BAT">
          <define name="MIN_BAT_LEVEL" value="10.9" units="V"/>
          <define name="CATASTROPHIC_BAT_LEVEL" value="10.3" unit="V"/>
        </section>
        <section name="GAIN_SETS">
          <define name="NUMBER_OF_GAINSETS" value="2"/>
          <define name="SCHEDULING_VARIABLE" value="(radio.values[COMMAND_THRUST]+ transition_status"/>
          <define name="SCHEDULING_POINTS" value="{1000, 6000}"/>
          <define name="SCHEDULING_VARIABLE_FRAC" value="0"/>
          <define name="PHI_P" value="{230, 230}"/>
          <define name="PHI_D" value="{170, 170}"/>
          <define name="PHI_I" value="{30, 30}"/>
          <define name="PHI_DD" value="{0, 0}"/>
          <define name="THETA_P" value="{200, 300}"/>
          <define name="THETA_D" value="{100, 50}"/>
          <define name="THETA_I" value="{40, 40}"/>
          <define name="THETA_DD" value="{0, 0}"/>
          <define name="PSI_P" value="{300, 300}"/>
          <define name="PSI_D" value="{150, 150}"/>
          <define name="PSI_I" value="{0, 0}"/>
          <define name="PSI_DD" value="{0, 0}"/>
        </section>
        <section name="STABILIZATION_ATTITUDE" prefix="STABILIZATION_ATTITUDE_">
          <define name="SP_MAX_PHI" value="60." unit="deg"/>
          <define name="SP_MAX_THETA" value="60." unit="deg"/>
          <define name="SP_MAX_R" value="90." unit="deg/s"/>
          <define name="DEADBAND_R" value="250"/>
          <define name="DEADBAND_A" value="250"/>
          <define name="SP_PSI_DELTA_LIMIT" value="90" unit="deg"/>
          <define name="REF_OMEGA_P" value="1500" unit="deg/s"/>
          <define name="REF_ZETA_P" value="0.85"/>
          <define name="REF_MAX_P" value="300." unit="deg/s"/>
          <define name="REF_MAX_PDOT" value="RadOfDeg(7000.)"/>
          <define name="REF_OMEGA_Q" value="1500" unit="deg/s"/>
          <define name="REF_ZETA_Q" value="0.85"/>
          <define name="REF_MAX_Q" value="300." unit="deg/s"/>
          <define name="REF_MAX_QDOT" value="RadOfDeg(7000.)"/>
          <define name="REF_OMEGA_R" value="1500" unit="deg/s"/>
          <define name="REF_ZETA_R" value="0.9"/>
          <define name="REF_MAX_R" value="90." unit="deg/s"/>
          <define name="REF_MAX_RDOT" value="RadOfDeg(900.)"/>
          <define name="PHI_PGAIN" value="170"/>
          <define name="PHI_DGAIN" value="120"/>
          <define name="PHI_IGAIN" value="30"/>
          <define name="THETA_PGAIN" value="150"/>
          <define name="THETA_DGAIN" value="70"/>
          <define name="THETA_IGAIN" value="40"/>
          <define name="PSI_PGAIN" value="300"/>
          <define name="PSI_DGAIN" value="150"/>
          <define name="PSI_IGAIN" value="0"/>
          <define name="PHI_DDGAIN" value=" 0"/>
          <define name="THETA_DDGAIN" value=" 0"/>
          <define name="PSI_DDGAIN" value=" 0"/>
        </section>
        <section name="STABILIZATION_ATTITUDE_INDI" prefix="STABILIZATION_INDI_">
          <define name="G1_P" value="0.012"/>
          <define name="G1_Q" value="0.04"/>
          <define name="G1_R" value="0.004"/>
          <define name="G2_R" value="0.0"/>
          <define name="REF_ERR_P" value="70.0"/>
          <define name="REF_ERR_Q" value="45.0"/>
          <define name="REF_ERR_R" value="70.0"/>
          <define name="REF_RATE_P" value="9.0"/>
          <define name="REF_RATE_Q" value="16.0"/>
          <define name="REF_RATE_R" value="12.0"/>
          <define name="FILT_CUTOFF" value="8.0"/>
          <define name="FILT_CUTOFF_R" value="3.2"/>
          <define name="ACT_DYN_P" value="0.15"/>
          <define name="ACT_DYN_Q" value="0.15"/>
          <define name="ACT_DYN_R" value="0.15"/>
          <define name="USE_ADAPTIVE" value="FALSE"/>
          <define name="ADAPTIVE_MU" value="0.0001"/>
        </section>
        <section name="GUIDANCE_V" prefix="GUIDANCE_V_">
          <define name="HOVER_KP" value="200"/>
          <define name="HOVER_KD" value="175"/>
          <define name="HOVER_KI" value="72"/>
          <define name="NOMINAL_HOVER_THROTTLE" value="0.4"/>
          <define name="ADAPT_THROTTLE_ENABLED" value="FALSE"/>
        </section>
        <section name="AHRS" prefix="AHRS_">
          <define name="GRAVITY_HEURISTIC_FACTOR" value="0"/>
          <define name="H_X" value=" 0.47577"/>
          <define name="H_Y" value=" 0.11811"/>
          <define name="H_Z" value=" 0.87161"/>
        </section>
        <section name="GUIDANCE_H" prefix="GUIDANCE_H_">
          <define name="PGAIN" value="100"/>
          <define name="DGAIN" value="100"/>
          <define name="IGAIN" value="0"/>
        </section>
        <section name="MISC">
          <define name="USE_EARTH_BOUND_RC_SETPOINT" value="TRUE"/>
          <define name="TRANSITION_MAX_OFFSET" value="-80.0" unit="deg"/>
          <define name="NO_RC_THRUST_LIMIT" value="TRUE"/>
        </section>
        <modules main_freq="512">
          <module name="gps" type="ubx_ucenter"/>
          <module name="led_safety_status">
            <define name="USE_LED_BODY" value="1"/>
            <define name="SAFETY_WARNING_LED" value="BODY"/>
          </module>
        </modules>
        <firmware name="rotorcraft">
          <target name="ap" board="lisa_m_2.0">
            <module name="radio_control" type="spektrum">
              <define name="RADIO_KILL_SWITCH" value="5"/>
            </module>
            <configure name="FLASH_MODE" value="SWD"/>
            <configure name="LISA_M_BARO" value="BARO_MS5611_SPI"/>
          </target>
          <module name="motor_mixing"/>
          <module name="actuators" type="pwm">
            <define name="SERVO_HZ" value="400"/>
          </module>
          <module name="actuators" type="asctec_v2_new"/>
          <module name="telemetry" type="xbee_api"/>
          <module name="imu" type="aspirin_v2.2"/>
          <module name="gps" type="ublox"/>
          <module name="stabilization" type="indi_simple"/>
          <module name="stabilization" type="rate_indi"/>
          <module name="ahrs" type="int_cmpl_quat">
            <configure name="USE_MAGNETOMETER" value="TRUE"/>
          </module>
          <module name="ins"/>
        </firmware>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.05" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
            <message PERIOD="0.05" NAME="OPTICAL_FLOW_HOVER"/>
            <message PERIOD="0.10" NAME="VISUALTARGET"/>
            <message PERIOD="0.1" NAME="VISION_POSITION_ESTIMATE"/>
            <message PERIOD="0.05" NAME="DIVERGENCE"/>
            <message PERIOD="0.02" NAME="DRAGSPEED"/>
            <message PERIOD="5.1" NAME="LOGGER_STATUS"/>
            <message PERIOD="1.2" NAME="LIDAR"/>
            <message PERIOD=".25" NAME="INS_EKF2"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="BEBOP_ACTUATORS"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_FLOAT"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
            <message PERIOD="2.0" NAME="INDI_G"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="vel_guidance" KEY_PRESS="q">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HYBRID_GUIDANCE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1.0" NAME="GPS_INT"/>
            <message PERIOD="1.0" NAME="INS"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="RTCM3">
            <message PERIOD="1" NAME="GPS_RXMRTCM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD="1" NAME="GPS_RTK"/>
          </mode>
        </process>
        <process NAME="FlightRecorder">
          <mode NAME="default">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD=".1" NAME="GPS_INT"/>
            <message PERIOD=".1" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".2" NAME="IMU_MAG_SCALED"/>
            <message PERIOD="0.05" NAME="LIDAR"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="19"/>
            <dl_setting VAR="autopilot.kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot.power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot.mode" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="19" HANDLER="SetModeHandler"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings>
        <dl_settings>
          <dl_settings NAME="asctec_v2_new">
            <dl_setting var="actuators_asctec_v2.cmd" min="0" step="1" max="3" module="subsystems/actuators/actuators_asctec_v2_new" shortname="cmd" values="NONE|TEST|REVERSE|SET_ADDR" handler="SetCommand"/>
            <dl_setting var="actuators_asctec_v2.cur_addr" min="0" step="1" max="3" module="subsystems/actuators/actuators_asctec_v2_new" shortname="cur_addr" values="FRONT|BACK|LEFT|RIGHT" handler="SetCurAddr"/>
            <dl_setting var="actuators_asctec_v2.new_addr" min="0" step="1" max="3" module="subsystems/actuators/actuators_asctec_v2_new" shortname="new_addr" values="FRONT|BACK|LEFT|RIGHT" handler="SetNewAddr"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="quadshot" ac_id="7" airframe="airframes/examples/quadshot_asp21_spektrum.xml" radio="radios/cockpitSX.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/tudelft/delft_basic.xml" settings="settings/rotorcraft_basic.xml" settings_modules="modules/ahrs_int_cmpl_quat.xml modules/guidance_hybrid.xml modules/stabilization_indi_simple.xml modules/nav_basic_rotorcraft.xml modules/guidance_rotorcraft.xml modules/gps.xml modules/imu_common.xml modules/gps_ubx_ucenter.xml" gui_color="blue" release="93a9608c3bc34eca6a0dcde4123d55dac7d7b448">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitSX (easy)" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1500" MIN="2050" MAX="950" FUNCTION="ROLL" CTL="D" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="2050" MAX="950" FUNCTION="PITCH" CTL="C" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="950" MAX="2050" FUNCTION="YAW" CTL="B" AVERAGE="0"/>
        <channel NEUTRAL="1223" MIN="1223" MAX="2050" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="2050" MAX="950" FUNCTION="UNUSED" CTL="G" AVERAGE="1"/>
        <channel NEUTRAL="1496" MIN="2050" MAX="948" FUNCTION="GAIN1" CTL="E" AVERAGE="1"/>
        <channel NEUTRAL="1500" MIN="2050" MAX="948" FUNCTION="MODE" CTL="PHAUX2" AVERAGE="1"/>
      </radio>
      <dump>
        <flight_plan security_height="2" name="Delft Basic" max_dist_from_home="1000" lon0="4 22 42.0" lat0="51 59 27.6" ground_alt="0" alt="4">
          <header>    #include &quot;autopilot.h&quot;
    #include &quot;subsystems/datalink/datalink.h&quot;
    #include &quot;subsystems/electrical.h&quot;
    #include &quot;subsystems/radio_control.h&quot;</header>
          <waypoints>
            <waypoint y="0.0" x="0.0" name="HOME"/>
            <waypoint y="5.0" x="0.0" name="CLIMB"/>
            <waypoint y="-5.0" x="-2.0" name="STDBY"/>
            <waypoint y="14.3" x="-19.9" name="p1"/>
            <waypoint y="21.6" x="-0.6" name="p2"/>
            <waypoint y="-26.5" x="22.2" name="p3"/>
            <waypoint y="-34.4" x="4.9" name="p4"/>
            <waypoint y="-29.4" x="14.2" name="CAM"/>
            <waypoint y="-10.9" x="5.6" name="TD"/>
          </waypoints>
          <exceptions>
            <exception deroute="ComeBackAndLand" cond="((radio_control.status == RC_REALLY_LOST) &&
      !(IndexOfBlock('Takeoff') > nav_block) &&
      !(nav_block >= IndexOfBlock('land here')) &&
      (autopilot_in_flight() == true) )"/>
            <exception deroute="DatalinkLoss" cond="(datalink_time > 60 &&
      !(datalink_time > 120) &&
      !(IndexOfBlock('Takeoff') > nav_block) &&
      !(nav_block >= IndexOfBlock('land here')) &&
      (autopilot_in_flight() == true) )"/>
            <exception deroute="ComeBackAndLand" cond="(electrical.bat_low &&
      !(IndexOfBlock('Holding point') > nav_block) &&
      !(nav_block >= IndexOfBlock('land here')) &&
      (autopilot_in_flight() == true) )"/>
            <exception deroute="land here" cond="(electrical.bat_critical &&
      !(IndexOfBlock('Holding point') > nav_block) &&
      !(nav_block >= IndexOfBlock('land here')) &&
      (autopilot_in_flight() == true) )"/>
          </exceptions>
          <blocks>
            <block name="Wait GPS" no="0">
              <call_once fun="NavKillThrottle()" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Geo init" no="1">
              <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
              <call_once fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Holding point" no="2">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="Start Engine" no="3">
              <call_once fun="NavResurrect()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff" name="Takeoff" no="4">
              <exception deroute="Standby" cond="stateGetPositionEnu_f()->z > 2.0"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="5">
              <stay wp="STDBY" no="0"/>
            </block>
            <block name="stay_p1" no="6">
              <stay wp="p1" no="0"/>
            </block>
            <block name="go_p2" no="7">
              <go wp="p2" no="0"/>
              <deroute block="stay_p1" no="1"/>
            </block>
            <block name="line_p1_p2" no="8">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <stay wp="p2" until="stage_time>10" no="1"/>
              <go wp="p1" hmode="route" from="p2" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="route" no="9">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <go wp="p3" hmode="route" from="p2" no="1"/>
              <go wp="p4" hmode="route" from="p3" no="2"/>
              <go wp="p1" hmode="route" from="p4" no="3"/>
              <deroute block="stay_p1" no="4"/>
            </block>
            <block name="test yaw" no="10">
              <go wp="p1" no="0"/>
              <for var="i" to="16" from="1" no="2">
                <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
              </for>
              <deroute block="Standby" no="5"/>
            </block>
            <block pre_call="nav_set_heading_towards_waypoint(WP_CAM)" name="circle CAM" no="11">
              <circle wp="CAM" radius="nav_radius" no="0"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land Here" name="land here" no="12">
              <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
            </block>
            <block name="land" no="13">
              <go wp="TD" no="0"/>
            </block>
            <block name="flare" no="14">
              <exception deroute="Holding point" cond="NavDetectGround()"/>
              <exception deroute="landed" cond="!nav_is_in_flight()"/>
              <call_once fun="NavStartDetectGround()" no="0"/>
              <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
            </block>
            <block name="landed" no="15">
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
            </block>
            <block name="ComeBackAndLand" no="16">
              <go wp="HOME" no="0"/>
              <deroute block="land here" no="1"/>
            </block>
            <block name="DatalinkLoss" no="17">
              <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
              <stay wp="TD" until="stage_time>60" no="1"/>
              <deroute block="ComeBackAndLand" no="2"/>
            </block>
            <block name="HOME" no="18">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="18" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="17" block_name="DatalinkLoss" stage="2">
            <deroute block="ComeBackAndLand" no="2"/>
          </stage>
          <stage block="17" block_name="DatalinkLoss" stage="1">
            <stay wp="TD" until="stage_time>60" no="1"/>
          </stage>
          <stage block="17" block_name="DatalinkLoss" stage="0">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="16" block_name="ComeBackAndLand" stage="1">
            <deroute block="land here" no="1"/>
          </stage>
          <stage block="16" block_name="ComeBackAndLand" stage="0">
            <go wp="HOME" no="0"/>
          </stage>
          <stage block="15" block_name="landed" stage="0">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
          </stage>
          <stage block="14" block_name="flare" stage="1">
            <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
          </stage>
          <stage block="14" block_name="flare" stage="0">
            <call_once fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="13" block_name="land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="12" block_name="land here" stage="0">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="11" block_name="circle CAM" stage="0">
            <circle wp="CAM" radius="nav_radius" no="0"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="5">
            <deroute block="Standby" no="5"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="3">
            <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="2">
            <for var="i" to="16" from="1" no="2">
              <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
            </for>
          </stage>
          <stage block="10" block_name="test yaw" stage="0">
            <go wp="p1" no="0"/>
          </stage>
          <stage block="9" block_name="route" stage="4">
            <deroute block="stay_p1" no="4"/>
          </stage>
          <stage block="9" block_name="route" stage="3">
            <go wp="p1" hmode="route" from="p4" no="3"/>
          </stage>
          <stage block="9" block_name="route" stage="2">
            <go wp="p4" hmode="route" from="p3" no="2"/>
          </stage>
          <stage block="9" block_name="route" stage="1">
            <go wp="p3" hmode="route" from="p2" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="2">
            <go wp="p1" hmode="route" from="p2" no="2"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="1">
            <stay wp="p2" until="stage_time>10" no="1"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="1">
            <deroute block="stay_p1" no="1"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="0">
            <go wp="p2" no="0"/>
          </stage>
          <stage block="6" block_name="stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="5" block_name="Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="1">
            <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="0">
            <call_once fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="2">
            <call_once fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="0">
            <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
              <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
              <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
              <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
              <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="Hybrid Guidance">
              <dl_setting VAR="max_airspeed" STEP="1" MODULE="guidance/guidance_hybrid" MIN="4" MAX="15"/>
              <dl_setting VAR="wind_gain" STEP="1" MIN="1" MAX="256"/>
              <dl_setting VAR="horizontal_speed_gain" STEP="1" SHORTNAME="hor_speed_div" MIN="1" MAX="15"/>
              <dl_setting VAR="alt_pitch_gain" STEP="0.01" SHORTNAME="alt_pitch_gain" MIN="0" MAX="5.0"/>
              <dl_setting VAR="max_turn_bank" STEP="1.0" SHORTNAME="max_turn_bank" MIN="10.0" MAX="60.0"/>
              <dl_setting VAR="turn_bank_gain" STEP="0.01" SHORTNAME="turn_bank_gain" MIN="0.1" MAX="3.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="indi">
              <dl_setting VAR="indi.reference_acceleration.err_p" STEP="1" SHORTNAME="kp_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_P" MODULE="stabilization/stabilization_indi_simple" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_p" STEP="0.1" SHORTNAME="kd_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.p" STEP="0.001" SHORTNAME="ctl_eff_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_P" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.reference_acceleration.err_q" STEP="1" SHORTNAME="kp_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_Q" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_q" STEP="0.1" SHORTNAME="kd_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.q" STEP="0.001" SHORTNAME="ctl_eff_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_Q" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.reference_acceleration.err_r" STEP="1" SHORTNAME="kp_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_R" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_r" STEP="0.1" SHORTNAME="kd_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.r" STEP="0.001" SHORTNAME="ctl_eff_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_R" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.g2" STEP="0.01" SHORTNAME="g2" PERSISTENT="true" PARAM="STABILIZATION_INDI_G2_R" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.adaptive" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="use_adaptive" PERSISTENT="true" PARAM="STABILIZATION_INDI_USE_ADAPTIVE" MIN="0" MAX="1"/>
              <dl_setting VAR="indi.max_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_rate" PARAM="STABILIZATION_INDI_MAX_RATE" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
              <dl_setting VAR="indi.attitude_max_yaw_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_yaw_rate_attitude" PARAM="STABILIZATION_INDI_MAX_R" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="NAV">
              <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
              <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
              <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MIN="-50" MAX="50"/>
              <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MIN="0" MAX="10.0"/>
              <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MIN="-10.0" MAX="0.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Vert Loop">
              <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
              <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MIN="0.2" MAX="0.8"/>
              <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MIN="0" MAX="1"/>
              <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
            <dl_settings NAME="Horiz Loop">
              <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="true" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
              <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
              <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MIN="0" MAX="1"/>
              <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
              <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
              <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
              <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
              <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
              <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="ublox">
            <dl_settings NAME="ucenter">
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_h" STEP="1" SHORTNAME="sw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_l" STEP="1" SHORTNAME="sw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_h" STEP="1" SHORTNAME="hw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_l" STEP="1" SHORTNAME="hw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_init" STEP="100" SHORTNAME="inibaud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_run" STEP="100" SHORTNAME="baud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe name="quadshot aspirin 2.1 spektrum">
        <servos driver="Pwm">
          <servo name="A1" no="0" min="1000" neutral="1100" max="1600"/>
          <servo name="A2" no="1" min="1000" neutral="1100" max="1600"/>
          <servo name="B1" no="2" min="1000" neutral="1100" max="1600"/>
          <servo name="B2" no="3" min="1000" neutral="1100" max="1600"/>
          <servo name="ELEVON_LEFT" no="4" min="1300" neutral="1500" max="1700"/>
          <servo name="ELEVON_RIGHT" no="5" min="1300" neutral="1500" max="1700"/>
        </servos>
        <commands>
          <axis name="PITCH" failsafe_value="0"/>
          <axis name="ROLL" failsafe_value="0"/>
          <axis name="YAW" failsafe_value="0"/>
          <axis name="THRUST" failsafe_value="0"/>
        </commands>
        <command_laws>
          <call fun="motor_mixing_run(autopilot_get_motors_on(),FALSE,values)"/>
          <set servo="A1" value="motor_mixing.commands[0]"/>
          <set servo="A2" value="motor_mixing.commands[1]"/>
          <set servo="B1" value="motor_mixing.commands[2]"/>
          <set servo="B2" value="motor_mixing.commands[3]"/>
          <let var="aileron_feedback_left" value="-@YAW"/>
          <let var="aileron_feedback_right" value="-@YAW"/>
          <let var="elevator_feedback_left" value="-@PITCH"/>
          <let var="elevator_feedback_right" value="+@PITCH"/>
          <let var="hover_left" value="10*$aileron_feedback_left"/>
          <let var="hover_right" value="10*$aileron_feedback_right"/>
          <let var="forward_left" value="3*$aileron_feedback_left + 4*$elevator_feedback_left"/>
          <let var="forward_right" value="3*$aileron_feedback_right + 4*$elevator_feedback_right"/>
          <set servo="ELEVON_LEFT" value="AP_MODE == AP_MODE_ATTITUDE_DIRECT ? $hover_left  : $forward_left"/>
          <set servo="ELEVON_RIGHT" value="AP_MODE == AP_MODE_ATTITUDE_DIRECT ? $hover_right  : $forward_right"/>
        </command_laws>
        <section name="MIXING" prefix="MOTOR_MIXING_">
          <define name="TRIM_ROLL" value="0"/>
          <define name="TRIM_PITCH" value="0"/>
          <define name="TRIM_YAW" value="0"/>
          <define name="NB_MOTOR" value="4"/>
          <define name="SCALE" value="256"/>
          <define name="PITCH_COEF" value="{ -256, -256,  256,  256 }"/>
          <define name="ROLL_COEF" value="{  256, -256,  256, -256 }"/>
          <define name="YAW_COEF" value="{ -256,  256,  128, -128 }"/>
          <define name="THRUST_COEF" value="{  256,  256,  256,  256 }"/>
        </section>
        <section name="IMU" prefix="IMU_">
          <define name="ACCEL_X_NEUTRAL" value="0"/>
          <define name="ACCEL_Y_NEUTRAL" value="0"/>
          <define name="ACCEL_Z_NEUTRAL" value="0"/>
          <define name="ACCEL_X_SENS" value="4.86487566223" integer="16"/>
          <define name="ACCEL_Y_SENS" value="4.89957269597" integer="16"/>
          <define name="ACCEL_Z_SENS" value="4.82616398266" integer="16"/>
          <define name="MAG_X_NEUTRAL" value="-86"/>
          <define name="MAG_Y_NEUTRAL" value="-36"/>
          <define name="MAG_Z_NEUTRAL" value="35"/>
          <define name="MAG_X_SENS" value="3.98639595061" integer="16"/>
          <define name="MAG_Y_SENS" value="4.00632407649" integer="16"/>
          <define name="MAG_Z_SENS" value="4.17946082997" integer="16"/>
        </section>
        <section name="IMU" prefix="IMU_">
          <define name="BODY_TO_IMU_PHI" value="0." unit="deg"/>
          <define name="BODY_TO_IMU_THETA" value="90." unit="deg"/>
          <define name="BODY_TO_IMU_PSI" value="0." unit="deg"/>
        </section>
        <section name="AUTOPILOT">
          <define name="MODE_MANUAL" value="AP_MODE_ATTITUDE_DIRECT"/>
          <define name="MODE_AUTO1" value="AP_MODE_FORWARD"/>
          <define name="MODE_AUTO2" value="AP_MODE_NAV"/>
        </section>
        <section name="BAT">
          <define name="CRITIC_BAT_LEVEL" value="10.8" unit="V"/>
          <define name="LOW_BAT_LEVEL" value="10.8" unit="V"/>
          <define name="CATASTROPHIC_BAT_LEVEL" value="10.1" unit="V"/>
        </section>
        <section name="STABILIZATION_RATE" prefix="STABILIZATION_RATE_">
          <define name="SP_MAX_P" value="10000"/>
          <define name="SP_MAX_Q" value="10000"/>
          <define name="SP_MAX_R" value="10000"/>
          <define name="GAIN_P" value="350"/>
          <define name="GAIN_Q" value="250"/>
          <define name="GAIN_R" value="350"/>
          <define name="IGAIN_P" value="200"/>
          <define name="IGAIN_Q" value="200"/>
          <define name="IGAIN_R" value="200"/>
        </section>
        <section name="GAIN_SETS">
          <define name="NUMBER_OF_GAINSETS" value="2"/>
          <define name="SCHEDULING_VARIABLE" value="guidance_hybrid_norm_ref_airspeed"/>
          <define name="SCHEDULING_POINTS" value="{4, 10}"/>
          <define name="SCHEDULING_VARIABLE_FRAC" value="8"/>
          <define name="PHI_P" value="{150, 150}"/>
          <define name="PHI_D" value="{150, 150}"/>
          <define name="PHI_I" value="{30, 30}"/>
          <define name="PHI_DD" value="{0, 0}"/>
          <define name="THETA_P" value="{100, 80}"/>
          <define name="THETA_D" value="{100, 110}"/>
          <define name="THETA_I" value="{40, 40}"/>
          <define name="THETA_DD" value="{0, 0}"/>
          <define name="PSI_P" value="{300, 300}"/>
          <define name="PSI_D" value="{150, 150}"/>
          <define name="PSI_I" value="{0, 0}"/>
          <define name="PSI_DD" value="{0, 0}"/>
        </section>
        <section name="STABILIZATION_ATTITUDE" prefix="STABILIZATION_ATTITUDE_">
          <define name="SP_MAX_PHI" value="60." unit="deg"/>
          <define name="SP_MAX_THETA" value="60." unit="deg"/>
          <define name="SP_MAX_R" value="100." unit="deg/s"/>
          <define name="DEADBAND_R" value="250"/>
          <define name="DEADBAND_A" value="250"/>
          <define name="SP_PSI_DELTA_LIMIT" value="90" unit="deg"/>
          <define name="REF_OMEGA_P" value="1500" unit="deg/s"/>
          <define name="REF_ZETA_P" value="0.85"/>
          <define name="REF_MAX_P" value="300." unit="deg/s"/>
          <define name="REF_MAX_PDOT" value="RadOfDeg(7000.)"/>
          <define name="REF_OMEGA_Q" value="1500" unit="deg/s"/>
          <define name="REF_ZETA_Q" value="0.85"/>
          <define name="REF_MAX_Q" value="300." unit="deg/s"/>
          <define name="REF_MAX_QDOT" value="RadOfDeg(7000.)"/>
          <define name="REF_OMEGA_R" value="1500" unit="deg/s"/>
          <define name="REF_ZETA_R" value="0.85"/>
          <define name="REF_MAX_R" value="300." unit="deg/s"/>
          <define name="REF_MAX_RDOT" value="RadOfDeg(7000.)"/>
          <define name="PHI_PGAIN" value="150"/>
          <define name="PHI_DGAIN" value="150"/>
          <define name="PHI_IGAIN" value="30"/>
          <define name="THETA_PGAIN" value="100"/>
          <define name="THETA_DGAIN" value="100"/>
          <define name="THETA_IGAIN" value="40"/>
          <define name="PSI_PGAIN" value="300"/>
          <define name="PSI_DGAIN" value="150"/>
          <define name="PSI_IGAIN" value="0"/>
          <define name="PHI_DDGAIN" value=" 0"/>
          <define name="THETA_DDGAIN" value=" 0"/>
          <define name="PSI_DDGAIN" value=" 0"/>
        </section>
        <section name="STABILIZATION_ATTITUDE_INDI" prefix="STABILIZATION_INDI_">
          <define name="SP_MAX_PHI" value="60." unit="deg"/>
          <define name="SP_MAX_THETA" value="60." unit="deg"/>
          <define name="SP_MAX_R" value="180." unit="deg/s"/>
          <define name="DEADBAND_R" value="250"/>
          <define name="DEADBAND_A" value="250"/>
          <define name="SP_PSI_DELTA_LIMIT" value="90" unit="deg"/>
          <define name="G1_P" value="0.0179"/>
          <define name="G1_Q" value="0.0708"/>
          <define name="G1_R" value="0.0095"/>
          <define name="G2_R" value="0.0"/>
          <define name="REF_ERR_P" value="70.0"/>
          <define name="REF_ERR_Q" value="45.0"/>
          <define name="REF_ERR_R" value="70.0"/>
          <define name="REF_RATE_P" value="9.0"/>
          <define name="REF_RATE_Q" value="16.0"/>
          <define name="REF_RATE_R" value="12.0"/>
          <define name="FILT_CUTOFF" value="8.0"/>
          <define name="FILT_CUTOFF_R" value="3.2"/>
          <define name="ACT_DYN_P" value="0.03"/>
          <define name="ACT_DYN_Q" value="0.03"/>
          <define name="ACT_DYN_R" value="0.03"/>
          <define name="USE_ADAPTIVE" value="TRUE"/>
          <define name="ADAPTIVE_MU" value="0.0001"/>
        </section>
        <section name="GUIDANCE_V" prefix="GUIDANCE_V_">
          <define name="MIN_ERR_Z" value="POS_BFP_OF_REAL(-10.)"/>
          <define name="MAX_ERR_Z" value="POS_BFP_OF_REAL( 10.)"/>
          <define name="MIN_ERR_ZD" value="SPEED_BFP_OF_REAL(-10.)"/>
          <define name="MAX_ERR_ZD" value="SPEED_BFP_OF_REAL( 10.)"/>
          <define name="MAX_SUM_ERR" value="2000000"/>
          <define name="HOVER_KP" value="200"/>
          <define name="HOVER_KD" value="175"/>
          <define name="HOVER_KI" value="100"/>
          <define name="NOMINAL_HOVER_THROTTLE" value="0.2"/>
          <define name="ADAPT_THROTTLE_ENABLED" value="FALSE"/>
        </section>
        <section name="AHRS" prefix="AHRS_">
          <define name="H_X" value="0.39049610"/>
          <define name="H_Y" value="0.00278894"/>
          <define name="H_Z" value="0.92060036"/>
          <define name="GRAVITY_HEURISTIC_FACTOR" value="0"/>
        </section>
        <section name="GUIDANCE_H" prefix="GUIDANCE_H_">
          <define name="PGAIN" value="50"/>
          <define name="DGAIN" value="50"/>
          <define name="IGAIN" value="65"/>
          <define name="MAX_BANK" value="RadOfDeg(55)"/>
          <define name="FORWARD_MAX_BANK" value="RadOfDeg(35)"/>
          <define name="USE_REF" value="FALSE"/>
        </section>
        <section name="NAV">
          <define name="ARRIVED_AT_WAYPOINT" value="5" unit="m"/>
        </section>
        <section name="MISC">
          <define name="USE_EARTH_BOUND_RC_SETPOINT" value="TRUE"/>
          <define name="TRANSITION_MAX_OFFSET" value="-75.0" unit="deg"/>
          <define name="RC_LOST_MODE" value="MODE_AUTO2"/>
          <define name="SWITCH_STICKS_FOR_RATE_CONTROL" value="TRUE"/>
          <define name="AIRSPEED_ETS_I2C_DEV" value="i2c2"/>
          <define name="AHRS_MAG_UPDATE_ALL_AXES" value="FALSE"/>
          <define name="THRESHOLD_GROUND_DETECT" value="25.0"/>
          <define name="KILL_ON_GROUND_DETECT" value="TRUE"/>
          <define name="FAILSAFE_GROUND_DETECT" value="TRUE"/>
          <define name="HYBRID_NAVIGATION" value="TRUE"/>
          <define name="NO_RC_THRUST_LIMIT" value="TRUE"/>
          <define name="ADAPTIVE_INDI" value="FALSE"/>
        </section>
        <modules main_freq="512">
          <load name="gps_ubx_ucenter.xml"/>
          <load name="led_safety_status.xml">
            <define name="USE_LED_BODY" value="1"/>
            <define name="SAFETY_WARNING_LED" value="BODY"/>
          </load>
          <load name="sonar_adc.xml">
            <configure name="ADC_SONAR" value="ADC_2"/>
            <define name="SENSOR_SYNC_SEND_SONAR"/>
            <define name="SONAR_SCALE" value="0.0032"/>
          </load>
          <module name="logger_spi_link"/>
        </modules>
        <firmware name="rotorcraft">
          <target name="ap" board="lisa_m_2.0">
            <module name="radio_control" type="spektrum">
              <define name="RADIO_KILL_SWITCH" value="5"/>
              <define name="RADIO_MODE" value="4"/>
            </module>
            <configure name="FLASH_MODE" value="SWD"/>
            <configure name="BMP_PORT" value="/dev/ttyACM0"/>
            <configure name="LISA_M_BARO" value="BARO_BOARD_BMP085"/>
          </target>
          <module name="motor_mixing"/>
          <module name="actuators" type="pwm">
            <define name="SERVO_HZ" value="400"/>
            <define name="USE_SERVOS_7AND8"/>
          </module>
          <module name="telemetry" type="xbee_api"/>
          <module name="imu" type="aspirin_v2.1"/>
          <module name="gps" type="ublox"/>
          <module name="stabilization" type="indi_simple"/>
          <module name="guidance" type="hybrid"/>
          <module name="ahrs" type="int_cmpl_quat">
            <configure name="USE_MAGNETOMETER" value="1"/>
            <define name="AHRS_USE_GPS_HEADING" value="0"/>
          </module>
          <module name="ins"/>
        </firmware>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.05" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
            <message PERIOD="0.05" NAME="OPTICAL_FLOW_HOVER"/>
            <message PERIOD="0.10" NAME="VISUALTARGET"/>
            <message PERIOD="0.1" NAME="VISION_POSITION_ESTIMATE"/>
            <message PERIOD="0.05" NAME="DIVERGENCE"/>
            <message PERIOD="0.02" NAME="DRAGSPEED"/>
            <message PERIOD="5.1" NAME="LOGGER_STATUS"/>
            <message PERIOD="1.2" NAME="LIDAR"/>
            <message PERIOD=".25" NAME="INS_EKF2"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="BEBOP_ACTUATORS"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_FLOAT"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
            <message PERIOD="2.0" NAME="INDI_G"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="vel_guidance" KEY_PRESS="q">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HYBRID_GUIDANCE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1.0" NAME="GPS_INT"/>
            <message PERIOD="1.0" NAME="INS"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="RTCM3">
            <message PERIOD="1" NAME="GPS_RXMRTCM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD="1" NAME="GPS_RTK"/>
          </mode>
        </process>
        <process NAME="FlightRecorder">
          <mode NAME="default">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD=".1" NAME="GPS_INT"/>
            <message PERIOD=".1" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".2" NAME="IMU_MAG_SCALED"/>
            <message PERIOD="0.05" NAME="LIDAR"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="19"/>
            <dl_setting VAR="autopilot.kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot.power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot.mode" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="19" HANDLER="SetModeHandler"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="quadshot_pylons" ac_id="178" airframe="airframes/tudelft/quadshot_pylons.xml" radio="radios/cockpitSX.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/dummy.xml" settings="settings/rotorcraft_basic.xml" settings_modules="modules/ahrs_int_cmpl_quat.xml modules/stabilization_int_quat.xml modules/nav_basic_rotorcraft.xml modules/guidance_rotorcraft.xml modules/gps.xml modules/imu_common.xml modules/gps_ubx_ucenter.xml" gui_color="#b29eb22cffff">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitSX (easy)" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1500" MIN="2050" MAX="950" FUNCTION="ROLL" CTL="D" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="2050" MAX="950" FUNCTION="PITCH" CTL="C" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="950" MAX="2050" FUNCTION="YAW" CTL="B" AVERAGE="0"/>
        <channel NEUTRAL="1223" MIN="1223" MAX="2050" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="2050" MAX="950" FUNCTION="UNUSED" CTL="G" AVERAGE="1"/>
        <channel NEUTRAL="1496" MIN="2050" MAX="948" FUNCTION="GAIN1" CTL="E" AVERAGE="1"/>
        <channel NEUTRAL="1500" MIN="2050" MAX="948" FUNCTION="MODE" CTL="PHAUX2" AVERAGE="1"/>
      </radio>
      <dump>
        <flight_plan name="Dummy" lon0="1.27289" max_dist_from_home="1000" ground_alt="185" security_height="25" qfu="270" alt="250" lat0="43.46223">
          <waypoints>
            <waypoint name="HOME" x="0.0" y="120.0" alt="250."/>
          </waypoints>
          <blocks>
            <block name="HOME" no="0">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="0" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
              <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
              <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
              <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
              <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Att Loop">
              <dl_setting VAR="stabilization_gains.p.x" TYPE="int32" STEP="1" SHORTNAME="pgain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_PGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="8000"/>
              <dl_setting VAR="stabilization_gains.d.x" TYPE="int32" STEP="1" SHORTNAME="dgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.x" TYPE="int32" STEP="1" SHORTNAME="igain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_IGAIN" MIN="0" MAX="800"/>
              <dl_setting VAR="stabilization_gains.dd.x" TYPE="int32" STEP="1" SHORTNAME="ddgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="stabilization_gains.p.y" TYPE="int32" STEP="1" SHORTNAME="pgain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_PGAIN" MIN="1" MAX="8000"/>
              <dl_setting VAR="stabilization_gains.d.y" TYPE="int32" STEP="1" SHORTNAME="dgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.y" TYPE="int32" STEP="1" SHORTNAME="igain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_IGAIN" MIN="0" MAX="800"/>
              <dl_setting VAR="stabilization_gains.dd.y" TYPE="int32" STEP="1" SHORTNAME="ddgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="stabilization_gains.p.z" TYPE="int32" STEP="1" SHORTNAME="pgain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_PGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.d.z" TYPE="int32" STEP="1" SHORTNAME="dgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DGAIN" MIN="1" MAX="4000"/>
              <dl_setting VAR="stabilization_gains.i.z" TYPE="int32" STEP="1" SHORTNAME="igain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_IGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="stabilization_gains.dd.z" TYPE="int32" STEP="1" SHORTNAME="ddgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DDGAIN" MIN="0" MAX="1000"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.p" UNIT="rad/s" STEP="1" SHORTNAME="omega p" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_P" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaP" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.p" STEP="0.05" SHORTNAME="zeta p" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_P" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaP"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.q" UNIT="rad/s" STEP="1" SHORTNAME="omega q" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_Q" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaQ" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.q" STEP="0.05" SHORTNAME="zeta q" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_Q" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaQ"/>
              <dl_setting VAR="att_ref_quat_i.model.omega.r" UNIT="rad/s" STEP="1" SHORTNAME="omega r" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_R" MODULE="stabilization/stabilization_attitude_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaR" ALT_UNIT="deg/s"/>
              <dl_setting VAR="att_ref_quat_i.model.zeta.r" STEP="0.05" SHORTNAME="zeta r" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_R" MODULE="stabilization/stabilization_attitude_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaR"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="NAV">
              <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
              <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
              <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MIN="-50" MAX="50"/>
              <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MIN="0" MAX="10.0"/>
              <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MIN="-10.0" MAX="0.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Vert Loop">
              <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
              <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MIN="0.2" MAX="0.8"/>
              <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MIN="0" MAX="1"/>
              <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
            <dl_settings NAME="Horiz Loop">
              <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="true" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
              <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
              <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MIN="0" MAX="1"/>
              <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
              <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
              <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
              <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
              <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
              <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="ublox">
            <dl_settings NAME="ucenter">
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_h" STEP="1" SHORTNAME="sw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_l" STEP="1" SHORTNAME="sw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_h" STEP="1" SHORTNAME="hw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_l" STEP="1" SHORTNAME="hw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_init" STEP="100" SHORTNAME="inibaud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_run" STEP="100" SHORTNAME="baud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe name="quadshot aspirin 2.1 spektrum">
        <description>     This is a quadshot vehicle equiped with Lisa/m2.0 and an aspirin 2.1
     More information on the Quadshot can be found at transition-robotics.com</description>
        <servos driver="Pwm">
          <servo name="A1" no="0" min="1000" neutral="1100" max="2000"/>
          <servo name="A2" no="1" min="1000" neutral="1100" max="2000"/>
          <servo name="B1" no="2" min="1000" neutral="1100" max="2000"/>
          <servo name="B2" no="3" min="1000" neutral="1100" max="2000"/>
          <servo name="ELEVON_LEFT" no="4" min="1000" neutral="1500" max="2000"/>
          <servo name="ELEVON_RIGHT" no="5" min="1000" neutral="1500" max="2000"/>
        </servos>
        <commands>
          <axis name="PITCH" failsafe_value="0"/>
          <axis name="ROLL" failsafe_value="0"/>
          <axis name="YAW" failsafe_value="0"/>
          <axis name="THRUST" failsafe_value="0"/>
        </commands>
        <command_laws>
          <call fun="motor_mixing_run(autopilot_get_motors_on(),FALSE,values)"/>
          <set servo="A1" value="motor_mixing.commands[0]"/>
          <set servo="A2" value="motor_mixing.commands[1]"/>
          <set servo="B1" value="motor_mixing.commands[2]"/>
          <set servo="B2" value="motor_mixing.commands[3]"/>
          <let var="aileron_feedback_left" value="-@YAW"/>
          <let var="aileron_feedback_right" value="-@YAW"/>
          <let var="elevator_feedback_left" value="+@PITCH"/>
          <let var="elevator_feedback_right" value="-@PITCH"/>
          <let var="hover_left" value="3*$aileron_feedback_left"/>
          <let var="hover_right" value="3*$aileron_feedback_right"/>
          <let var="forward_left" value="6*$aileron_feedback_left+4*$elevator_feedback_left"/>
          <let var="forward_right" value="6*$aileron_feedback_right+4*$elevator_feedback_right"/>
          <set servo="ELEVON_LEFT" value="AP_MODE == AP_MODE_ATTITUDE_DIRECT ? $hover_left  : $forward_left"/>
          <set servo="ELEVON_RIGHT" value="AP_MODE == AP_MODE_ATTITUDE_DIRECT ? $hover_right  : $forward_right"/>
        </command_laws>
        <section name="MIXING" prefix="MOTOR_MIXING_">
          <define name="TRIM_ROLL" value="0"/>
          <define name="TRIM_PITCH" value="0"/>
          <define name="TRIM_YAW" value="0"/>
          <define name="NB_MOTOR" value="4"/>
          <define name="SCALE" value="256"/>
          <define name="PITCH_COEF" value="{ -256, -256,  256,  256 }"/>
          <define name="ROLL_COEF" value="{  256, -256,  256, -256 }"/>
          <define name="YAW_COEF" value="{  256, -256, -128,  128 }"/>
          <define name="THRUST_COEF" value="{  256,  256,  256,  256 }"/>
        </section>
        <section name="IMU" prefix="IMU_">
          <define name="ACCEL_X_NEUTRAL" value="0"/>
          <define name="ACCEL_Y_NEUTRAL" value="0"/>
          <define name="ACCEL_Z_NEUTRAL" value="0"/>
          <define name="ACCEL_X_SENS" value="4.86487566223" integer="16"/>
          <define name="ACCEL_Y_SENS" value="4.89957269597" integer="16"/>
          <define name="ACCEL_Z_SENS" value="4.82616398266" integer="16"/>
          <define name="MAG_X_NEUTRAL" value="0"/>
          <define name="MAG_Y_NEUTRAL" value="0"/>
          <define name="MAG_Z_NEUTRAL" value="0"/>
          <define name="MAG_X_SENS" value="4.19385009207" integer="16"/>
          <define name="MAG_Y_SENS" value="4.32306399648" integer="16"/>
          <define name="MAG_Z_SENS" value="4.63243801309" integer="16"/>
        </section>
        <section name="IMU" prefix="IMU_">
          <define name="BODY_TO_IMU_PHI" value="0." unit="deg"/>
          <define name="BODY_TO_IMU_THETA" value="90." unit="deg"/>
          <define name="BODY_TO_IMU_PSI" value="0." unit="deg"/>
        </section>
        <section name="AUTOPILOT">
          <define name="MODE_MANUAL" value="AP_MODE_ATTITUDE_DIRECT"/>
          <define name="MODE_AUTO1" value="AP_MODE_FORWARD"/>
          <define name="MODE_AUTO2" value="AP_MODE_RATE_DIRECT"/>
        </section>
        <section name="BAT">
          <define name="MIN_BAT_LEVEL" value="10.4" units="V"/>
          <define name="CATASTROPHIC_BAT_LEVEL" value="9.3" unit="V"/>
        </section>
        <section name="GAIN_SETS">
          <define name="NUMBER_OF_GAINSETS" value="2"/>
          <define name="SCHEDULING_VARIABLE" value="(radio.values[COMMAND_THRUST]+ transition_status"/>
          <define name="SCHEDULING_POINTS" value="{1000, 6000}"/>
          <define name="SCHEDULING_VARIABLE_FRAC" value="0"/>
          <define name="PHI_P" value="{230, 230}"/>
          <define name="PHI_D" value="{170, 170}"/>
          <define name="PHI_I" value="{30, 30}"/>
          <define name="PHI_DD" value="{0, 0}"/>
          <define name="THETA_P" value="{200, 300}"/>
          <define name="THETA_D" value="{100, 50}"/>
          <define name="THETA_I" value="{40, 40}"/>
          <define name="THETA_DD" value="{0, 0}"/>
          <define name="PSI_P" value="{300, 300}"/>
          <define name="PSI_D" value="{150, 150}"/>
          <define name="PSI_I" value="{0, 0}"/>
          <define name="PSI_DD" value="{0, 0}"/>
        </section>
        <section name="STABILIZATION_ATTITUDE" prefix="STABILIZATION_ATTITUDE_">
          <define name="SP_MAX_PHI" value="60." unit="deg"/>
          <define name="SP_MAX_THETA" value="60." unit="deg"/>
          <define name="SP_MAX_R" value="90." unit="deg/s"/>
          <define name="DEADBAND_R" value="250"/>
          <define name="DEADBAND_A" value="250"/>
          <define name="SP_PSI_DELTA_LIMIT" value="90" unit="deg"/>
          <define name="REF_OMEGA_P" value="1500" unit="deg/s"/>
          <define name="REF_ZETA_P" value="0.85"/>
          <define name="REF_MAX_P" value="300." unit="deg/s"/>
          <define name="REF_MAX_PDOT" value="RadOfDeg(7000.)"/>
          <define name="REF_OMEGA_Q" value="1500" unit="deg/s"/>
          <define name="REF_ZETA_Q" value="0.85"/>
          <define name="REF_MAX_Q" value="300." unit="deg/s"/>
          <define name="REF_MAX_QDOT" value="RadOfDeg(7000.)"/>
          <define name="REF_OMEGA_R" value="1500" unit="deg/s"/>
          <define name="REF_ZETA_R" value="0.9"/>
          <define name="REF_MAX_R" value="90." unit="deg/s"/>
          <define name="REF_MAX_RDOT" value="RadOfDeg(900.)"/>
          <define name="PHI_PGAIN" value="170"/>
          <define name="PHI_DGAIN" value="120"/>
          <define name="PHI_IGAIN" value="30"/>
          <define name="THETA_PGAIN" value="150"/>
          <define name="THETA_DGAIN" value="70"/>
          <define name="THETA_IGAIN" value="40"/>
          <define name="PSI_PGAIN" value="300"/>
          <define name="PSI_DGAIN" value="150"/>
          <define name="PSI_IGAIN" value="0"/>
          <define name="PHI_DDGAIN" value=" 0"/>
          <define name="THETA_DDGAIN" value=" 0"/>
          <define name="PSI_DDGAIN" value=" 0"/>
        </section>
        <section name="GUIDANCE_V" prefix="GUIDANCE_V_">
          <define name="HOVER_KP" value="200"/>
          <define name="HOVER_KD" value="175"/>
          <define name="HOVER_KI" value="72"/>
          <define name="NOMINAL_HOVER_THROTTLE" value="0.4"/>
          <define name="ADAPT_THROTTLE_ENABLED" value="FALSE"/>
        </section>
        <section name="AHRS" prefix="AHRS_">
          <define name="H_X" value=" 0.47577"/>
          <define name="H_Y" value=" 0.11811"/>
          <define name="H_Z" value=" 0.87161"/>
        </section>
        <section name="GUIDANCE_H" prefix="GUIDANCE_H_">
          <define name="PGAIN" value="100"/>
          <define name="DGAIN" value="100"/>
          <define name="IGAIN" value="0"/>
        </section>
        <section name="MISC">
          <define name="USE_EARTH_BOUND_RC_SETPOINT" value="TRUE"/>
          <define name="TRANSITION_MAX_OFFSET" value="-82.0" unit="deg"/>
          <define name="NO_RC_THRUST_LIMIT" value="TRUE"/>
        </section>
        <modules main_freq="512">
          <module name="gps" type="ubx_ucenter"/>
          <module name="led_safety_status">
            <define name="USE_LED_BODY" value="1"/>
            <define name="SAFETY_WARNING_LED" value="BODY"/>
          </module>
          <module name="airspeed_ets">
            <configure name="AIRSPEED_ETS_I2C_DEV" value="i2c2"/>
            <define name="AIRSPEED_ETS_SYNC_SEND"/>
          </module>
        </modules>
        <firmware name="rotorcraft">
          <target name="ap" board="lisa_m_2.0">
            <module name="radio_control" type="spektrum">
              <define name="RADIO_KILL_SWITCH" value="6"/>
            </module>
            <define name="USE_AIRSPEED" value="TRUE"/>
            <configure name="LISA_M_BARO" value="BARO_BOARD_BMP085"/>
          </target>
          <module name="motor_mixing"/>
          <module name="actuators" type="pwm">
            <define name="SERVO_HZ" value="400"/>
            <define name="USE_SERVOS_7AND8"/>
          </module>
          <module name="telemetry" type="xbee_api"/>
          <module name="imu" type="aspirin_v2.1"/>
          <module name="gps" type="ublox"/>
          <module name="stabilization" type="int_quat"/>
          <module name="ahrs" type="int_cmpl_quat">
            <configure name="USE_MAGNETOMETER" value="TRUE"/>
          </module>
          <module name="ins"/>
        </firmware>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.05" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
            <message PERIOD="0.05" NAME="OPTICAL_FLOW_HOVER"/>
            <message PERIOD="0.10" NAME="VISUALTARGET"/>
            <message PERIOD="0.1" NAME="VISION_POSITION_ESTIMATE"/>
            <message PERIOD="0.05" NAME="DIVERGENCE"/>
            <message PERIOD="0.02" NAME="DRAGSPEED"/>
            <message PERIOD="5.1" NAME="LOGGER_STATUS"/>
            <message PERIOD="1.2" NAME="LIDAR"/>
            <message PERIOD=".25" NAME="INS_EKF2"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="BEBOP_ACTUATORS"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_FLOAT"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
            <message PERIOD="2.0" NAME="INDI_G"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="vel_guidance" KEY_PRESS="q">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HYBRID_GUIDANCE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1.0" NAME="GPS_INT"/>
            <message PERIOD="1.0" NAME="INS"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_FLOAT"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="RTCM3">
            <message PERIOD="1" NAME="GPS_RXMRTCM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD="1" NAME="GPS_RTK"/>
          </mode>
        </process>
        <process NAME="FlightRecorder">
          <mode NAME="default">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD=".1" NAME="GPS_INT"/>
            <message PERIOD=".1" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".2" NAME="IMU_MAG_SCALED"/>
            <message PERIOD="0.05" NAME="LIDAR"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="19"/>
            <dl_setting VAR="autopilot.kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot.power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot.mode" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="19" HANDLER="SetModeHandler"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="xvert" ac_id="69" airframe="airframes/tudelft/xvert.xml" radio="radios/dummy.xml" telemetry="telemetry/default_rotorcraft_slow.xml" flight_plan="flight_plans/rotorcraft_basic.xml" settings="settings/rotorcraft_basic.xml" settings_modules="modules/gps.xml modules/ahrs_float_cmpl_quat.xml modules/stabilization_indi_simple.xml modules/nav_basic_rotorcraft.xml modules/guidance_rotorcraft.xml modules/imu_common.xml modules/air_data.xml modules/gps_ubx_ucenter.xml modules/guidance_hybrid.xml" gui_color="#ffffcccaccca" release="2a6ad556f183875fa9fb8072d774beec7ba55701">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitMM" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1120" MIN="1120" MAX="2000" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="2" name="Rotorcraft Basic (Enac)" max_dist_from_home="150" lon0="1 28 52.61" lat0="43 33 50.83" ground_alt="147" alt="152">
          <header>#include &quot;autopilot.h&quot;</header>
          <waypoints>
            <waypoint y="0.0" x="0.0" name="HOME"/>
            <waypoint y="5.0" x="0.0" name="CLIMB"/>
            <waypoint y="-5.0" x="-2.0" name="STDBY"/>
            <waypoint y="-13.9" x="3.6" name="p1"/>
            <waypoint y="-48.2" x="27.5" name="p2"/>
            <waypoint y="-19.6" x="16.7" name="p3"/>
            <waypoint y="-40.7" x="13.7" name="p4"/>
            <waypoint y="-50" x="-20" name="CAM" height="2."/>
            <waypoint y="-10.9" x="5.6" name="TD"/>
          </waypoints>
          <blocks>
            <block name="Wait GPS" no="0">
              <call_once fun="NavKillThrottle()" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Geo init" no="1">
              <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
              <call_once fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Holding point" no="2">
              <call_once fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="Start Engine" no="3">
              <call_once fun="NavResurrect()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff" name="Takeoff" no="4">
              <exception deroute="Standby" cond="stateGetPositionEnu_f() @DEREF z @GT 2.0"/>
              <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="5">
              <stay wp="STDBY" no="0"/>
            </block>
            <block name="stay_p1" no="6">
              <stay wp="p1" no="0"/>
            </block>
            <block name="go_p2" no="7">
              <call_once fun="nav_set_heading_deg(90)" no="0"/>
              <go wp="p2" no="1"/>
              <deroute block="stay_p1" no="2"/>
            </block>
            <block name="line_p1_p2" no="8">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <stay wp="p2" until="stage_time>10" no="1"/>
              <go wp="p1" hmode="route" from="p2" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="route" no="9">
              <go wp="p3" hmode="route" from="p1" no="0"/>
              <go wp="p4" hmode="route" from="p3" no="1"/>
              <go wp="p1" hmode="route" from="p4" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="Oval" no="10">
              <oval radius="-1" p2="p2" p1="p1" no="1"/>
            </block>
            <block name="test yaw" no="11">
              <go wp="p1" no="0"/>
              <for var="i" to="16" from="1" no="2">
                <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
              </for>
              <deroute block="Standby" no="5"/>
            </block>
            <block pre_call="nav_set_heading_towards_waypoint(WP_CAM)" name="circle CAM" no="12">
              <circle wp="CAM" radius="nav_radius" no="0"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land Here" name="land here" no="13">
              <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
            </block>
            <block name="land" no="14">
              <go wp="TD" no="0"/>
            </block>
            <block name="flare" no="15">
              <exception deroute="Holding point" cond="NavDetectGround()"/>
              <exception deroute="landed" cond="!nav_is_in_flight()"/>
              <call_once fun="NavStartDetectGround()" no="0"/>
              <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
            </block>
            <block name="landed" no="16">
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
            </block>
            <block name="HOME" no="17">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="17" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="16" block_name="landed" stage="0">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
          </stage>
          <stage block="15" block_name="flare" stage="1">
            <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
          </stage>
          <stage block="15" block_name="flare" stage="0">
            <call_once fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="14" block_name="land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="13" block_name="land here" stage="0">
            <call_once fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="12" block_name="circle CAM" stage="0">
            <circle wp="CAM" radius="nav_radius" no="0"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="5">
            <deroute block="Standby" no="5"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="3">
            <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
          </stage>
          <stage block="11" block_name="test yaw" stage="2">
            <for var="i" to="16" from="1" no="2">
              <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
            </for>
          </stage>
          <stage block="11" block_name="test yaw" stage="0">
            <go wp="p1" no="0"/>
          </stage>
          <stage block="10" block_name="Oval" stage="1">
            <oval radius="-1" p2="p2" p1="p1" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="9" block_name="route" stage="2">
            <go wp="p1" hmode="route" from="p4" no="2"/>
          </stage>
          <stage block="9" block_name="route" stage="1">
            <go wp="p4" hmode="route" from="p3" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="0">
            <go wp="p3" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="2">
            <go wp="p1" hmode="route" from="p2" no="2"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="1">
            <stay wp="p2" until="stage_time>10" no="1"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="2">
            <deroute block="stay_p1" no="2"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="1">
            <go wp="p2" no="1"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="0">
            <call_once fun="nav_set_heading_deg(90)" no="0"/>
          </stage>
          <stage block="6" block_name="stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="5" block_name="Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="1">
            <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="0">
            <call_once fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="0">
            <call_once fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="2">
            <call_once fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="0">
            <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <call_once fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="gps">
              <dl_setting VAR="multi_gps_mode" VALUES="AUTO|PRIMARY|SECONDARY" STEP="1" SHORTNAME="multi_mode" PARAM="MULTI_GPS_MODE" MODULE="subsystems/gps" MIN="0" MAX="2"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="AHRS">
              <dl_setting VAR="ahrs_fc.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_float_cmpl" MIN="0" MAX="50"/>
              <dl_setting VAR="ahrs_fc.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_float_cmpl" MIN="0.02" MAX="0.2"/>
              <dl_setting VAR="ahrs_fc.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_float_cmpl" MIN="0.7" MAX="1.5"/>
              <dl_setting VAR="ahrs_fc.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_float_cmpl" MIN="0.02" MAX="0.1"/>
              <dl_setting VAR="ahrs_fc.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_float_cmpl" MIN="0.7" MAX="1.5"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="indi">
              <dl_setting VAR="indi.reference_acceleration.err_p" STEP="1" SHORTNAME="kp_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_P" MODULE="stabilization/stabilization_indi_simple" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_p" STEP="0.1" SHORTNAME="kd_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.p" STEP="0.001" SHORTNAME="ctl_eff_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_P" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.reference_acceleration.err_q" STEP="1" SHORTNAME="kp_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_Q" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_q" STEP="0.1" SHORTNAME="kd_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.q" STEP="0.001" SHORTNAME="ctl_eff_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_Q" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.reference_acceleration.err_r" STEP="1" SHORTNAME="kp_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_R" MIN="0" MAX="2500"/>
              <dl_setting VAR="indi.reference_acceleration.rate_r" STEP="0.1" SHORTNAME="kd_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MIN="0" MAX="100"/>
              <dl_setting VAR="indi.g1.r" STEP="0.001" SHORTNAME="ctl_eff_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_R" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.g2" STEP="0.01" SHORTNAME="g2" PERSISTENT="true" PARAM="STABILIZATION_INDI_G2_R" MIN="0" MAX="10"/>
              <dl_setting VAR="indi.adaptive" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="use_adaptive" PERSISTENT="true" PARAM="STABILIZATION_INDI_USE_ADAPTIVE" MIN="0" MAX="1"/>
              <dl_setting VAR="indi.max_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_rate" PARAM="STABILIZATION_INDI_MAX_RATE" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
              <dl_setting VAR="indi.attitude_max_yaw_rate" UNIT="rad/s" STEP="0.01" SHORTNAME="max_yaw_rate_attitude" PARAM="STABILIZATION_INDI_MAX_R" MIN="0" MAX="400.0" ALT_UNIT="deg/s"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="NAV">
              <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
              <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
              <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MIN="-50" MAX="50"/>
              <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MIN="0" MAX="10.0"/>
              <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MIN="-10.0" MAX="0.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings TARGET="ap|nps">
          <dl_settings>
            <dl_settings NAME="Vert Loop">
              <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MIN="0" MAX="600"/>
              <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
              <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MIN="0.2" MAX="0.8"/>
              <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MIN="0" MAX="1"/>
              <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
            <dl_settings NAME="Horiz Loop">
              <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="true" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
              <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
              <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MIN="0" MAX="1"/>
              <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
              <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
              <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
              <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
              <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MIN="0" MAX="400"/>
              <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
              <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="body2imu">
              <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
              <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="air_data">
              <dl_setting VAR="air_data.qnh" STEP="1" SHORTNAME="QNH" MODULE="air_data/air_data" MIN="800" MAX="1200"/>
              <dl_setting VAR="air_data.tas_factor" TYPE="float" STEP="0.01" SHORTNAME="TASfactor" PERSISTENT="true" PARAM="AIR_DATA_TAS_FACTOR" MODULE="air_data/air_data" MIN="0.8" MAX="1.3"/>
              <dl_setting VAR="air_data.calc_qnh_once" STEP="1" SHORTNAME="calcQNH" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_airspeed" TYPE="uint8" STEP="1" SHORTNAME="calcAirspeed" PERSISTENT="true" PARAM="AIR_DATA_CALC_AIRSPEED" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_tas_factor" TYPE="uint8" STEP="1" SHORTNAME="calcTASfactor" PERSISTENT="true" PARAM="AIR_DATA_CALC_TAS_FACTOR" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_amsl_baro" TYPE="uint8" STEP="1" SHORTNAME="calcAMSL" PERSISTENT="true" PARAM="AIR_DATA_CALC_AMSL_BARO" MODULE="air_data/air_data" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="ublox">
            <dl_settings NAME="ucenter">
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_h" STEP="1" SHORTNAME="sw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_l" STEP="1" SHORTNAME="sw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_h" STEP="1" SHORTNAME="hw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_l" STEP="1" SHORTNAME="hw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_init" STEP="100" SHORTNAME="inibaud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_run" STEP="100" SHORTNAME="baud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="Hybrid Guidance">
              <dl_setting VAR="max_airspeed" STEP="1" MODULE="guidance/guidance_hybrid" MIN="4" MAX="15"/>
              <dl_setting VAR="wind_gain" STEP="1" MIN="1" MAX="256"/>
              <dl_setting VAR="horizontal_speed_gain" STEP="1" SHORTNAME="hor_speed_div" MIN="1" MAX="15"/>
              <dl_setting VAR="alt_pitch_gain" STEP="0.01" SHORTNAME="alt_pitch_gain" MIN="0" MAX="5.0"/>
              <dl_setting VAR="max_turn_bank" STEP="1.0" SHORTNAME="max_turn_bank" MIN="10.0" MAX="60.0"/>
              <dl_setting VAR="turn_bank_gain" STEP="0.01" SHORTNAME="turn_bank_gain" MIN="0.1" MAX="3.0"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="xvert">
        <description>E-flite X-VERT VTOL
* Autopilot:   xvert
* IMU:         MPU6500 + external HMC58XX
* Actuators:   2 PWM servo&apos;s, 2 escs through some proprietary atmega uart protocol
* GPS:         Ublox through I2C
* RC:          Datalink</description>
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="xvert_1.0"/>
          <define VALUE="80" NAME="BAT_CHECKER_DELAY"/>
          <define VALUE="80" NAME="CATASTROPHIC_BATTERY_KILL_DELAY"/>
          <define VALUE="const" NAME="PPRZ_TRIG_CONST"/>
          <define VALUE="1024" NAME="THD_WORKING_AREA_MAIN"/>
          <define VALUE="240" NAME="UART_THREAD_STACK_SIZE"/>
          <define VALUE="240" NAME="I2C_THREAD_STACK_SIZE"/>
          <configure VALUE="FALSE" NAME="USE_MAGNETOMETER"/>
          <module TYPE="transparent" NAME="telemetry">
            <define VALUE="57600" NAME="MODEM_BAUD"/>
          </module>
          <module TYPE="hybrid" NAME="guidance"/>
          <module NAME="motor_mixing"/>
          <module NAME="sys_mon"/>
          <module TYPE="ubx_ucenter" NAME="gps"/>
          <module NAME="send_imu_mag_current"/>
          <module NAME="air_data"/>
          <module TYPE="mpu9250_i2c" NAME="imu">
            <configure VALUE="i2c1" NAME="IMU_MPU9250_I2C_DEV"/>
            <define VALUE="FALSE" NAME="IMU_MPU9250_READ_MAG"/>
            <define VALUE="MPU9250_ADDR" NAME="IMU_MPU9250_I2C_ADDR"/>
            <define VALUE="MAG_HMC58XX_SENDER_ID" NAME="AHRS_ICQ_MAG_ID"/>
          </module>
          <module TYPE="indi_simple" NAME="stabilization"/>
          <module TYPE="float_cmpl_quat" NAME="ahrs">
            <define VALUE="FALSE" NAME="AHRS_USE_GPS_HEADING"/>
          </module>
          <module TYPE="float_invariant" NAME="ins">
            <define VALUE="500" NAME="INS_PROPAGATE_FREQUENCY"/>
            <define VALUE="MAG_HMC58XX_SENDER_ID" NAME="INS_FINV_MAG_ID"/>
          </module>
          <module TYPE="xvert" NAME="actuators">
            <define VALUE="400" NAME="SERVO_HZ"/>
          </module>
          <module TYPE="datalink" NAME="radio_control"/>
          <module TYPE="ubx_i2c" NAME="gps">
            <configure VALUE="i2c2" NAME="GPS_UBX_I2C_DEV"/>
          </module>
          <module TYPE="hmc58xx" NAME="mag">
            <configure VALUE="i2c2" NAME="MAG_HMC58XX_I2C_DEV"/>
            <define VALUE="TRUE" NAME="MODULE_HMC58XX_UPDATE_AHRS"/>
            <define VALUE="1" NAME="HMC58XX_CHAN_X"/>
            <define VALUE="0" NAME="HMC58XX_CHAN_Y"/>
            <define VALUE="2" NAME="HMC58XX_CHAN_Z"/>
            <define VALUE="-" NAME="HMC58XX_CHAN_X_SIGN"/>
            <define VALUE="+" NAME="HMC58XX_CHAN_Y_SIGN"/>
            <define VALUE="+" NAME="HMC58XX_CHAN_Z_SIGN"/>
          </module>
        </firmware>
        <section PREFIX="INS_" NAME="INS">
          <define VALUE="0.5138" NAME="H_X"/>
          <define VALUE="0.00019" NAME="H_Y"/>
          <define VALUE="0.8578" NAME="H_Z"/>
        </section>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="30" NAME="MAG_X_NEUTRAL"/>
          <define VALUE="127" NAME="MAG_Y_NEUTRAL"/>
          <define VALUE="140" NAME="MAG_Z_NEUTRAL"/>
          <define VALUE="7.11726808648" NAME="MAG_X_SENS" INTEGER="16"/>
          <define VALUE="7.09366475279" NAME="MAG_Y_SENS" INTEGER="16"/>
          <define VALUE="6.84467824688" NAME="MAG_Z_SENS" INTEGER="16"/>
          <define VALUE="-52" NAME="ACCEL_X_NEUTRAL"/>
          <define VALUE="-4" NAME="ACCEL_Y_NEUTRAL"/>
          <define VALUE="-7" NAME="ACCEL_Z_NEUTRAL"/>
          <define VALUE="2.45056441681" NAME="ACCEL_X_SENS" INTEGER="16"/>
          <define VALUE="2.44991708802" NAME="ACCEL_Y_SENS" INTEGER="16"/>
          <define VALUE="2.44199722843" NAME="ACCEL_Z_SENS" INTEGER="16"/>
          <define VALUE="90." UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="90." UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <commands>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="0"/>
        </commands>
        <servos DRIVER="Xvert">
          <servo NO="0" NEUTRAL="1200" NAME="RM" MIN="1160" MAX="1880"/>
          <servo NO="1" NEUTRAL="1200" NAME="LM" MIN="1160" MAX="1880"/>
          <servo NO="2" NEUTRAL="1500" NAME="ELEVON_RIGHT" MIN="1000" MAX="2000"/>
          <servo NO="3" NEUTRAL="1500" NAME="ELEVON_LEFT" MIN="1000" MAX="2000"/>
        </servos>
        <command_laws>
          <call FUN="motor_mixing_run(autopilot_get_motors_on(),FALSE,values)"/>
          <set VALUE="motor_mixing.commands[0]" SERVO="RM"/>
          <set VALUE="motor_mixing.commands[1]" SERVO="LM"/>
          <let VAR="aileron_feedback_left" VALUE="@YAW"/>
          <let VAR="aileron_feedback_right" VALUE="@YAW"/>
          <let VAR="elevator_feedback_left" VALUE="-@PITCH"/>
          <let VAR="elevator_feedback_right" VALUE="+@PITCH"/>
          <let VAR="forward_left" VALUE="$aileron_feedback_left + $elevator_feedback_left"/>
          <let VAR="forward_right" VALUE="$aileron_feedback_right + $elevator_feedback_right"/>
          <set VALUE="$forward_left" SERVO="ELEVON_LEFT"/>
          <set VALUE="$forward_right" SERVO="ELEVON_RIGHT"/>
        </command_laws>
        <section PREFIX="AIR_DATA_" NAME="AIR_DATA">
          <define VALUE="FALSE" NAME="CALC_AIRSPEED"/>
          <define VALUE="FALSE" NAME="CALC_TAS_FACTOR"/>
          <define VALUE="TRUE" NAME="CALC_AMSL_BARO"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="RC_SETPOINT">
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="300" UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="0" NAME="DEADBAND_A"/>
          <define VALUE="0" NAME="DEADBAND_E"/>
          <define VALUE="50" NAME="DEADBAND_R"/>
        </section>
        <section PREFIX="STABILIZATION_INDI_" NAME="STABILIZATION_ATTITUDE_INDI">
          <define VALUE="0.01292" NAME="G1_P"/>
          <define VALUE="0.014867" NAME="G1_Q"/>
          <define VALUE="0.012055" NAME="G1_R"/>
          <define VALUE="0.0" NAME="G2_R"/>
          <define VALUE="FALSE" NAME="FILTER_ROLL_RATE"/>
          <define VALUE="FALSE" NAME="FILTER_PITCH_RATE"/>
          <define VALUE="FALSE" NAME="FILTER_YAW_RATE"/>
          <define VALUE="100.0" NAME="REF_ERR_P"/>
          <define VALUE="100.0" NAME="REF_ERR_Q"/>
          <define VALUE="100.0" NAME="REF_ERR_R"/>
          <define VALUE="14.0" NAME="REF_RATE_P"/>
          <define VALUE="14.0" NAME="REF_RATE_Q"/>
          <define VALUE="14.0" NAME="REF_RATE_R"/>
          <define VALUE="3.2" NAME="FILT_CUTOFF"/>
          <define VALUE="3.2" NAME="FILT_CUTOFF_R"/>
          <define VALUE="0.04" NAME="ACT_DYN_P"/>
          <define VALUE="0.04" NAME="ACT_DYN_Q"/>
          <define VALUE="0.04" NAME="ACT_DYN_R"/>
          <define VALUE="FALSE" NAME="USE_ADAPTIVE"/>
          <define VALUE="0.0001" NAME="ADAPTIVE_MU"/>
          <define VALUE="343.77" UNIT="deg/s" NAME="STABILIZATION_INDI_MAX_RATE"/>
          <define VALUE="200" UNIT="deg/s" NAME="STABILIZATION_INDI_MAX_R"/>
          <define VALUE="TRUE" NAME="FULL_AUTHORITY"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="350" NAME="HOVER_KP"/>
          <define VALUE="85" NAME="HOVER_KD"/>
          <define VALUE="20" NAME="HOVER_KI"/>
          <define VALUE="0.6" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="TRUE" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="20" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="2" UNIT="m/s" NAME="REF_MAX_SPEED"/>
          <define VALUE="50" NAME="PGAIN"/>
          <define VALUE="100" NAME="DGAIN"/>
          <define VALUE="30" NAME="IGAIN"/>
        </section>
        <section PREFIX="NAV_" NAME="NAVIGATION">
          <define VALUE="4.5" NAME="CLIMB_VSPEED"/>
          <define VALUE="-1.0" NAME="DESCEND_VSPEED"/>
        </section>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_STARTUP"/>
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_HOVER_Z_HOLD" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_RC_DIRECT" NAME="MODE_AUTO2"/>
          <define VALUE="TRUE" NAME="NO_RC_THRUST_LIMIT"/>
        </section>
        <section NAME="BAT">
          <define VALUE="7.5" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="7.3" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="7.0" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="8.4" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
        <section PREFIX="MOTOR_MIXING_" NAME="MIXING">
          <define VALUE="0" NAME="TRIM_ROLL"/>
          <define VALUE="0" NAME="TRIM_PITCH"/>
          <define VALUE="0" NAME="TRIM_YAW"/>
          <define VALUE="2" NAME="NB_MOTOR"/>
          <define VALUE="256" NAME="SCALE"/>
          <define VALUE="{ 0, 0}" NAME="PITCH_COEF"/>
          <define VALUE="{  -256, 256 }" NAME="ROLL_COEF"/>
          <define VALUE="{ 0,  0 }" NAME="YAW_COEF"/>
          <define VALUE="{  256,  256 }" NAME="THRUST_COEF"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="3.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="3.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="2.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="2.3" NAME="WP_MOVED"/>
            <message PERIOD="2." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".75" NAME="GPS_INT"/>
            <message PERIOD=".75" NAME="INS"/>
            <message PERIOD="6.1" NAME="I2C_ERRORS"/>
            <message PERIOD="4.1" NAME="UART_ERRORS"/>
            <message PERIOD="4" NAME="SUPERBITRF"/>
            <message PERIOD="4" NAME="BLUEGIGA"/>
            <message PERIOD="3.5" NAME="ENERGY"/>
            <message PERIOD="6.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="4.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="2.3" NAME="AIR_DATA"/>
            <message PERIOD="4.5" NAME="SURVEY"/>
            <message PERIOD="0.5" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
            <message PERIOD="2" NAME="FBW_STATUS"/>
            <message PERIOD="0.1" NAME="ADC_GENERIC"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="BEBOP_ACTUATORS"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF_INT"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF_INT"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE_INT"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="19"/>
            <dl_setting VAR="autopilot.kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot.power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot.mode" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip|Guided" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="19" HANDLER="SetModeHandler"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
  </conf>
  <protocol>
    <msg_class NAME="telemetry" ID="1">
      <message NAME="AUTOPILOT_VERSION" ID="1">
        <field TYPE="uint32" NAME="version">version encoded as: MAJOR * 10000 + MINOR * 100 + PATCH</field>
        <field TYPE="char[]" NAME="desc">version description as string from paparazzi_version</field>
      </message>
      <message NAME="ALIVE" ID="2">
        <description>alive/heartbeat message containing the MD5sum of the aircraft configuration</description>
        <field TYPE="uint8[]" NAME="md5sum"></field>
      </message>
      <message NAME="PONG" ID="3">
        <description>Answer to PING datalink message, to measure latencies</description>
      </message>
      <message NAME="TAKEOFF" ID="4">
        <field UNIT="s" TYPE="uint16" NAME="cpu_time"></field>
      </message>
      <message NAME="ARDRONE_NAVDATA" ID="5">
        <field TYPE="uint16" NAME="taille"></field>
        <field TYPE="uint16" NAME="nu_trame"></field>
        <field TYPE="uint16" NAME="ax"></field>
        <field TYPE="uint16" NAME="ay"></field>
        <field TYPE="uint16" NAME="az"></field>
        <field TYPE="int16" NAME="vx"></field>
        <field TYPE="int16" NAME="vy"></field>
        <field TYPE="int16" NAME="vz"></field>
        <field TYPE="uint16" NAME="temperature_acc"></field>
        <field TYPE="uint16" NAME="temperature_gyro"></field>
        <field TYPE="uint16" NAME="ultrasound"></field>
        <field TYPE="uint16" NAME="us_debut_echo"></field>
        <field TYPE="uint16" NAME="us_fin_echo"></field>
        <field TYPE="uint16" NAME="us_association_echo"></field>
        <field TYPE="uint16" NAME="us_distance_echo"></field>
        <field TYPE="uint16" NAME="us_curve_time"></field>
        <field TYPE="uint16" NAME="us_curve_value"></field>
        <field TYPE="uint16" NAME="us_curve_ref"></field>
        <field TYPE="uint16" NAME="nb_echo"></field>
        <field TYPE="uint32" NAME="sum_echo"></field>
        <field TYPE="int16" NAME="gradient"></field>
        <field TYPE="uint16" NAME="flag_echo_ini"></field>
        <field TYPE="int32" NAME="pressure"></field>
        <field TYPE="uint16" NAME="temperature_pressure"></field>
        <field TYPE="int16" NAME="mx"></field>
        <field TYPE="int16" NAME="my"></field>
        <field TYPE="int16" NAME="mz"></field>
        <field TYPE="uint16" NAME="chksum"></field>
        <field TYPE="uint32" NAME="checksum_errors"></field>
      </message>
      <message NAME="ATTITUDE" ID="6">
        <field UNIT="rad" TYPE="float" NAME="phi" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="psi" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="theta" ALT_UNIT="deg"></field>
      </message>
      <message NAME="IR_SENSORS" ID="7">
        <field TYPE="int16" NAME="ir1"></field>
        <field TYPE="int16" NAME="ir2"></field>
        <field TYPE="int16" NAME="longitudinal"></field>
        <field TYPE="int16" NAME="lateral"></field>
        <field TYPE="int16" NAME="vertical"></field>
      </message>
      <message NAME="GPS" ID="8">
        <field UNIT="byte_mask" TYPE="uint8" NAME="mode"></field>
        <field UNIT="cm" TYPE="int32" NAME="utm_east" ALT_UNIT="m"></field>
        <field UNIT="cm" TYPE="int32" NAME="utm_north" ALT_UNIT="m"></field>
        <field UNIT="decideg" TYPE="int16" NAME="course" ALT_UNIT="deg"></field>
        <field UNIT="mm" TYPE="int32" NAME="alt" ALT_UNIT="m">Altitude above geoid (MSL)</field>
        <field UNIT="cm/s" TYPE="uint16" NAME="speed" ALT_UNIT="m/s">norm of 2d ground speed in cm/s</field>
        <field UNIT="cm/s" TYPE="int16" NAME="climb" ALT_UNIT="m/s"></field>
        <field UNIT="weeks" TYPE="uint16" NAME="week"></field>
        <field UNIT="ms" TYPE="uint32" NAME="itow"></field>
        <field TYPE="uint8" NAME="utm_zone"></field>
        <field TYPE="uint8" NAME="gps_nb_err"></field>
      </message>
      <message NAME="NAVIGATION_REF" ID="9">
        <field UNIT="m" TYPE="int32" NAME="utm_east"></field>
        <field UNIT="m" TYPE="int32" NAME="utm_north"></field>
        <field TYPE="uint8" NAME="utm_zone"></field>
        <field UNIT="m" TYPE="float" NAME="ground_alt"></field>
      </message>
      <message NAME="NAVIGATION" ID="10">
        <field TYPE="uint8" NAME="cur_block"></field>
        <field TYPE="uint8" NAME="cur_stage"></field>
        <field UNIT="m" TYPE="float" NAME="pos_x" FORMAT="%.1f"></field>
        <field UNIT="m" TYPE="float" NAME="pos_y" FORMAT="%.1f"></field>
        <field UNIT="m" TYPE="float" NAME="dist_wp" FORMAT="%.1f"></field>
        <field UNIT="m" TYPE="float" NAME="dist_home" FORMAT="%.1f"></field>
        <field UNIT="s" TYPE="uint16" NAME="flight_time"></field>
        <field UNIT="s" TYPE="uint16" NAME="block_time"></field>
        <field UNIT="s" TYPE="uint16" NAME="stage_time"></field>
        <field UNIT="bool" TYPE="uint8" NAME="kill_auto_throttle"></field>
        <field TYPE="uint8" NAME="circle_count"></field>
        <field TYPE="uint8" NAME="oval_count"></field>
      </message>
      <message NAME="PPRZ_MODE" ID="11">
        <field VALUES="MANUAL|AUTO1|AUTO2|HOME|NOGPS|FAILSAFE" TYPE="uint8" NAME="ap_mode"></field>
        <field VALUES="MANUAL|AUTO_THROTTLE|AUTO_CLIMB|AUTO_ALT" TYPE="uint8" NAME="ap_gaz"></field>
        <field VALUES="MANUAL|ROLL_RATE|ROLL|COURSE" TYPE="uint8" NAME="ap_lateral"></field>
        <field VALUES="WAYPOINT|ROUTE|CIRCLE" TYPE="uint8" NAME="ap_horizontal"></field>
        <field VALUES="NONE|DOWN|UP" TYPE="uint8" NAME="if_calib_mode"></field>
        <field VALUES="LOST|OK|REALLY_LOST" TYPE="uint8" NAME="mcu1_status"></field>
      </message>
      <message NAME="ENERGY" ID="12">
        <field UNIT="%" TYPE="uint8" NAME="throttle">Throttle setting</field>
        <field UNIT="V" TYPE="float" NAME="voltage">Input battery voltage</field>
        <field UNIT="A" TYPE="float" NAME="current">Current consumption</field>
        <field UNIT="W" TYPE="float" NAME="power">Electrical power</field>
        <field UNIT="Ah" TYPE="float" NAME="charge">Accumulated consumed charge</field>
        <field UNIT="Wh" TYPE="float" NAME="energy">Accumulated consumed energy</field>
      </message>
      <message NAME="DEBUG_MCU_LINK" ID="13">
        <field TYPE="uint8" NAME="i2c_nb_err"></field>
        <field TYPE="uint8" NAME="i2c_mcu1_nb_err"></field>
        <field TYPE="uint8" NAME="ppm_rate"></field>
      </message>
      <message NAME="CALIBRATION" ID="14">
        <field TYPE="float" NAME="climb_sum_err" FORMAT="%.1f"></field>
        <field TYPE="uint8" NAME="climb_gaz_submode"></field>
      </message>
      <message NAME="SETTINGS" ID="15">
        <field TYPE="float" NAME="slider_1_val"></field>
        <field TYPE="float" NAME="slider_2_val"></field>
      </message>
      <message NAME="DESIRED" ID="16">
        <field UNIT="rad" TYPE="float" NAME="roll" FORMAT="%.2f" ALT_UNIT_COEF="57.3" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="pitch" FORMAT="%.2f" ALT_UNIT_COEF="57.3" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="course" FORMAT="%.1f" ALT_UNIT_COEF="57.3" ALT_UNIT="deg"></field>
        <field UNIT="m" TYPE="float" NAME="x" FORMAT="%.0f"></field>
        <field UNIT="m" TYPE="float" NAME="y" FORMAT="%.0f"></field>
        <field UNIT="m" TYPE="float" NAME="altitude" FORMAT="%.0f"></field>
        <field UNIT="m/s" TYPE="float" NAME="climb" FORMAT="%.1f"></field>
        <field UNIT="m/s" TYPE="float" NAME="airspeed" FORMAT="%.1f"></field>
      </message>
      <message NAME="GPS_SOL" ID="17">
        <field UNIT="cm" TYPE="uint32" NAME="Pacc"></field>
        <field UNIT="cm/s" TYPE="uint32" NAME="Sacc"></field>
        <field TYPE="uint16" NAME="PDOP"></field>
        <field TYPE="uint8" NAME="numSV"></field>
      </message>
      <message NAME="ADC_GENERIC" ID="18">
        <field TYPE="uint16" NAME="val1"></field>
        <field TYPE="uint16" NAME="val2"></field>
      </message>
      <message NAME="ECU" ID="19">
        <field UNIT="bool" TYPE="uint8" NAME="stg_in"></field>
        <field UNIT="bool" TYPE="uint8" NAME="stb_in"></field>
        <field UNIT="V" TYPE="float" NAME="ain1"></field>
        <field UNIT="V" TYPE="float" NAME="ain2"></field>
        <field UNIT="V" TYPE="float" NAME="ain3"></field>
        <field UNIT="V" TYPE="float" NAME="ain4"></field>
      </message>
      <message NAME="CAM" ID="20">
        <field UNIT="deg" TYPE="int16" NAME="pan"></field>
        <field UNIT="deg" TYPE="int16" NAME="tilt"></field>
        <field UNIT="m" TYPE="int16" NAME="target_x"></field>
        <field UNIT="m" TYPE="int16" NAME="target_y"></field>
      </message>
      <message NAME="CIRCLE" ID="21">
        <field UNIT="m" TYPE="float" NAME="center_east"></field>
        <field UNIT="m" TYPE="float" NAME="center_north"></field>
        <field UNIT="m" TYPE="float" NAME="radius"></field>
      </message>
      <message NAME="SEGMENT" ID="22">
        <field UNIT="m" TYPE="float" NAME="segment_east_1"></field>
        <field UNIT="m" TYPE="float" NAME="segment_north_1"></field>
        <field UNIT="m" TYPE="float" NAME="segment_east_2"></field>
        <field UNIT="m" TYPE="float" NAME="segment_north_2"></field>
      </message>
      <message NAME="VECTORNAV_INFO" ID="23">
        <field UNIT="s" TYPE="float" NAME="timestamp"></field>
        <field TYPE="uint32" NAME="chksm_error"></field>
        <field TYPE="uint32" NAME="hdr_error"></field>
        <field UNIT="packets/s" TYPE="uint16" NAME="rate"></field>
        <field VALUES="NoTracking|OutOfSpecs|OK" TYPE="uint8" NAME="ins_status"></field>
        <field TYPE="uint8" NAME="ins_err"></field>
        <field UNIT="deg" TYPE="float" NAME="YprU1"></field>
        <field UNIT="deg" TYPE="float" NAME="YprU2"></field>
        <field UNIT="deg" TYPE="float" NAME="YprU3"></field>
      </message>
      <message NAME="HYBRID_GUIDANCE" ID="24">
        <field TYPE="int32" NAME="pos_x" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="pos_y" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="speed_x" ALT_UNIT_COEF="0.0000019" ALT_UNIT="m/s"></field>
        <field TYPE="int32" NAME="speed_y" ALT_UNIT_COEF="0.0000019" ALT_UNIT="m/s"></field>
        <field TYPE="int32" NAME="wind_x" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m/s"></field>
        <field TYPE="int32" NAME="wind_y" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m/s"></field>
        <field TYPE="int32" NAME="pos_err_x" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="pos_err_y" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="speed_sp_x" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m/s"></field>
        <field TYPE="int32" NAME="speed_sp_y" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m/s"></field>
        <field TYPE="int32" NAME="norm_ref_speed" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m/s"></field>
        <field TYPE="int32" NAME="heading_diff"></field>
        <field TYPE="int32" NAME="phi" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="theta" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="psi" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
      </message>
      <message NAME="SVINFO" ID="25">
        <field TYPE="uint8" NAME="chn"></field>
        <field TYPE="uint8" NAME="SVID"></field>
        <field TYPE="uint8" NAME="Flags"></field>
        <field TYPE="uint8" NAME="QI"></field>
        <field UNIT="dbHz" TYPE="uint8" NAME="CNO"></field>
        <field UNIT="deg" TYPE="int8" NAME="Elev"></field>
        <field UNIT="deg" TYPE="int16" NAME="Azim"></field>
      </message>
      <message NAME="DEBUG" ID="26">
        <field TYPE="uint8[]" NAME="msg"></field>
      </message>
      <message NAME="SURVEY" ID="27">
        <field UNIT="m" TYPE="float" NAME="east"></field>
        <field UNIT="m" TYPE="float" NAME="north"></field>
        <field UNIT="m" TYPE="float" NAME="west"></field>
        <field UNIT="m" TYPE="float" NAME="south"></field>
      </message>
      <message NAME="RSSI" ID="28">
        <field UNIT="dB" TYPE="uint8" NAME="rssi"></field>
        <field UNIT="dB" TYPE="uint8" NAME="tx_power"></field>
      </message>
      <message NAME="RANGEFINDER" ID="29">
        <field UNIT="cm" TYPE="uint16" NAME="range"></field>
        <field UNIT="m/s" TYPE="float" NAME="z_dot"></field>
        <field UNIT="m/s" TYPE="float" NAME="z_dot_sum_err"></field>
        <field UNIT="m/s" TYPE="float" NAME="z_dot_setpoint"></field>
        <field UNIT="m/s" TYPE="float" NAME="z_sum_err"></field>
        <field UNIT="m" TYPE="float" NAME="z_setpoint"></field>
        <field UNIT="bool" TYPE="uint8" NAME="flying"></field>
      </message>
      <message NAME="DATALINK_REPORT" ID="30">
        <description>Datalink status reported by an aircraft for the ground</description>
        <field UNIT="s" TYPE="uint16" NAME="uplink_lost_time"></field>
        <field TYPE="uint16" NAME="uplink_nb_msgs"></field>
        <field TYPE="uint16" NAME="downlink_nb_msgs"></field>
        <field UNIT="bytes/s" TYPE="uint16" NAME="downlink_rate"></field>
        <field UNIT="msgs/s" TYPE="uint16" NAME="uplink_rate"></field>
        <field TYPE="uint8" NAME="downlink_ovrn"></field>
      </message>
      <message NAME="DL_VALUE" ID="31">
        <field TYPE="uint8" NAME="index"></field>
        <field TYPE="float" NAME="value"></field>
      </message>
      <message NAME="MARK" ID="32">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field UNIT="deg" TYPE="float" NAME="lat"></field>
        <field UNIT="deg" TYPE="float" NAME="long"></field>
      </message>
      <message NAME="SYS_MON" ID="33">
        <field UNIT="usec" TYPE="uint16" NAME="periodic_time" ALT_UNIT_COEF="0.001" ALT_UNIT="msec"></field>
        <field UNIT="usec" TYPE="uint16" NAME="periodic_time_min" ALT_UNIT_COEF="0.001" ALT_UNIT="msec"></field>
        <field UNIT="usec" TYPE="uint16" NAME="periodic_time_max" ALT_UNIT_COEF="0.001" ALT_UNIT="msec"></field>
        <field UNIT="usec" TYPE="uint16" NAME="periodic_cycle" ALT_UNIT_COEF="0.001" ALT_UNIT="msec"></field>
        <field UNIT="usec" TYPE="uint16" NAME="periodic_cycle_min" ALT_UNIT_COEF="0.001" ALT_UNIT="msec"></field>
        <field UNIT="usec" TYPE="uint16" NAME="periodic_cycle_max" ALT_UNIT_COEF="0.001" ALT_UNIT="msec"></field>
        <field TYPE="uint16" NAME="event_number"></field>
        <field UNIT="%" TYPE="uint8" NAME="cpu_load"></field>
        <field UNIT="s" TYPE="float" NAME="cpu_time"></field>
      </message>
      <message NAME="MOTOR" ID="34">
        <field UNIT="Hz" TYPE="uint16" NAME="rpm"></field>
        <field UNIT="A" TYPE="float" NAME="current"></field>
      </message>
      <message NAME="WP_MOVED" ID="35">
        <description>      Waypoint with id wp_id has been updated/moved to the specified UTM coordinates.</description>
        <field TYPE="uint8" NAME="wp_id"></field>
        <field UNIT="m" TYPE="float" NAME="utm_east"></field>
        <field UNIT="m" TYPE="float" NAME="utm_north"></field>
        <field UNIT="m" TYPE="float" NAME="alt">Height above Mean Sea Level (geoid)</field>
        <field TYPE="uint8" NAME="utm_zone"></field>
      </message>
      <message NAME="MKK" ID="36">
        <field TYPE="uint8" NAME="nr"></field>
        <field UNIT="Poles/s" TYPE="uint8" NAME="rpm"></field>
        <field UNIT="mA" TYPE="uint8" NAME="current"></field>
        <field UNIT="deg" TYPE="int8" NAME="temp"></field>
      </message>
      <message NAME="DRAGSPEED" ID="38">
        <description>        Velocities in body axes (assuming small pitch/roll angles) as measured
        by the dragspeed module and by the INS.</description>
        <field UNIT="m/s" TYPE="float" NAME="u_est">Estimated velocity along body +x axis</field>
        <field UNIT="m/s" TYPE="float" NAME="v_est">Estimated velocity along body +y axis</field>
        <field UNIT="m/s" TYPE="float" NAME="u_ins">INS velocity along body +x axis</field>
        <field UNIT="m/s" TYPE="float" NAME="v_ins">INS velocity along body +y axis</field>
      </message>
      <message NAME="RSSI_COMBINED" ID="39">
        <field TYPE="uint8" NAME="remote_rssi"></field>
        <field TYPE="uint8" NAME="tx_power"></field>
        <field TYPE="uint8" NAME="local_rssi"></field>
        <field TYPE="uint8" NAME="local_noise"></field>
        <field TYPE="uint8" NAME="remote_noise"></field>
      </message>
      <message NAME="DCF" ID="40">
        <description>Telemetry message for monitoring the status of the Distributed Circular Formation.</description>
        <field TYPE="int16[]" NAME="table"> The size of the array is 4 x (maximum number of possible neighbors). The elements per each neighbor are: 1. ID of the neighbor, 2. Theta of the neighbor (degrees x 100), 3. Desired inter-vehicle angle (degrees x 100), 4. Last time in ms we received a msg from the neighbor</field>
        <field TYPE="int16[]" NAME="errors"> The size of the array is the maximum number of possible neighbors. Errors w.r.t. desired inter-vehicle angles (degrees x 100)</field>
      </message>
      <message NAME="ALT_KALMAN" ID="41">
        <field TYPE="float" NAME="p00"></field>
        <field TYPE="float" NAME="p01"></field>
        <field TYPE="float" NAME="p10"></field>
        <field TYPE="float" NAME="p11"></field>
      </message>
      <message NAME="ESTIMATOR" ID="42">
        <field UNIT="m" TYPE="float" NAME="z"></field>
        <field UNIT="m/s" TYPE="float" NAME="z_dot"></field>
      </message>
      <message NAME="TUNE_ROLL" ID="43">
        <field TYPE="float" NAME="p"></field>
        <field TYPE="float" NAME="phi"></field>
        <field TYPE="float" NAME="phi_sp"></field>
      </message>
      <message NAME="BARO_MS5534A" ID="44">
        <field UNIT="P" TYPE="uint32" NAME="pressure"></field>
        <field UNIT="dC" TYPE="uint16" NAME="temp"></field>
        <field UNIT="m" TYPE="float" NAME="alt"></field>
      </message>
      <message NAME="CHIRP" ID="45">
        <field TYPE="uint8" NAME="active">Chirp is active</field>
        <field TYPE="float" NAME="percentage_done">Percentage done</field>
        <field TYPE="float" NAME="current_frequency">Current frequency</field>
        <field TYPE="uint8" NAME="axis">Current chirp axis</field>
        <field TYPE="int16" NAME="amplitude">Amplitude</field>
        <field TYPE="float" NAME="fstart">Start frequency</field>
        <field TYPE="float" NAME="fstop">Stop frequency</field>
        <field TYPE="float" NAME="noise_onaxis_ratio">Noise ratio onaxis</field>
        <field TYPE="float" NAME="noise_offaxis">Noise offaxis</field>
      </message>
      <message NAME="BARO_WORDS" ID="46">
        <field TYPE="uint16" NAME="w1"></field>
        <field TYPE="uint16" NAME="w2"></field>
        <field TYPE="uint16" NAME="w3"></field>
        <field TYPE="uint16" NAME="w4"></field>
      </message>
      <message NAME="WP_MOVED_LLA" ID="47">
        <field TYPE="uint8" NAME="wp_id"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="lat" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="lon" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="mm" TYPE="int32" NAME="alt" ALT_UNIT="m">Height above Mean Sea Level (geoid)</field>
      </message>
      <message NAME="RLFILTER" ID="48">
        <description>Relative localization data for other tracked MAVs in terms of x y and z in the body axis</description>
        <field UNIT="" TYPE="int32" NAME="trackedID"></field>
        <field UNIT="dB" TYPE="float" NAME="rangearray"></field>
        <field UNIT="m/s" TYPE="float" NAME="x_tracked"></field>
        <field UNIT="m/s" TYPE="float" NAME="y_tracked"></field>
        <field UNIT="m/s" TYPE="float" NAME="vx_own"></field>
        <field UNIT="m/s" TYPE="float" NAME="vy_own"></field>
        <field UNIT="m/s" TYPE="float" NAME="vx_tracked"></field>
        <field UNIT="m/s" TYPE="float" NAME="vy_tracked"></field>
        <field UNIT="m" TYPE="float" NAME="z_pos"></field>
      </message>
      <message NAME="WP_MOVED_ENU" ID="49">
        <field TYPE="uint8" NAME="wp_id"></field>
        <field UNIT="2^8m" TYPE="int32" NAME="east" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field UNIT="2^8m" TYPE="int32" NAME="north" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field UNIT="2^8m" TYPE="int32" NAME="up" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
      </message>
      <message NAME="WINDTURBINE_STATUS_" ID="50">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field TYPE="uint8" NAME="tb_id"></field>
        <field UNIT="ms" TYPE="uint32" NAME="sync_itow"></field>
        <field UNIT="ms" TYPE="uint32" NAME="cycle_time"></field>
      </message>
      <message NAME="RC_3CH_" ID="51">
        <field UNIT="byte_mask" TYPE="uint8" NAME="throttle_mode"></field>
        <field TYPE="int8" NAME="roll"></field>
        <field TYPE="int8" NAME="pitch"></field>
      </message>
      <message NAME="MPPT" ID="52">
        <field TYPE="int16[]" NAME="values" ALT_UNIT_COEF="1e-3"></field>
      </message>
      <message NAME="DEBUG_IR_I2C" ID="53">
        <field UNIT="adc" TYPE="int16" NAME="ir1"></field>
        <field UNIT="adc" TYPE="int16" NAME="ir2"></field>
        <field UNIT="adc" TYPE="int16" NAME="top"></field>
      </message>
      <message NAME="AIRSPEED" ID="54">
        <field UNIT="m/s" TYPE="float" NAME="airspeed"></field>
        <field UNIT="m/s" TYPE="float" NAME="airspeed_sp"></field>
        <field UNIT="m/s" TYPE="float" NAME="airspeed_cnt"></field>
        <field UNIT="m/s" TYPE="float" NAME="groundspeed_sp"></field>
      </message>
      <message NAME="BARO_ETS" ID="56">
        <field TYPE="uint16" NAME="adc"></field>
        <field TYPE="uint16" NAME="offset"></field>
        <field TYPE="float" NAME="scaled"></field>
      </message>
      <message NAME="AIRSPEED_ETS" ID="57">
        <field TYPE="uint16" NAME="adc"></field>
        <field TYPE="uint16" NAME="offset"></field>
        <field TYPE="float" NAME="scaled"></field>
      </message>
      <message NAME="VISION_OUTBACK" ID="58">
        <field TYPE="uint8" NAME="status"></field>
        <field TYPE="uint8" NAME="het_moment"></field>
        <field TYPE="uint8" NAME="timeoutcount"></field>
        <field TYPE="uint8" NAME="vision_timeout"></field>
        <field TYPE="float" NAME="height"></field>
        <field TYPE="float" NAME="out_of_range"></field>
        <field TYPE="float" NAME="marker_enu_x"></field>
        <field TYPE="float" NAME="marker_enu_y"></field>
        <field TYPE="float" NAME="flow_x"></field>
        <field TYPE="float" NAME="flow_y"></field>
      </message>
      <message NAME="GPS_LLA" ID="59">
        <field UNIT="1e7deg" TYPE="int32" NAME="lat" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="lon" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="mm" TYPE="int32" NAME="alt" ALT_UNIT="m">altitude above WGS84 reference ellipsoid</field>
        <field UNIT="mm" TYPE="int32" NAME="hmsl" ALT_UNIT="m">Height above Mean Sea Level (geoid)</field>
        <field UNIT="decideg" TYPE="int16" NAME="course" ALT_UNIT="deg"></field>
        <field UNIT="cm/s" TYPE="uint16" NAME="speed" ALT_UNIT="m/s"></field>
        <field UNIT="cm/s" TYPE="int16" NAME="climb" ALT_UNIT="m/s"></field>
        <field UNIT="weeks" TYPE="uint16" NAME="week"></field>
        <field UNIT="ms" TYPE="uint32" NAME="itow"></field>
        <field UNIT="byte_mask" TYPE="uint8" NAME="mode"></field>
        <field TYPE="uint8" NAME="gps_nb_err"></field>
      </message>
      <message NAME="H_CTL_A" ID="60">
        <field TYPE="float" NAME="roll_sum_err"></field>
        <field UNIT="rad" TYPE="float" NAME="roll_sp" ALT_UNIT_COEF="57.3" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="roll_ref" ALT_UNIT_COEF="57.3" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="phi" ALT_UNIT_COEF="57.3" ALT_UNIT="deg"></field>
        <field UNIT="pprz" TYPE="int16" NAME="aileron_sp"></field>
        <field TYPE="float" NAME="pitch_sum_err"></field>
        <field UNIT="rad" TYPE="float" NAME="pitch_sp" ALT_UNIT_COEF="57.3" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="pitch_ref" ALT_UNIT_COEF="57.3" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="theta" ALT_UNIT_COEF="57.3" ALT_UNIT="deg"></field>
        <field UNIT="pprz" TYPE="int16" NAME="elevator_sp"></field>
      </message>
      <message NAME="TURB_PRESSURE_VOLTAGE" ID="62">
        <field TYPE="float" NAME="ch_1_p"></field>
        <field TYPE="float" NAME="ch_1_t"></field>
        <field TYPE="float" NAME="ch_2_p"></field>
        <field TYPE="float" NAME="ch_2_t"></field>
        <field TYPE="float" NAME="ch_3_p"></field>
        <field TYPE="float" NAME="ch_3_t"></field>
        <field TYPE="float" NAME="ch_4_p"></field>
        <field TYPE="float" NAME="ch_4_t"></field>
        <field TYPE="float" NAME="ch_5_p"></field>
        <field TYPE="float" NAME="ch_5_t"></field>
        <field TYPE="float" NAME="ch_6_p"></field>
        <field TYPE="float" NAME="ch_6_t"></field>
        <field TYPE="float" NAME="ch_7_p"></field>
        <field TYPE="float" NAME="ch_7_t"></field>
        <field TYPE="float" NAME="gnd1"></field>
        <field TYPE="float" NAME="gnd2"></field>
      </message>
      <message NAME="CAM_POINT" ID="63">
        <field UNIT="m" TYPE="uint16" NAME="cam_point_distance_from_home"></field>
        <field UNIT="deg" TYPE="float" NAME="cam_point_lat"></field>
        <field UNIT="deg" TYPE="float" NAME="cam_point_lon"></field>
      </message>
      <message NAME="DC_INFO" ID="64">
        <field UNIT="" TYPE="int16" NAME="mode"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="lat" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="lon" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="mm" TYPE="int32" NAME="alt" ALT_UNIT="m">altitude above WGS84 reference ellipsoid</field>
        <field UNIT="deg" TYPE="float" NAME="course"></field>
        <field TYPE="uint16" NAME="photo_nr"></field>
        <field UNIT="m" TYPE="float" NAME="dist"></field>
        <field UNIT="m" TYPE="float" NAME="next_dist"></field>
        <field UNIT="m" TYPE="float" NAME="start_x"></field>
        <field UNIT="m" TYPE="float" NAME="start_y"></field>
        <field UNIT="deg" TYPE="float" NAME="start_angle"></field>
        <field UNIT="deg" TYPE="float" NAME="angle"></field>
        <field TYPE="float" NAME="last_block"></field>
        <field UNIT="" TYPE="uint16" NAME="count"></field>
        <field UNIT="decisec" TYPE="uint8" NAME="shutter" ALT_UNIT_COEF="0.1" ALT_UNIT="sec"></field>
      </message>
      <message NAME="AMSYS_BARO" ID="65">
        <field TYPE="uint16" NAME="pBaroRaw"></field>
        <field UNIT="Pa" TYPE="float" NAME="pBaro"></field>
        <field UNIT="Pa" TYPE="float" NAME="pHomePressure"></field>
        <field UNIT="m" TYPE="float" NAME="AltOffset"></field>
        <field UNIT="m" TYPE="float" NAME="aktuell"></field>
        <field UNIT="m" TYPE="float" NAME="Over_Ground"></field>
        <field UNIT="°C" TYPE="float" NAME="tempBaro"></field>
      </message>
      <message NAME="AMSYS_AIRSPEED" ID="66">
        <field TYPE="uint16" NAME="asRaw"></field>
        <field UNIT="Pa" TYPE="float" NAME="asPresure"></field>
        <field UNIT="m/s" TYPE="float" NAME="asAirspeed"></field>
        <field UNIT="m/s" TYPE="float" NAME="asAirsFilt"></field>
        <field UNIT="°C" TYPE="float" NAME="asTemp"></field>
      </message>
      <message NAME="FLIGHT_BENCHMARK" ID="67">
        <field TYPE="float" NAME="SE_As"></field>
        <field TYPE="float" NAME="SE_Alt"></field>
        <field TYPE="float" NAME="SE_Pos"></field>
        <field TYPE="float" NAME="Err_As"></field>
        <field TYPE="float" NAME="Err_Alt"></field>
        <field TYPE="float" NAME="Err_Pos"></field>
      </message>
      <message NAME="MPL3115_BARO" ID="68">
        <field TYPE="uint32" NAME="pressure" ALT_UNIT_COEF="0.25" ALT_UNIT="Pa"></field>
        <field TYPE="int16" NAME="temp" ALT_UNIT_COEF="0.0625" ALT_UNIT="degC"></field>
        <field UNIT="m" TYPE="float" NAME="alt"></field>
      </message>
      <message NAME="AOA" ID="69">
        <field TYPE="uint32" NAME="raw"></field>
        <field UNIT="rad" TYPE="float" NAME="angle" ALT_UNIT="deg"></field>
      </message>
      <message NAME="XTEND_RSSI" ID="70">
        <field UNIT="s" TYPE="uint16" NAME="datalink_time"></field>
        <field UNIT="dB" TYPE="uint8" NAME="rssi_fade_margin"></field>
        <field UNIT="%" TYPE="uint8" NAME="duty"></field>
      </message>
      <message NAME="GVF" ID="71">
        <description>      Information about the trajectory followed by the Guidance Vector Field algorithm.</description>
        <field TYPE="float" NAME="error">Error index e, i.e. &apos;distance&apos; to the trajectory</field>
        <field TYPE="uint8" NAME="traj">Kind of trajectory</field>
        <field VALUES="1|-1" TYPE="int8" NAME="s">Direction to be followed</field>
        <field TYPE="float" NAME="ke">Gain for the vector field convergence</field>
        <field TYPE="float[]" NAME="p">Parameters describing the trajectory</field>
      </message>
      <message NAME="SUPERBITRF" ID="72">
        <field VALUES="UNINIT|INIT_BINDING|INIT_TRANSFER|BINDING|SYNCING_A|SYNCING_B|TRANSFER" TYPE="uint8" NAME="status"></field>
        <field VALUES="UNINIT|IDLE|GET_MFG_ID|MULTIWRITE|DATA_CODE|CHAN_SOP_DATA_CRC|RX_IRQ_STATUS_PACKET|SEND" TYPE="uint8" NAME="cyrf_status"></field>
        <field TYPE="uint32" NAME="irq_count"></field>
        <field TYPE="uint32" NAME="rx_packet_count"></field>
        <field TYPE="uint32" NAME="tx_packet_count"></field>
        <field TYPE="uint32" NAME="transfer_timeouts"></field>
        <field TYPE="uint32" NAME="resync_count"></field>
        <field TYPE="uint32" NAME="uplink_count"></field>
        <field TYPE="uint32" NAME="rc_count"></field>
        <field TYPE="uint32" NAME="timing1"></field>
        <field TYPE="uint32" NAME="timing2"></field>
        <field TYPE="uint32" NAME="bind_mfg_id"></field>
        <field TYPE="uint8[]" NAME="mfg_id"></field>
      </message>
      <message NAME="GX3_INFO" ID="73">
        <field UNIT="hz" TYPE="float" NAME="GX3_freq"></field>
        <field TYPE="uint32" NAME="chksm_error"></field>
        <field TYPE="uint32" NAME="hdr_error"></field>
        <field TYPE="uint16" NAME="GX3_chksm"></field>
      </message>
      <message NAME="UBLOX_INFO" ID="74">
        <field TYPE="uint32" NAME="baud"></field>
        <field TYPE="uint8" NAME="ver_sw_h"></field>
        <field TYPE="uint8" NAME="ver_sw_l"></field>
        <field TYPE="uint16" NAME="ver_hw_h"></field>
        <field TYPE="uint16" NAME="ver_hw_l"></field>
        <field TYPE="uint8" NAME="sbas"></field>
        <field VALUES="NONE|GPS|GLONAS|GPS+GLONAS|BEIDOU|GPS+BEIDOU|GLONAS+BEIDOU|GPS+GLONAS+BEIDOU|GALILEO" TYPE="uint8" NAME="gnss"></field>
      </message>
      <message NAME="INV_FILTER" ID="78">
        <field TYPE="float" NAME="quat"></field>
        <field UNIT="rad" TYPE="float" NAME="phi_inv" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="theta_inv" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="psi_inv" ALT_UNIT="deg"></field>
        <field UNIT="m/s" TYPE="float" NAME="Vx_inv"></field>
        <field UNIT="m/s" TYPE="float" NAME="Vy_inv"></field>
        <field UNIT="m/s" TYPE="float" NAME="Vz_inv"></field>
        <field UNIT="m" TYPE="float" NAME="Px_inv"></field>
        <field UNIT="m" TYPE="float" NAME="Py_inv"></field>
        <field UNIT="m" TYPE="float" NAME="Pz_inv"></field>
        <field UNIT="rad/s" TYPE="float" NAME="bias_phi" ALT_UNIT="deg/s"></field>
        <field UNIT="rad/s" TYPE="float" NAME="bias_theta" ALT_UNIT="deg/s"></field>
        <field UNIT="rad/s" TYPE="float" NAME="bias_psi" ALT_UNIT="deg/s"></field>
        <field TYPE="float" NAME="bias_as"></field>
        <field TYPE="float" NAME="bias_hb"></field>
        <field UNIT="m" TYPE="float" NAME="meas_baro"></field>
        <field UNIT="m" TYPE="float" NAME="meas_gps"></field>
      </message>
      <message NAME="MISSION_STATUS" ID="79">
        <field TYPE="float" NAME="remaining_time"></field>
        <field TYPE="uint8[]" NAME="index_list"></field>
      </message>
      <message NAME="JEVOIS" ID="80">
        <description>        Debug message for the JeVois smart camera
        corresponding to the standardized messages</description>
        <field TYPE="uint8" NAME="type">Standardized message type JEVOIS_MSG_[T1|N1|D1|T2|N2|D2|F2|T3|N3|D3|F3]</field>
        <field TYPE="char[]" NAME="id">Text string describing the reported object</field>
        <field TYPE="uint8" NAME="nb">Number of elements in the coordinates array</field>
        <field TYPE="int16[]" NAME="coord">List of coordinates corresponding to 1D, 2D or 3D messages</field>
        <field TYPE="uint16[3]" NAME="dim">1, 2 or 3D dimension</field>
        <field TYPE="float[4]" NAME="quat">Quaternion that relates the object&apos;s frame to the camera&apos;s frame, if appropriate</field>
      </message>
      <message NAME="GENERIC_COM" ID="81">
        <field UNIT="1e7deg" TYPE="int32" NAME="lat" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="lon" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="m" TYPE="int16" NAME="alt"></field>
        <field UNIT="cm/s" TYPE="uint16" NAME="gspeed" ALT_UNIT="m/s"></field>
        <field UNIT="decideg" TYPE="int16" NAME="course" ALT_UNIT="deg"></field>
        <field UNIT="cm/s" TYPE="uint16" NAME="airspeed" ALT_UNIT="m/s"></field>
        <field UNIT="deciV" TYPE="uint8" NAME="vsupply"></field>
        <field UNIT="deciAh" TYPE="uint8" NAME="charge"></field>
        <field UNIT="%" TYPE="uint8" NAME="throttle"></field>
        <field TYPE="uint8" NAME="ap_mode"></field>
        <field TYPE="uint8" NAME="nav_block"></field>
        <field UNIT="s" TYPE="uint16" NAME="flight_time"></field>
      </message>
      <message NAME="FORMATION_SLOT_TM" ID="82">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field TYPE="uint8" NAME="mode"></field>
        <field UNIT="m" TYPE="float" NAME="slot_east" FORMAT="%.1f"></field>
        <field UNIT="m" TYPE="float" NAME="slot_north" FORMAT="%.1f"></field>
        <field UNIT="m" TYPE="float" NAME="slot_alt" FORMAT="%.1f"></field>
      </message>
      <message NAME="FORMATION_STATUS_TM" ID="83">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field TYPE="uint8" NAME="leader_id"></field>
        <field TYPE="uint8" NAME="status"></field>
      </message>
      <message NAME="BMP_STATUS" ID="84">
        <field TYPE="int32" NAME="UP"></field>
        <field TYPE="int32" NAME="UT"></field>
        <field UNIT="Pa" TYPE="int32" NAME="press"></field>
        <field UNIT="10x_deg_celsius" TYPE="int32" NAME="temp"></field>
      </message>
      <message NAME="MLX_STATUS" ID="85">
        <field TYPE="uint16" NAME="itemp_case"></field>
        <field UNIT="deg_celsius" TYPE="float" NAME="temp_case" FORMAT="%.2f"></field>
        <field TYPE="uint16" NAME="itemp_obj"></field>
        <field UNIT="deg_celsius" TYPE="float" NAME="temp_obj" FORMAT="%.2f"></field>
      </message>
      <message NAME="TMP_STATUS" ID="86">
        <field TYPE="uint16" NAME="itemp"></field>
        <field UNIT="deg_celsius" TYPE="float" NAME="temp" FORMAT="%.2f"></field>
      </message>
      <message NAME="WIND_INFO_RET" ID="87">
        <description>      Wind information returned to the ground station.
      The wind is reported as a vector, it gives the direction the wind is blowing to.
      This can be used to acknowledge data comming from the ground wind estimator
      or from an embedded algorithm.
      Flags field definition:
      - bit 0: horizontal wind is valid (east and north fields)
      - bit 1: vertical wind is valid (up field)
      - bit 2: airspeed is valid</description>
        <field TYPE="uint8" NAME="flags">bit 0: horizontal wind, bit 1: vertical wind: bit 2: airspeed</field>
        <field UNIT="m/s" TYPE="float" NAME="east">east component of the wind</field>
        <field UNIT="m/s" TYPE="float" NAME="north">north component of the wind</field>
        <field UNIT="m/s" TYPE="float" NAME="up">vertical component of the wind</field>
        <field UNIT="m/s" TYPE="float" NAME="airspeed">local airspeed norm</field>
      </message>
      <message NAME="SCP_STATUS" ID="88">
        <field UNIT="Pa" TYPE="uint32" NAME="press"></field>
        <field UNIT="100x_deg_celsius" TYPE="int16" NAME="temp"></field>
      </message>
      <message NAME="SHT_STATUS" ID="89">
        <field TYPE="uint16" NAME="ihumid"></field>
        <field TYPE="uint16" NAME="itemp"></field>
        <field UNIT="rel_hum" TYPE="float" NAME="humid" FORMAT="%.2f"></field>
        <field UNIT="deg_celsius" TYPE="float" NAME="temp" FORMAT="%.2f"></field>
      </message>
      <message NAME="VISION_POSITION_ESTIMATE" ID="90">
        <description>Generic message to send position measurement from computer vision</description>
        <field TYPE="uint16" NAME="cnt">Counter</field>
        <field TYPE="float" NAME="x">X</field>
        <field TYPE="float" NAME="y">Y</field>
        <field TYPE="float" NAME="z">Z</field>
        <field TYPE="float" NAME="quality">Detection Quality or Uncertainty</field>
        <field TYPE="float" NAME="extra">In case the default message does not suit you</field>
      </message>
      <message NAME="DPICCO_STATUS" ID="91">
        <field TYPE="uint16" NAME="humid"></field>
        <field TYPE="uint16" NAME="temp"></field>
        <field UNIT="rel_hum" TYPE="float" NAME="fhumid" FORMAT="%.2f"></field>
        <field UNIT="deg_celsius" TYPE="float" NAME="ftemp" FORMAT="%.2f"></field>
      </message>
      <message NAME="LOGGER_STATUS" ID="92">
        <description>        Logger status and error id (dependent of the logging system)</description>
        <field VALUES="STOPPED|RUNNING|ERROR" TYPE="uint8" NAME="status">General status of the logger</field>
        <field TYPE="uint8" NAME="errno">Error number, depend of the logging system, provides detailed information</field>
        <field UNIT="bytes" TYPE="uint32" NAME="used">Accumulated number of bytes written by the logger</field>
        <field TYPE="char[]" NAME="filenames">The filenames currently in use by the logger (First sdlog, second Flight recorder for chibios)</field>
      </message>
      <message NAME="MOTOR_BENCH_STATUS" ID="94">
        <field TYPE="uint32" NAME="time_ticks"></field>
        <field TYPE="float" NAME="throttle" FORMAT="%.3f"></field>
        <field TYPE="float" NAME="rpm"></field>
        <field TYPE="float" NAME="current"></field>
        <field TYPE="float" NAME="thrust"></field>
        <field TYPE="float" NAME="torque"></field>
        <field TYPE="uint16" NAME="time_s"></field>
        <field TYPE="uint8" NAME="mode"></field>
      </message>
      <message NAME="HIH_STATUS" ID="96">
        <field TYPE="uint16" NAME="humid"></field>
        <field UNIT="rel_hum" TYPE="float" NAME="fhumid" FORMAT="%.2f"></field>
        <field UNIT="deg_celsius" TYPE="float" NAME="ftemp" FORMAT="%.2f"></field>
      </message>
      <message NAME="TEMT_STATUS" ID="97">
        <field TYPE="uint16" NAME="light"></field>
        <field UNIT="percent" TYPE="float" NAME="f_light" FORMAT="%.2f"></field>
      </message>
      <message NAME="GP2Y_STATUS" ID="98">
        <field TYPE="uint16" NAME="idensity"></field>
        <field UNIT="mg/m3" TYPE="float" NAME="density" FORMAT="%.2f"></field>
      </message>
      <message NAME="SHT_I2C_SERIAL" ID="99">
        <field TYPE="uint32" NAME="serial0"></field>
        <field TYPE="uint32" NAME="serial1"></field>
      </message>
      <message NAME="PPM" ID="100">
        <field TYPE="uint8" NAME="ppm_rate"></field>
        <field UNIT="usec" TYPE="uint16[]" NAME="values"></field>
      </message>
      <message NAME="RC" ID="101">
        <field UNIT="pprz" TYPE="int16[]" NAME="values" FORMAT="%d"></field>
      </message>
      <message NAME="COMMANDS" ID="102">
        <field UNIT="ticks" TYPE="int16[]" NAME="values"></field>
      </message>
      <message NAME="FBW_STATUS" ID="103">
        <field VALUES="OK|LOST|REALLY_LOST" TYPE="uint8" NAME="rc_status"></field>
        <field UNIT="Hz" TYPE="uint8" NAME="frame_rate"></field>
        <field VALUES="MANUAL|AUTO|FAILSAFE" TYPE="uint8" NAME="mode"></field>
        <field UNIT="V" TYPE="float" NAME="vsupply"></field>
        <field UNIT="A" TYPE="float" NAME="current"></field>
      </message>
      <message NAME="ADC" ID="104">
        <field VALUES="FBW|AP" TYPE="uint8" NAME="mcu"></field>
        <field UNIT="none" TYPE="uint16[]" NAME="values"></field>
      </message>
      <message NAME="ACTUATORS" ID="105">
        <field UNIT="none" TYPE="int16[]" NAME="values"></field>
      </message>
      <message NAME="BLUEGIGA" ID="106">
        <field UNIT="bytes/s" TYPE="uint32" NAME="data_rate"></field>
        <field TYPE="uint32" NAME="A2A_msg_rate"></field>
      </message>
      <message NAME="THROTTLE_CURVE" ID="107">
        <field TYPE="uint8" NAME="curve"></field>
        <field TYPE="uint16" NAME="throttle"></field>
        <field TYPE="int16" NAME="collective"></field>
        <field TYPE="uint16" NAME="rpm_sp"></field>
        <field TYPE="uint16" NAME="rpm_meas"></field>
        <field TYPE="float" NAME="rpm_err_sum"></field>
      </message>
      <message NAME="PIKSI_HEARTBEAT" ID="108">
        <field TYPE="uint32" NAME="heartbeat"></field>
      </message>
      <message NAME="MULTIGAZE_METERS" ID="109">
        <field TYPE="float[]" NAME="multigaze_meters"></field>
      </message>
      <message NAME="DC_SHOT" ID="110">
        <field TYPE="int16" NAME="photo_nr"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="lat" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg">Gedetic latitude</field>
        <field UNIT="1e7deg" TYPE="int32" NAME="lon" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg">Longitude</field>
        <field UNIT="mm" TYPE="int32" NAME="alt" ALT_UNIT="m">altitude above WGS84 reference ellipsoid</field>
        <field UNIT="mm" TYPE="int32" NAME="hmsl" ALT_UNIT="m">Height above Mean Sea Level (geoid)</field>
        <field UNIT="decideg" TYPE="int16" NAME="phi">Euler angle around x-axis (roll)</field>
        <field UNIT="decideg" TYPE="int16" NAME="theta">Euler angle around y-axis (pitch)</field>
        <field UNIT="decideg" TYPE="int16" NAME="psi">Euler angle around z-axis (yaw)</field>
        <field UNIT="decideg" TYPE="int16" NAME="course">Course over ground (CW/north)</field>
        <field UNIT="cm/s" TYPE="uint16" NAME="speed">horizontal ground speed</field>
        <field UNIT="ms" TYPE="uint32" NAME="itow">GPS time of week</field>
      </message>
      <message NAME="CAMERA_PAYLOAD" ID="111">
        <field UNIT="s" TYPE="float" NAME="timestamp">Payload computer seconds since startup</field>
        <field UNIT="%" TYPE="uint8" NAME="used_memory">Percentage of used memory (RAM) of the payload computer rounded up to whole percent</field>
        <field UNIT="%" TYPE="uint8" NAME="used_disk">Percentage of used disk of the payload computer rounded up to whole percent</field>
        <field VALUES="UNKNOWN|CLOSE|OPEN" TYPE="uint8" NAME="door_status">Payload door open/close</field>
        <field VALUES="NONE|CAMERA_ERR|DOOR_ERR" TYPE="uint8" NAME="error_code">Error codes of the payload</field>
      </message>
      <message NAME="MOTOR_MIXING" ID="112">
        <field UNIT="none" TYPE="int16[]" NAME="values"></field>
      </message>
      <message NAME="MLX_SERIAL" ID="113">
        <field TYPE="uint32" NAME="serial0"></field>
        <field TYPE="uint32" NAME="serial1"></field>
      </message>
      <message NAME="PAYLOAD" ID="114">
        <field UNIT="none" TYPE="uint8[]" NAME="values"></field>
      </message>
      <message NAME="HTM_STATUS" ID="115">
        <field TYPE="uint16" NAME="ihumid"></field>
        <field TYPE="uint16" NAME="itemp"></field>
        <field UNIT="rel_hum" TYPE="float" NAME="humid" FORMAT="%.2f"></field>
        <field UNIT="deg_celsius" TYPE="float" NAME="temp" FORMAT="%.2f"></field>
      </message>
      <message NAME="BARO_MS5611" ID="116">
        <field TYPE="uint32" NAME="d1"></field>
        <field TYPE="uint32" NAME="d2"></field>
        <field UNIT="hPa" TYPE="float" NAME="pressure" FORMAT="%.2f"></field>
        <field UNIT="deg_celsius" TYPE="float" NAME="temp" FORMAT="%.2f"></field>
      </message>
      <message NAME="MS5611_COEFF" ID="117">
        <field TYPE="uint16" NAME="c0"></field>
        <field TYPE="uint16" NAME="c1"></field>
        <field TYPE="uint16" NAME="c2"></field>
        <field TYPE="uint16" NAME="c3"></field>
        <field TYPE="uint16" NAME="c4"></field>
        <field TYPE="uint16" NAME="c5"></field>
        <field TYPE="uint16" NAME="c6"></field>
        <field TYPE="uint16" NAME="c7"></field>
      </message>
      <message NAME="ATMOSPHERE_CHARGE" ID="118">
        <field TYPE="uint16" NAME="t0"></field>
        <field TYPE="uint16" NAME="t1"></field>
        <field TYPE="uint16" NAME="t2"></field>
        <field TYPE="uint16" NAME="t3"></field>
        <field TYPE="uint16" NAME="t4"></field>
        <field TYPE="uint16" NAME="t5"></field>
        <field TYPE="uint16" NAME="t6"></field>
        <field TYPE="uint16" NAME="t7"></field>
        <field TYPE="uint16" NAME="t8"></field>
        <field TYPE="uint16" NAME="t9"></field>
      </message>
      <message NAME="SOLAR_RADIATION" ID="119">
        <field TYPE="uint16" NAME="up_t0"></field>
        <field TYPE="uint16" NAME="dn_t0"></field>
        <field TYPE="uint16" NAME="up_t1"></field>
        <field TYPE="uint16" NAME="dn_t1"></field>
        <field TYPE="uint16" NAME="up_t2"></field>
        <field TYPE="uint16" NAME="dn_t2"></field>
        <field TYPE="uint16" NAME="up_t3"></field>
        <field TYPE="uint16" NAME="dn_t3"></field>
        <field TYPE="uint16" NAME="up_t4"></field>
        <field TYPE="uint16" NAME="dn_t4"></field>
        <field TYPE="uint16" NAME="up_t5"></field>
        <field TYPE="uint16" NAME="dn_t5"></field>
        <field TYPE="uint16" NAME="up_t6"></field>
        <field TYPE="uint16" NAME="dn_t6"></field>
        <field TYPE="uint16" NAME="up_t7"></field>
        <field TYPE="uint16" NAME="dn_t7"></field>
        <field TYPE="uint16" NAME="up_t8"></field>
        <field TYPE="uint16" NAME="dn_t8"></field>
        <field TYPE="uint16" NAME="up_t9"></field>
        <field TYPE="uint16" NAME="dn_t9"></field>
      </message>
      <message NAME="TCAS_TA" ID="120">
        <field TYPE="uint8" NAME="ac_id"></field>
      </message>
      <message NAME="TCAS_RA" ID="121">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field VALUES="NONE|LEVEL|CLIMB|DESCEND" TYPE="uint8" NAME="resolve"></field>
      </message>
      <message NAME="TCAS_RESOLVED" ID="122">
        <field TYPE="uint8" NAME="ac_id"></field>
      </message>
      <message NAME="TCAS_DEBUG" ID="123">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field TYPE="float" NAME="tau"></field>
      </message>
      <message NAME="POTENTIAL" ID="124">
        <field TYPE="float" NAME="east"></field>
        <field TYPE="float" NAME="north"></field>
        <field TYPE="float" NAME="alt"></field>
        <field TYPE="float" NAME="speed"></field>
        <field TYPE="float" NAME="climb"></field>
      </message>
      <message NAME="COPILOT_STATUS" ID="125">
        <field UNIT="s" TYPE="float" NAME="timestamp">Mission computer seconds since startup</field>
        <field UNIT="%" TYPE="uint8" NAME="used_memory">Percentage of used memory (RAM) of the mission computer rounded up to whole percent</field>
        <field UNIT="%" TYPE="uint8" NAME="used_disk">Percentage of used disk of the mission computer rounded up to whole percent</field>
        <field VALUES="UNKNOWN|INIT|LOGGING|FAULT" TYPE="uint8" NAME="status">Mission computer status</field>
        <field VALUES="NONE|IO_ERROR" TYPE="uint8" NAME="error_code">Error codes of the mission computer</field>
      </message>
      <message NAME="TEMP_TCOUPLE" ID="126">
        <field TYPE="float" NAME="fval0"></field>
        <field TYPE="float" NAME="fval1"></field>
        <field TYPE="float" NAME="fval2"></field>
        <field TYPE="float" NAME="fval3"></field>
        <field TYPE="float" NAME="fref0"></field>
        <field TYPE="float" NAME="fref1"></field>
        <field TYPE="float" NAME="fref2"></field>
        <field TYPE="float" NAME="fref3"></field>
        <field TYPE="uint16" NAME="val0"></field>
        <field TYPE="uint16" NAME="val1"></field>
        <field TYPE="uint16" NAME="val2"></field>
        <field TYPE="uint16" NAME="val3"></field>
        <field TYPE="uint16" NAME="ref0"></field>
        <field TYPE="uint16" NAME="ref1"></field>
        <field TYPE="uint16" NAME="ref2"></field>
        <field TYPE="uint16" NAME="ref3"></field>
      </message>
      <message NAME="SHT_I2C_STATUS" ID="127">
        <field TYPE="uint16" NAME="ihumid"></field>
        <field TYPE="uint16" NAME="itemp"></field>
        <field UNIT="rel_hum" TYPE="float" NAME="humid" FORMAT="%.2f"></field>
        <field UNIT="deg_celsius" TYPE="float" NAME="temp" FORMAT="%.2f"></field>
      </message>
      <message NAME="CAMERA_SNAPSHOT" ID="128">
        <field TYPE="uint16" NAME="camera_id">Unique camera ID - consists of make,model and camera index</field>
        <field VALUES="UNKNOWN|OK|ERROR" TYPE="uint8" NAME="camera_state">State of the given camera</field>
        <field TYPE="uint16" NAME="snapshot_image_number">Snapshot number in sequence</field>
        <field UNIT="bool" TYPE="uint8" NAME="snapshot_valid">Flag checking whether the last snapshot was valid</field>
        <field UNIT="deg_celsius" TYPE="float" NAME="lens_temp" FORMAT="%.2f">Lens temperature, NaN if not measured</field>
        <field UNIT="deg_celsius" TYPE="float" NAME="array_temp" FORMAT="%.2f">Imager sensor temperature, NaN if not measured</field>
      </message>
      <message NAME="TIMESTAMP" ID="129">
        <field TYPE="uint32" NAME="timestamp"></field>
      </message>
      <message NAME="STAB_ATTITUDE_FLOAT" ID="130">
        <field TYPE="float" NAME="est_p" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s"></field>
        <field TYPE="float" NAME="est_q" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s"></field>
        <field TYPE="float" NAME="est_r" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s"></field>
        <field TYPE="float" NAME="est_phi" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field TYPE="float" NAME="est_theta" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field TYPE="float" NAME="est_psi" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field TYPE="float" NAME="ref_phi" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field TYPE="float" NAME="ref_theta" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field TYPE="float" NAME="ref_psi" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field TYPE="float" NAME="sum_err_phi"></field>
        <field TYPE="float" NAME="sum_err_theta"></field>
        <field TYPE="float" NAME="sum_err_psi"></field>
        <field TYPE="float" NAME="delta_a_fb" ALT_UNIT_COEF="0.0000153" ALT_UNIT="motor"></field>
        <field TYPE="float" NAME="delta_e_fb" ALT_UNIT_COEF="0.0000153" ALT_UNIT="motor"></field>
        <field TYPE="float" NAME="delta_r_fb" ALT_UNIT_COEF="0.0000153" ALT_UNIT="motor"></field>
        <field TYPE="float" NAME="delta_a_ff" ALT_UNIT_COEF="0.0000153" ALT_UNIT="motor"></field>
        <field TYPE="float" NAME="delta_e_ff" ALT_UNIT_COEF="0.0000153" ALT_UNIT="motor"></field>
        <field TYPE="float" NAME="delta_r_ff" ALT_UNIT_COEF="0.0000153" ALT_UNIT="motor"></field>
        <field TYPE="int32" NAME="delta_a"></field>
        <field TYPE="int32" NAME="delta_e"></field>
        <field TYPE="int32" NAME="delta_r"></field>
        <field TYPE="float" NAME="est_p_d" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s^2"></field>
        <field TYPE="float" NAME="est_q_d" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s^2"></field>
        <field TYPE="float" NAME="est_r_d" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s^2"></field>
      </message>
      <message NAME="IMU_GYRO_SCALED" ID="131">
        <field TYPE="int32" NAME="gp" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg/s"></field>
        <field TYPE="int32" NAME="gq" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg/s"></field>
        <field TYPE="int32" NAME="gr" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg/s"></field>
      </message>
      <message NAME="IMU_ACCEL_SCALED" ID="132">
        <field TYPE="int32" NAME="ax" ALT_UNIT_COEF="0.0009766" ALT_UNIT="m/s2"></field>
        <field TYPE="int32" NAME="ay" ALT_UNIT_COEF="0.0009766" ALT_UNIT="m/s2"></field>
        <field TYPE="int32" NAME="az" ALT_UNIT_COEF="0.0009766" ALT_UNIT="m/s2"></field>
      </message>
      <message NAME="IMU_MAG_SCALED" ID="133">
        <field TYPE="int32" NAME="mx" ALT_UNIT_COEF="0.0004883" ALT_UNIT="1"></field>
        <field TYPE="int32" NAME="my" ALT_UNIT_COEF="0.0004883" ALT_UNIT="1"></field>
        <field TYPE="int32" NAME="mz" ALT_UNIT_COEF="0.0004883" ALT_UNIT="1"></field>
      </message>
      <message NAME="FILTER" ID="134">
        <field TYPE="int32" NAME="phi" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="theta" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="psi" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="measure_phi" ALT_UNIT_COEF="0.0000273" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="measure_theta" ALT_UNIT_COEF="0.0000273" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="measure_psi" ALT_UNIT_COEF="0.0000273" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="corrected_phi" ALT_UNIT_COEF="0.0000273" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="corrected_theta" ALT_UNIT_COEF="0.0000273" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="corrected_psi" ALT_UNIT_COEF="0.0000273" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="correction_phi"></field>
        <field TYPE="int32" NAME="correction_theta"></field>
        <field TYPE="int32" NAME="correction_psi"></field>
        <field TYPE="int32" NAME="bp"></field>
        <field TYPE="int32" NAME="bq"></field>
        <field TYPE="int32" NAME="br"></field>
        <field VALUES="NONE|GENERIC|IR|ICQ|ICE|FC|DCM|FINV|MLKF|GX3|CHIMU|VN" TYPE="uint8" NAME="comp_id"></field>
      </message>
      <message NAME="RATE_LOOP" ID="136">
        <description>Rotorcraft rate control loop.</description>
        <field UNIT="rad/s" TYPE="float" NAME="sp_p" ALT_UNIT="deg/s">rate setpoint</field>
        <field UNIT="rad/s" TYPE="float" NAME="sp_q" ALT_UNIT="deg/s">rate setpoint</field>
        <field UNIT="rad/s" TYPE="float" NAME="sp_r" ALT_UNIT="deg/s">rate setpoint</field>
        <field TYPE="float" NAME="sumerr_p">integrated quaternion error</field>
        <field TYPE="float" NAME="sumerr_q">integrated quaternion error</field>
        <field TYPE="float" NAME="sumerr_r">integrated quaternion error</field>
        <field TYPE="float" NAME="fb_p">feedback command on pitch (pprz scale)</field>
        <field TYPE="float" NAME="fb_q">feedback command on roll  (pprz scale)</field>
        <field TYPE="float" NAME="fb_r">feedback command on yaw   (pprz scale)</field>
        <field TYPE="int32" NAME="delta_t">thrust command</field>
      </message>
      <message NAME="FILTER_ALIGNER" ID="137">
        <field TYPE="int32" NAME="lp_gp" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg/s"></field>
        <field TYPE="int32" NAME="lp_gq" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg/s"></field>
        <field TYPE="int32" NAME="lp_gr" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg/s"></field>
        <field TYPE="int32" NAME="gp" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg/s"></field>
        <field TYPE="int32" NAME="gq" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg/s"></field>
        <field TYPE="int32" NAME="gr" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg/s"></field>
        <field TYPE="int32" NAME="noise"></field>
        <field TYPE="int32" NAME="cnt"></field>
        <field VALUES="UNINIT|RUNNING|LOCKED" TYPE="uint8" NAME="status"></field>
      </message>
      <message NAME="AIRSPEED_MS45XX" ID="138">
        <field UNIT="Pa" TYPE="float" NAME="diffPress"></field>
        <field UNIT="0.1 deg_celcius" TYPE="int16" NAME="temperature" ALT_UNIT_COEF="0.1" ALT_UNIT="deg_celcius"></field>
        <field UNIT="m/s" TYPE="float" NAME="airspeed"></field>
      </message>
      <message NAME="STAB_ATTITUDE_INT" ID="140">
        <field TYPE="int32" NAME="est_p" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg/s"></field>
        <field TYPE="int32" NAME="est_q" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg/s"></field>
        <field TYPE="int32" NAME="est_r" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg/s"></field>
        <field TYPE="int32" NAME="est_phi" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="est_theta" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="est_psi" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="sp_phi" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="sp_theta" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="sp_psi" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="sum_err_phi"></field>
        <field TYPE="int32" NAME="sum_err_theta"></field>
        <field TYPE="int32" NAME="sum_err_psi"></field>
        <field TYPE="int32" NAME="delta_a_fb" ALT_UNIT_COEF="0.0000153"></field>
        <field TYPE="int32" NAME="delta_e_fb" ALT_UNIT_COEF="0.0000153"></field>
        <field TYPE="int32" NAME="delta_r_fb" ALT_UNIT_COEF="0.0000153"></field>
        <field TYPE="int32" NAME="delta_a_ff" ALT_UNIT_COEF="0.0000153"></field>
        <field TYPE="int32" NAME="delta_e_ff" ALT_UNIT_COEF="0.0000153"></field>
        <field TYPE="int32" NAME="delta_r_ff" ALT_UNIT_COEF="0.0000153"></field>
        <field TYPE="int32" NAME="delta_a"></field>
        <field TYPE="int32" NAME="delta_e"></field>
        <field TYPE="int32" NAME="delta_r"></field>
      </message>
      <message NAME="STAB_ATTITUDE_REF_INT" ID="141">
        <field TYPE="int32" NAME="sp_phi" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="sp_theta" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="sp_psi" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="ref_phi" ALT_UNIT_COEF="0.0000546" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="ref_theta" ALT_UNIT_COEF="0.0000546" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="ref_psi" ALT_UNIT_COEF="0.0000546" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="ref_p" ALT_UNIT_COEF="0.0008743" ALT_UNIT="deg/s"></field>
        <field TYPE="int32" NAME="ref_q" ALT_UNIT_COEF="0.0008743" ALT_UNIT="deg/s"></field>
        <field TYPE="int32" NAME="ref_r" ALT_UNIT_COEF="0.0008743" ALT_UNIT="deg/s"></field>
        <field TYPE="int32" NAME="ref_pd" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg/s2"></field>
        <field TYPE="int32" NAME="ref_qd" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg/s2"></field>
        <field TYPE="int32" NAME="ref_rd" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg/s2"></field>
      </message>
      <message NAME="STAB_ATTITUDE_REF_FLOAT" ID="142">
        <field TYPE="float" NAME="sp_phi" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field TYPE="float" NAME="sp_theta" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field TYPE="float" NAME="sp_psi" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field TYPE="float" NAME="ref_phi" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field TYPE="float" NAME="ref_theta" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field TYPE="float" NAME="ref_psi" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field TYPE="float" NAME="ref_p" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s"></field>
        <field TYPE="float" NAME="ref_q" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s"></field>
        <field TYPE="float" NAME="ref_r" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s"></field>
        <field TYPE="float" NAME="ref_pd" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s2"></field>
        <field TYPE="float" NAME="ref_qd" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s2"></field>
        <field TYPE="float" NAME="ref_rd" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s2"></field>
      </message>
      <message NAME="ROTORCRAFT_CMD" ID="143">
        <field TYPE="int32" NAME="cmd_roll"></field>
        <field TYPE="int32" NAME="cmd_pitch"></field>
        <field TYPE="int32" NAME="cmd_yaw"></field>
        <field TYPE="int32" NAME="cmd_thrust"></field>
      </message>
      <message NAME="GUIDANCE_H_INT" ID="144">
        <field TYPE="int32" NAME="sp_x" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="sp_y" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="ref_x" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="ref_y" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="est_x" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="est_y" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
      </message>
      <message NAME="VERT_LOOP" ID="145">
        <field TYPE="int32" NAME="z_sp" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="zd_sp" ALT_UNIT_COEF="0.0000019" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="est_z" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="est_zd" ALT_UNIT_COEF="0.0000019" ALT_UNIT="m/s"></field>
        <field TYPE="int32" NAME="est_zdd" ALT_UNIT_COEF="0.0009766" ALT_UNIT="m/s2"></field>
        <field TYPE="int32" NAME="ref_z" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="ref_zd" ALT_UNIT_COEF="0.0000019" ALT_UNIT="m/s"></field>
        <field TYPE="int32" NAME="ref_zdd" ALT_UNIT_COEF="0.0009766" ALT_UNIT="m/s2"></field>
        <field TYPE="int32" NAME="adp_inv_m" ALT_UNIT_COEF="0.0000000596" ALT_UNIT="foo"></field>
        <field TYPE="int32" NAME="adp_cov" ALT_UNIT_COEF="0.0000000596" ALT_UNIT="foo"></field>
        <field TYPE="int32" NAME="adp_meas" ALT_UNIT_COEF="0.0000000596" ALT_UNIT="foo"></field>
        <field TYPE="int32" NAME="sum_err"></field>
        <field TYPE="int32" NAME="ff_cmd"></field>
        <field TYPE="int32" NAME="fb_cmd"></field>
        <field TYPE="int32" NAME="delta_t"></field>
      </message>
      <message NAME="HOVER_LOOP" ID="146">
        <field TYPE="int32" NAME="sp_x" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="sp_y" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="est_x" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="est_y" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="est_xd" ALT_UNIT_COEF="0.0000019" ALT_UNIT="m/s"></field>
        <field TYPE="int32" NAME="est_yd" ALT_UNIT_COEF="0.0000019" ALT_UNIT="m/s"></field>
        <field TYPE="int32" NAME="est_xdd" ALT_UNIT_COEF="0.0009765" ALT_UNIT="m/s2"></field>
        <field TYPE="int32" NAME="est_ydd" ALT_UNIT_COEF="0.0009765" ALT_UNIT="m/s2"></field>
        <field TYPE="int32" NAME="err_x" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="err_y" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="err_xd" ALT_UNIT_COEF="0.0000019" ALT_UNIT="m/s"></field>
        <field TYPE="int32" NAME="err_yd" ALT_UNIT_COEF="0.0000019" ALT_UNIT="m/s"></field>
        <field TYPE="int32" NAME="err_sum_x"></field>
        <field TYPE="int32" NAME="err_sum_y"></field>
        <field TYPE="int32" NAME="cmd_x"></field>
        <field TYPE="int32" NAME="cmd_y"></field>
        <field UNIT="rad" TYPE="float" NAME="cmd_heading" ALT_UNIT="deg"></field>
      </message>
      <message NAME="ROTORCRAFT_FP" ID="147">
        <field TYPE="int32" NAME="east" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="north" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="up" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="veast" ALT_UNIT_COEF="0.0000019" ALT_UNIT="m/s"></field>
        <field TYPE="int32" NAME="vnorth" ALT_UNIT_COEF="0.0000019" ALT_UNIT="m/s"></field>
        <field TYPE="int32" NAME="vup" ALT_UNIT_COEF="0.0000019" ALT_UNIT="m/s"></field>
        <field TYPE="int32" NAME="phi" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="theta" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="psi" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="carrot_east" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="carrot_north" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="carrot_up" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="carrot_psi" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="thrust"></field>
        <field UNIT="s" TYPE="uint16" NAME="flight_time"></field>
      </message>
      <message NAME="TEMP_ADC" ID="148">
        <field UNIT="deg_celsius" TYPE="float" NAME="temp1" FORMAT="%.2f"></field>
        <field UNIT="deg_celsius" TYPE="float" NAME="temp2" FORMAT="%.2f"></field>
        <field UNIT="deg_celsius" TYPE="float" NAME="temp3" FORMAT="%.2f"></field>
      </message>
      <message NAME="GUIDANCE_H_REF_INT" ID="149">
        <field TYPE="int32" NAME="sp_x" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="ref_x" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="sp_xd" ALT_UNIT_COEF="0.0000019" ALT_UNIT="m/s"></field>
        <field TYPE="int32" NAME="ref_xd" ALT_UNIT_COEF="0.0000019" ALT_UNIT="m/s"></field>
        <field TYPE="int32" NAME="ref_xdd" ALT_UNIT_COEF="0.0009766" ALT_UNIT="m/s2"></field>
        <field TYPE="int32" NAME="sp_y" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="ref_y" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="sp_yd" ALT_UNIT_COEF="0.0000019" ALT_UNIT="m/s"></field>
        <field TYPE="int32" NAME="ref_yd" ALT_UNIT_COEF="0.0000019" ALT_UNIT="m/s"></field>
        <field TYPE="int32" NAME="ref_ydd" ALT_UNIT_COEF="0.0009766" ALT_UNIT="m/s2"></field>
      </message>
      <message NAME="ROTORCRAFT_TUNE_HOVER" ID="150">
        <field TYPE="int16" NAME="rc_roll"></field>
        <field TYPE="int16" NAME="rc_pitch"></field>
        <field TYPE="int16" NAME="rc_yaw"></field>
        <field TYPE="int32" NAME="cmd_roll"></field>
        <field TYPE="int32" NAME="cmd_pitch"></field>
        <field TYPE="int32" NAME="cmd_yaw"></field>
        <field TYPE="int32" NAME="cmd_thrust"></field>
        <field TYPE="int32" NAME="body_phi" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="body_theta" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="body_psi" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
      </message>
      <message NAME="INS_Z" ID="151">
        <field UNIT="m" TYPE="float" NAME="baro_z"></field>
        <field TYPE="int32" NAME="ins_z" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="ins_zd" ALT_UNIT_COEF="0.0000019" ALT_UNIT="m/s"></field>
        <field TYPE="int32" NAME="ins_zdd" ALT_UNIT_COEF="0.0009766" ALT_UNIT="m/s2"></field>
      </message>
      <message NAME="PCAP01_STATUS" ID="152">
        <field TYPE="uint32" NAME="ihumid"></field>
        <field TYPE="uint32" NAME="itemp"></field>
        <field UNIT="rel_hum" TYPE="float" NAME="humid" FORMAT="%.2f"></field>
        <field UNIT="deg_celsius" TYPE="float" NAME="temp" FORMAT="%.2f"></field>
      </message>
      <message NAME="GEIGER_COUNTER" ID="153">
        <field UNIT="events" TYPE="uint32" NAME="tube1"></field>
        <field UNIT="events" TYPE="uint32" NAME="tube2"></field>
        <field UNIT="volts" TYPE="uint16" NAME="vsupply"></field>
      </message>
      <message NAME="INS_REF" ID="154">
        <field TYPE="int32" NAME="ecef_x0" ALT_UNIT_COEF="0.01" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="ecef_y0" ALT_UNIT_COEF="0.01" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="ecef_z0" ALT_UNIT_COEF="0.01" ALT_UNIT="m"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="lat0" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="lon0" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="alt0" ALT_UNIT_COEF="0.001" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="hmsl0" ALT_UNIT_COEF="0.001" ALT_UNIT="m"></field>
        <field UNIT="pascal" TYPE="float" NAME="baro_qfe"></field>
      </message>
      <message NAME="GPS_INT" ID="155">
        <field UNIT="cm" TYPE="int32" NAME="ecef_x" ALT_UNIT="m"></field>
        <field UNIT="cm" TYPE="int32" NAME="ecef_y" ALT_UNIT="m"></field>
        <field UNIT="cm" TYPE="int32" NAME="ecef_z" ALT_UNIT="m"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="lat" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="lon" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="mm" TYPE="int32" NAME="alt" ALT_UNIT="m">altitude above WGS84 reference ellipsoid</field>
        <field UNIT="mm" TYPE="int32" NAME="hmsl" ALT_UNIT="m">height above mean sea level (geoid)</field>
        <field UNIT="cm/s" TYPE="int32" NAME="ecef_xd" ALT_UNIT="m/s"></field>
        <field UNIT="cm/s" TYPE="int32" NAME="ecef_yd" ALT_UNIT="m/s"></field>
        <field UNIT="cm/s" TYPE="int32" NAME="ecef_zd" ALT_UNIT="m/s"></field>
        <field UNIT="cm" TYPE="uint32" NAME="pacc" ALT_UNIT="m"></field>
        <field UNIT="cm/s" TYPE="uint32" NAME="sacc" ALT_UNIT="m/s"></field>
        <field TYPE="uint32" NAME="tow"></field>
        <field TYPE="uint16" NAME="pdop"></field>
        <field TYPE="uint8" NAME="numsv"></field>
        <field VALUES="NONE|NA|2D|3D|DGPS|RTK" TYPE="uint8" NAME="fix"></field>
        <field VALUES="NONE|UBX|NMEA|SIRF|SKYTRAQ|MTK|PIKSI|XSENS|DATALINK|UDP|ARDRONE2|SIM|MULTI|VECTORNAV|IMCU" TYPE="uint8" NAME="comp_id"></field>
      </message>
      <message NAME="AHRS_EULER_INT" ID="156">
        <field TYPE="int32" NAME="imu_phi" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="imu_theta" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="imu_psi" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="body_phi" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="body_theta" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="body_psi" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field VALUES="NONE|GENERIC|IR|ICQ|ICE|FC|DCM|FINV|MLKF|GX3|CHIMU|VN" TYPE="uint8" NAME="comp_id"></field>
      </message>
      <message NAME="AHRS_QUAT_INT" ID="157">
        <field TYPE="float" NAME="weight"></field>
        <field TYPE="int32" NAME="imu_qi" ALT_UNIT_COEF="0.0000305" ALT_UNIT=""></field>
        <field TYPE="int32" NAME="imu_qx" ALT_UNIT_COEF="0.0000305" ALT_UNIT=""></field>
        <field TYPE="int32" NAME="imu_qy" ALT_UNIT_COEF="0.0000305" ALT_UNIT=""></field>
        <field TYPE="int32" NAME="imu_qz" ALT_UNIT_COEF="0.0000305" ALT_UNIT=""></field>
        <field TYPE="int32" NAME="body_qi" ALT_UNIT_COEF="0.0000305" ALT_UNIT=""></field>
        <field TYPE="int32" NAME="body_qx" ALT_UNIT_COEF="0.0000305" ALT_UNIT=""></field>
        <field TYPE="int32" NAME="body_qy" ALT_UNIT_COEF="0.0000305" ALT_UNIT=""></field>
        <field TYPE="int32" NAME="body_qz" ALT_UNIT_COEF="0.0000305" ALT_UNIT=""></field>
        <field VALUES="NONE|GENERIC|IR|ICQ|ICE|FC|DCM|FINV|MLKF|GX3|CHIMU|VN" TYPE="uint8" NAME="comp_id"></field>
      </message>
      <message NAME="ROTORCRAFT_NAV_STATUS" ID="159">
        <field UNIT="s" TYPE="uint16" NAME="block_time"></field>
        <field UNIT="s" TYPE="uint16" NAME="stage_time"></field>
        <field UNIT="m" TYPE="float" NAME="dist_home" FORMAT="%.1f"></field>
        <field UNIT="m" TYPE="float" NAME="dist_wp" FORMAT="%.1f"></field>
        <field TYPE="uint8" NAME="cur_block"></field>
        <field TYPE="uint8" NAME="cur_stage"></field>
        <field TYPE="uint8" NAME="horizontal_mode"></field>
      </message>
      <message NAME="ROTORCRAFT_RADIO_CONTROL" ID="160">
        <field UNIT="pprz" TYPE="int16" NAME="roll"></field>
        <field UNIT="pprz" TYPE="int16" NAME="pitch"></field>
        <field UNIT="pprz" TYPE="int16" NAME="yaw"></field>
        <field UNIT="pprz" TYPE="int16" NAME="throttle"></field>
        <field UNIT="pprz" TYPE="int16" NAME="mode"></field>
        <field UNIT="pprz" TYPE="int16" NAME="kill"></field>
        <field VALUES="OK|LOST|REALLY_LOST" TYPE="uint8" NAME="status"></field>
      </message>
      <message NAME="VFF_EXTENDED" ID="161">
        <field TYPE="float" NAME="meas_baro"></field>
        <field TYPE="float" NAME="meas_alt"></field>
        <field TYPE="float" NAME="z"></field>
        <field TYPE="float" NAME="zd"></field>
        <field TYPE="float" NAME="zdd"></field>
        <field TYPE="float" NAME="bias"></field>
        <field TYPE="float" NAME="offset"></field>
        <field TYPE="float" NAME="obs_height"></field>
        <field TYPE="float" NAME="Pzz"></field>
        <field TYPE="float" NAME="Pzdzd"></field>
        <field TYPE="float" NAME="Pbb"></field>
        <field TYPE="float" NAME="Poffsetoffset"></field>
        <field TYPE="float" NAME="Pobsobs"></field>
      </message>
      <message NAME="VFF" ID="162">
        <field TYPE="float" NAME="measure"></field>
        <field TYPE="float" NAME="z"></field>
        <field TYPE="float" NAME="zd"></field>
        <field TYPE="float" NAME="bias"></field>
        <field TYPE="float" NAME="Pzz"></field>
        <field TYPE="float" NAME="Pzdzd"></field>
        <field TYPE="float" NAME="Pbb"></field>
      </message>
      <message NAME="GEO_MAG" ID="163">
        <field TYPE="float" NAME="Hx"></field>
        <field TYPE="float" NAME="Hy"></field>
        <field TYPE="float" NAME="Hz"></field>
        <field VALUES="NONE|GENERIC|GEOM|ICQ|ICE|FC|DCM|FINV|MLKF|GX3" TYPE="uint8" NAME="comp_id"></field>
      </message>
      <message NAME="HFF" ID="164">
        <field TYPE="float" NAME="x"></field>
        <field TYPE="float" NAME="y"></field>
        <field TYPE="float" NAME="xd"></field>
        <field TYPE="float" NAME="yd"></field>
        <field TYPE="float" NAME="xdd"></field>
        <field TYPE="float" NAME="ydd"></field>
        <field TYPE="float" NAME="xbias"></field>
        <field TYPE="float" NAME="ybias"></field>
      </message>
      <message NAME="HFF_DBG" ID="165">
        <field TYPE="float" NAME="x_measure"></field>
        <field TYPE="float" NAME="y_measure"></field>
        <field TYPE="float" NAME="xd_measure"></field>
        <field TYPE="float" NAME="yd_measure"></field>
        <field TYPE="float" NAME="Pxx"></field>
        <field TYPE="float" NAME="Pyy"></field>
        <field TYPE="float" NAME="Pxdxd"></field>
        <field TYPE="float" NAME="Pydyd"></field>
        <field TYPE="float" NAME="Pxbiasxbias"></field>
        <field TYPE="float" NAME="Pybiasybias"></field>
      </message>
      <message NAME="HFF_GPS" ID="166">
        <field TYPE="uint16" NAME="lag_cnt"></field>
        <field TYPE="int16" NAME="lag_cnt_err"></field>
        <field TYPE="int16" NAME="save_cnt"></field>
      </message>
      <message NAME="INS_EKF2" ID="167">
        <description>        Extended Kalman Filter 2 status message which gives feedback about the input- and output states of the filter.</description>
        <field TYPE="uint32" NAME="control_mode">description of the control status (bitfields from common.h)</field>
        <field TYPE="uint16" NAME="filter_fault_status">numerical errors in output states (bitfields from common.h)</field>
        <field TYPE="uint16" NAME="gps_check_status">quality check of the GPS feedback (bitfields from common.h)</field>
        <field TYPE="uint16" NAME="soln_status">which output states are valid or has an error (bitfields from common.h)</field>
        <field TYPE="uint16" NAME="innov_test_status">which inputs exceed the innovation test</field>
        <field TYPE="float" NAME="innov_mag"></field>
        <field TYPE="float" NAME="innov_vel"></field>
        <field TYPE="float" NAME="innov_pos"></field>
        <field TYPE="float" NAME="innov_hgt"></field>
        <field TYPE="float" NAME="innov_tas"></field>
        <field TYPE="float" NAME="innov_hagl"></field>
        <field TYPE="float" NAME="innov_beta"></field>
        <field UNIT="deg" TYPE="float" NAME="mag_decl">Magnetic declination</field>
      </message>
      <message NAME="ROTORCRAFT_CAM" ID="168">
        <field UNIT="2^12rad" TYPE="int16" NAME="tilt" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field UNIT="2^12rad" TYPE="int16" NAME="pan" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
      </message>
      <message NAME="AHRS_REF_QUAT" ID="169">
        <field TYPE="int32" NAME="ref_qi"></field>
        <field TYPE="int32" NAME="ref_qx"></field>
        <field TYPE="int32" NAME="ref_qy"></field>
        <field TYPE="int32" NAME="ref_qz"></field>
        <field TYPE="int32" NAME="body_qi"></field>
        <field TYPE="int32" NAME="body_qx"></field>
        <field TYPE="int32" NAME="body_qy"></field>
        <field TYPE="int32" NAME="body_qz"></field>
      </message>
      <message NAME="INS_EKF2_EXT" ID="170">
        <field UNIT="m/s" TYPE="float" NAME="gps_drift_h">Horizontal position drift rate (m/s)</field>
        <field UNIT="m/s" TYPE="float" NAME="gps_drift_v">Vertical position drift rate (m/s)</field>
        <field UNIT="m/s" TYPE="float" NAME="gps_drift_h_filt">Filtered horizontal velocity (m/s)</field>
        <field TYPE="uint8" NAME="gps_drift_blocked">The GPS drift calculation is blocked</field>
        <field TYPE="float" NAME="gyro_vibe_coning">Gyro delta angle coning metric = filtered length of (delta_angle x prev_delta_angle)</field>
        <field TYPE="float" NAME="gyro_vibe_hf">Gyro high frequency vibe = filtered length of (delta_angle - prev_delta_angle)</field>
        <field TYPE="float" NAME="accel_vibe_hf">Accel high frequency vibe = filtered length of (delta_velocity - prev_delta_velocity)</field>
      </message>
      <message NAME="AHRS_BIAS" ID="171">
        <field UNIT="m/s^2" TYPE="float" NAME="accel_x">Accelerometer bias x-axis</field>
        <field UNIT="m/s^2" TYPE="float" NAME="accel_y">Accelerometer bias y-axis</field>
        <field UNIT="m/s^2" TYPE="float" NAME="accel_z">Accelerometer bias z-axis</field>
        <field UNIT="rad/sec" TYPE="float" NAME="gyro_p">Gyrometer bias roll rate</field>
        <field UNIT="rad/sec" TYPE="float" NAME="gyro_q">Gyrometer bias pitch rate</field>
        <field UNIT="rad/sec" TYPE="float" NAME="gyro_r">Gyrometer bias yaw rate</field>
        <field UNIT="mGauss" TYPE="float" NAME="mag_x">Magnetometer x-bias in mGauss</field>
        <field UNIT="mGauss" TYPE="float" NAME="mag_y">Magnetometer y-bias in mGauss</field>
        <field UNIT="mGauss" TYPE="float" NAME="mag_z">Magnetometer z-bias in mGauss</field>
      </message>
      <message NAME="AHRS_EULER" ID="173">
        <field UNIT="rad" TYPE="float" NAME="phi" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="theta" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="psi" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field VALUES="NONE|GENERIC|IR|ICQ|ICE|FC|DCM|FINV|MLKF|GX3|CHIMU|VN" TYPE="uint8" NAME="comp_id"></field>
      </message>
      <message NAME="AHRS_MEASUREMENT_EULER" ID="174">
        <field UNIT="rad" TYPE="float" NAME="phi" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="theta" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="psi" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
      </message>
      <message NAME="WT" ID="175">
        <field TYPE="float" NAME="rpm"></field>
      </message>
      <message NAME="CSC_CAN_DEBUG" ID="176">
        <field TYPE="uint32" NAME="err_nb"></field>
        <field TYPE="uint32" NAME="err_code"></field>
      </message>
      <message NAME="CSC_CAN_MSG" ID="177">
        <field TYPE="uint32" NAME="frame"></field>
        <field TYPE="uint32" NAME="id"></field>
        <field TYPE="uint32" NAME="data_a"></field>
        <field TYPE="uint32" NAME="data_b"></field>
      </message>
      <message NAME="AHRS_GYRO_BIAS_INT" ID="178">
        <field TYPE="int32" NAME="bp" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg/s"></field>
        <field TYPE="int32" NAME="bq" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg/s"></field>
        <field TYPE="int32" NAME="br" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg/s"></field>
        <field VALUES="NONE|GENERIC|IR|ICQ|ICE|FC|DCM|FINV|MLKF|GX3|CHIMU|VN" TYPE="uint8" NAME="comp_id"></field>
      </message>
      <message NAME="AEROPROBE" ID="179">
        <description>        Airflow data returned by OTF and uADC 3D probes from Aeroprobe.</description>
        <field TYPE="uint32" NAME="counter"></field>
        <field UNIT="cm/s" TYPE="int16" NAME="velocity" ALT_UNIT="m/s"></field>
        <field UNIT="centideg" TYPE="int16" NAME="a_attack" ALT_UNIT="deg"></field>
        <field UNIT="centideg" TYPE="int16" NAME="a_sideslip" ALT_UNIT="deg"></field>
        <field UNIT="cm" TYPE="int32" NAME="altitude" ALT_UNIT="m"></field>
        <field UNIT="Pa" TYPE="int32" NAME="dynamic_p"></field>
        <field UNIT="Pa" TYPE="int32" NAME="static_p"></field>
        <field TYPE="uint8" NAME="checksum"></field>
      </message>
      <message NAME="FMS_TIME" ID="180">
        <field TYPE="uint32" NAME="tv_sec"></field>
        <field TYPE="uint32" NAME="tv_nsec"></field>
        <field TYPE="uint32" NAME="delay_ns"></field>
      </message>
      <message NAME="AHRS_LKF" ID="193">
        <field UNIT="rad" TYPE="float" NAME="phi" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="theta" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="psi" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field TYPE="float" NAME="qi"></field>
        <field TYPE="float" NAME="qx"></field>
        <field TYPE="float" NAME="qy"></field>
        <field TYPE="float" NAME="qz"></field>
        <field UNIT="rad/s" TYPE="float" NAME="p" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s"></field>
        <field UNIT="rad/s" TYPE="float" NAME="q" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s"></field>
        <field UNIT="rad/s" TYPE="float" NAME="r" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s"></field>
        <field TYPE="float" NAME="ax"></field>
        <field TYPE="float" NAME="ay"></field>
        <field TYPE="float" NAME="az"></field>
        <field TYPE="float" NAME="mx"></field>
        <field TYPE="float" NAME="my"></field>
        <field TYPE="float" NAME="mz"></field>
      </message>
      <message NAME="NPS_SENSORS_SCALED" ID="197">
        <field TYPE="float" NAME="acc_x"></field>
        <field TYPE="float" NAME="acc_y"></field>
        <field TYPE="float" NAME="acc_z"></field>
        <field TYPE="float" NAME="mag_x"></field>
        <field TYPE="float" NAME="mag_y"></field>
        <field TYPE="float" NAME="mag_z"></field>
      </message>
      <message NAME="INS" ID="198">
        <field TYPE="int32" NAME="ins_x" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="ins_y" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="ins_z" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="ins_xd" ALT_UNIT_COEF="0.0000019" ALT_UNIT="m/s"></field>
        <field TYPE="int32" NAME="ins_yd" ALT_UNIT_COEF="0.0000019" ALT_UNIT="m/s"></field>
        <field TYPE="int32" NAME="ins_zd" ALT_UNIT_COEF="0.0000019" ALT_UNIT="m/s"></field>
        <field TYPE="int32" NAME="ins_xdd" ALT_UNIT_COEF="0.0009766" ALT_UNIT="m/s2"></field>
        <field TYPE="int32" NAME="ins_ydd" ALT_UNIT_COEF="0.0009766" ALT_UNIT="m/s2"></field>
        <field TYPE="int32" NAME="ins_zdd" ALT_UNIT_COEF="0.0009766" ALT_UNIT="m/s2"></field>
      </message>
      <message NAME="IMU_GYRO" ID="200">
        <field UNIT="rad/s" TYPE="float" NAME="gp" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s"></field>
        <field UNIT="rad/s" TYPE="float" NAME="gq" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s"></field>
        <field UNIT="rad/s" TYPE="float" NAME="gr" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s"></field>
      </message>
      <message NAME="IMU_MAG" ID="201">
        <field TYPE="float" NAME="mx"></field>
        <field TYPE="float" NAME="my"></field>
        <field TYPE="float" NAME="mz"></field>
      </message>
      <message NAME="IMU_ACCEL" ID="202">
        <field UNIT="m/s-2" TYPE="float" NAME="ax"></field>
        <field UNIT="m/s-2" TYPE="float" NAME="ay"></field>
        <field UNIT="m/s-2" TYPE="float" NAME="az"></field>
      </message>
      <message NAME="IMU_GYRO_RAW" ID="203">
        <field UNIT="adc" TYPE="int32" NAME="gp"></field>
        <field UNIT="adc" TYPE="int32" NAME="gq"></field>
        <field UNIT="adc" TYPE="int32" NAME="gr"></field>
      </message>
      <message NAME="IMU_ACCEL_RAW" ID="204">
        <field UNIT="adc" TYPE="int32" NAME="ax"></field>
        <field UNIT="adc" TYPE="int32" NAME="ay"></field>
        <field UNIT="adc" TYPE="int32" NAME="az"></field>
      </message>
      <message NAME="IMU_MAG_RAW" ID="205">
        <field UNIT="adc" TYPE="int32" NAME="mx"></field>
        <field UNIT="adc" TYPE="int32" NAME="my"></field>
        <field UNIT="adc" TYPE="int32" NAME="mz"></field>
      </message>
      <message NAME="IMU_MAG_SETTINGS" ID="206">
        <field TYPE="float" NAME="inclination"></field>
        <field TYPE="float" NAME="declination"></field>
        <field TYPE="float" NAME="hardiron_x"></field>
        <field TYPE="float" NAME="hardiron_y"></field>
        <field TYPE="float" NAME="hardiron_z"></field>
      </message>
      <message NAME="IMU_MAG_CURRENT_CALIBRATION" ID="207">
        <field UNIT="adc" TYPE="int32" NAME="mx"></field>
        <field UNIT="adc" TYPE="int32" NAME="my"></field>
        <field UNIT="adc" TYPE="int32" NAME="mz"></field>
        <field UNIT="A" TYPE="float" NAME="electrical_current"></field>
      </message>
      <message NAME="UART_ERRORS" ID="208">
        <field TYPE="uint16" NAME="overrun_cnt"></field>
        <field TYPE="uint16" NAME="noise_err_cnt"></field>
        <field TYPE="uint16" NAME="framing_err_cnt"></field>
        <field TYPE="uint8" NAME="bus_number"></field>
      </message>
      <message NAME="IMU_GYRO_LP" ID="209">
        <field UNIT="rad/s" TYPE="float" NAME="gp"></field>
        <field UNIT="rad/s" TYPE="float" NAME="gq"></field>
        <field UNIT="rad/s" TYPE="float" NAME="gr"></field>
      </message>
      <message NAME="IMU_PRESSURE" ID="210">
        <field UNIT="pascal" TYPE="float" NAME="p"></field>
      </message>
      <message NAME="WINDTUNNEL_MEAS" ID="211">
        <field UNIT="deg" TYPE="float" NAME="aoa">Angle of attack</field>
        <field UNIT="m/s" TYPE="float" NAME="airspeed">Airspeed measured</field>
        <field UNIT="V" TYPE="float" NAME="voltage">Voltage measured</field>
        <field UNIT="A" TYPE="float" NAME="current">Current measured</field>
        <field UNIT="W" TYPE="float" NAME="power">Calculated power (Voltage * Current)</field>
        <field TYPE="int32[]" NAME="commands">Commands send to actuators</field>
      </message>
      <message NAME="TUNE_VERT" ID="213">
        <field TYPE="int32" NAME="z_sp" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="est_z" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="ref_z" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="ref_zd" ALT_UNIT_COEF="0.0000019" ALT_UNIT="m/s"></field>
      </message>
      <message NAME="MF_DAQ_STATE" ID="214">
        <field UNIT="s" TYPE="uint16" NAME="flight_time"></field>
        <field TYPE="float" NAME="p"></field>
        <field TYPE="float" NAME="q"></field>
        <field TYPE="float" NAME="r"></field>
        <field TYPE="float" NAME="phi"></field>
        <field TYPE="float" NAME="theta"></field>
        <field TYPE="float" NAME="psi"></field>
        <field TYPE="float" NAME="ax"></field>
        <field TYPE="float" NAME="ay"></field>
        <field TYPE="float" NAME="az"></field>
        <field TYPE="float" NAME="ve"></field>
        <field TYPE="float" NAME="vn"></field>
        <field TYPE="float" NAME="vu"></field>
        <field TYPE="float" NAME="lat"></field>
        <field TYPE="float" NAME="lon"></field>
        <field TYPE="float" NAME="alt"></field>
        <field TYPE="float" NAME="we"></field>
        <field TYPE="float" NAME="wn"></field>
      </message>
      <message NAME="INFO_MSG" ID="215">
        <field TYPE="char[]" NAME="msg"></field>
      </message>
      <message NAME="STAB_ATTITUDE_INDI" ID="216">
        <field TYPE="float" NAME="angular_accel_p"></field>
        <field TYPE="float" NAME="angular_accel_q"></field>
        <field TYPE="float" NAME="angular_accel_r"></field>
        <field TYPE="float" NAME="angular_accel_ref_p"></field>
        <field TYPE="float" NAME="angular_accel_ref_q"></field>
        <field TYPE="float" NAME="angular_accel_ref_r"></field>
        <field TYPE="float" NAME="g1_p"></field>
        <field TYPE="float" NAME="g1_q"></field>
        <field TYPE="float" NAME="g1_r"></field>
        <field TYPE="float" NAME="g2_r"></field>
      </message>
      <message NAME="ROTORCRAFT_FP_MIN" ID="217">
        <description>Minimalistic message to track Rotorcraft over very low bandwidth links</description>
        <field TYPE="int32" NAME="east" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="north" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="up" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field UNIT="cm/s" TYPE="uint16" NAME="gspeed" ALT_UNIT="m/s"></field>
      </message>
      <message NAME="BEBOP_ACTUATORS" ID="218">
        <field TYPE="int32" NAME="cmd_thrust"></field>
        <field TYPE="int32" NAME="cmd_roll"></field>
        <field TYPE="int32" NAME="cmd_pitch"></field>
        <field TYPE="int32" NAME="cmd_yaw"></field>
        <field UNIT="rpm" TYPE="uint16" NAME="rpm_ref_lf"></field>
        <field UNIT="rpm" TYPE="uint16" NAME="rpm_ref_rf"></field>
        <field UNIT="rpm" TYPE="uint16" NAME="rpm_ref_rb"></field>
        <field UNIT="rpm" TYPE="uint16" NAME="rpm_ref_lb"></field>
        <field UNIT="rpm" TYPE="uint16" NAME="rpm_obs_lf"></field>
        <field UNIT="rpm" TYPE="uint16" NAME="rpm_obs_rf"></field>
        <field UNIT="rpm" TYPE="uint16" NAME="rpm_obs_rb"></field>
        <field UNIT="rpm" TYPE="uint16" NAME="rpm_obs_lb"></field>
      </message>
      <message NAME="WEATHER" ID="219">
        <field UNIT="Pa" TYPE="float" NAME="p_amb" ALT_UNIT_COEF="0.01" ALT_UNIT="mBar"></field>
        <field UNIT="deg C" TYPE="float" NAME="t_amb"></field>
        <field UNIT="m/s" TYPE="float" NAME="windspeed"></field>
        <field UNIT="deg" TYPE="float" NAME="wind_from"></field>
        <field UNIT="%" TYPE="float" NAME="humidity"></field>
      </message>
      <message NAME="IMU_TURNTABLE" ID="220">
        <field UNIT="rad/s" TYPE="float" NAME="omega" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s"></field>
      </message>
      <message NAME="BARO_RAW" ID="221">
        <field TYPE="float" NAME="abs"></field>
        <field TYPE="float" NAME="diff"></field>
      </message>
      <message NAME="AIR_DATA" ID="222">
        <field UNIT="Pa" TYPE="float" NAME="pressure">static pressure</field>
        <field UNIT="Pa" TYPE="float" NAME="diff_p">differential pressure</field>
        <field UNIT="deg celcius" TYPE="float" NAME="temp">air temperature</field>
        <field UNIT="hPa" TYPE="float" NAME="qnh">barometric pressure adjusted to sea level</field>
        <field UNIT="m" TYPE="float" NAME="amsl_baro">barometric altitude above mean sea level</field>
        <field UNIT="m/s" TYPE="float" NAME="airspeed">Equivalent Air Speed (or Calibrated Air Speed at low speed/altitude)</field>
        <field TYPE="float" NAME="tas">True Air Speed (when P, T and P_diff are available)</field>
      </message>
      <message NAME="AMSL" ID="223">
        <field UNIT="ft" TYPE="float" NAME="AMSL_BARO" ALT_UNIT="m"></field>
        <field UNIT="ft" TYPE="float" NAME="AMSL_GPS" ALT_UNIT="m"></field>
      </message>
      <message NAME="DIVERGENCE" ID="224">
        <field TYPE="float" NAME="divergence"> vertical velocity / height from optitrack (unit = 1/sec)</field>
        <field TYPE="float" NAME="divergence_vision"> vertical velocity / height from vision (unit = 1/sec)</field>
        <field TYPE="float" NAME="normalized_thrust"> thrust / max thrust paparazzi (-)</field>
        <field TYPE="float" NAME="cov_div"> covariance of divergence and thrust, or past divergence depending on the mode (-)</field>
        <field TYPE="float" NAME="pstate"> gain state in adaptive gain control: indicative of height (-) </field>
        <field TYPE="float" NAME="pused"> gain used for control, includes the effect of the p-gain of adaptive control (-) </field>
        <field TYPE="float" NAME="sonar"> measurement from the sonar (mm)</field>
      </message>
      <message NAME="VIDEO_SYNC" ID="225">
        <field TYPE="uint8" NAME="id"></field>
      </message>
      <message NAME="PERIODIC_TELEMETRY_ERR" ID="226">
        <field TYPE="uint8" NAME="process"></field>
        <field TYPE="uint8" NAME="mode"></field>
        <field TYPE="uint8" NAME="id"></field>
      </message>
      <message NAME="TIME" ID="227">
        <field TYPE="uint32" NAME="t">an integral value representing the number of seconds elapsed since 00:00 hours, Jan 1, 1970 UTC</field>
      </message>
      <message NAME="OPTIC_FLOW_EST" ID="228">
        <field TYPE="float" NAME="fps"></field>
        <field TYPE="uint16" NAME="corner_cnt"></field>
        <field TYPE="uint16" NAME="tracked_cnt"></field>
        <field UNIT="subpixels" TYPE="int16" NAME="flow_x"></field>
        <field UNIT="subpixels" TYPE="int16" NAME="flow_y"></field>
        <field UNIT="subpixels" TYPE="int16" NAME="flow_der_x"></field>
        <field UNIT="subpixels" TYPE="int16" NAME="flow_der_y"></field>
        <field UNIT="m/s" TYPE="float" NAME="vel_x"></field>
        <field UNIT="m/s" TYPE="float" NAME="vel_y"></field>
        <field UNIT="m/s" TYPE="float" NAME="vel_z"></field>
        <field UNIT="1/s" TYPE="float" NAME="div_size"></field>
        <field UNIT="1/s" TYPE="float" NAME="surface_roughness"></field>
        <field UNIT="1/s" TYPE="float" NAME="divergence"></field>
      </message>
      <message NAME="STEREO_IMG" ID="229">
        <field VALUES="DIST_MATRIX|HISTOGRAM|DISPARITY_MAP|RAW" TYPE="uint8" NAME="type"></field>
        <field TYPE="uint8" NAME="width"></field>
        <field TYPE="uint8" NAME="height"></field>
        <field TYPE="uint8" NAME="package_nb"></field>
        <field TYPE="uint8[]" NAME="image_data"></field>
      </message>
      <message NAME="ROVER_STATUS" ID="230">
        <description>        Rover status message</description>
        <field VALUES="OK|LOST|REALLY_LOST" TYPE="uint8" NAME="rc_status"></field>
        <field UNIT="Hz" TYPE="uint8" NAME="frame_rate"></field>
        <field VALUES="NO_FIX|NA|2D|3D|DGPS|RTK" TYPE="uint8" NAME="gps_status"></field>
        <field TYPE="uint8" NAME="ap_mode">Rover AP modes are generated from XML file</field>
        <field VALUES="MOTORS_OFF|MOTORS_ON" TYPE="uint8" NAME="ap_motors_on"></field>
        <field UNIT="s" TYPE="uint16" NAME="cpu_time"></field>
        <field UNIT="V" TYPE="float" NAME="vsupply"></field>
      </message>
      <message NAME="ROTORCRAFT_STATUS" ID="231">
        <field TYPE="uint32" NAME="link_imu_nb_err"></field>
        <field TYPE="uint8" NAME="motor_nb_err"></field>
        <field VALUES="OK|LOST|REALLY_LOST" TYPE="uint8" NAME="rc_status"></field>
        <field UNIT="Hz" TYPE="uint8" NAME="frame_rate"></field>
        <field VALUES="NO_FIX|NA|2D|3D|DGPS|RTK" TYPE="uint8" NAME="gps_status"></field>
        <field VALUES="KILL|FAILSAFE|HOME|RATE_DIRECT|ATTITUDE_DIRECT|RATE_RC_CLIMB|ATTITUDE_RC_CLIMB|ATTITUDE_CLIMB|RATE_Z_HOLD|ATTITUDE_Z_HOLD|HOVER_DIRECT|HOVER_CLIMB|HOVER_Z_HOLD|NAV|RC_DIRECT|CARE_FREE|FORWARD|MODULE|FLIP|GUIDED" TYPE="uint8" NAME="ap_mode"></field>
        <field VALUES="ON_GROUND|IN_FLIGHT" TYPE="uint8" NAME="ap_in_flight"></field>
        <field VALUES="MOTORS_OFF|MOTORS_ON" TYPE="uint8" NAME="ap_motors_on"></field>
        <field VALUES="NO_RC|WAITING|ARMING|ARMED|DISARMING|KILLED|YAW_CENTERED|THROTTLE_DOWN|NOT_MODE_MANUAL|UNARMED_IN_AUTO|THROTTLE_NOT_DOWN|STICKS_NOT_CENTERED|PITCH_NOT_CENTERED|ROLL_NOT_CENTERED|YAW_NOT_CENTERED|AHRS_NOT_ALLIGNED|OUT_OF_GEOFENCE|LOW_BATTERY" TYPE="uint8" NAME="arming_status"></field>
        <field VALUES="KILL|RATE|ATTITUDE|HOVER|NAV|RC_DIRECT|CF|FORWARD|MODULE|FLIP|GUIDED" TYPE="uint8" NAME="ap_h_mode"></field>
        <field VALUES="KILL|RC_DIRECT|RC_CLIMB|CLIMB|HOVER|NAV|MODULE|FLIP|GUIDED" TYPE="uint8" NAME="ap_v_mode"></field>
        <field UNIT="s" TYPE="uint16" NAME="cpu_time"></field>
        <field UNIT="V" TYPE="float" NAME="vsupply"></field>
      </message>
      <message NAME="STATE_FILTER_STATUS" ID="232">
        <field TYPE="uint8" NAME="id"></field>
        <field VALUES="UNKNOWN|INIT|ALIGN|OK|GPS_LOST|IMU_LOST|COV_ERR|IR_CONTRAST|ERROR" TYPE="uint8" NAME="state_filter_mode"></field>
        <field TYPE="uint16" NAME="value"></field>
      </message>
      <message NAME="PX4FLOW" ID="233">
        <field UNIT="s" TYPE="float" NAME="time_sec"></field>
        <field TYPE="uint8" NAME="sensor_id"></field>
        <field TYPE="int16" NAME="flow_x"></field>
        <field TYPE="int16" NAME="flow_y"></field>
        <field UNIT="m" TYPE="float" NAME="flow_comp_m_x"></field>
        <field UNIT="m" TYPE="float" NAME="flow_comp_m_y"></field>
        <field TYPE="uint8" NAME="quality"></field>
        <field UNIT="m" TYPE="float" NAME="ground_distance"></field>
      </message>
      <message NAME="LIDAR" ID="234">
        <field UNIT="m" TYPE="float" NAME="distance"></field>
        <field VALUES="INIT|REQ|READ|PARSE" TYPE="uint8" NAME="status"></field>
        <field VALUES="Pending|Running|Success|Failed|Done" TYPE="uint8" NAME="trans_status"></field>
      </message>
      <message NAME="VISUALTARGET" ID="235">
        <description>Generic message with pixel coordinates of detected targets</description>
        <field TYPE="uint16" NAME="cnt">Counter</field>
        <field TYPE="int16" NAME="x">Center pixel X</field>
        <field TYPE="int16" NAME="y">Center pixel X</field>
        <field TYPE="int16" NAME="w">Width in pixels</field>
        <field TYPE="int16" NAME="h">height in pixels</field>
        <field TYPE="uint16" NAME="source">In case many detectors run, which one did find this target</field>
      </message>
      <message NAME="SONAR" ID="236">
        <field TYPE="uint16" NAME="sonar_meas"></field>
        <field UNIT="m" TYPE="float" NAME="sonar_distance"></field>
      </message>
      <message NAME="PAYLOAD_FLOAT" ID="237">
        <field TYPE="float[]" NAME="values"></field>
      </message>
      <message NAME="NPS_POS_LLH" ID="238">
        <field UNIT="rad" TYPE="float" NAME="pprz_lat" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="lat_geod" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="lat_geoc" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="pprz_lon" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="lon" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field UNIT="m" TYPE="float" NAME="pprz_alt"></field>
        <field UNIT="m" TYPE="float" NAME="alt_geod"></field>
        <field UNIT="m" TYPE="float" NAME="agl"></field>
        <field UNIT="m" TYPE="float" NAME="asl"></field>
      </message>
      <message NAME="KEY_EXCHANGE_UAV" ID="239">
        <description>Message for key exchange during crypto initialization</description>
        <field VALUES="P_AE|P_BE|SIG" TYPE="uint8" NAME="msg_type"></field>
        <field TYPE="uint8[]" NAME="msg_data"></field>
      </message>
      <message NAME="NPS_SPEED_POS" ID="240">
        <field UNIT="m/s2" TYPE="float" NAME="ltpp_xdd"></field>
        <field UNIT="m/s2" TYPE="float" NAME="ltpp_ydd"></field>
        <field UNIT="m/s2" TYPE="float" NAME="ltpp_zdd"></field>
        <field UNIT="m/s" TYPE="float" NAME="ltpp_xd"></field>
        <field UNIT="m/s" TYPE="float" NAME="ltpp_yd"></field>
        <field UNIT="m/s" TYPE="float" NAME="ltpp_zd"></field>
        <field UNIT="m" TYPE="float" NAME="ltpp_x"></field>
        <field UNIT="m" TYPE="float" NAME="ltpp_y"></field>
        <field UNIT="m" TYPE="float" NAME="ltpp_z"></field>
      </message>
      <message NAME="NPS_RATE_ATTITUDE" ID="241">
        <field UNIT="deg/s" TYPE="float" NAME="p"></field>
        <field UNIT="deg/s" TYPE="float" NAME="q"></field>
        <field UNIT="deg/s" TYPE="float" NAME="r"></field>
        <field UNIT="deg" TYPE="float" NAME="phi"></field>
        <field UNIT="deg" TYPE="float" NAME="theta"></field>
        <field UNIT="deg" TYPE="float" NAME="psi"></field>
      </message>
      <message NAME="NPS_GYRO_BIAS" ID="242">
        <field UNIT="deg/s" TYPE="float" NAME="bp"></field>
        <field UNIT="deg/s" TYPE="float" NAME="bq"></field>
        <field UNIT="deg/s" TYPE="float" NAME="br"></field>
      </message>
      <message NAME="OPTICAL_FLOW_HOVER" ID="243">
        <description>        This messages includes the messages send by the Optical Flow Hover module, providing data for all three axes.</description>
        <field TYPE="float" NAME="flowX"> Filtered Horizontal velocity in X / height used in Optical Flow Hover</field>
        <field TYPE="float" NAME="flowY"> Filtered Horizontal velocity in X / height used in Optical Flow Hover</field>
        <field TYPE="float" NAME="Divergence"> Filtered vertical velocity / height used in Optical Flow Hover</field>
        <field TYPE="float" NAME="cov_flowX"> covariance of Ventral flow in X and past ventral flow in X</field>
        <field TYPE="float" NAME="cov_flowY"> covariance of Ventral flow in Y and past ventral flow in Y</field>
        <field TYPE="float" NAME="cov_divZ"> covariance of divergence and past divergence or thrust history</field>
        <field TYPE="float" NAME="pusedX"> Gain used in the X feedback</field>
        <field TYPE="float" NAME="pusedY"> Gain used in the Y feedback</field>
        <field TYPE="float" NAME="pusedZ"> Gain used in the Z feedback</field>
        <field TYPE="float" NAME="sum_errX"> Sum of errors in X</field>
        <field TYPE="float" NAME="sum_errY"> Sum of errors in Y</field>
        <field TYPE="float" NAME="sum_errZ"> Sum of errors in Z</field>
        <field TYPE="int32" NAME="thrust"> The thrust</field>
        <field TYPE="float" NAME="phi_des" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"> The desired phi angle in degrees</field>
        <field TYPE="float" NAME="theta_des" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"> The desired theta angle in degrees</field>
      </message>
      <message NAME="NPS_WIND" ID="244">
        <field UNIT="m/s" TYPE="float" NAME="vx"></field>
        <field UNIT="m/s" TYPE="float" NAME="vy"></field>
        <field UNIT="m/s" TYPE="float" NAME="vz"></field>
      </message>
      <message NAME="ESC" ID="245">
        <description>        Electronic Speed Controller data</description>
        <field UNIT="A" TYPE="float" NAME="amps">Current consumption</field>
        <field UNIT="V" TYPE="float" NAME="bat_volts">Input battery voltage</field>
        <field UNIT="W" TYPE="float" NAME="power">Electrical power</field>
        <field UNIT="rpm" TYPE="float" NAME="rpm">Motor rotation speed</field>
        <field UNIT="V" TYPE="float" NAME="motor_volts">Motor voltage</field>
        <field UNIT="Wh" TYPE="float" NAME="energy">Accumulated consumed energy</field>
        <field TYPE="uint8" NAME="motor_id">Motor ID</field>
      </message>
      <message NAME="RTOS_MON" ID="246">
        <description>        RTOS monitoring</description>
        <field TYPE="uint8" NAME="nb_threads">Number of running threads</field>
        <field UNIT="%" TYPE="uint8" NAME="cpu_load">Global CPU load</field>
        <field UNIT="Bytes" TYPE="uint32" NAME="core_free">Core free memory</field>
        <field UNIT="Bytes" TYPE="uint32" NAME="heap_free">Total fragmented free memory in the heap</field>
        <field UNIT="Fragments" TYPE="uint32" NAME="heap_frags">Number of fragments in the heap</field>
        <field UNIT="Bytes" TYPE="uint32" NAME="heap_largest">Largest free block in the heap</field>
        <field UNIT="s" TYPE="float" NAME="cpu_time"></field>
      </message>
      <message NAME="PPRZ_DEBUG" ID="247">
        <field TYPE="uint8" NAME="module"></field>
        <field TYPE="uint8" NAME="errno"></field>
      </message>
      <message NAME="BATTERY_MONITOR" ID="248">
        <field VALUES="v3|v4|v5" TYPE="uint8" NAME="version">Battery monitor version</field>
        <field VALUES="CURRENT|VOLTAGE|TEMP" TYPE="uint8" NAME="bus_dev_stat">Bus monitor status</field>
        <field VALUES="Pending|Running|Success|Failed|Done" TYPE="uint8" NAME="bus_trans_stat">Bus monitor i2c transaction status</field>
        <field UNIT="mV" TYPE="uint16" NAME="current_raw" ALT_UNIT_COEF="0.001" ALT_UNIT="V">Raw bus current reading</field>
        <field UNIT="A" TYPE="float" NAME="current">Bus current</field>
        <field UNIT="mV" TYPE="uint16" NAME="bus_voltage" ALT_UNIT_COEF="0.001" ALT_UNIT="V">Bus voltage</field>
        <field UNIT="mV" TYPE="uint16[]" NAME="bus_temp_raw">Raw temperature reading</field>
        <field UNIT="C" TYPE="float[]" NAME="bus_temp">Battery temperatures</field>
        <field VALUES="Pending|Running|Success|Failed|Done" TYPE="uint8" NAME="bal1_trans_stat">Cell bank 1 monitor i2c transaction status</field>
        <field UNIT="mV" TYPE="uint16[]" NAME="bal1_cells">Cell bank 1 voltage</field>
        <field VALUES="Pending|Running|Success|Failed|Done" TYPE="uint8" NAME="bal2_trans_stat">Cell bank 2 monitor i2c transaction status</field>
        <field UNIT="mV" TYPE="uint16[]" NAME="bal2_cells">Cell bank 2 voltage</field>
        <field VALUES="mV" TYPE="uint16" NAME="safety_plug">Safety plug voltage</field>
      </message>
      <message NAME="GPS_RXMRTCM" ID="249">
        <field TYPE="uint32" NAME="Msg1005"></field>
        <field TYPE="uint32" NAME="Msg1077"></field>
        <field TYPE="uint32" NAME="Msg1087"></field>
        <field TYPE="uint32" NAME="Crc1005"></field>
        <field TYPE="uint32" NAME="Crc1077"></field>
        <field TYPE="uint32" NAME="Crc1087"></field>
      </message>
      <message NAME="INDI_G" ID="250">
        <field UNIT="none" TYPE="float[]" NAME="G1_roll"></field>
        <field UNIT="none" TYPE="float[]" NAME="G1_pitch"></field>
        <field UNIT="none" TYPE="float[]" NAME="G1_yaw"></field>
        <field UNIT="none" TYPE="float[]" NAME="G1_thrust"></field>
        <field UNIT="none" TYPE="float[]" NAME="G2"></field>
      </message>
      <message NAME="GPS_RTK" ID="251">
        <field UNIT="ms" TYPE="uint32" NAME="iTOW"></field>
        <field TYPE="uint16" NAME="refStationId"></field>
        <field UNIT="cm" TYPE="int32" NAME="relPosN"></field>
        <field UNIT="cm" TYPE="int32" NAME="relPosE"></field>
        <field UNIT="cm" TYPE="int32" NAME="relPosD"></field>
        <field UNIT="mm" TYPE="int8" NAME="relPosHPN"></field>
        <field UNIT="mm" TYPE="int8" NAME="relPosHPE"></field>
        <field UNIT="mm" TYPE="int8" NAME="relPosHPD"></field>
        <field UNIT="mm" TYPE="uint32" NAME="accN"></field>
        <field UNIT="mm" TYPE="uint32" NAME="accE"></field>
        <field UNIT="mm" TYPE="uint32" NAME="accD"></field>
        <field VALUES="NONE|RTK FLOAT|RTK FIX" TYPE="uint8" NAME="carrSoln"></field>
        <field VALUES="FALSE|TRUE" TYPE="uint8" NAME="relPosValid"></field>
        <field VALUES="NONE|DGPS" TYPE="uint8" NAME="diffSoln"></field>
        <field VALUES="NONE|3D" TYPE="uint8" NAME="gnssFixOK"></field>
      </message>
      <message NAME="GPS_SMALL" ID="252">
        <field TYPE="uint32" NAME="multiplex_speed">bits 31-21 course in decideg : bits 20-10 ground speed in cm/s : bits 9-0 climb speed in cm/s</field>
        <field UNIT="1e7deg" TYPE="int32" NAME="lat" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="lon" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="cm" TYPE="int16" NAME="alt" ALT_UNIT="m">height above the ellipsoid</field>
      </message>
      <message NAME="I2C_ERRORS" ID="253">
        <field TYPE="uint16" NAME="wd_reset_cnt"></field>
        <field TYPE="uint16" NAME="queue_full_cnt"></field>
        <field TYPE="uint16" NAME="acknowledge_failure_cnt"></field>
        <field TYPE="uint16" NAME="misplaced_start_or_stop_cnt"></field>
        <field TYPE="uint16" NAME="arbitration_lost_cnt"></field>
        <field TYPE="uint16" NAME="overrun_or_underrun_cnt"></field>
        <field TYPE="uint16" NAME="pec_error_in_reception_cnt"></field>
        <field TYPE="uint16" NAME="timeout_or_tlow_error_cnt"></field>
        <field TYPE="uint16" NAME="smbus_alert_cnt"></field>
        <field TYPE="uint16" NAME="unexpected_event_cnt"></field>
        <field TYPE="uint32" NAME="last_unexpected_event"></field>
        <field TYPE="uint8" NAME="bus_number"></field>
      </message>
      <message NAME="DCF_THETA" ID="254">
        <description>Air-to-air message for the Distributed Circular Formation algorithm. It transmits the ac&apos;s theta to its neighbor</description>
        <field TYPE="float" NAME="theta"></field>
      </message>
      <message NAME="SECURE_LINK_STATUS" ID="255">
        <description>Message for monitoring key exchange status</description>
        <field VALUES="INIT|WAIT_MSG1|WAIT_MSG2|WAIT_MSG3|CRYPTO_OK" TYPE="uint8" NAME="sts_stage"></field>
        <field VALUES="NONE|MSG1_TIMEOUT|MSG1_ENCRYPT|MSG3_TIMEOUT|MSG3_DECRYPT|MSG3_SIGNVERIFY|MSG2_TIMEOUT|MSG2_DECRYPT|MSG2_SIGNVERIFY|MSG3_ENCRYPT|UNEXPECTED_TYPE|UNEXPECTED_STAGE|UNEXPECTED_MSG" TYPE="uint8" NAME="sts_error"></field>
        <field TYPE="uint32" NAME="counter_err"></field>
        <field TYPE="uint32" NAME="decrypt_err"></field>
        <field TYPE="uint32" NAME="encrypt_err"></field>
      </message>
    </msg_class>
    <msg_class NAME="datalink" ID="2">
      <message NAME="ACINFO" LINK="broadcasted" ID="1">
        <field UNIT="decideg" TYPE="int16" NAME="course" ALT_UNIT="deg"></field>
        <field UNIT="cm" TYPE="int32" NAME="utm_east" ALT_UNIT="m"></field>
        <field UNIT="cm" TYPE="int32" NAME="utm_north" ALT_UNIT="m"></field>
        <field TYPE="uint8" NAME="utm_zone"></field>
        <field UNIT="cm" TYPE="int32" NAME="alt" ALT_UNIT="m">Height above Mean Sea Level (geoid)</field>
        <field UNIT="ms" TYPE="uint32" NAME="itow" ALT_UNIT_COEF="0.001" ALT_UNIT="s"></field>
        <field UNIT="cm/s" TYPE="uint16" NAME="speed" ALT_UNIT="m/s">ground speed</field>
        <field UNIT="cm/s" TYPE="int16" NAME="climb" ALT_UNIT="m/s"></field>
        <field TYPE="uint8" NAME="ac_id"></field>
      </message>
      <message NAME="MOVE_WP" LINK="forwarded" ID="2">
        <field TYPE="uint8" NAME="wp_id"></field>
        <field TYPE="uint8" NAME="ac_id"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="lat" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="lon" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="mm" TYPE="int32" NAME="alt" ALT_UNIT="m">Height above Mean Sea Level (geoid)</field>
      </message>
      <message NAME="WIND_INFO" LINK="forwarded" ID="3">
        <description>        Wind information.
        The wind is reported as a vector, it gives the direction the wind is blowing to.
        This can be comming from the ground wind estimator
        or from an embedded algorithm.
        Flags field definition:
        - bit 0: horizontal wind is valid (east and north fields)
        - bit 1: vertical wind is valid (up field)
        - bit 2: airspeed is valid</description>
        <field TYPE="uint8" NAME="ac_id"></field>
        <field TYPE="uint8" NAME="flags">bit 0: horizontal wind, bit 1: vertical wind: bit 2: airspeed</field>
        <field UNIT="m/s" TYPE="float" NAME="east">east component of the wind</field>
        <field UNIT="m/s" TYPE="float" NAME="north">north component of the wind</field>
        <field UNIT="m/s" TYPE="float" NAME="up">vertical component of the wind</field>
        <field UNIT="m/s" TYPE="float" NAME="airspeed">local airspeed norm</field>
      </message>
      <message NAME="SETTING" LINK="forwarded" ID="4">
        <field TYPE="uint8" NAME="index"></field>
        <field TYPE="uint8" NAME="ac_id"></field>
        <field TYPE="float" NAME="value"></field>
      </message>
      <message NAME="BLOCK" LINK="forwarded" ID="5">
        <field TYPE="uint8" NAME="block_id"></field>
        <field TYPE="uint8" NAME="ac_id"></field>
      </message>
      <message NAME="HITL_UBX" LINK="forwarded" ID="6">
        <field TYPE="uint8" NAME="class"></field>
        <field TYPE="uint8" NAME="id"></field>
        <field TYPE="uint8" NAME="ac_id"></field>
        <field TYPE="uint8[]" NAME="ubx_payload"></field>
      </message>
      <message NAME="HITL_INFRARED" LINK="forwarded" ID="7">
        <field TYPE="int16" NAME="roll"></field>
        <field TYPE="int16" NAME="pitch"></field>
        <field TYPE="int16" NAME="top"></field>
        <field TYPE="uint8" NAME="ac_id"></field>
      </message>
      <message NAME="PING" ID="8"/>
      <message NAME="FORMATION_SLOT" LINK="broadcasted" ID="9">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field TYPE="uint8" NAME="mode"></field>
        <field UNIT="m" TYPE="float" NAME="slot_east" FORMAT="%.1f"></field>
        <field UNIT="m" TYPE="float" NAME="slot_north" FORMAT="%.1f"></field>
        <field UNIT="m" TYPE="float" NAME="slot_alt" FORMAT="%.1f"></field>
      </message>
      <message NAME="FORMATION_STATUS" LINK="broadcasted" ID="10">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field TYPE="uint8" NAME="leader_id"></field>
        <field TYPE="uint8" NAME="status"></field>
      </message>
      <message NAME="JOYSTICK_RAW" LINK="forwarded" ID="11">
        <description>        This message is used to send joystick input that can be used in any mode for control of
        the vehicle or the payload depending of the &apos;joystick_handler&apos; function implementation.
        The scale of the inputs should be between -PPRZ_MAX (or 0) and PPRZ_MAX.</description>
        <field TYPE="int16" NAME="roll"></field>
        <field TYPE="int16" NAME="pitch"></field>
        <field TYPE="int16" NAME="yaw"></field>
        <field TYPE="int16" NAME="throttle"></field>
        <field TYPE="uint8" NAME="ac_id"></field>
      </message>
      <message NAME="COMMANDS_RAW" LINK="forwarded" ID="12">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field TYPE="int8[]" NAME="commands"></field>
      </message>
      <message NAME="DGPS_RAW" LINK="forwarded" ID="13">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field TYPE="uint8" NAME="length"></field>
        <field TYPE="uint8[]" NAME="rtcm"></field>
      </message>
      <message NAME="ACINFO_LLA" LINK="broadcasted" ID="14">
        <field UNIT="decideg" TYPE="int16" NAME="course" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="lat" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="lon" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="cm" TYPE="int32" NAME="alt" ALT_UNIT="m">Height above ellipsoid</field>
        <field UNIT="ms" TYPE="uint32" NAME="itow" ALT_UNIT_COEF="0.001" ALT_UNIT="s"></field>
        <field UNIT="cm/s" TYPE="uint16" NAME="speed" ALT_UNIT="m/s">ground speed</field>
        <field UNIT="cm/s" TYPE="int16" NAME="climb" ALT_UNIT="m/s"></field>
        <field TYPE="uint8" NAME="ac_id"></field>
      </message>
      <message NAME="DESIRED_SETPOINT" LINK="forwarded" ID="15">
        <description>        This message is used to set 3D desired vehicle&apos;s states such as accelerations or velocities.
        The &apos;flag&apos; field can be used at the user convenience to provide indication about the type of
        value to track (like  position, speed, acceleration, ...) or the reference frame (ENU / NED,
        LTP / body frame, ...)</description>
        <field TYPE="uint8" NAME="ac_id">AC_ID of the vehicle</field>
        <field TYPE="uint8" NAME="flag">Up to the user, for example to distinguish between ENU or NED</field>
        <field TYPE="float" NAME="ux">Quantity to be tracked in the X axis</field>
        <field TYPE="float" NAME="uy">Quantity to be tracked in the Y axis</field>
        <field TYPE="float" NAME="uz">Quantity to be tracked in the Z axis</field>
      </message>
      <message NAME="GET_SETTING" LINK="forwarded" ID="16">
        <field TYPE="uint8" NAME="index"></field>
        <field TYPE="uint8" NAME="ac_id"></field>
      </message>
      <message NAME="TCAS_RESOLVE" LINK="forwarded" ID="17">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field TYPE="uint8" NAME="ac_id_conflict"></field>
        <field VALUES="NONE|LEVEL|CLIMB|DESCEND" TYPE="uint8" NAME="resolve"></field>
      </message>
      <message NAME="MISSION_GOTO_WP" LINK="forwarded" ID="20">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field VALUES="APPEND|PREPEND|REPLACE_CURRENT|REPLACE_ALL" TYPE="uint8" NAME="insert"></field>
        <field UNIT="m" TYPE="float" NAME="wp_east"></field>
        <field UNIT="m" TYPE="float" NAME="wp_north"></field>
        <field UNIT="m" TYPE="float" NAME="wp_alt">altitude above geoid (MSL)</field>
        <field UNIT="s" TYPE="float" NAME="duration"></field>
        <field TYPE="uint8" NAME="index"></field>
      </message>
      <message NAME="MISSION_GOTO_WP_LLA" LINK="forwarded" ID="21">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field VALUES="APPEND|PREPEND|REPLACE_CURRENT|REPLACE_ALL" TYPE="uint8" NAME="insert"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="wp_lat" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="wp_lon" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="mm" TYPE="int32" NAME="wp_alt" ALT_UNIT="m">altitude above geoid (MSL)</field>
        <field UNIT="s" TYPE="float" NAME="duration"></field>
        <field TYPE="uint8" NAME="index"></field>
      </message>
      <message NAME="MISSION_CIRCLE" LINK="forwarded" ID="22">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field VALUES="APPEND|PREPEND|REPLACE_CURRENT|REPLACE_ALL" TYPE="uint8" NAME="insert"></field>
        <field UNIT="m" TYPE="float" NAME="center_east"></field>
        <field UNIT="m" TYPE="float" NAME="center_north"></field>
        <field UNIT="m" TYPE="float" NAME="center_alt">altitude above geoid (MSL)</field>
        <field UNIT="m" TYPE="float" NAME="radius"></field>
        <field UNIT="s" TYPE="float" NAME="duration"></field>
        <field TYPE="uint8" NAME="index"></field>
      </message>
      <message NAME="MISSION_CIRCLE_LLA" LINK="forwarded" ID="23">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field VALUES="APPEND|PREPEND|REPLACE_CURRENT|REPLACE_ALL" TYPE="uint8" NAME="insert"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="center_lat" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="center_lon" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="mm" TYPE="int32" NAME="center_alt" ALT_UNIT="m">altitude above geoid (MSL)</field>
        <field UNIT="m" TYPE="float" NAME="radius"></field>
        <field UNIT="s" TYPE="float" NAME="duration"></field>
        <field TYPE="uint8" NAME="index"></field>
      </message>
      <message NAME="MISSION_SEGMENT" LINK="forwarded" ID="24">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field VALUES="APPEND|PREPEND|REPLACE_CURRENT|REPLACE_ALL" TYPE="uint8" NAME="insert"></field>
        <field UNIT="m" TYPE="float" NAME="segment_east_1"></field>
        <field UNIT="m" TYPE="float" NAME="segment_north_1"></field>
        <field UNIT="m" TYPE="float" NAME="segment_east_2"></field>
        <field UNIT="m" TYPE="float" NAME="segment_north_2"></field>
        <field UNIT="m" TYPE="float" NAME="segment_alt">altitude above geoid (MSL)</field>
        <field UNIT="s" TYPE="float" NAME="duration"></field>
        <field TYPE="uint8" NAME="index"></field>
      </message>
      <message NAME="MISSION_SEGMENT_LLA" LINK="forwarded" ID="25">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field VALUES="APPEND|PREPEND|REPLACE_CURRENT|REPLACE_ALL" TYPE="uint8" NAME="insert"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="segment_lat_1" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="segment_lon_1" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="segment_lat_2" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="segment_lon_2" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="mm" TYPE="int32" NAME="segment_alt" ALT_UNIT="m">altitude above geoid (MSL)</field>
        <field UNIT="s" TYPE="float" NAME="duration"></field>
        <field TYPE="uint8" NAME="index"></field>
      </message>
      <message NAME="MISSION_PATH" LINK="forwarded" ID="26">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field VALUES="APPEND|PREPEND|REPLACE_CURRENT|REPLACE_ALL" TYPE="uint8" NAME="insert"></field>
        <field UNIT="m" TYPE="float" NAME="point_east_1"></field>
        <field UNIT="m" TYPE="float" NAME="point_north_1"></field>
        <field UNIT="m" TYPE="float" NAME="point_east_2"></field>
        <field UNIT="m" TYPE="float" NAME="point_north_2"></field>
        <field UNIT="m" TYPE="float" NAME="point_east_3"></field>
        <field UNIT="m" TYPE="float" NAME="point_north_3"></field>
        <field UNIT="m" TYPE="float" NAME="point_east_4"></field>
        <field UNIT="m" TYPE="float" NAME="point_north_4"></field>
        <field UNIT="m" TYPE="float" NAME="point_east_5"></field>
        <field UNIT="m" TYPE="float" NAME="point_north_5"></field>
        <field UNIT="m" TYPE="float" NAME="path_alt">altitude above geoid (MSL)</field>
        <field UNIT="s" TYPE="float" NAME="duration"></field>
        <field TYPE="uint8" NAME="nb"></field>
        <field TYPE="uint8" NAME="index"></field>
      </message>
      <message NAME="MISSION_PATH_LLA" LINK="forwarded" ID="27">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field VALUES="APPEND|PREPEND|REPLACE_CURRENT|REPLACE_ALL" TYPE="uint8" NAME="insert"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="point_lat_1" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="point_lon_1" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="point_lat_2" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="point_lon_2" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="point_lat_3" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="point_lon_3" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="point_lat_4" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="point_lon_4" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="point_lat_5" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="point_lon_5" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="mm" TYPE="int32" NAME="path_alt" ALT_UNIT="m">altitude above geoid (MSL)</field>
        <field UNIT="s" TYPE="float" NAME="duration"></field>
        <field TYPE="uint8" NAME="nb"></field>
        <field TYPE="uint8" NAME="index"></field>
      </message>
      <message NAME="MISSION_CUSTOM" LINK="forwarded" ID="28">
        <description>        Custom navigation pattern or action for mission controller.
        This will add the mission element correspond to the string identifier &apos;type&apos; if it has been registered.</description>
        <field TYPE="uint8" NAME="ac_id">Aircraft ID</field>
        <field VALUES="APPEND|PREPEND|REPLACE_CURRENT|REPLACE_ALL|REPLACE_NEXT" TYPE="uint8" NAME="insert">Insertion mode</field>
        <field TYPE="uint8" NAME="index">Mission element index, should be unique</field>
        <field TYPE="char[5]" NAME="type">String identifier of the custom pattern</field>
        <field UNIT="s" TYPE="float" NAME="duration">Duration of the element or -1 for unlimited</field>
        <field TYPE="float[]" NAME="params">List of parameters, 12 max</field>
      </message>
      <message NAME="GOTO_MISSION" LINK="forwarded" ID="30">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field TYPE="uint8" NAME="mission_id"></field>
      </message>
      <message NAME="NEXT_MISSION" LINK="forwarded" ID="31">
        <field TYPE="uint8" NAME="ac_id"></field>
      </message>
      <message NAME="END_MISSION" LINK="forwarded" ID="32">
        <field TYPE="uint8" NAME="ac_id"></field>
      </message>
      <message NAME="COPILOT_STATUS_DL" LINK="forwarded" ID="33">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field UNIT="%" TYPE="uint8" NAME="used_memory">Percentage of used memory (RAM) of the mission computer rounded up to whole percent</field>
        <field UNIT="s" TYPE="float" NAME="timestamp">Mission computer seconds since startup</field>
        <field UNIT="%" TYPE="uint8" NAME="used_disk">Percentage of used disk of the mission computer rounded up to whole percent</field>
        <field VALUES="UNKNOWN|INIT|LOGGING|FAULT" TYPE="uint8" NAME="status">Mission computer status</field>
        <field VALUES="NONE|IO_ERROR" TYPE="uint8" NAME="error_code">Error codes of the mission computer</field>
      </message>
      <message NAME="CAMERA_PAYLOAD_DL" LINK="forwarded" ID="34">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field VALUES="NONE|CAMERA_ERR|DOOR_ERR" TYPE="uint8" NAME="error_code">Error codes of the payload</field>
        <field UNIT="s" TYPE="float" NAME="timestamp">Payload computer seconds sice startup</field>
        <field UNIT="%" TYPE="uint8" NAME="used_memory">Percentage of used memory (RAM) of the payload computer rounded up to whole percent</field>
        <field UNIT="%" TYPE="uint8" NAME="used_disk">Percentage of used disk of the payload computer rounded up to whole percent</field>
        <field VALUES="UNKNOWN|CLOSE|OPEN" TYPE="uint8" NAME="door_status">Payload door open/close</field>
      </message>
      <message NAME="CAMERA_SNAPSHOT_DL" LINK="forwarded" ID="35">
        <field TYPE="uint16" NAME="camera_id">Unique camera ID - consists of make,model and camera index</field>
        <field TYPE="uint16" NAME="snapshot_image_number">Snapshot number in sequence</field>
        <field VALUES="UNKNOWN|OK|ERROR" TYPE="uint8" NAME="camera_state">State of the given camera</field>
        <field UNIT="bool" TYPE="uint8" NAME="snapshot_valid">Flag checking whether the last snapshot was valid</field>
        <field UNIT="deg_celsius" TYPE="float" NAME="array_temp" FORMAT="%.2f">Imager sensor temperature, NaN if not measured</field>
        <field UNIT="deg_celsius" TYPE="float" NAME="lens_temp" FORMAT="%.2f">Lens temperature, NaN if not measured</field>
        <field TYPE="uint8" NAME="ac_id"></field>
      </message>
      <message NAME="GUIDED_SETPOINT_NED" LINK="forwarded" ID="40">
        <description>        Set vehicle position or velocity in NED.
        Frame can be specified with the bits 0-3
        Velocity of position setpoint can be specified with the bits 5-7
        Flags field definition:
        - bit 0: x,y as offset coordinates
        - bit 1: x,y in body coordinates
        - bit 2: z as offset coordinates
        - bit 3: yaw as offset coordinates
        - bit 4: free
        - bit 5: x,y as vel
        - bit 6: z as vel
        - bit 7: yaw as rate</description>
        <field TYPE="uint8" NAME="ac_id"></field>
        <field TYPE="uint8" NAME="flags">bits 0-3: frame, bits 5-7: use as velocity</field>
        <field UNIT="m" TYPE="float" NAME="x">X position/velocity in NED</field>
        <field UNIT="m" TYPE="float" NAME="y">Y position/velocity in NED</field>
        <field UNIT="m" TYPE="float" NAME="z">Z position/velocity in NED (negative altitude)</field>
        <field UNIT="rad" TYPE="float" NAME="yaw" ALT_UNIT="deg">yaw/rate setpoint</field>
      </message>
      <message NAME="WINDTURBINE_STATUS" LINK="broadcasted" ID="50">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field TYPE="uint8" NAME="tb_id"></field>
        <field UNIT="ms" TYPE="uint32" NAME="sync_itow"></field>
        <field UNIT="ms" TYPE="uint32" NAME="cycle_time"></field>
      </message>
      <message NAME="RC_3CH" LINK="broadcasted" ID="51">
        <field UNIT="byte_mask" TYPE="uint8" NAME="throttle_mode"></field>
        <field TYPE="int8" NAME="roll"></field>
        <field TYPE="int8" NAME="pitch"></field>
      </message>
      <message NAME="RC_4CH" LINK="broadcasted" ID="52">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field TYPE="uint8" NAME="mode"></field>
        <field TYPE="uint8" NAME="throttle"></field>
        <field TYPE="int8" NAME="roll"></field>
        <field TYPE="int8" NAME="pitch"></field>
        <field TYPE="int8" NAME="yaw"></field>
      </message>
      <message NAME="RC_5CH" LINK="broadcasted" ID="53">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field TYPE="uint8" NAME="throttle"></field>
        <field TYPE="int8" NAME="roll"></field>
        <field TYPE="int8" NAME="pitch"></field>
        <field TYPE="int8" NAME="yaw"></field>
        <field TYPE="int8" NAME="mode"></field>
        <field TYPE="int8" NAME="kill"></field>
      </message>
      <message NAME="REMOTE_GPS_SMALL" LINK="forwarded" ID="54">
        <field UNIT="1e4rad" TYPE="int16" NAME="heading" ALT_UNIT_COEF="0.0057296" ALT_UNIT="deg"></field>
        <field TYPE="uint32" NAME="pos_xyz">bits 31-21 east position [cm] : bits 20-10 north position [cm] : bits 9-0 up position [cm]</field>
        <field TYPE="uint32" NAME="speed_xyz">bits 31-21 east speed [cm/s] : bits 20-10 north speed [cm/s] : bits 9-0 climb speed [cm/s]</field>
        <field UNIT="ms" TYPE="uint32" NAME="tow" ALT_UNIT_COEF="0.001" ALT_UNIT="s"></field>
        <field TYPE="uint8" NAME="ac_id"></field>
      </message>
      <message NAME="REMOTE_GPS" LINK="forwarded" ID="55">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field TYPE="uint8" NAME="numsv"></field>
        <field UNIT="cm" TYPE="int32" NAME="ecef_x" ALT_UNIT="m"></field>
        <field UNIT="cm" TYPE="int32" NAME="ecef_y" ALT_UNIT="m"></field>
        <field UNIT="cm" TYPE="int32" NAME="ecef_z" ALT_UNIT="m"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="lat" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="lon" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="mm" TYPE="int32" NAME="alt" ALT_UNIT="m">Height above WGS84 reference ellipsoid</field>
        <field UNIT="mm" TYPE="int32" NAME="hmsl" ALT_UNIT="m">Height above Mean Sea Level (geoid)</field>
        <field UNIT="cm/s" TYPE="int32" NAME="ecef_xd" ALT_UNIT="m/s"></field>
        <field UNIT="cm/s" TYPE="int32" NAME="ecef_yd" ALT_UNIT="m/s"></field>
        <field UNIT="cm/s" TYPE="int32" NAME="ecef_zd" ALT_UNIT="m/s"></field>
        <field TYPE="uint32" NAME="tow"></field>
        <field TYPE="int32" NAME="course" ALT_UNIT_COEF="0.0000057296" ALT_UNIT="deg"></field>
      </message>
      <message NAME="REMOTE_GPS_LOCAL" LINK="forwarded" ID="56">
        <description>        Position and speed in local frame from a remote GPS or motion capture system
        Global position transformations are handled onboard if needed</description>
        <field TYPE="uint8" NAME="ac_id"></field>
        <field TYPE="uint8" NAME="pad"></field>
        <field UNIT="m" TYPE="float" NAME="enu_x"></field>
        <field UNIT="m" TYPE="float" NAME="enu_y"></field>
        <field UNIT="m" TYPE="float" NAME="enu_z"></field>
        <field UNIT="m/s" TYPE="float" NAME="enu_xd"></field>
        <field UNIT="m/s" TYPE="float" NAME="enu_yd"></field>
        <field UNIT="m/s" TYPE="float" NAME="enu_zd"></field>
        <field TYPE="uint32" NAME="tow"></field>
        <field UNIT="deg" TYPE="float" NAME="course"></field>
      </message>
      <message NAME="TARGET_POS" LINK="forwarded" ID="57">
        <description>        Global position, speed and ID a target for functions like Follow Me</description>
        <field TYPE="uint8" NAME="ac_id"></field>
        <field TYPE="uint8" NAME="target_id"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="lat" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="lon" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="mm" TYPE="int32" NAME="alt" ALT_UNIT="m">Height above Mean Sea Level (geoid)</field>
        <field UNIT="m/s" TYPE="float" NAME="speed">Ground speed</field>
        <field UNIT="m/s" TYPE="float" NAME="climb">Climb speed</field>
        <field UNIT="deg" TYPE="float" NAME="course" FORMAT="%.1f"></field>
      </message>
      <message NAME="KITE_COMMAND" ID="96">
        <field TYPE="uint16" NAME="POWER"></field>
        <field TYPE="uint16" NAME="TURN"></field>
      </message>
      <message NAME="PAYLOAD_COMMAND" LINK="forwarded" ID="97">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field TYPE="uint8[]" NAME="command"></field>
      </message>
      <message NAME="SET_ACTUATOR" LINK="forwarded" ID="100">
        <field TYPE="uint16" NAME="value"></field>
        <field TYPE="uint8" NAME="no"></field>
        <field TYPE="uint8" NAME="ac_id"></field>
      </message>
      <message NAME="CSC_SERVO_CMD" ID="101">
        <field TYPE="uint16" NAME="servo_1"></field>
        <field TYPE="uint16" NAME="servo_2"></field>
        <field TYPE="uint16" NAME="servo_3"></field>
        <field TYPE="uint16" NAME="servo_4"></field>
      </message>
      <message NAME="BOOZ2_FMS_COMMAND" LINK="forwarded" ID="149">
        <field VALUES="KILL|RATE|ATTITUDE|HOVER|NAV" TYPE="uint8" NAME="h_mode"></field>
        <field VALUES="KILL|DIRECT|CLIMB_RC|CLIMB|ALT|NAV" TYPE="uint8" NAME="v_mode"></field>
        <field TYPE="int32" NAME="v_sp"></field>
        <field TYPE="int32" NAME="h_sp_1"></field>
        <field TYPE="int32" NAME="h_sp_2"></field>
        <field TYPE="int32" NAME="h_sp_3"></field>
        <field TYPE="uint8" NAME="ac_id"></field>
      </message>
      <message NAME="BOOZ_NAV_STICK" LINK="forwarded" ID="150">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field TYPE="int8" NAME="vx_sp"></field>
        <field TYPE="int8" NAME="vy_sp"></field>
        <field TYPE="int8" NAME="vz_sp"></field>
        <field TYPE="int8" NAME="r_sp"></field>
      </message>
      <message NAME="EXTERNAL_FILTER_SOLUTION" LINK="forwarded" ID="151">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field TYPE="uint8" NAME="status"></field>
        <field UNIT="m" TYPE="float" NAME="x"></field>
        <field UNIT="m" TYPE="float" NAME="xd"></field>
        <field UNIT="m" TYPE="float" NAME="y"></field>
        <field UNIT="m" TYPE="float" NAME="yd"></field>
      </message>
      <message NAME="ROTORCRAFT_CAM_STICK" LINK="forwarded" ID="152">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field TYPE="int8" NAME="tilt"></field>
        <field TYPE="int8" NAME="pan"></field>
      </message>
      <message NAME="GPS_INJECT" LINK="forwarded" ID="153">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field TYPE="uint8" NAME="packet_id"></field>
        <field TYPE="uint8[]" NAME="data"></field>
      </message>
      <message NAME="EXTERNAL_MAG_RAW" LINK="forwarded" ID="154">
        <field TYPE="int16" NAME="x"></field>
        <field TYPE="int16" NAME="y"></field>
        <field TYPE="int16" NAME="z"></field>
      </message>
      <message NAME="VIDEO_ROI" LINK="forwarded" ID="155">
        <field TYPE="uint8" NAME="ac_id">The aircraft in which video stream you clicked </field>
        <field TYPE="int32" NAME="startx">The x of the upper left corner of the selected area</field>
        <field TYPE="int32" NAME="starty">The y of the upper left corner of the selected area </field>
        <field TYPE="int32" NAME="width">The width of the selected area </field>
        <field TYPE="int32" NAME="height">The height of the selected area </field>
        <field TYPE="int32" NAME="downsized_width">The width of the image you received. Added because a module the receives this message does not know how big the image was that was broadcasted </field>
      </message>
      <message NAME="EMERGENCY_CMD" LINK="forwarded" ID="156">
        <description>Overcome setting ID and block ID problems in the case of multiboard autopilots like AP/FBW. With this message a KILL command can be sent to AP and FBW at the same time.</description>
        <field TYPE="uint8" NAME="ac_id"></field>
        <field VALUES="KILL|STANDBY|LAND" TYPE="uint8" NAME="cmd"></field>
      </message>
      <message NAME="RTCM_INJECT" LINK="broadcasted" ID="157">
        <field TYPE="uint8" NAME="packet_id"></field>
        <field TYPE="uint8[]" NAME="data"></field>
      </message>
      <message NAME="DCF_REG_TABLE" LINK="forwarded" ID="158">
        <description>Init the table of an aircraft for the Distributed Circular Formation algorithm. If the nei_id is equal to zero, then you wipe out (clean) the whole table of the aircraft.</description>
        <field TYPE="uint8" NAME="ac_id">ID of the table&apos;s aircraft to be updated</field>
        <field TYPE="uint8" NAME="nei_id">ID of the neighbor for the table</field>
        <field TYPE="int16" NAME="desired_sigma">Desired angle to have w.r.t. the neighbor</field>
      </message>
      <message NAME="KEY_EXCHANGE_GCS" LINK="forwarded" ID="159">
        <description>Message for key exchange during crypto initialization</description>
        <field TYPE="uint8" NAME="ac_id">ID of the table&apos;s aircraft to be updated</field>
        <field VALUES="P_AE|P_BE|SIG" TYPE="uint8" NAME="msg_type"></field>
        <field TYPE="uint8[]" NAME="msg_data"></field>
      </message>
    </msg_class>
    <msg_class NAME="ground" ID="3">
      <message NAME="NEW_AIRCRAFT" ID="1">
        <field TYPE="string" NAME="ac_id"></field>
      </message>
      <message NAME="AIRCRAFT_DIE" ID="2">
        <field TYPE="string" NAME="ac_id"></field>
      </message>
      <message NAME="AIRCRAFTS" ID="3">
        <field TYPE="string" NAME="ac_list" FORMAT="csv"></field>
      </message>
      <message NAME="AIRCRAFTS_REQ" ID="4"/>
      <message NAME="SELECTED" ID="5">
        <field TYPE="string" NAME="aircraft_id"></field>
      </message>
      <message NAME="SELECTED_REQ" ID="6"/>
      <message NAME="WIND_CLEAR" ID="7">
        <field TYPE="string" NAME="ac_id"></field>
      </message>
      <message NAME="WIND" ID="8">
        <field TYPE="string" NAME="ac_id"></field>
        <field UNIT="deg_wind" TYPE="float" NAME="dir"></field>
        <field UNIT="m/s" TYPE="float" NAME="wspeed"></field>
        <field UNIT="m/s" TYPE="float" NAME="mean_aspeed"></field>
        <field UNIT="m/s" TYPE="float" NAME="stddev"></field>
      </message>
      <message NAME="CONFIG_REQ" ID="9">
        <field TYPE="string" NAME="ac_id"></field>
      </message>
      <message NAME="CONFIG" ID="10">
        <field TYPE="string" NAME="ac_id"></field>
        <field UNIT="url" TYPE="string" NAME="flight_plan"></field>
        <field UNIT="url" TYPE="string" NAME="airframe"></field>
        <field UNIT="url" TYPE="string" NAME="radio"></field>
        <field UNIT="url" TYPE="string" NAME="settings"></field>
        <field TYPE="string" NAME="default_gui_color"></field>
        <field TYPE="string" NAME="ac_name"></field>
      </message>
      <message NAME="FLIGHT_PARAM" ID="11">
        <field TYPE="string" NAME="ac_id"></field>
        <field UNIT="deg" TYPE="float" NAME="roll"></field>
        <field UNIT="deg" TYPE="float" NAME="pitch"></field>
        <field UNIT="deg" TYPE="float" NAME="heading"></field>
        <field UNIT="deg" TYPE="float" NAME="lat"></field>
        <field UNIT="deg" TYPE="float" NAME="long"></field>
        <field UNIT="m/s" TYPE="float" NAME="speed"></field>
        <field UNIT="deg" TYPE="float" NAME="course" FORMAT="%.1f"></field>
        <field UNIT="m" TYPE="float" NAME="alt"></field>
        <field UNIT="m/s" TYPE="float" NAME="climb"></field>
        <field UNIT="m" TYPE="float" NAME="agl"></field>
        <field UNIT="s (Unix time)" TYPE="float" NAME="unix_time"></field>
        <field UNIT="ms" TYPE="uint32" NAME="itow"></field>
        <field UNIT="m/s" TYPE="float" NAME="airspeed"></field>
      </message>
      <message NAME="AP_STATUS" ID="12">
        <field TYPE="string" NAME="ac_id"></field>
        <field VALUES="MANUAL|AUTO1|AUTO2|HOME|FAILSAFE" TYPE="string" NAME="ap_mode"></field>
        <field VALUES="MANUAL|ROLL_RATE|ROLL|COURSE" TYPE="string" NAME="lat_mode"></field>
        <field VALUES="WAYPOINT|ROUTE|CIRCLE" TYPE="string" NAME="horiz_mode"></field>
        <field VALUES="MANUAL|THROTTLE|CLIMB|ALT" TYPE="string" NAME="gaz_mode"></field>
        <field VALUES="NOFIX|NA|2D|3D|DGPS|RTK" TYPE="string" NAME="gps_mode"></field>
        <field VALUES="OFF|ON" TYPE="string" NAME="kill_mode"></field>
        <field TYPE="uint32" NAME="flight_time"></field>
        <field VALUES="UNKNOWN|INIT|ALIGN|OK|GPS_LOST|IMU_LOST|COV_ERR|IR_CONTRAST|ERROR" TYPE="string" NAME="state_filter_mode"></field>
      </message>
      <message NAME="NAV_STATUS" ID="13">
        <field TYPE="string" NAME="ac_id"></field>
        <field TYPE="uint8" NAME="cur_block"></field>
        <field TYPE="uint8" NAME="cur_stage"></field>
        <field TYPE="uint32" NAME="block_time"></field>
        <field TYPE="uint32" NAME="stage_time"></field>
        <field UNIT="deg" TYPE="float" NAME="target_lat"></field>
        <field UNIT="deg" TYPE="float" NAME="target_long"></field>
        <field UNIT="m/s" TYPE="float" NAME="target_climb"></field>
        <field UNIT="m" TYPE="float" NAME="target_alt"></field>
        <field UNIT="deg" TYPE="float" NAME="target_course"></field>
        <field UNIT="m" TYPE="float" NAME="dist_to_wp"></field>
      </message>
      <message NAME="CAM_STATUS" ID="14">
        <field TYPE="string" NAME="ac_id"></field>
        <field TYPE="string" NAME="lats" FORMAT="csv"></field>
        <field TYPE="string" NAME="longs" FORMAT="csv"></field>
        <field UNIT="deg" TYPE="float" NAME="cam_target_lat"></field>
        <field UNIT="deg" TYPE="float" NAME="cam_target_long"></field>
      </message>
      <message NAME="ENGINE_STATUS" ID="15">
        <field TYPE="string" NAME="ac_id"></field>
        <field UNIT="%" TYPE="float" NAME="throttle" FORMAT="%.1f"></field>
        <field TYPE="float" NAME="throttle_accu" FORMAT="%.1f"></field>
        <field UNIT="rpm" TYPE="float" NAME="rpm" FORMAT="%.1f"></field>
        <field UNIT="C" TYPE="float" NAME="temp"></field>
        <field UNIT="V" TYPE="float" NAME="bat" FORMAT="%.2f"></field>
        <field UNIT="A" TYPE="float" NAME="amp" FORMAT="%.1f"></field>
        <field UNIT="Ah" TYPE="float" NAME="charge" FORMAT="%.2f"></field>
      </message>
      <message NAME="SVSINFO" ID="16">
        <field TYPE="string" NAME="ac_id"></field>
        <field UNIT="cm" TYPE="uint16" NAME="pacc"></field>
        <field TYPE="string" NAME="svid" FORMAT="csv"></field>
        <field TYPE="string" NAME="flags" FORMAT="csv"></field>
        <field VALUES="IDLE|SEARCH|SEARCH|UNUSABLE|CODELOCK|CARRIERLOCK|CARRIERLOCK|RECEIVING" TYPE="string" NAME="qi" FORMAT="csv"></field>
        <field UNIT="dbHz" TYPE="string" NAME="cno" FORMAT="csv"></field>
        <field UNIT="deg" TYPE="string" NAME="elev" FORMAT="csv"></field>
        <field UNIT="deg" TYPE="string" NAME="azim" FORMAT="csv"></field>
        <field UNIT="s" TYPE="string" NAME="msg_age" FORMAT="csv"></field>
      </message>
      <message NAME="FLY_BY_WIRE" ID="17">
        <field TYPE="string" NAME="ac_id"></field>
        <field VALUES="OK|LOST|REALLY_LOST" TYPE="string" NAME="rc_status"></field>
        <field VALUES="MANUAL|AUTO|FAILSAFE" TYPE="string" NAME="rc_mode"></field>
        <field UNIT="Hz" TYPE="uint8" NAME="rc_rate"></field>
      </message>
      <message NAME="INFLIGH_CALIB" ID="19">
        <field TYPE="string" NAME="ac_id"></field>
        <field VALUES="OFF|DOWN|UP" TYPE="string" NAME="if_mode"></field>
        <field TYPE="float" NAME="if_value1"></field>
        <field TYPE="float" NAME="if_value2"></field>
      </message>
      <message NAME="WORLD_ENV" ID="20">
        <field UNIT="m/s" TYPE="float" NAME="wind_east" FORMAT="%.1f"></field>
        <field UNIT="m/s" TYPE="float" NAME="wind_north" FORMAT="%.1f"></field>
        <field UNIT="m/s" TYPE="float" NAME="wind_up" FORMAT="%.1f"></field>
        <field TYPE="float" NAME="ir_contrast"></field>
        <field TYPE="float" NAME="time_scale"></field>
        <field VALUES="OFF|ON" TYPE="uint8" NAME="gps_availability"></field>
      </message>
      <message NAME="WORLD_ENV_REQ" ID="21">
        <field UNIT="deg" TYPE="float" NAME="lat"></field>
        <field UNIT="deg" TYPE="float" NAME="long"></field>
        <field UNIT="m" TYPE="float" NAME="alt"></field>
        <field UNIT="m" TYPE="float" NAME="east"></field>
        <field UNIT="m" TYPE="float" NAME="north"></field>
        <field UNIT="m" TYPE="float" NAME="up"></field>
      </message>
      <message NAME="CIRCLE_STATUS" ID="22">
        <field TYPE="string" NAME="ac_id"></field>
        <field UNIT="deg" TYPE="float" NAME="circle_lat"></field>
        <field UNIT="deg" TYPE="float" NAME="circle_long"></field>
        <field UNIT="m" TYPE="int16" NAME="radius"></field>
      </message>
      <message NAME="SEGMENT_STATUS" ID="23">
        <field TYPE="string" NAME="ac_id"></field>
        <field UNIT="deg" TYPE="float" NAME="segment1_lat"></field>
        <field UNIT="deg" TYPE="float" NAME="segment1_long"></field>
        <field UNIT="deg" TYPE="float" NAME="segment2_lat"></field>
        <field UNIT="deg" TYPE="float" NAME="segment2_long"></field>
      </message>
      <message NAME="MOVE_WAYPOINT" ID="24">
        <field TYPE="string" NAME="ac_id"></field>
        <field TYPE="uint8" NAME="wp_id"></field>
        <field UNIT="deg" TYPE="float" NAME="lat" FORMAT="%.7f"></field>
        <field UNIT="deg" TYPE="float" NAME="long" FORMAT="%.7f"></field>
        <field UNIT="m" TYPE="float" NAME="alt"></field>
      </message>
      <message NAME="GET_DL_SETTING" ID="25">
        <field TYPE="string" NAME="ac_id"></field>
        <field TYPE="uint8" NAME="index"></field>
      </message>
      <message NAME="DL_SETTING" ID="26">
        <field TYPE="string" NAME="ac_id"></field>
        <field TYPE="uint8" NAME="index"></field>
        <field TYPE="float" NAME="value"></field>
      </message>
      <message NAME="JUMP_TO_BLOCK" ID="27">
        <field TYPE="string" NAME="ac_id"></field>
        <field TYPE="uint8" NAME="block_id"></field>
      </message>
      <message NAME="DL_VALUES" ID="28">
        <field TYPE="string" NAME="ac_id"></field>
        <field TYPE="string" NAME="values" FORMAT="csv"></field>
      </message>
      <message NAME="RAW_DATALINK" ID="29">
        <field TYPE="string" NAME="ac_id"></field>
        <field TYPE="string" NAME="message" FORMAT=";sv"></field>
      </message>
      <message NAME="WAYPOINT_MOVED" ID="30">
        <field TYPE="string" NAME="ac_id"></field>
        <field TYPE="uint8" NAME="wp_id"></field>
        <field UNIT="deg" TYPE="float" NAME="lat" FORMAT="%.7f"></field>
        <field UNIT="deg" TYPE="float" NAME="long" FORMAT="%.7f"></field>
        <field UNIT="m" TYPE="float" NAME="alt"></field>
        <field UNIT="m" TYPE="float" NAME="ground_alt"></field>
      </message>
      <message NAME="SURVEY_STATUS" ID="31">
        <field TYPE="string" NAME="ac_id"></field>
        <field UNIT="deg" TYPE="float" NAME="east_long"></field>
        <field UNIT="deg" TYPE="float" NAME="north_lat"></field>
        <field UNIT="deg" TYPE="float" NAME="west_long"></field>
        <field UNIT="deg" TYPE="float" NAME="south_lat"></field>
      </message>
      <message NAME="TELEMETRY_STATUS" ID="32">
        <description>        Datalink status reported by Server for the GCS
        Combines DATLINK_REPORT (telemetry class) and LINK_REPORT (ground class)</description>
        <field TYPE="string" NAME="ac_id"></field>
        <field TYPE="string" NAME="link_id"></field>
        <field UNIT="s" TYPE="float" NAME="time_since_last_msg"></field>
        <field TYPE="uint32" NAME="rx_bytes"></field>
        <field TYPE="uint32" NAME="rx_msgs"></field>
        <field UNIT="bytes/s" TYPE="float" NAME="rx_bytes_rate" FORMAT="%.1f"></field>
        <field TYPE="uint32" NAME="tx_msgs"></field>
        <field UNIT="s" TYPE="uint32" NAME="uplink_lost_time"></field>
        <field TYPE="uint16" NAME="uplink_msgs"></field>
        <field TYPE="uint16" NAME="downlink_msgs"></field>
        <field UNIT="bytes/s" TYPE="uint16" NAME="downlink_rate"></field>
        <field UNIT="ms" TYPE="float" NAME="ping_time" FORMAT="%.2f"></field>
      </message>
      <message NAME="TELEMETRY_ERROR" ID="33">
        <description>Report a telemetry error</description>
        <field TYPE="string" NAME="ac_id"></field>
        <field TYPE="string" NAME="message"></field>
      </message>
      <message NAME="TELEMETRY_MESSAGE" ID="34">
        <description>Encapsulated a telemetry class message (when using redundant link)</description>
        <field TYPE="string" NAME="ac_id"></field>
        <field TYPE="string" NAME="link_id"></field>
        <field TYPE="string" NAME="message" FORMAT=";sv"></field>
      </message>
      <message NAME="DATALINK_MESSAGE" ID="35">
        <description>Encapsulated a datalink class message (when using redundant link)</description>
        <field TYPE="string" NAME="ac_id"></field>
        <field TYPE="string" NAME="link_id"></field>
        <field TYPE="string" NAME="message" FORMAT=";sv"></field>
      </message>
      <message NAME="LINK_REPORT" ID="36">
        <description>Datalink status reported by Link for the Server</description>
        <field TYPE="string" NAME="ac_id"></field>
        <field TYPE="string" NAME="link_id"></field>
        <field UNIT="s" TYPE="uint32" NAME="run_time"></field>
        <field UNIT="s" TYPE="uint32" NAME="rx_lost_time"></field>
        <field TYPE="uint32" NAME="rx_bytes"></field>
        <field TYPE="uint32" NAME="rx_msgs"></field>
        <field TYPE="uint32" NAME="rx_err"></field>
        <field UNIT="bytes/s" TYPE="float" NAME="rx_bytes_rate" FORMAT="%.1f"></field>
        <field UNIT="msgs/s" TYPE="float" NAME="rx_msgs_rate" FORMAT="%.1f"></field>
        <field TYPE="uint32" NAME="tx_msgs"></field>
        <field UNIT="ms" TYPE="float" NAME="ping_time" FORMAT="%.2f"></field>
      </message>
      <message NAME="INTRUDER" ID="37">
        <field TYPE="string" NAME="id"></field>
        <field TYPE="string" NAME="name"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="lat" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="lon" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="mm" TYPE="int32" NAME="alt" ALT_UNIT="m">altitude above WGS84 reference ellipsoid</field>
        <field UNIT="deg" TYPE="float" NAME="course"></field>
        <field UNIT="m/s" TYPE="float" NAME="speed"></field>
        <field UNIT="m/s" TYPE="float" NAME="climb"></field>
        <field UNIT="ms" TYPE="uint32" NAME="itow"></field>
      </message>
      <message NAME="SHAPE" ID="38">
        <description>      The SHAPE message used to draw shapes onto the Paparazzi GCS.
      Field name shape is used to define the type of shape i.e. Circle, Polygon, Line, or Text.
      This is indexed from 0-3 respectively.
      Each shape drawn must have an id number associated with it.
      This id number in conjuction with the shapetype will be needed to update or delete the shape.
      A circle can be defined with the same id as a polygon but since they have different shape types they are considered unique.
      linecolor and fillcolor take in a color string ie: &quot;red&quot;, &quot;blue&quot;
      opacity will change the level of transparency of the fill.
      0 - Transparent
      1 - Light Fill
      2 - Medium Fill
      3 - Opaque
      Passing a status of 0 will create or update the shape specified by id and type.
      Passing a status of 1 will delete the shape specified by id and type.
      latarr is an array of coordinates that contain the latitude coordinate for each point in the shape.
      The array is comma separated.
      lonarr is similar to latarr but contain the longitude coordinate for each point in the shape.
      Circle and Text type will take the first coordinates given to place the shape.
      Polygon will take all the coordinates given.
      Line will take the first two coordinates given.
      Radius is only used for the circle.
      Text will always be populated with each message using the first set of coordinates.
      The text field can not be blank or have spaces.
      If text is not desired for a shape then pass &quot;NULL&quot; into the text field.</description>
        <field TYPE="uint8" NAME="id"></field>
        <field TYPE="string" NAME="linecolor"></field>
        <field TYPE="string" NAME="fillcolor"></field>
        <field VALUES="Transparent|Light|Medium|Opaque" TYPE="uint8" NAME="opacity"></field>
        <field VALUES="Circle|Polygon|Line" TYPE="uint8" NAME="shape"></field>
        <field VALUES="create|delete" TYPE="uint8" NAME="status"></field>
        <field UNIT="1e7deg" TYPE="int32[]" NAME="latarr" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32[]" NAME="lonarr" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="m" TYPE="float" NAME="radius"></field>
        <field TYPE="string" NAME="text"></field>
      </message>
      <message NAME="DL_EMERGENCY_CMD" ID="39">
        <field TYPE="string" NAME="ac_id"></field>
        <field VALUES="KILL|STANDBY|LAND" TYPE="uint8" NAME="cmd"></field>
      </message>
      <message NAME="GROUND_REF" ID="40">
        <description>        Ground reference provided by an external positioning system for instance</description>
        <field TYPE="string" NAME="ac_id">Aircraft ID</field>
        <field VALUES="LLA|ECEF|UTM|LTP_NED|LTP_ENU" TYPE="string" NAME="frame">position reference frame</field>
        <field UNIT="SI (m or deg)" TYPE="float[3]" NAME="pos">position in selected frame</field>
        <field UNIT="m/s" TYPE="float[3]" NAME="speed">speed in selected frame (LTP_NED in case of LLA frame)</field>
        <field TYPE="float[4]" NAME="quat">Unitary quaternion representing LTP to BODY orientation (qi, qx, qy, qz)</field>
        <field UNIT="rad/s" TYPE="float[3]" NAME="rate" ALT_UNIT="deg/s">Rotation speeds in body frame</field>
        <field UNIT="s" TYPE="float" NAME="timestamp">Timestamp</field>
      </message>
      <message NAME="JOYSTICK" ID="41">
        <description>        Generic 4 axis and 4 buttons joystick or joypad.
        This message can be provided by the &apos;input2ivy&apos; tool for other ground agents.
        Standard joystick axis values are on 16 bits signed integers, but tools like &apos;input2ivy&apos; may
        scale them on int8 type.</description>
        <field TYPE="uint8" NAME="id">Joystick ID</field>
        <field TYPE="int16" NAME="axis1">axis 1 position</field>
        <field TYPE="int16" NAME="axis2">axis 2 position</field>
        <field TYPE="int16" NAME="axis3">axis 3 position</field>
        <field TYPE="int16" NAME="axis4">axis 4 position</field>
        <field UNIT="bool" TYPE="uint8" NAME="button1">button 1 status</field>
        <field UNIT="bool" TYPE="uint8" NAME="button2">button 2 status</field>
        <field UNIT="bool" TYPE="uint8" NAME="button3">button 3 status</field>
        <field UNIT="bool" TYPE="uint8" NAME="button4">button 4 status</field>
      </message>
      <message NAME="PLUMES" ID="100">
        <field TYPE="string" NAME="ids" FORMAT="csv"></field>
        <field TYPE="string" NAME="lats" FORMAT="csv"></field>
        <field TYPE="string" NAME="longs" FORMAT="csv"></field>
        <field TYPE="string" NAME="values" FORMAT="csv"></field>
      </message>
    </msg_class>
    <msg_class NAME="alert" ID="4">
      <message NAME="BAT_LOW" ID="1">
        <field TYPE="string" NAME="ac_id"></field>
        <field VALUES="CATASTROPHIC|CRITIC|WARNING" TYPE="string" NAME="level"></field>
        <field TYPE="float" NAME="value"></field>
      </message>
      <message NAME="AIR_PROX" ID="2">
        <field TYPE="string" NAME="ac_id"></field>
        <field VALUES="CATASTROPHIC|CRITIC|WARNING" TYPE="string" NAME="level"></field>
      </message>
    </msg_class>
    <msg_class NAME="intermcu" ID="5">
      <message NAME="IMCU_COMMANDS" ID="1">
        <field TYPE="uint8" NAME="status"></field>
        <field TYPE="int16[]" NAME="values"></field>
      </message>
      <message NAME="IMCU_RADIO_COMMANDS" ID="2">
        <field TYPE="uint8" NAME="status"></field>
        <field TYPE="int16[]" NAME="values"></field>
      </message>
      <message NAME="IMCU_SPEKTRUM_SOFT_BIND" ID="3"/>
      <message NAME="IMCU_FBW_STATUS" ID="4">
        <field VALUES="MANUAL|AUTO|FAILSAFE" TYPE="uint8" NAME="mode"></field>
        <field VALUES="OK|LOST|REALLY_LOST" TYPE="uint8" NAME="rc_status"></field>
        <field UNIT="Hz" TYPE="uint8" NAME="frame_rate"></field>
        <field UNIT="V" TYPE="float" NAME="vsupply"></field>
        <field UNIT="A" TYPE="float" NAME="current"></field>
      </message>
      <message NAME="IMCU_REMOTE_MAG" ID="10">
        <field TYPE="int16" NAME="mag_x">RAW Magnetometer Data</field>
        <field TYPE="int16" NAME="mag_y"></field>
        <field TYPE="int16" NAME="mag_z"></field>
      </message>
      <message NAME="IMCU_REMOTE_BARO" ID="11">
        <field UNIT="Pa" TYPE="float" NAME="pitot_stat">Static Barometric Pressure in Pascal</field>
        <field UNIT="C" TYPE="float" NAME="pitot_temp">Pressure Sensor Temperature</field>
      </message>
      <message NAME="IMCU_REMOTE_AIRSPEED" ID="12">
        <field UNIT="m/s" TYPE="float" NAME="pitot_IAS">Indicated Airspeed</field>
      </message>
      <message NAME="IMCU_REMOTE_GROUND" ID="15">
        <field VALUES="SWITCH|SONAR|LASER|INFRARED" TYPE="uint8" NAME="mode"></field>
        <field TYPE="uint8" NAME="id">Sensor ID</field>
        <field UNIT="cm" TYPE="uint16" NAME="range"></field>
      </message>
      <message NAME="IMCU_REMOTE_GPS" ID="62">
        <field UNIT="cm" TYPE="int32" NAME="ecef_x" ALT_UNIT="m"></field>
        <field UNIT="cm" TYPE="int32" NAME="ecef_y" ALT_UNIT="m"></field>
        <field UNIT="cm" TYPE="int32" NAME="ecef_z" ALT_UNIT="m"></field>
        <field UNIT="mm" TYPE="int32" NAME="alt" ALT_UNIT="m">altitude above WGS84 reference ellipsoid</field>
        <field UNIT="mm" TYPE="int32" NAME="hmsl" ALT_UNIT="m">height above mean sea level (geoid)</field>
        <field UNIT="cm/s" TYPE="int32" NAME="ecef_xd" ALT_UNIT="m/s"></field>
        <field UNIT="cm/s" TYPE="int32" NAME="ecef_yd" ALT_UNIT="m/s"></field>
        <field UNIT="cm/s" TYPE="int32" NAME="ecef_zd" ALT_UNIT="m/s"></field>
        <field TYPE="int32" NAME="course" ALT_UNIT_COEF="0.0000001" ALT_UNIT="rad"></field>
        <field UNIT="cm/s" TYPE="uint16" NAME="gspeed" ALT_UNIT="m/s"></field>
        <field UNIT="cm" TYPE="uint32" NAME="pacc" ALT_UNIT="m"></field>
        <field UNIT="cm/s" TYPE="uint32" NAME="sacc" ALT_UNIT="m/s"></field>
        <field TYPE="uint8" NAME="numsv"></field>
        <field VALUES="NONE|NA|2D|3D|DGPS|RTK" TYPE="uint8" NAME="fix"></field>
      </message>
      <message NAME="STEREOCAM_ARRAY" ID="80">
        <description>Raw data fromt the stereocamera. Type defines what kind of data it is. This can be raw image, disparity map, obstacle histogram, ect.</description>
        <field VALUES="DIST_MATRIX|HISTOGRAM|DISPARITY_MAP|RAW" TYPE="uint8" NAME="type"></field>
        <field TYPE="uint8" NAME="width">array size parameters</field>
        <field TYPE="uint8" NAME="height"></field>
        <field TYPE="uint8" NAME="package_nb">If the data being sent is too large for one message (e.g when sending a full image) this will indicate which package of the total data is contained in this message</field>
        <field TYPE="uint8[]" NAME="image_data"></field>
      </message>
      <message NAME="STEREOCAM_VELOCITY" ID="81">
        <description>Velocity measured using optical flow and stereovision. All parameters are in the camera frame</description>
        <field TYPE="uint8" NAME="resolution">Resolution of the vel and pos messages</field>
        <field TYPE="uint8" NAME="dt_frame">Time difference to previous frame</field>
        <field TYPE="uint8" NAME="dt">Time difference to previous message, not strictly required</field>
        <field UNIT="m/s" TYPE="int16" NAME="velx">Velocity estimaed using stereo edgeflow</field>
        <field UNIT="m/s" TYPE="int16" NAME="vely"></field>
        <field UNIT="m/s" TYPE="int16" NAME="velz"></field>
        <field UNIT="m" TYPE="int16" NAME="dposx">Distance traveled since the last message</field>
        <field UNIT="m" TYPE="int16" NAME="dposy"></field>
        <field UNIT="m" TYPE="int16" NAME="dposz"></field>
        <field TYPE="uint8" NAME="vRMS">RMS of the velocity estimate</field>
        <field TYPE="uint8" NAME="posRMS">RMS of the position</field>
        <field TYPE="uint16" NAME="avg_dist">Average distance to scene</field>
      </message>
      <message NAME="STEREOCAM_STATE" ID="82">
        <description>Estimated state of the camera. As the stereocamera has no inertial sensors, this data should be sent to the stereocamera to enable onboard derotation of the optical flow</description>
        <field UNIT="rad" TYPE="float" NAME="phi">Pitch, roll and yaw angles of the camera</field>
        <field UNIT="rad" TYPE="float" NAME="theta"></field>
        <field UNIT="rad" TYPE="float" NAME="psi"></field>
        <field UNIT="m" TYPE="float" NAME="agl">Altitude above the ground. If not looking down, set to 0</field>
      </message>
      <message NAME="STEREOCAM_FOLLOW_ME" ID="83">
        <field TYPE="uint8" NAME="headingToFollow"></field>
        <field TYPE="uint8" NAME="heightObject"></field>
        <field TYPE="uint8" NAME="distanceToObject"></field>
      </message>
      <message NAME="IMCU_DATALINK" ID="113">
        <description>Forward FBW datalink to AP</description>
        <field TYPE="uint8[]" NAME="msg"></field>
      </message>
      <message NAME="IMCU_TELEMETRY" ID="114">
        <description>Forward AP telemetry to FBW</description>
        <field TYPE="uint8[]" NAME="msg"></field>
      </message>
      <message NAME="IMCU_DEBUG" ID="115">
        <field TYPE="uint8[]" NAME="msg"></field>
      </message>
      <message NAME="IMCU_PAYLOAD" ID="116">
        <field TYPE="uint8[]" NAME="data"></field>
      </message>
    </msg_class>
  </protocol>
</configuration>